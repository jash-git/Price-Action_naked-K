/*! For license information please see main.js.LICENSE.txt */
(()=>{var e,t={62699:(e,t,a)=>{var o=a(31175),n=a(62163);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}a(58133).last;var r=window.gee||o.fn.gene;window.gee=r,window.app=new function(){"use strict";var e=this,t={pageCounter:1,pageLimit:20,fontSize:1.25,redo:null,module:{},config:{detectWidth:{max:991,min:768}},tmplStores:{},htmlStores:{},tmplPath:"/dist/js/tmpls",version:"21w32001",errMsg:{e9100:"資料庫發生錯誤",e9101:"資料庫發生錯誤",e9102:"資料庫發生錯誤",e9103:"資料庫發生錯誤(鍵值重複)",e8100:"請輸入必填欄位"},init:function(e){t.version=document.cuVersion,t.win=o(window),t.docu=o(document),t.body=t.win.opera&&"CSS1Compat"===t.docu.compatMode?o("html"):o("body"),r.apiUri=window.apiUrl+"",r.mainUri=window.mainUrl,t.detectDevice(),t.detectBrowser(),void 0!==t.anime&&!1===t.anime.isLoaded&&t.anime.loadAnimeMap(),t.icon&&!1===t.icon.iconLoaded&&t.icon.loadIconMap(),r.init(),e&&e.length>0&&e.map((function(e){r.isset(t[e])&&r.isset(t[e].init)&&t[e].init()}))},setRedirectCookie:function(){var e=t.parseStrToObject(window.location.search.replace("?","")).key;o.cookie("redirect",window.location.origin+window.location.pathname+"?".concat(e?"key="+e:""),{expires:1,path:"/"})},setRedirectCookiePackageModal:function(){var e=t.parseStrToObject(window.location.search.replace("?","")).mpid,a=t.parseStrToObject(window.location.search.replace("?","")).msid;o.cookie("redirect",window.location.origin+window.location.pathname+"?".concat(e?"modal=intro-packageInfo-modal&mpid="+e+"&msid="+a:""),{expires:1,path:"/"}),t.log("5075",window.location.origin+window.location.pathname+"?".concat(e?"modal=intro-packageInfo-modal&mpid="+e+"&msid="+a:"")),t.log("5075",e),t.log("5075",a)},detectDevice:function(){var e=window.innerWidth;e>t.config.detectWidth.max?t.screen="desktop":e<=t.config.detectWidth.min?t.screen="mobile":t.screen="tablet",t.body.removeClass("desktop tablet mobile").addClass(t.screen)},getCurrentDevice:function(e){return e>1040?"pc":e<1040&&e>768?"pad":e<768&&e>570?"smaller-pad":e<570?"mobile":void 0},onResize:function(){var e;o(window).width()!==t.windowSize.width&&(t.windowSize.width=o(window).width(),e=t.getCurrentDevice(o(window).width())),e!==t.windowSize.currentArea&&(t.windowSize.currentArea=e,location.reload()),t.arena.chatbotcss()},detectBrowser:function(){var e=navigator.userAgent,a=/MSIE/.test(e)||/Trident/.test(e)||/Edge/.test(e),o=/Chrome/.test(e)||/CriOS/.test(e),n=/Firefox/.test(e)||/FxiOS/.test(e),i=/Safari/.test(e);a?t.browser="ie":o?t.browser="chrome":n?t.browser="firefox":i&&(t.browser="safari"),t.body.removeClass("ie chrome firefox safari").addClass(t.browser)},isValid:function(e){return"number"==typeof e?!isNaN(e):"boolean"==typeof e||(Array.isArray(e)?e.length>0:"object"===i(e)&&e?Object.keys(e).length>0:Boolean(e))},ifJQNodeExists:function(e){return o(e).length>0},setRecentSearchToCookie:function(e){o.cookie("recentSearch",e,{expires:30,path:"/"})},getRecentSearchFromCookie:function(){return o.cookie("recentSearch")},removeRecentSearchFromCookie:function(){o.removeCookie("recentSearch")},ifLastUserExists:function(){return!!o.cookie("lastUser")},setLastUserToCookie:function(e){o.cookie("lastUser",JSON.stringify(e),{expires:30,path:"/"})},getLastUserFromCookie:function(){return o.cookie("lastUser")?JSON.parse(decodeURI(o.cookie("lastUser"))):null},updateLastUser:function(e,a){var o=t.getLastUserFromCookie()||{};return o[e]=a,o},removeLastUserFromCookie:function(){o.removeCookie("lastUser",{path:"/"})},resetCurrent:function(e){var a=e.data("tmpl");t.pageBox=e,void 0===t.tmplStores[a]&&(t.tmplStores[a]=o.templates(e.html())),t.pageCounter=1,t.pageBox.html(""),t.destroyPaginate()},setPaginate:function(e,a){o("#paginate").twbsPagination({totalPages:Math.ceil(e/t.pageLimit),visiblePages:7,onPageClick:function(e,o){t.pageCounter=o,a.call(this)}})},destroyPaginate:function(e,t){o("#paginate").empty().removeData("twbs-pagination").off("page")},loadHtml:function(e,a,n,i){var s="/"+e;a="string"==typeof a?o("#"+a):a,n=n||"",i=i||"",void 0===t.htmlStores["tmp-"+e]?(t.log("app","load: "+t.tmplPath+s+".html"),a.load(t.tmplPath+s+".html?v="+t.version,(function(a,o,l){"error"===o?r.alert({title:"Alert!",txt:"Sorry but there was an error: "+l.status+" "+l.statusText+"("+e+")"}):(t.htmlStores["tmp-"+e]=a,""!==n&&t.redirect({path:s+"/"+i,ta:n}),r.init())}))):(a.html(t.htmlStores["tmp-"+e]),""!==n&&t.redirect({path:s+"/"+i,ta:n}),t.waitFor((function(){return!a.is(":empty")})).then((function(){r.init()})))},loadTmpl:function(e,a){if(void 0===t.tmplStores[e]){var n=a.html()||"";n=n.replace(/&lt;\%/g,"<%").replace(/\%&gt;/g,"%>").replace(/\&lt;/g,"<").replace(/\&gt;/g,">").replace(/\&amp;/g,"&"),(a.is("tbody")||a.hasClass("loop"))&&(n="<%props data%>"+n+"<%/props%>"),a.is("form")&&t.backend&&(t.backend.initForm(a),n=(n=a.html()).replace(/&lt;\%/g,"<%").replace(/\%&gt;/g,"%>")),n=n.replace(/pre-gee/g,"gee").replace(/pre-icon/g,"icon").replace(/pre-src/g,"src").replace(/\<\!-- \<\%props (\w(\.?).+)\%\> --\>/g,"<%props $1 %>").replace(/\<\!-- \<%\/props%> --\>/g,"<%/props%>"),t.tmplStores[e]=o.templates(n)}a.html("")},waitTmpl:function(e){return new Promise((function(a,o){i(t.tmplStores[e])?a():t.waitFor((function(){return void 0!==t.tmplStores[e]}),29).then((function(){a()}))}))},setForm:function(e,t){e.find(":input:not(:button)").each((function(){var e=o(this),a=e.attr("name");if(t.hasOwnProperty(a)){var n=t[a];e.is(":checkbox")?e.attr("value")===n&&e.prop("checked",!0):e.val(n)}}))},redirect:function(e){t.route||window.history.pushState(e,"",e.path)},renderBox:function(e,a,o,n){if(n=n||1,e&&a){var i=e.data("tmpl");1===o&&e.html(""),1===n?(e.append(t.tmplStores[i].render(a)),1===t.pageCounter&&t.toTop()):2===n?e.append(t.tmplStores[i].render(a)):(t.toTop(),e.prepend(t.tmplStores[i].render(a)))}},toTop:function(){t.log("app","nowTop::"+t.body.offset().top),t.body.animate({scrollTop:t.body.offset().top},700)},defaultPic:function(e){e.src="/images/member.jpg"},waitFor:function(e,t){var a=o.Deferred(),n=0;if(t=t||9,Number(e)===e)setTimeout((function(){a.resolve()}),1e3*e);else var i=setInterval((function(){n++,e()&&(clearInterval(i),a.resolve()),n>t&&(clearInterval(i),a.reject())}),70);return a.promise()},padZero:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e<Math.pow(10,t-1)?"".concat("0".repeat(t-1)).concat(e):e},stdErr:function(e,a){e.data=e.data||{};var n=0,i=0;switch(t.redo=a||null,e.code){case 6104:r.exe("attemptToLogin",null);break;case 6103:t.modal.showValidationModal("validation");break;case 6202:n=1,i=1;break;case 6203:n=1,t.isInPage("backend")||(i=1);break;case 6204:t.modal.show({src:"player-message-modal",ta:"messageModal",size:"sm",canClose:!0,cover:"opacity",header:"blue",title:"錯誤訊息",message:{content:"無觀看權限",status:"error"}}),i=1;break;case 6205:t.modal.show({src:"player-message-modal",ta:"messageModal",size:"sm",canClose:!0,cover:"opacity",header:"blue",title:"錯誤訊息",message:{content:"此章節尚未開放",status:"error"}}),window.setTimeout((function(){t.modal.hide()}),3e3);break;case 7112:t.modal.show({src:"player-message-modal",ta:"messageModal",size:"sm",canClose:!0,cover:"opacity",header:"blue",title:"錯誤訊息",message:{content:"此單元尚未上傳影片",status:"error"}});break;default:n=1}if(1===n)if(r.isset(e.data.msg))r.alert({title:"Alert!",txt:e.data.msg});else{var s="e"+e.code;r.isset(t.errMsg[s])?!o("[data-tmpl*=priceStrategyForm]")||"e9100"!=s&&"e9101"!=s?(r.alert({title:"Alert!",txt:t.errMsg[s]}),t.reloadPage(e.data)):r.alert({title:"Alert!",txt:e.data.err}):5200===e.code?r.alert({title:"Error!",txt:"已有重複的優惠券代碼喲！"}):r.alert({title:"Error!",txt:"Server Error, Please Try Later("+e.code+")"})}else t.body.find(".js-save-msg").addClass("is-error"),t.waitFor(2).then((function(){t.body.find(".js-save-msg").removeClass("is-error is-success")}));1===i&&t.waitFor(1).then((function(){location.href=r.mainUri}))},stdSuccess:function(e){e.data=e.data||{},r.isset(e.data.msg)&&r.alert({title:"Alert!",txt:e.data.msg}),r.isset(e.data.redirect)&&(location.href=""===e.data.redirect?r.apiUri:e.data.redirect),t.reloadPage(e.data),t.body.find(".js-save-msg").addClass("is-success"),t.waitFor(2).then((function(){t.body.find(".js-save-msg").removeClass("is-error is-success")})),r.isset(e.data.goback)&&history.go(-1)},showErrMsg:function(e,a,o){var n=e.closest(".form-group");n.removeClass("has-error has-pass has-feedback"),a?(n.addClass("has-error").find(".error-msg").html(o),e.on("keyup",t.clearMsg),e.on("change",t.clearMsg)):n.addClass("has-pass has-feedback")},cleanArray:function(e){for(var t=[],a=0;a<e.length;a++)e[a]&&t.push(e[a]);return t},clearMsg:function(){o(this).closest(".form-group").removeClass("has-error has-pass has-feedback")},decToBin:function(e){return(e>>>0).toString(2)},formatHelper:{repeatLoop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";if(!t)return{};for(var o=[],n=e;n<=t;n++)o.push({order:n});return"asc"===a?o:"desc"===a?o.reverse():void 0},currency:function(e,t){return e=o.fn.formatMoney(e+"",0),void 0!==t?"-"===e.charAt(0)?"-"+t+e.substr(1):t+e:e},currency2:function(e,t){return o.fn.formatNum(e+"",0,".",",",1)+""},saveArith:function(e,t,a){switch(e=void 0===e||null==e||isNaN(e)?0:e,t=void 0===t||null==t||isNaN(t)?0:t,a){case"+":return e+t;case"-":return e-t;case"*":return e*t;case"/":return e/t;default:return!1}},floor:function(e){return Math.floor(e)},ceil:function(e){return Math.ceil(e)},round:function(e){return Math.round(e)},tax:function(e){return t.formatHelper.currency(Math.round(e/1.05))},afterTax:function(e){return t.formatHelper.currency(e-Math.round(e/1.05))},sum:function(e,a){return t.formatHelper.currency(a*e)},loadPic:function(e){return r.mainUri+e},size:function(e){return e.length},average:function(e,t){return 0!==t?Math.round(10*e/t)/10:0},string:function(e){return e.toString()},encode:function(e){return encodeURIComponent(e)},pad:function(e){return e.toString().length>=3?e:("0"+e).slice(-2)},getIndex:function(e,t){return e.indexOf(t)},logOut:function(e){return console.log("logOut",e)},beforeDateStr:function(e,a){var o=n(e);return t[a].max_ts=n.max(t[a].max_ts,o),t[a].min_ts=n.min(t[a].min_ts,o),timeago.format(e)},showDate:function(e,t,a,o,i){return e+" 於 "+n(i||o).format("MM/DD HH:mm")},iso8601:function(e){return n(e).toISOString()},getYear:function(e){return n(e).format("YYYY")},getMon:function(e){return n(e).format("MMMM")},getWeek:function(e){return n(e).format("ddd")},getDay:function(e){return n(e).format("DD")},getTime:function(e){return n(e).format("HH:mm")},getTimeLength:function(e){var a=Math.floor(e/60);e%=60;var o=Math.floor(a/60);return a%=60,(o>0?t.formatHelper.pad(o)+":":"")+t.formatHelper.pad(a)+":"+t.formatHelper.pad(e)},invoiceType:function(e){return 2==e?"公司":"個人"},genderedHonorific:function(e){return"f"===e?"女士":"先生"},linkAPI:function(t){return e.config.uri+t},nl2br:function(e){return(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2")},nl2li:function(e){return'<li class="list-group-item">'+(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,'$1</li><li class="list-group-item">$2')+"</li>"},numToZH:function(e){for(var t=["零","一","二","三","四","五","六","七","八","九"],a=["","十","百","千"],o=(e=parseInt(e),""),n="",i=0,r=!0;e>0;){var s=e%10;0===s?r||(r=!0,n=t[s]+n):(r=!1,o=t[s],n=(o+=a[i])+n),i++,e=Math.floor(e/10)}return n},numFormat:function(e,t,a,n){return t=t||0,a=a||".",n=n||",",o.fn.formatNum(e+"",t,a,n,1)},toInt:function(e){return parseInt(e)||0},formatDate:function(e,t){return(e=e?n(e,"YYYY-MM-DD HH:mm:ss"):n()).isValid()?e.format(t):n().format(t)},formatTime:function(e){var t=e.split(":");return"".concat(t[0]," 小時 ").concat(t[1]," 分鐘")},stripHtmlTag:function(e){return e.replace(/(<([^>]+)>)/gi,"")},loadTmpl:function(e,a,o){if(!t.tmplStores[e])return"";var n={data:a,base:o};return"string"==typeof t.member.current.img&&(n.userImage=t.member.current.img),t.tmplStores[e].render(n)},nextPage:function(e,t,a){return Math.ceil(e/t)>a},timeAgo:function(e){return timeago.format(e,"zh_TW")},print:function(e){return e},substring:function(e,t){if(!e||!t)return"";if(e.length<=t)return e;for(var a=Math.floor(t/2);a<e.length;a++)if(e.substr(0,a).length>=t)return e.substr(0,a)+"...";return e},urlEncode:function(e){return encodeURIComponent(e)},charToHex:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},toUrl:function(e){return 0==/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)/.test(e)&&(e=e.replace(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,4}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g,(function(e){return'<a class="inline-block" href="'+e+'" target="_blank">'+e+"</a>"}))),e},max:function(e,t){return Math.max(e,t)},beforeDate:function(e,t){return t=t?n(t,"YYYY-MM-DD HH:mm:ss"):n(),!!e&&(e=n(e,"YYYY-MM-DD HH:mm:ss")).diff(t)<0},afterDate:function(e,t){return t=t?n(t,"YYYY-MM-DD HH:mm:ss"):n(),!!e&&(e=n(e,"YYYY-MM-DD HH:mm:ss")).diff(t)>0},isNULL:function(e){return void 0===e||null==e||isNaN(e)},diff:function(e,t){t=void 0===t?"months":t;var a=n(e);return n().diff(a,t)},checkTerm:function(e){e=e?n(e,"YYYY-MM-DD HH:mm:ss"):n();var t=n();return e.diff(t,"months")>=240},formatDollar:function(e){var t="";return 1*e<0&&(t="-"),t+o.fn.formatNum(e+"",0,".",",",1)},ceilDec:function(e){var t=parseInt(e)||0,a=e-t,o=0;return 0==a?o=t:a<=.5?o=t+.5:a>.5&&(o=t+1),o},isGif:function(e){if(!0===e.includes("gif")||""===e)return'<img src="/dist/image/icon/thumbnail-file.png?v=0913"></img>'},timecodeConverter:function(e){var t=e%60,a=parseInt(e%3600/60),o=parseInt(e/3600);return(o>0?o+":":"")+(a<10?"0"+a:a)+":"+(t<10?"0"+t:t)},convertCTAtoString:function(e){return t.banner.convertCTAtoString(e)},getCourseStatus:function(e){var t=e.isOnline,a=(e.offline,e.isBacker),o=e.backer;return t?a?o.after?o.isOver?"almostReady":"fail":"fundraising":"online":"offline"},mapCateIDtoName:function(e){switch(parseInt(e,10)){case 67:return"Business";case 68:return"Design";case 69:return"Technology";case 70:return"Language";case 71:return"Life";default:return"All"}},convertDiscount:function(e){var t=e.toString();return t.length>=2?"0"===t[1]?t.replace("0",""):t:"0.".concat(t)},getDecimalPoint:function(e){return e.toFixed(1)}},extractAttr:function(e){var t={};return e.each((function(){o.each(this.attributes,(function(){t[this.name]=this.value}))})),t},isInPage:function(e){return window.location.pathname.includes(e)},tmpl:function(e,t){for(var a in t)e=e.replace(new RegExp("{"+a+"}","g"),t[a]);return e},progressingBtn:function(e){e.prop("disabled",!0)},doneBtn:function(e){e.prop("disabled",!1)},reloadPage:function(e){r.isset(e.refresh)&&!0===e.refresh&&location.reload()},parseUrl:function(e){var t=document.createElement("a");return t.href=e,{url:t,query:function(){for(var e,a={},o=t.search.replace(/^\?/,"").split("&"),n=o.length,i=0;i<n;i++)o[i]&&(a[(e=o[i].split("="))[0]]=e[1]);return a}()}},parseStrToObject:function(e){var t=e.split("&").map((function(e){return e.split("=")})),a={};return t.forEach((function(e){a[e[0]]=e[1]})),a},log:function(e,a){var o;!(null!==(o=t.tracking)&&void 0!==o?o:[]).includes(e)&&r.isset(t.tracking)&&""!=e&&"all"!=e||r.clog(e+"::"+a)}};return t}},23986:(e,t,a)=>{var o,n,i;n=[a(31175)],void 0===(i="function"==typeof(o=function(e){"use strict";e.fn.placeholder=function(t){return this.each((function(){if(!("placeholder"in document.createElement(this.tagName.toLowerCase()))){var t=e(this),a=t.attr("placeholder");t.val(a).data("color",t.css("color")).css("color","#aaa"),t.focus((function(){e.trim(t.val())===a&&t.val("").css("color",t.data("color"))})).blur((function(){e.trim(t.val())||t.val(a).data("color",t.css("color")).css("color","#aaa")}))}}))},e.fn.inArray=function(e,t){var a=0;for(var o in e)e[o]===t&&a++;return a>0},e.fn.isEmpty=function(){return""===this.val()||this.val()===this.attr("placeholder")},e.fn.isEmailErr=function(){return!0!==/[\w-]+@([\w-]+\.)+[\w-]+/.test(this.val())},e.fn.isPasswdErr=function(){return!0!==/^(?=.*\d)(?=.*[a-zA-Z]){2,}(?=.*[a-zA-Z])(?!.*\s).{8,32}$/.test(this.val())},e.fn.formatMoney=function(e,t,a,o){e*=1,t=isNaN(t=Math.abs(t))?2:t,a=void 0===a?".":a,o=void 0===o?",":o;var n=e<0?"-$":"$",i=parseInt(e=Math.abs(+e||0).toFixed(t))+"",r=(r=i.length)>3?r%3:0;return n+" "+(r?i.substr(0,r)+o:"")+i.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+o)+(t?a+Math.abs(e-i).toFixed(t).slice(2):"")},e.fn.formatNum=function(e,t,a,o,n){e*=1,t=isNaN(t=Math.abs(t))?2:t,a=void 0===a?".":a,o=void 0===o?",":o,n=1===n?"":e<0?"-":"";var i=parseInt(e=Math.abs(+e||0).toFixed(t))+"",r=(r=i.length)>3?r%3:0;return n+(r?i.substr(0,r)+o:"")+i.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+o)+(t?a+Math.abs(e-i).toFixed(t).slice(2):"")},e.fn.serializeFormJSON=function(){var t={},a=this.serializeArray();return e.each(a,(function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""})),t},e.fn.extend({hasMutilClass:function(t){var a=-1!==t.indexOf("|")?"|":"&",o=t.split(a),n=e(this)[0],i="|"!==a&&0!==o.length;return e.each(o,(function(e,t){var o=n.classList.contains(t);o&&"|"===a&&(i=!0),o||"&"!==a||(i=!1)})),i},scrollBottom:function(t){return"number"==typeof t?(window.scrollTo(0,e(document).height()-e(window).height()-t),e(document).height()-e(window).height()-t):e(document).height()-e(window).height()-e(window).scrollTop()}})})?o.apply(t,n):o)||(e.exports=i)},60535:(e,t,a)=>{var o=a(31175),n=a(31175),i=i||o.fn.gene;!function(e,t){"use strict";e.event=new function(){var e={subscribers:function(){return this._subscribersMap||(this._subscribersMap={}),this._subscribersMap},subscribe:function(e,t){var a=this.subscribers();a[e]?a[e].push(t):a[e]=[t]},clearSubscribe:function(e){this.subscribers()[e]=[]},unsubscribe:function(e,a){var o=this.subscribers()[e];t.each(o,(function(e,t){t==a&&(o[e]=null)}))},monitor:function(e,t){if(!t()){var a=this;this.subscribe(e,(function o(){t.apply(t,arguments)&&a.unsubscribe(e,o)}))}},clear:function(e){delete this.subscribers()[e]},fire:function(){var e=Array.prototype.slice.call(arguments),a=e.shift();t.each(this.subscribers()[a],(function(t,a){a&&a.apply(this,e)}))}};return e}}(i,n)},34082:function(e,t,a){function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}!function(e){"use strict";var t,a=function(){try{if(e.URLSearchParams&&"bar"===new e.URLSearchParams("foo=bar").get("foo"))return e.URLSearchParams}catch(e){}return null}(),n=a&&"a=1"===new a({a:1}).toString(),i=a&&"+"===new a("s=%2B").get("s"),r=!a||((t=new a).append("s"," &"),"s=+%26"===t.toString()),s=u.prototype,l=!(!e.Symbol||!e.Symbol.iterator);if(!(a&&n&&i&&r)){var c;s.append=function(e,t){v(this.__URLSearchParams__,e,t)},s.delete=function(e){delete this.__URLSearchParams__[e]},s.get=function(e){var t=this.__URLSearchParams__;return this.has(e)?t[e][0]:null},s.getAll=function(e){var t=this.__URLSearchParams__;return this.has(e)?t[e].slice(0):[]},s.has=function(e){return b(this.__URLSearchParams__,e)},s.set=function(e,t){this.__URLSearchParams__[e]=[""+t]},s.toString=function(){var e,t,a,o,n=this.__URLSearchParams__,i=[];for(t in n)for(a=m(t),e=0,o=n[t];e<o.length;e++)i.push(a+"="+m(o[e]));return i.join("&")},i&&a&&!n&&e.Proxy?(c=new Proxy(a,{construct:function(e,t){return new e(new u(t[0]).toString())}})).toString=Function.prototype.toString.bind(u):c=u,Object.defineProperty(e,"URLSearchParams",{value:c});var d=e.URLSearchParams.prototype;d.polyfill=!0,d.forEach=d.forEach||function(e,t){var a=f(this.toString());Object.getOwnPropertyNames(a).forEach((function(o){a[o].forEach((function(a){e.call(t,a,o,this)}),this)}),this)},d.sort=d.sort||function(){var e,t,a,o=f(this.toString()),n=[];for(e in o)n.push(e);for(n.sort(),t=0;t<n.length;t++)this.delete(n[t]);for(t=0;t<n.length;t++){var i=n[t],r=o[i];for(a=0;a<r.length;a++)this.append(i,r[a])}},d.keys=d.keys||function(){var e=[];return this.forEach((function(t,a){e.push(a)})),p(e)},d.values=d.values||function(){var e=[];return this.forEach((function(t){e.push(t)})),p(e)},d.entries=d.entries||function(){var e=[];return this.forEach((function(t,a){e.push([a,t])})),p(e)},l&&(d[e.Symbol.iterator]=d[e.Symbol.iterator]||d.entries)}function u(e){((e=e||"")instanceof URLSearchParams||e instanceof u)&&(e=e.toString()),this.__URLSearchParams__=f(e)}function m(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,(function(e){return t[e]}))}function h(e){return e.replace(/[ +]/g,"%20").replace(/(%[a-f0-9]{2})+/gi,(function(e){return decodeURIComponent(e)}))}function p(t){var a={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return l&&(a[e.Symbol.iterator]=function(){return a}),a}function f(e){var t={};if("object"===o(e))if(g(e))for(var a=0;a<e.length;a++){var n=e[a];if(!g(n)||2!==n.length)throw new TypeError("Failed to construct 'URLSearchParams': Sequence initializer must only contain pair elements");v(t,n[0],n[1])}else for(var i in e)e.hasOwnProperty(i)&&v(t,i,e[i]);else{0===e.indexOf("?")&&(e=e.slice(1));for(var r=e.split("&"),s=0;s<r.length;s++){var l=r[s],c=l.indexOf("=");-1<c?v(t,h(l.slice(0,c)),h(l.slice(c+1))):l&&v(t,h(l),"")}}return t}function v(e,t,a){var o="string"==typeof a?a:null!=a&&"function"==typeof a.toString?a.toString():JSON.stringify(a);b(e,t)?e[t].push(o):e[t]=[o]}function g(e){return!!e&&"[object Array]"===Object.prototype.toString.call(e)}function b(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(void 0!==a.g?a.g:"undefined"!=typeof window?window:this)},29871:(e,t,a)=>{"use strict";a(88137),a(55783),a(23732),a(62163),a(33831),a(11424),a(22318),a(79049),a(78686),a(6437),a(37969),a(2276),a(34082),a(84328);var o=a(1738),n=(a(14411),a(79654),a(69469),a(83074),a(23986),a(62699),a(69145),a(60535),a(61551),a(60955),a(9394),a(31175));function i(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const r=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.root=t,this.address=a||null}var t,a;return t=e,(a=[{key:"init",value:function(){var e=this,t={countrySel:"台北市",districtSel:"大安區"},a=e.root.find(".js-address__nationality");if(e.address){if("海外"===e.address.nationality)a.find('option[value="foreign"]').prop("selected",!0);else if("台灣"===e.address.nationality){a.find('option[value="taiwan"]').prop("selected",!0);var o=e.address.city.split(""),i=o[0].replace("台","臺");o.splice(0,1),o.unshift(i);var r=o.join("");["基隆市","臺北市","新北市","宜蘭縣","新竹市","新竹縣","桃園市","苗栗縣","臺中市","彰化縣","南投縣","嘉義市","嘉義縣","雲林縣","臺南市","高雄市","屏東縣","臺東縣","花蓮縣","金門縣","連江縣","澎湖縣"].includes(r)&&(t={countySel:r,districtSel:e.address.district})}e.root.find("#twzipcode").twzipcode(),e.root.find("#twzipcode").twzipcode("set",{county:t.countySel,district:t.districtSel}),"海外"===e.address.nationality&&e.selectNation(e.address.nationality),e.root.find(".js-address__address").val(e.address.address)}else a.find('option[value="taiwan"]').prop("selected",!0),e.root.find("#twzipcode").twzipcode(),e.selectNation("taiwan");a.on("change",(function(){e.root.find("#twzipcode").twzipcode("reset");var t=n(this).find("option:selected").val();e.selectNation(t)}))}},{key:"selectNation",value:function(e){var t=this;"taiwan"===e||"台灣"===e?(t.root.find("select").each((function(){"nationality"!==n(this).attr("name")&&"country"!==n(this).attr("name")&&n(this).attr("disabled",!1)})),t.root.find('input[name="zipcode"]').each((function(){n(this).attr("disabled",!1)}))):(t.root.find("select").each((function(){"nationality"!==n(this).attr("name")&&"country"!==n(this).attr("name")&&n(this).attr("disabled","disabled")})),t.root.find('input[name="zipcode"]').each((function(){n(this).attr("disabled","disabled")}))),t.root.find("select[name='county']").change(),t.root.find("select[name='district']").change(),t.root.find("input[name='zipcode']").change()}},{key:"getValue",value:function(){var e,t,a,o,n=this,i=n.root.find("#twzipcode"),r=n.root.find(".js-address__nationality").find("option:selected").val();return r&&(e="foreign"===r?"海外":"台灣"),"海外"===e?(t="海外",a="海外",o="海外"):(t=i.twzipcode("get","county")[0],a=i.twzipcode("get","district")[0],o=i.twzipcode("get","zipcode")[0]),{nationality:e,city:t,district:a,zip:o,address:n.root.find(".js-address__address").val()}}},{key:"get",value:function(e){var t=this.getValue();if(void 0!==t[e])return t[e]}},{key:"notComplete",value:function(){var e=this.getValue(),t=[];for(var a in e)e[a]?t.push(!1):t.push(!0);return!!t.find((function(e){return!0===e}))}},{key:"showError",value:function(){var e=this,t=e.getValue();t.nationality||app.showErrMsg(e.root.find(".js-address__nationality"),!0,"請選擇區域"),t.city||app.showErrMsg(e.root.find(".js-area__city"),!0,"請選擇城市"),t.district||app.showErrMsg(e.root.find(".js-area__district"),!0,"請選擇鄉鎮市區"),t.address||app.showErrMsg(e.root.find(".js-address__address"),!0,"請填寫地址")}}])&&i(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();a(92227);var s=a(58133),l=a.n(s),c=a(62163),d=a(11424),u=a(31175);!function(e,t,a){var o=function(t,o){var n=a(t),i=a(".dropdown-menu",t),r=function(){0===n.filter(":hover").length&&0===i.filter(":hover").length&&n.removeClass("open")};return n.hover((function(){e.body.hasClass("desktop")&&(n.parents(".navbar-nav").find(".dropdown").removeClass("open"),n.addClass("open"),"function"==typeof o&&o.call())}),(function(){setTimeout(r,300)})),i};e.arena={modal:{},forceModal:!1,cuTab:"",menuBox:a("#mainMenu"),tmp:[],modalOpts:{title:"",src:"",ta:"",size:"nor",canClose:!0,cover:"white",header:"logo",message:{content:"",status:"success"}},saveNotice:{root:void 0,timespan:2500,isShowing:!1,mode:"",displayOn:function(t){var o=this;if(o.isShowing=!0,void 0!==o.root)return o.root.find(".js-msg").html(t),o.root.addClass("s--".concat(o.mode)),void o.root.addClass("active");e.waitFor((function(){return void 0!==e.tmplStores["save-notice"]})).then((function(){a("body").append(e.tmplStores["save-notice"].render({data:{text:t}})),o.root=a(".js-saved-notice"),o.root.addClass("s--".concat(o.mode)),setTimeout((function(){o.root.addClass("active")}),100)}))},displayOff:function(){var e=this;e.isShowing=!1,e.root.removeClass("active"),window.setTimeout((function(){e.root.removeClass("s--".concat(e.mode))}),1e3)},show:function(t,a,o){var n=this;n.mode=o,a||(a=n.timespan);var i=t&&t.length>0?t:"已經成功儲存囉！";if(!n.isShowing){e.arena.saveNotice.displayOn(i);var r=setTimeout((function(){n.isShowing&&e.arena.saveNotice.displayOff(),window.clearTimeout(r)}),a)}}},init:function(){a(".member.dropdown").length>0&&new o(".member.dropdown"),a(".cart.dropdown").length>0&&new o(".cart.dropdown"),a(".message.dropdown").length>0&&new o(".message.dropdown"),a(".type-tag-list.dropdown").length>0&&new o(".type-tag-list.dropdown"),a(".teacher.dropdown").length>0&&new o(".teacher.dropdown"),a(".bs-tip-show").tooltip(),a('[data-toggle="dropdown"]').dropdown(),e.windowSize={width:window.innerWidth,currentArea:e.getCurrentDevice(window.innerWidth)};var t=window.innerWidth;e.isInPage("player")||a(window).resize((function(){e.detectDevice(),e.detectBrowser(),e.isInPage("backend")||a(window).width()!=t&&(t=a(window).width(),e.onResize())})),e.arena.errorHandle(),e.isInPage("backend")||e.arena.initCountdown(),e.body.on("mouseover",(function(e){var t=e.target,o=a(t);o.hasClass("bs-tip-show-icon")&&o.tooltip("show")}))},initTawk:function(t){e.member.checkUserStatus((function(){t.setAttributes({USID:e.member.current.userID},(function(e){}))}),(function(){})),e.waitFor((function(){return a('iframe[title="chat widget"]').length>0})).then((function(){e.arena.chatbotcss()}))},chatbotcss:function(){e.waitFor((function(){return a('iframe[title="chat widget"]').length>0})).then((function(){if(e.body.hasClass("intro")){var t=e.windowSize.width<991?a(".mobile-fixed-course-info").innerHeight():0;a('iframe[title="chat widget"]').each((function(){var e=a(this),o=e.attr("style"),n=e.width();n<100?a(this).attr("style",o+"; bottom:".concat(t+20,"px !important; right:").concat(20-(n-60),"px !important;")):a(this).attr("style",o+"; bottom:".concat(t+90,"px !important;"))})),a(".l-remarketing-notice.notice__anchor").css("bottom","".concat(t+95,"px")),a(".js-remarketing-block").css("bottom","".concat(t+95,"px"))}else a('iframe[title="chat widget"]').each((function(){var e=a(this),t=e.attr("style"),o=e.width();o<100&&a(this).attr("style",t+"; right:".concat(20-(o-60),"px !important;"))}))}))},handler:function(e){a(window).scrollTop()},lazyload:function(e){e.find("img:not(:visible)").each((function(){a(this).addClass("b-lazy").attr("data-src",a(this).attr("src")).attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAIAQAAAABGt0WaAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAAAnRSTlMAAHaTzTgAAAACYktHRAAB3YoTpAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB+EIEAEKHweA8ZEAAAAMSURBVAjXY2CgDQAAAFgAAdJVmswAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTctMDgtMTZUMDE6MTA6MzEtMDQ6MDCv7aD1AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE3LTA4LTE2VDAxOjEwOjMxLTA0OjAw3rAYSQAAAABJRU5ErkJggg==")})),1==e.data("loading")&&e.find("img:not(:visible)").addClass("simpleLoading")},checkIconReady:function(){return new Promise((function(t,a){e.waitFor((function(){return e.icon.iconLoaded})).then((function(){t(e.icon.iconLoaded)}))}))},errorHandle:function(){var o=t.parseUrlQuery(document.location.toString());if(o.error&&a.isNumeric(o.error)){var n=parseInt(o.error,10);window.history.replaceState({},document.title,location.pathname);var i=5200+Object.keys(e.coupon.errMsg).length-1;if(5200<=n&&i>=n){if(5205===n&&e.isInPage("basket"))return;e.arena.saveNotice.show(e.coupon.errMsg["e".concat(n)],5e3,"error")}switch(n){case 6100:case 6104:t.exe("attemptToLogin",null);break;case 6202:t.alert({title:"Alert!",txt:e.member.errMsg.e6202});break;case 6103:e.modal.showValidation("validation");break;case 6105:t.exe("showFailMergeModal",null);break;case 5107:e.modal.show({src:"message-modal",ta:"messageModal",size:"sm",header:"blue",title:"錯誤訊息",canClose:!0,message:{content:"課程發生問題",status:"error"}})}}},setContact:function(o,n){var i=function(){if(n.prop("disabled",!1),0!==this.code)switch(this.code){case 8100:case 9100:e.showErrMsg(n.closest("form").find('input[name="nickname"]'),!0,e.errMsg["e"+this.code]);break;default:e.stdErr(this)}else e.stdSuccess(this),n.closest("form").find('input[name="nickname"],input[name="phone"], textarea').val("").end().find(".has-error").removeClass("has-error"),e.modal.showSimpleModal("成功送出訊息","已經收到你的訊息囉！<br>我們將會在 3 個工作天內盡快回信給你","/dist/image/anime-svg/news.svg",'<button class="gee modal__btn" data-gene="click:hideModal">知道了</button>'),a(".js-uploaded-photo-list").html("")};t.yell("contact/set",o,i,i)},b64toBlob:function(e,t,a){t=t||"",a=a||512;for(var o=atob(e.replace(/^data:image\/(png|jpeg|jpg);base64,/,"")),n=[],i=0;i<o.length;i+=a){for(var r=o.slice(i,i+a),s=new Array(r.length),l=0;l<r.length;l++)s[l]=r.charCodeAt(l);var c=new Uint8Array(s);n.push(c)}return new Blob(n,{type:t})},stopBodyScroll:function(){e.body.toggleClass("noScroll")},moveViewToPosition:function(e,t,o){a("html, body").stop().animate({scrollTop:a(e).offset().top+t},o)},toggleVagueMask:function(e){!0===e?(a("#page").addClass("vague"),a("#mask").addClass("show")):(a("#page").removeClass("vague"),a("#mask").removeClass("show"))},countdown:function(t,o,n){var i=c(t).unix()-c(1e3*e.member.timestamp,"x").unix(),r=c.duration(1e3*i,"milliseconds"),s=1e3;if("label"===o){var l=Math.floor(r.asDays());if(l>=1)return void n.html("<span>".concat(l,"</span>天"));var d=Math.floor(r.asHours());if(d>=1)return void n.html("<span>".concat(d,"</span>小時"));var u=setInterval((function(){var e=r.minutes(),t=r.seconds();e>=1?n.html("<span>".concat(e,"</span>分")):t>=1?n.html("<span>".concat(t,"</span>秒")):(clearInterval(u),n.parent().html("已結束"))}),s)}else u=setInterval((function(){if((r=c.duration(r-s,"milliseconds")).asSeconds()>=1){var e=Math.floor(r.asDays()),t=r.hours(),o=r.minutes(),i=r.seconds();e=1===a.trim(e).length?"0"+e:e,t=1===a.trim(t).length?"0"+t:t,o=1===a.trim(o).length?"0"+o:o,i=1===a.trim(i).length?"0"+i:i,n.find("span.days").text(e).end().find("span.hours").text(t).end().find("span.mins").text(o).end().find("span.second").text(i)}else clearInterval(u),n.text("已結束")}),s)},initCountdown:function(){a(".js-countdown-box").each((function(){var t=a(this),o=t.data("value");if(o)if("timer"===t.data("type")){var n=t.data("url"),i=setInterval((function(){o--,t.text(o)}),1e3);setTimeout((function(e){clearInterval(i),window.location.replace("/"+n+"/")}),1e3*o)}else e.member.getUserTimestamp((function(){e.arena.countdown(o,t.data("format"),t)}))})).removeClass("js-countdown-box")},sortArrayAndPadRandomly:function(e){function t(e){for(var t=e.length-1;t>0;t--){var a=Math.floor(Math.random()*(t+1)),o=e[t];e[t]=e[a],e[a]=o}return e}var a=e.filter((function(e){return e.sorter>0})),o=t(e.filter((function(e){return e.sorter<0})));if(a.length<=0)return t(o);a.sort((function(e,t){return e.sorter-t.sorter}));for(var n=[],i=function(e){a.find((function(t){return t.sorter===e+1}))?n[e]=a.find((function(t){return t.sorter===e+1})):n[e]=void 0},r=0;r<a[a.length-1].sorter;r++)i(r);for(var s=0;s<n.length;s++)if(void 0===n[s]&&o.length>0){var l=parseInt(Math.random()*o.length);n[s]=o[l],o.splice(l,1)}return(n=n.filter((function(e){return void 0!==e}))).concat(o)},getTemplate:function(t){return new Promise((function(a,o){e.waitFor((function(){return void 0!==e.tmplStores[t]})).then((function(){a(e.tmplStores[t])})).fail((function(){o()}))}))},showLoadingBtn:function(e){e.find(".js-gif-loader"),e.addClass("s--loading")},stopLoadingBtn:function(e){e.find(".js-gif-loader"),e.removeClass("s--loading")},copyToClipboard:function(e,t,a){navigator.clipboard.writeText(e).then((function(){"function"==typeof t&&t()}),(function(){"function"==typeof a&&a()}))},copyFromDOM:function(e,t){var a=document.createRange();a.selectNode(e);var o=window.getSelection();o.removeAllRanges(),o.addRange(a),document.execCommand("copy"),"function"==typeof t&&t()},detectHitBottom:function(e){var t=!0,o=0;a(window).scroll((function(){if(t){var a=window.pageYOffset||document.documentElement.scrollTop;a>o&&window.innerHeight+window.scrollY>=document.body.offsetHeight&&(t=!1,"function"==typeof e&&e(),setTimeout((function(){t=!0}),1e3)),o=a<=0?0:a}}))},stopDetectHitBottom:function(){a(window).unbind("scroll")}},t.hook("withdrawType",(function(e){var t=e.closest(".js-withdraw-type-form"),a=e.find('input[name="withdraw-type"]:checked').val();t.find(".js-withdraw-type-info").removeClass("show").end().find(".js-withdraw-type-info."+a).addClass("show")})),t.hook("showMore",(function(e){e.parent().addClass("display")})),t.hook("reXPos",(function(t){var a=1*t.data("left"),o=1*t.data("x");a=e.body.width()>1e3?0:e.body.width()*o+a,a=e.body.width()*o+a,t.css({left:a+"px"})}),"init"),t.hook("selOpt",(function(e){var t=e.closest("form"),o=e.data("ta");t.find('input[name="'+o+'"]').val(a(e.event.target).text())})),t.hook("displayTeacherList",(function(e){e.siblings(".js-teacher-list").addClass("active"),e.remove()})),t.hook("initFileUpload",(function(o){var n=o.find("#file-uploader"),i=new FileReader;e.contact={},e.contact.images=[],n.on("change",(function(){if(!(a(".js-uploaded-photo-list").find(".js-photo").length>4)){i.readAsDataURL(n.prop("files")[0]);var r=new FormData,s=n.prop("files")[0].name;s.indexOf("png")>0||s.indexOf("jpg")>0||s.indexOf("jpeg")>0?(r.append("photo",n.prop("files")[0]),a.ajax({url:t.apiUri+"storage/contactUpload",data:r,type:"POST",contentType:!1,processData:!1}).done((function(e){var a=e.indexOf(":"),n=e.slice(a+1).replace(/[{}"']/g,"");o.find(".js-uploaded-photo-list").append('\n            <div class="js-photo photo-item">\n              <img class="gee" src="'.concat(n,'" data-gene="init:enlargeImg">\n              <div class="delete-btn js-delete-btn">\n                <icon class="svg-icon close"></icon>\n              </div>\n            </div>\n          ')),t.init()})).catch((function(){console.log("error")}))):e.modal.show({title:"錯誤",src:"message-modal",ta:"messageModal",size:"sm",cover:"opacity",header:"blue",message:{content:"檔案格式錯誤，請上傳png, jpg或jpeg圖檔"}})}})),o.on("click",(function(e){var t=e.target,o=a(t);o.hasClass("js-delete-btn")&&o.closest(".photo-item").remove()}))})),t.hook("enlargeImg",(function(e){if(a(".img-bg-blur").length<1){var t=a("<div></div>").addClass("img-bg-blur").append('<img src="">');a("body").append(t)}e.click((function(e){e.preventDefault(),a(".img-bg-blur").addClass("on").children("img").attr("src",a(this)[0].currentSrc)})),a(".img-bg-blur").on("click",(function(e){e.preventDefault(),a(this).removeClass("on")})),a(window).on("scroll",(function(){a(".img-bg-blur").removeClass("on")}))})),t.hook("contact/set",(function(t){var o=t.closest("form");if(o.find("input").each((function(){a(this).val()===a(this).attr("placeholder")&&a(this).val("")})),!a.validatr.validateForm(o))return!1;e.progressingBtn(t);var n=o.serialize(),i=a(".js-uploaded-photo-list").find(".js-photo"),r=[];i.each((function(e){r.push("附圖".concat(e+1,":").concat(a(this).find("img").attr("src")))})),e.arena.setContact(n+r.join(" "),t)})),t.hook("popoverDel",(function(e){var t=e.data("type"),a=e.data("pid"),o=e.data("act"),n=e.data("msg")||"你正在刪除？";e.find(".delete-btn").length&&e.find(".delete-btn").css("color","#009fde").addClass("js-color-change"),e.data("bs.popover")||e.popover({content:"<p>"+n+'</p><span class="delete-me" data-type="'+t+'" data-pid="'+a+'" data-act="'+o+'" onclick="gee.triggerDel(this);" >是的</span><span class="close-popover-btn" onclick="gee.hidePopover(this);">不要</span>',html:!0,sanitize:!1,placement:"top",toggle:"manual"}),e.addClass("on-popover").popover("show")})),t.hook("hidePopover",(function(e){var t=a(e),o=t.data("box");a(".js-color-change").length&&a(".js-color-change").css("color","#d3dee5").removeClass("js-color-change"),t.closest(o).removeClass("delete").end().closest(".popover").prev(".on-popover").popover("hide").removeClass("on-popover")})),t.hook("triggerDel",(function(o){var n=a(o),i=n.data("type"),r=n.data("pid"),s=n.data("act");e[i]&&(e[i][s]?e[i][s](r,n):e[i].del(r,n)),t.hidePopover(o)})),t.hook("go2Top",(function(e){a("html, body").animate({scrollTop:0},600)})),t.hook("go2block",(function(e){var t=e.attr("href"),o=a(".js-toolbar").height()+10;a("html, body").stop().animate({scrollTop:a(t).offset().top-o},700)})),t.hook("applyInfoSlide",(function(e){var t,a=e.data("type"),o=e.parent(),n=o.find(".box").length;"next"==a?(t=o.find(".active").index())>=n&&(t=0):(t=o.find(".active").index()-2)<0&&(t=n-1),o.find(".box").removeClass("active").end().find(".box").eq(t).addClass("active")})),t.hook("cloneHtml",(function(e){var t=a("#"+e.data("ta")).html();e.html(t)})),t.hook("lazyload",(function(t){e.arena.lazyload(t)})),t.hook("home/init",(function(t){e.log("arena","home/init"),new d({success:function(e){a(e).removeClass("simpleLoading")}}),e.log("arena","home/init"),e.track.view_item_list()})),t.hook("view_item_list/init",(function(t){e.log("arena","view_item_list/init"),e.track.view_item_list()})),t.hook("select_content",(function(t){e.log("arena","select_content/init"),e.track.select_content(t)})),t.hook("purchase/init",(function(t){e.log("arena","purchase/init");var a=t.find(".purchase").data(),o=JSON.parse(localStorage.getItem("checkout_progress_three"));a&&o&&e.track.purchase(o,a)})),t.hook("bindCourseCardAction",(function(t){var o=null;t.on("mouseover",(function(e){if(o){var t=a(e.target).closest(".js-course-card");t.data("id")!==o.data("id")&&(o.find(".js-card-badge").removeClass("s--show"),(o=t).find(".js-card-badge").addClass("s--show")),a(e.target).hasClass("js-teacher-name")?o.find(".js-card-badge").addClass("s--teacher"):o.find(".js-card-badge").removeClass("s--teacher"),a(e.target).hasClass("js-badge-img")&&o.find(".js-card-badge").hasClass("s--show")&&!o.hasClass("s--collected")?o.find(".js-card-badge").addClass("s--mouseover"):o.find(".js-card-badge").removeClass("s--mouseover")}else(o=a(e.target).closest(".js-course-card")).find(".js-card-badge").addClass("s--show")})),t.on("click",(function(n){void 0!==o&&(a(n.target).hasClass("js-badge-img")||a(n.target).hasClass("js-mobile-fav")?(n.preventDefault(),n.stopPropagation(),o.hasClass("s--collected")?e.collect.set(o.data("id"),"course",(function(){o.removeClass("s--collected"),o.find(".js-card-badge").removeClass("s--mouseover")})):e.collect.set(o.data("id"),"course",(function(){o.addClass("s--collected"),e.track.send(t.data("coursecardcategory"),"Fav","favorite","ga")}))):a(n.target).hasClass("js-teacher-name")?(n.stopPropagation(),e.track.send(t.data("coursecardcategory"),"Teacher","","ga"),window.location.href="".concat(window.location.origin).concat(a(n.target).attr("href"))):void 0!==o.attr("href")&&setTimeout((function(){window.location.href=o.attr("href")}),150))})),t.on("mouseleave",(function(e){void 0!==o&&(o.find(".js-card-badge").removeClass("s--show"),o=null)}))})),t.hook("add_to_cart",(function(t){e.log("arena","add_to_cart/init");var o=JSON.parse(localStorage.getItem("view_item")),n=JSON.parse(localStorage.getItem("view_item_intro")),i=parseInt(a("#courseID").val()),r=[];if(o&&o.id==i&&(r=o),n&&n.id==i&&(r=n),e.track.add_to_cart(r,"intro"),e.track.add_to_cart_checkout(r),t.data("jump")){var s=JSON.parse(localStorage.getItem("add_to_cart"));s&&e.track.begin_checkout_one(s,"intro")}})),t.hook("begin_checkout_one",(function(t){e.log("arena","begin_checkout_one/init");var a={},o=JSON.parse(localStorage.getItem("begin_checkout_cart"));if(o){var n=o.filter((function(e){return!a[e.id]&&(a[e.id]=!0)}));n&&e.track.begin_checkout_one(n,"cart")}location.href="/basket"})),t.hook("initTmpl",(function(t){e.loadTmpl(t.data("tmpl"),t)})),t.hook("initCountUp",(function(e){var t=e.data("value"),o=e.data("second");e.each((function(){a(this).prop("Counter",0).animate({Counter:t},{duration:1e3*o,easing:"swing",step:function(e){a(this).text(Math.ceil(e))}})}))})),t.hook("countdown",(function(t){var a=t.data("value");if(a)if("timer"===t.data("type")){var o=t.data("url"),n=setInterval((function(){a--,t.text(a)}),1e3);setTimeout((function(e){clearInterval(n),window.location.href=o}),1e3*a)}else e.member.getUserTimestamp((function(){e.arena.countdown(a,t.data("format"),t)}))})),t.hook("googleMap",(function(e){e.on("mousedown",(function(e){a(this).find(".gmap").removeClass("scrolloff")})).find(".gmap").addClass("scrolloff").mouseleave((function(){a(this).addClass("scrolloff")}))})),t.hook("clearInput",(function(e){e.closest("form").find("#".concat(e.data("target"))).val("")})),t.hook("printME",(function(e){a(document).ready((function(){self==top&&window.setTimeout((function(){window.print()}),3e3)}))})),t.hook("toggleTermBtn",(function(t){var o=a(".js-subnav"),n=!t.hasClass("active");e.body.toggleClass("fixed",n),o.toggleClass("active",n),t.toggleClass("active",n).text((function(t,a){return"展開分類"===a?(e.track.manuallySendGA("Click","Tab/Open tab"),"收合分類"):(e.track.manuallySendGA("Click","Tab/Close tab"),"展開分類")}))})),t.hook("termCates",(function(e){var t,o=window.location.pathname;e.find(".desktop-category a").each((function(e){var n=a(this).attr("href"),i=new RegExp(n,"g");o.match(i)&&(a(this).parent().addClass("active"),t=a(this).text())})).end().find(".js-category-name").text(t).end().find(".mobile-category a").each((function(e){var t=a(this).attr("href"),n=new RegExp(t,"g");o.match(n)&&a(this).parent().addClass("active")}))})),t.hook("initParallax",(function(t){"desktop"===e.screen&&t.parallax({imageSrc:"/dist/image/about/app.png",naturalWidth:1440,naturalHeight:810})})),t.hook("geneBubble",(function(e){var o=a(e.event.target);e.event.target.hasAttribute("func")||(o=o.closest("[func]"));var n=o.attr("func");t.check(n)&&(o.event=e.event,t.exe(n,o))})),t.hook("toggleInputVisibility",(function(e){var t=e.parent().find("input");function a(t,a){e.find(t).removeClass("visible"),e.find(t).addClass("hidden"),e.find(a).removeClass("hidden"),e.find(a).addClass("visible")}t.hasClass("show-input")?(a(".eye",".can-not-see"),t.removeClass("show-input"),t.attr("type","password")):(a(".can-not-see",".eye"),t.addClass("show-input"),t.attr("type","text"))})),t.hook("inputLimitDetect",(function(t){var a=t.parent().find(".js-limitbox-ta"),o=t.attr("data-limit");function n(){var e=a.val();t.text(o-e.length)}l().has(e,t.data("parma"))&&a.val(decodeURIComponent(l().get(e,t.data("parma")," "))),n(),a.on("change keydown",(function(){n()}))})),t.hook("inputStatusControl",(function(e){var a=e.find("input");a.on("blur",(function(){e.addClass("is-blurring"),a.val().length>0?e.addClass("has-input"):e.removeClass("has-input"),a.attr("data-blurAction")&&t.exe(a.attr("data-blurAction"),a)})),a.on("input",(function(){e.removeClass("has-pass has-error has-feedback is-blurring"),a.val().length>0?e.addClass("has-input"):e.removeClass("has-input")}))})),e.remarketingNotice={status:"on",anchor:void 0,box:void 0,init:function(e,t){var o=this;o.anchor=t,o.box=e,a.cookie("remarketingStatus")&&"off"===a.cookie("remarketingStatus")&&(o.status="off"),a.cookie("remarketingStatus")&&"on"===a.cookie("remarketingStatus")&&(o.status="on"),"on"===o.status?o.openBox():o.closeBox()},openBox:function(){var e=this;e.status="on",e.box.removeClass("hidden"),e.anchor.addClass("hidden"),a.removeCookie("remarketingStatus"),a.cookie("remarketingStatus","on",{expires:6e-4,path:"/"})},closeBox:function(){var e=this;e.status="off",e.box.addClass("hidden"),e.anchor.removeClass("hidden"),a.cookie("remarketingStatus","off",{expires:1,path:"/"})}},t.hook("openRemarketingBlock",(function(t){e.remarketingNotice.openBox()})),t.hook("closeRemarketingBlock",(function(t){e.remarketingNotice.closeBox()})),t.hook("copyThis",(function(t){var a=t.data("copy")?t.data("copy"):t.parent().find(".js-copy-target").text();e.arena.copyToClipboard(a,(function(){t.tooltip("show"),e.waitFor(1.5).then((function(){t.tooltip("hide")}))}),(function(){alert("請允許剪貼簿權限！")}))})),t.hook("remarketing/init",(function(t){e.remarketingNotice.init(t,a(".js-toggle-remarketing-notice"))})),t.hook("getVisitorsCount",(function(a){var o=function(){var t=this.data.visitors.trim();a.text(t),e.body.trigger("getVisitor")};t.yell("statistic/visitors",{},o,o)})),t.hook("initMoleCampaign",(function(e){a(".slick-block").slick({dots:!0,centerMode:!0,focusOnSelect:!0,autoplay:!0,autoplaySpeed:8e3,prevArrow:'<button type="button" class="slick-prev"><icon class="svg-icon left_arrow_new"></icon></button>',nextArrow:'<button type="button" class="slick-next"><icon class="svg-icon right_arrow_new"></icon></button>'});var t=a(".teacher-block");setTimeout((function(){t.offset().left,t.width(),a(".teacher-wrapper").animate({scrollLeft:(t.width()-window.innerWidth)/2})}),100)})),t.hook("initAddressSelector",(function(a){function o(t){e.member.currentAddressSelector=new r(a,{nationality:t.nationality,city:t.city,district:t.district,zipcode:t.zip,address:t.address}),e.member.currentAddressSelector.init()}e.member.detail?o(e.member.detail):t.event.subscribe("app.memberDetailLoaded",(function(){o(e.member.detail)}))})),t.hook("initAddress",(function(e){new r(e,null).init()})),t.hook("emailSuccess/render",(function(t){var o=(new Date).getHours(),n=a.cookie("redirect")?a.cookie("redirect"):"/home";a.cookie("redirect")&&a.removeCookie("redirect",{path:"/"});var i="email-success--".concat(o>=6&&o<18?"day":"night");e.waitFor((function(){return void 0!==e.tmplStores[i]})).then((function(){t.find("#wrapper").html(e.tmplStores[i].render({data:{url:n}}))}))})),t.hook("initLoginPage",(function(t){var o=e.getLastUserFromCookie(),n="login";e.isValid(o)?(n=o.method,e.waitFor((function(){return e.isValid(e.tmplStores["welcome--".concat(n)])})).then((function(){t.find(".js-login--".concat(n)).html(e.tmplStores["welcome--".concat(n)].render()),a(".js-login--".concat(n)).removeClass("hide")}))):a(".js-login--".concat(n)).removeClass("hide")})),t.hook("showLoginForm",(function(e){var t=e.closest(".js-login-page"),o=a(".js-login--login");t.addClass("hide"),o.removeClass("hide")})),t.hook("getNationList",(function(e){var a=function(){var t=this.data;function a(e){return'<option value="'.concat(e.code,'">').concat(e.title,"</option>")}var o=(t=t.sort((function(e,t){return"TWN"===e.code?-1:"TWN"===t.code?1:0}))).reduce((function(e,t){return(e.title?a(e):e)+a(t)}));e.append(o)};t.yell("option/nats",{},a,a)})),t.hook("initSubsidiaryBlock",(function(e){var t=e.find(".js-subsidiary-card"),o={maxTilt:20,perspective:500,easing:"cubic-bezier(.03,.98,.52,.99)",speed:300,transition:!0},n=[];function i(t){!function(t){var a=e.find(".js-subsidiary-link"),o={biz:"https://business.yottau.com.tw/",sat:"https://yotta-academy.co",podcast:"https://player.soundon.fm/p/b2f34e47-3a7d-4aa8-b607-88fb354e8309"};for(var n in o)e.removeClass("s--".concat(n));e.addClass("s--".concat(t)),a.attr("href",o[t])}(t),e.find(".js-subsidiary-card").each((function(){a(this).data("val")===t?(a(this).addClass("is--active"),a(this).tilt&&a(this).tilt.destroy.call(a(this))):(a(this).removeClass("is--active"),window.innerWidth>1040&&a(this).tilt(o))}))}if(window.innerWidth>567)t.each((function(){window.innerWidth>1040&&n.push(a(this).tilt(o)),a(this).on("click",(function(e){i(a(this).data("val"))}))})),i("sat");else{var r=e.find(".js-cards-slick");r.slick({rows:0,initialSlide:1,infinite:!1,centerMode:!0,slidesToShow:1,slidesToScroll:1,variableWidth:!0,dots:!1,nextArrow:!1,prevArrow:!1}),i("sat"),r.find(".slick-slide").each((function(){var e=a(this);e.on("click",(function(t){i(e.data("val")),r.slick("slickGoTo",e.data("slick-index"))}))})),r.on("afterChange",(function(e,t,a,o){i(r.find(".slick-center").data("val"))}))}}))}(app,gee,u),a(17240),a(62848),a(48334),a(13205),a(72752),a(12907),a(68005),a(16135),a(7067),a(45206),a(66185),a(56653),a(85251),a(34049),a(21563);var m=a(58133),h=a(62163),p=a(31175);!function(e,t,a){e.cart={store:[],fee:0,total:0,payment:0,promocode:"",btnTmpl:"<%props btns%><%:~cartBtn(prop) %><%/props%>",btnCls:["","btn-blue buynow-btn","btn-blue-border add2cart-btn","btn-blue","btn-disable","btn-black-border","btn btn-blue checkout-btn","btn-pink"],btnGa:['data-which="ga" data-label="Infobox/Buy now"','data-which="ga" data-label="Infobox/Add to cart"','data-which="ga" data-label="Infobox/Purchase"','data-which="ga" data-label="Infobox/Go to class"','data-which="ga" data-label="Infobox/Manage"'],errMsg:{e5100:"課程下架",e5101:"價錢變更",e5102:"報名截止",e5103:"人數已滿",e5104:"已下訂",e5105:"募資結束",e5106:"未開放",e5107:"發生錯誤",e7200:"已購課"},btnTxt:["進入教室","管理此課程","查看我的訂單","尚未開放，敬請期待","募資已結束","報名期限已過","課程已結束","已加入購物車，結帳去！","立即購買","放入購物車","人數額滿","去逛逛！","前往結帳","查看報到資訊","尚未開課，敬請期待","免費領取","已加入購物車！"],init:function(){a.extend(e.errMsg,e.cart.errMsg),e.cart.cartBox=a(".cart-dropdown-menu").length?a(".cart-dropdown-menu"):a(".cart-item-list"),e.isInPage("basket")&&t.event.subscribe("app.memberStatusLoaded",(function(a){var o,n=a.isLogin;n&&(e.member.getDetail(),e.member.checkValid(),e.parseStrToObject(window.location.hash.replace("#","")).code?o=e.parseStrToObject(window.location.hash.replace("#","")).code:e.promocode.suspect&&(o=e.promocode.suspect),o&&e.promocode.check(o),t.event.clearSubscribe("app.memberStatusLoaded")),n||t.exe("attemptToLogin",null)})),a('input[name="pay-type"]').prop("disabled",!0),a(".checkout-btn").addClass("disabled")},add2CartClean:function(a){var o=function(){0!==this.code?e.stdErr(this):e.member.cartStatus()};if(e.intro.courseID>0){var n=e.intro.data;e.track.send("AddToCart",{content_ids:[a],content_name:n.name,content_type:"product",value:n.point,currency:"TWD"},null,"pixel")}t.yell("basket/set",{id:a},o,o)},add2Cart:function(o,n){var i=function(){if(0!==this.code)e.stdErr(this);else if(n){if("member"!==e.win[0].location.pathname.replace(/\//g,"")){var t=JSON.parse(localStorage.getItem("view_item")),o=JSON.parse(localStorage.getItem("view_item_intro")),i=parseInt(a("#courseID").val()),r=[];t&&t.id==i&&(r=t),o&&o.id==i&&(r=o),r&&(e.track.add_to_cart(r,"intro"),e.track.add_to_cart_checkout(r))}return void(location.href="/basket")}e.member.status()};if(e.intro.courseID>0){var r=e.intro.data;e.track.send("AddToCart",{content_ids:[o],content_name:r.name,content_type:"product",value:r.point,currency:"TWD"},null,"pixel")}t.yell("basket/set",{id:o},i,i)},order:function(a){var o=function(){if(0!==this.code)5301===this.code?this.data.change&&this.data.change.length>0&&(e.cart.store={cart:this.data.return,delCart:this.data.change},e.modal.show({title:"購物車內容變更",src:"removed-cart-modal",size:"nor",cover:"opacity",header:"blue",canClose:!1}),e.cart.renderCart()):e.stdErr(this);else{var t=this;e.track.send("InsertOrderSuccess","",null,"pixel"),e.track.send("ecommerce","insertOrderSuccess","","ga"),window.setTimeout((function(){e.stdSuccess(t)}),100)}};t.yell("orders/set",a,o,o)},removeItem:function(a){var o=function(){0!==this.code?e.stdErr(this):e.member.cartStatus()};t.yell("basket/del",{id:a},o,o)},pickItem:function(a,o){var n=function(){0!==this.code?e.stdErr(this):(e.cart.store.cart=m.map(e.cart.store.cart,(function(e){return e.id==a&&(e.checked=o),e})),e.cart.renewCount(),e.cart.renewTotal(),e.cart.renewSum(),e.promocode.checkValidInput()&&e.promocode.check(e.promocode.ta.val()||e.promocode.currentCode))};t.yell("basket/pick",{id:a,checked:o},n,n)},renewTotal:function(){var t=m.filter(e.cart.store.cart,{checked:1}),o=0;e.cart.total=0,a(t).each((function(){e.cart.total+=1*this.price})),a(".cart-total").text(e.formatHelper.currency(e.cart.total,"NT")),a(e.cart.store.cart).each((function(){o+=1*this.price})),a(".cart-all-total").text(e.formatHelper.currency(o,"NT"))},renewFee:function(){a(".cart-fee").text(e.formatHelper.currency(e.cart.fee,"NT"))},fetchSum:function(){return 1*e.cart.total-1*e.promocode.total==0&&(e.cart.fee=0),1*e.cart.fee+1*e.cart.total-1*e.promocode.total},renewSum:function(){var t=e.cart.fetchSum(),o=0===e.cart.fee;e.cart.renderCartBtn(),a(".order-fee-txt").toggleClass("hide",o),a(".cart-sum").text(e.formatHelper.currency(t,"NT"))},renewCount:function(){var t=m.filter(e.cart.store.cart,{checked:1}),o=e.cart.store.cart.length,n=t.length,i=0===n;a(".cart-all-count").html(o),a(".cart-count").html(n),a(".checkout-btn").toggleClass("disabled",i)},renderCartBtn:function(){e.waitFor((function(){return void 0!==e.cart.store.cart})).then((function(){var o=a(".small-cart-btn"),n="";n=0===e.cart.store.cart.length?'<a class="btn-blue" href="/explore" func="cart/toExplore">繼續逛逛！</a>':'<a class="btn-blue nav-tracking-btn" data-gaaction="navCart" data-galabel="shoppingCart" func="begin_checkout_one">前往購物車</a>',o.html(n),t.init(),e.track.init();var i=e.cart.fetchSum();a('input[name="pay-type"]').prop("disabled",!0),0===e.cart.store.cart.length?n='<a href="/explore" class="btn btn-blue">去逛逛！</a>':0===i?a(".checkout-btn").html("完成"):(a(".checkout-btn").html("前往付款"),a('input[name="pay-type"]').prop("disabled",!1))}))},renderCart:function(){if(e.tmplStores["small-cart"]){var o=e.cart.cartBox.closest(".cart"),n=0===e.cart.store.cart.length;o.toggleClass("empty-cart",n),e.cart.cartBox.html(e.tmplStores["small-cart"].render(e.cart.store))}else if(e.tmplStores["full-cart"]){n=e.cart.store.cart.length>3,e.cart.cartBox.toggleClass("more",n),e.cart.cartBox.html(e.tmplStores["full-cart"].render(e.cart.store));var i=[],r=0,s=[];e.cart.store.cart.map((function(e){i.push(e.id),r+=parseInt(e.price,10),s.push({id:e.id,name:e.title,price:e.price,category:(e.status.isBacker?"募資":"")+(e.status.isOnline?"線上":"實體"),quantity:1})}));var l={},c=JSON.parse(localStorage.getItem("add_to_cart_checkout"));if(c)var d=c.filter((function(e){return!l[e.id]&&(l[e.id]=!0)}));var u,m=e.cart.store.cart.map((function(e){var t=e.status.isBacker?"募資":"非募資",a=e.status.isOnline?"線上課程":"實體課程";return{id:e.id,name:e.title,brand:e.brand,category:t,variant:a,quantity:1,price:e.price,list_name:e.list_name,list_position:e.list_position}}));if(m&&c)u=m.filter((function(e){return d.map((function(t){t.id==e.id&&(e.list_name=t.list_name,e.list_position=t.list_position)})),e})),e.track.begin_checkout_one(u);var h=JSON.parse(localStorage.getItem("begin_checkout"));h&&e.track.checkout_progress_two(h),e.track.send("InitiateCheckout",{content_ids:i,num_items:i.length,value:r,currency:"TWD"},null,"pixel")}t.init(),e.cart.renewCount(),e.cart.renewTotal(),e.cart.renewSum(),!1!==e.member.current.verify&&e.member.current.email||a(".checkout-btn").addClass("disabled")},renderDelCart:function(t){e.log("cart","renderDelCart"),e.log("cart",e.cart.store),t.html(e.tmplStores["removed-cart"].render(e.cart.store))},renderBtn:function(t){var o=1*a("#courseID").val()||0,n=[];if(t.isStudent||t.isExStudent)t.isOffline?n.push({cls:7,txt:13,link:"javascript: app.student.baumingInfo("+o+","+e.member.current.userCourse.userCourseID+");"}):t.isBacker?n.push({cls:3,txt:14,link:"/member/#courses"}):n.push({ga:3,cls:7,txt:0,link:"/course/classroomv3/"+o+"#bulletin"});else if(t.isTeacher)n.push({ga:4,cls:3,txt:0,link:"/course/dashboard/"+o+"#bulletin"});else if(t.isReadyToBuy)n.push({cls:3,txt:2,link:"/member/#orders"});else{var i=h(1e3*e.member.timestamp,"x");if(t.isBacker){var r=h(t.backer.from),s=h(t.backer.to);r.diff(i)>0?n.push({cls:5,txt:3,link:"javascript:;"}):s.diff(i)<0&&t.backer.targetBuyer>t.buyerCount&&n.push({cls:4,txt:4,link:"javascript:;"})}else if(t.isOffline){var l=h(t.offline.signupFrom),c=h(t.offline.signupTo),d=h(t.offline.partyTo);l.diff(i)>0?n.push({cls:5,txt:3,link:"javascript:;"}):c.diff(i)<0?d.diff(i)<0?n.push({cls:4,txt:6,link:"javascript:;"}):n.push({cls:4,txt:5,link:"javascript:;"}):1==t.offline.getOrderNum?t.offline.orderNum>=t.offline.purposeNum&&n.push({cls:4,txt:10,link:"javascript:;"}):t.buyerCount>=t.offline.totalBuyer&&n.push({cls:4,txt:10,link:"javascript:;"})}}e.cart.store.cart.map((function(a){e.log("cart","item.id::"+a.id),a.id===o&&(0===t.point?n.push({ga:2,cls:3,txt:16,link:"/basket"}):n.push({ga:2,cls:3,txt:7,link:"/basket"}))})),0===n.length&&(0===t.point?n.push({ga:0,cls:1,txt:15,link:"javascript: app.cart.add2Cart("+o+", 1);"}):n.push({ga:0,cls:1,txt:8,link:"javascript: app.cart.add2Cart("+o+", 1);"}),n.push({ga:1,cls:2,txt:9,icon:'<icon class="svg-icon addtocart2 icon-light-blue"></icon>',link:"javascript: app.cart.add2Cart("+o+");"}));var u=a.templates(e.cart.btnTmpl).render({btns:n});if(e.log("cart",n),a(".cart-action").html(u).addClass("active"),"/basket"!==a(".cart-action").children("a").attr("href")?a(".cart-action").children("a").attr("func","add_to_cart").addClass("track"):a(".cart-action").children("a").attr("func","direct2Cart").addClass("track"),a(".cart-action").hasClass("active")){var m=document.querySelector(".buynow-btn");m&&(m.dataset.jump=1)}}},e.formatHelper.cartBtn=function(t){return'<a href="'+t.link+'" class="btn btn-full '+e.cart.btnCls[t.cls]+" "+(t.func?t.func:"")+'"'+(e.cart.btnGa[t.ga]?e.cart.btnGa[t.ga]:"")+"><span class='btn-txt'>"+e.cart.btnTxt[t.txt]+"</span><span class='btn-txt'>"+t.icon+"</span></a>"},e.formatHelper.errorTxt=function(a){return a="e"+a||0,t.isset(e.errMsg[a])?e.errMsg[a]:e.errMsg.e5100},t.hook("add2Cart",(function(t){var a=t.data("item_id"),o=t.data("jump")||0;e.cart.add2Cart(a,o)})),t.hook("loadItem",(function(e){var t=e.closest(".cart-item-list"),a=e.hasClass("active");t.find(".item:visible").addClass("active").end().find(".item:not(.active)").slice(0,3).addClass("active");var o=t.find(".item").length;t.find(".item:visible").length>=o&&e.addClass("active").html('收合內容<i class="fa fa-chevron-up" aria-hidden="true"></i>'),a&&(e.removeClass("active").html('查看更多<i class="fa fa-chevron-down" aria-hidden="true"></i>'),t.find(".item").slice(3).removeClass("active"))})),t.hook("removeItem",(function(t){var a=t.data("item_id");e.cart.removeItem(a);var o=t.parents(".item"),n="basket"!==(n=e.win[0].location.pathname.replace(/\//g,""))?"home":"basket",i={id:o[0].dataset.id,name:o[0].dataset.name,list_name:o[0].dataset.list_name=n,brand:o[0].dataset.brand,category:o[0].dataset.category,variant:o[0].dataset.variant,list_position:o[0].dataset.list_position,quantity:o[0].dataset.quantity,price:o[0].dataset.price};e.track.remove_from_cart(i,n),t.event.stopPropagation()})),t.hook("pickItem",(function(t){var a=t.parents(".item");e.cart.pickItem(a[0].dataset.id,t.prop("checked")?1:0)})),t.hook("changeQty",(function(t){var o=t.data("item_id"),n=t.val(),i=1*t.attr("max"),r=1*t.attr("min");a.isNumeric(i)&&Math.min(i,n)===i&&(n=i,t.val(i)),a.isNumeric(r)&&Math.max(r,n)===r&&(n=r,t.val(r)),e.cart.add2Cart(o,n,"force")})),t.hook("tryRemoveCart",(function(e){var t=e.data("hide")||null;t=null===t?e.hasClass("active"):t,e.closest(".cart-dropdown-menu, .cart-item-list").find(".remove-item-btn.active").removeClass("active").closest(".item").removeClass("confirm"),t||e.addClass("active").closest(".item").addClass("confirm"),e.event.stopPropagation()})),t.hook("finishOrder",(function(o){var n=o.data("ta")?a("#"+o.data("ta")):o.closest("form"),i=0===a(".cart-info-div .cart-item-list .item").length,r=m.filter(e.cart.store.cart,{checked:1});o.prop("disabled",i);var s=n.serializeFormJSON();s.total=1*e.cart.fee+1*e.cart.total-1*e.promocode.total,s.promocode=decodeURI(e.cart.promocode);var l,c=a.validatr.validateForm(n);if(0==r.length&&("desktop"!==e.screen&&a("html, body").stop().animate({scrollTop:a(".cart-form-div").offset().top},700),a(".cart-form-div .error-text").text("請至少勾選一門課程").removeClass("hide"),c=!1),void 0!==e.member.currentAddressSelector)if(e.member.currentAddressSelector.notComplete())e.member.currentAddressSelector.showError(),c=!1;else{var d=e.member.currentAddressSelector.getValue();s.nationality=d.nationality,s.city=d.city,s.district=d.district,s.zip=d.zip,s.address=d.address}s.total>0&&0===e.cart.payment&&("desktop"===e.screen?t.go2Top():a("html, body").stop().animate({scrollTop:a(".pay-type-block").offset().top},700),a(".pay-type-block .error-text").removeClass("hide"),c=!1),(s.taxID||s.taxTitle)&&(""===s.taxTitle&&(l="請輸入公司抬頭"),s.taxID.match(/^\d{8}$/)||(l="公司統編格式錯誤"),""===s.taxID&&(l="請輸入公司統編"),l&&("desktop"!==e.screen&&a("html, body").stop().animate({scrollTop:a(".cart-form-div").offset().top},700),a(".cart-form-div .error-text").text(l).removeClass("hide"),c=!1));var u=a('input[name="receipt-type"]:checked');switch(u.val()){case"carrier":u.siblings(".receipt-detail").find(".form-check").removeClass("has-error");var h=u.siblings(".receipt-detail").find('input[name="receipt-detail-type"]:checked');"Carrier"!=h.val()&&""==h.siblings("input.form-control").val()||"CQ0001"==h.val()&&!h.siblings("input.form-control").val().match(/^[a-zA-Z]{2}[0-9]{14}$/)||"3J0002"==h.val()&&!h.siblings("input.form-control").val().match(/^\/{1}[\dA-Z,$%*+-./]{7}$/)?(h.closest(".form-check").addClass("has-error"),c=!1):(s.invoiceOption=h.val(),s.invoiceCode=h.siblings("input.form-control").val());break;case"donate":s.invoiceOption="Donate",s.invoiceCode=u.siblings(".receipt-detail").find("select option:selected").val();break;case"print":s.invoiceOption="Print";break;default:s.invoiceOption="Carrier"}if(c){var p=[],f=[];e.cart.store.cart.map((function(e){p.push(e.id),f.push({id:e.id,name:e.title,price:e.price,category:(e.status.isBacker?"募資":"")+(e.status.isOnline?"線上":"實體"),quantity:1})}));var v=JSON.parse(localStorage.getItem("checkout_progress_two")),g=a("#promocode").val();v&&e.track.checkout_progress_three(v,g),e.track.send("AddPaymentInfo",{content_ids:p,value:s.total,currency:"TWD"},null,"pixel"),window.gtag("event","addPaymentInfo",{event_category:"ecommerce",event_label:"",value:""}),s.payType=e.cart.payment,s.authRefund=a("#auth-refund-chk").prop("checked")?1:0,e.cart.order(s)}else"desktop"!==e.screen&&a(".has-error .error-msg").length&&a("html, body").stop().animate({scrollTop:a(".has-error .error-msg").offset().top},700)})),t.hook("showInvoice",(function(e){a('input[name="invoice[type]"]')[0].checked=!0}),"init"),t.hook("showShipFee",(function(e){e.addClass("cart-shipfee"),a('input[name="shipment"]')[0].checked=!0,t.newShipfee()}),"init"),t.hook("showTotal",(function(e){e.addClass("cart-total")}),"init"),t.hook("showCount",(function(e){e.addClass("cart-count")}),"init"),t.hook("loadRemoved",(function(t){e.loadTmpl(t.data("tmpl"),t),e.cart.renderDelCart(t);var o=e.win[0].location.pathname+e.win[0].location.hash,n=a(".cart-item-list.removed").find(".item"),i={id:n[0].dataset.id,name:n[0].dataset.name,list_name:n[0].dataset.list_name=o,brand:n[0].dataset.brand,category:n[0].dataset.category,variant:n[0].dataset.variant,list_position:n[0].dataset.list_position,quantity:n[0].dataset.quantity,price:n[0].dataset.price};e.track.remove_from_cart(i,"non_interaction")}),"init"),t.hook("resetQty",(function(e){var t=e.data("min")||1,a=e.data("max")||10,o=e.val();o>a&&e.val(a),o<t&&e.val(t)})),t.hook("showSum",(function(e){e.addClass("cart-sum")}),"init"),t.hook("showPayment",(function(t){if(0===e.cart.total)return!1;a(".pay-type-block .error-text, .payment-info").addClass("hide"),e.cart.fee=0,t.find('input[value="card"]').prop("checked")?e.cart.payment=1:t.find('input[value="atm"]').prop("checked")?(a(".payment-info.pay-type-atm").removeClass("hide"),e.cart.payment=2):(a(".payment-info.pay-type-cvs").removeClass("hide"),e.cart.fee=30,e.cart.payment=4),e.cart.renewFee(),e.cart.renewSum()})),t.hook("cart/showReceiptType",(function(t){t.find(".js-receipt-btn").remove(),e.body.find(".receipt-type-list").removeClass("hide")})),t.hook("cart/updateReceiptType",(function(t){var a=t.data("label");"electronic"===t.val()&&(a=t.parent().find("input[name=receipt-detail-type]:checked").data("label")),e.body.find(".js-receipt-type").text(a)})),t.hook("loadCart",(function(t){e.cart.cartBox=t,e.cart.loadCart()}),"init"),t.hook("cart/toExplore",(function(e){location.href="/explore"}))}(app,gee,p),a(25219),a(17203),a(53408),a(94986),a(87120),a(7735),a(51106),a(77697),a(10184),a(78580),a(50270);var f=a(58133),v=a(31175);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){w(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){e.student={store:{},rendered:!1,default:"#courses",isLogin:!1,init:function(){e.member.checkUserStatus((function(){return e.student.profile(!1,{})}),null,"student"),e.loadHtml("my-course-card",e.student.box.find(".js-student-card"))},profile:function(o,n){o=o||!1,n=n||(o?n:{}),o||e.waitFor(1).then((function(){e.body.find(".js-profile-loading").remove().end().find(".js-profile-block").removeClass("hide")}));var i=o?"member/set":"member/student",r=function(){0==this.code?(e.student.data=this.data,e.student.data.member.name=e.student.data.member.name?e.student.data.member.name:e.member.defaultNickname,e.student.data.member_login=!0,o||e.student.showTab(),a(".my-nickname").text(e.student.data.member.name)):(e.student.data={member:{name:"YOTTA 學員您好！",intro:"這是專屬於您的學習專區，<br>您可以查詢/觀看所有參與的課程、待繳費課程以及您的收藏，立即登入就能獲得完整的學習體驗！",avatars:"",join:""},meta:{course:0,forums:0,note:0}},e.student.data.member_login=!1),e.student.render("profile",e.student.data,"student-profile")};t.yell(i,n,r,r)},showTab:function(){var a=window.location.hash,o=window.location.search;["unpaid","expire","success"].forEach((function(e){o.includes("tab=".concat(e))&&(a="#orders")})),""===a&&(a=e.student.default);var n=e.student.box.find('[href="'+a+'"]');t.toggleTab(n)},course:function(a){var o=function(){0==this.code&&(e.student.render("my-course",this.data,"student-course",a),e.student.rendered=!0,t.go2Top(),t.event.fire("student.memberCourse",this.data))};t.yell("member/course",{},o,o)},setToRatingStore:function(t,o){var n;n=o||".js-classroom-header",e.waitFor((function(){return a(n).length>0})).then((function(){var o=a(n);a.when(e.waitFor((function(){return!f.isEmpty(e.member.current)})),e.waitFor((function(){return o.find(".js-rating-btn").length>0}))).then((function(){var n=o.find(".js-rating-btn"),i=e.isInPage("classroom")?a("#courseID").val():o.data("id"),r={id:n.data("id"),course_id:i,course_name:o.find(".course-title").text(),student_name:e.member.current.nickname};e.student.store.rating=r,"function"==typeof t&&t()}))}))},rating:function(a,o){var n=function(){0!==this.code?e.stdErr(this):"function"==typeof o&&o()};t.yell("rating/set",a,n,n)},wish:function(o,n){var i=function(){0!==this.code?6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this):(a(".my-wish-container").html(e.tmplStores["success-wish"].render({data:this.data})),t.init())};t.yell("wish/set",n,i,i)},render:function(o,n,i,r){switch(r=r||e.student.box,o){case"profile":if(!e.tmplStores[i])return;if(n){var s=e.tmplStores[i].render({data:n||e.studnet.data});r.find(".js-member-profile-show").html(s)}break;case"my-course":if(!e.tmplStores[i])return;if(n){s=e.tmplStores[i].render({data:n||{}}),r.html(s);var l=r.find(".js-my-course-card.online").length,c=r.find(".js-my-course-card.offline").length,d=r.find(".js-my-course-card.expire").length,u=l+c;r.find(".js-all-num").text(u).end().find(".js-online-num").text(l).end().find(".js-offline-num").text(c).end().find(".js-expire-num").text(d),a.each(n.category,(function(e,t){var a="";r.find(".js-my-course-card.cate-"+t.id+".expire").length&&(a+="expire"),r.find(".js-my-course-card.cate-"+t.id+".offline").length&&(a+=" offline"),r.find(".js-my-course-card.cate-"+t.id+".online").length&&(a+=" online"),(a.includes("online")||a.includes("offline"))&&(a+=" all"),r.find('.js-course-tag-list li[data-id="'+t.id+'"]').addClass(a)})),r.find(".js-course-tag-list").removeClass("hide"),0===u&&(r.find(".js-course-tag-list").addClass("hide"),r.find(".js-course-list .empty-view").find("p").addClass("hide").end().find(".js-all-course-info").removeClass("hide").end().removeClass("hide")),e.arena.initCountdown()}break;case"rating":if(!e.tmplStores[i])return;s=e.tmplStores[i].render({data:n}),r.html(s)}t.init()},setToBaumingInfoStore:function(t,a,o){e.student.store.bauming={uid:a,id:t},"function"==typeof o&&o()},baumingInfo:function(t,a){e.student.store.bauming={uid:a,id:t},e.modal.showBaumingInfoModal(t,a)},setApply:function(a,o){var n=function(){if(o.prop("disabled",!1),0!==this.code)switch(this.code){case 6100:e.stdErr(this),t.exe("attemptToLogin",null);break;case 7200:case 8100:case 9100:case 9101:e.showErrMsg(o.closest("form").find('input[name="user_nickname"]'),!0,e.errMsg["e"+this.code]);break;default:e.stdErr(this)}else e.stdSuccess(this),o.parents(".js-apply-box").removeClass("step-1 step-2").addClass("step-2").end().find(".has-error").removeClass("has-error").end().find(".js-apply-name").text(this.data.user_nickname).end().find('input[name="teacher_id"]').val(this.data.teacher_id)};t.yell("teacher/apply/set",a,n,n)}},t.hook("initStudent",(function(t){e.student.box=t,e.student.init(),e.notify.bind("student","learn-tab"),a(window).bind("hashchange",(function(e){var t=window.location.hash,o=a(".manage-tab-div").find('a[href="'+t+'"]');o.parent().hasClass("active")||o.click()}))})),t.hook("editStuProfile",(function(t){e.student.data.member_login?e.student.render("profile",e.student.data,"student-profile-edit"):t.prop("disabled",!0)})),t.hook("saveStuProfile",(function(t){var o=e.student.box.find(".js-member-profile-show"),n=a.trim(o.find(".js-profile-name").val()),i=a.trim(o.find(".js-profile-intro").val());if(""!==n){var r=n.replace(/\n/g,"").length,s=i.replace(/\n/g,"").length;r>100||s>100?e.modal.show({src:"message-modal",ta:"messageModal",size:"sm",header:"blue",title:"錯誤訊息",message:{content:(r>100?"姓名過長":"")+(s>100?(r>100?" 及 ":"")+"介紹過長":""),status:"error"}}):e.student.profile(!0,{name:n,intro:i})}else e.modal.show({src:"message-modal",ta:"messageModal",size:"sm",header:"blue",title:"錯誤訊息",message:{content:"姓名需填寫",status:"error"}})})),t.hook("toggleTab",(function(o){var n=o.attr("href");if(o.closest("li").addClass("active").siblings("li").removeClass("active"),a(".js-tab-content").children(".tab-pane").removeClass("active"),e.body.find(".js-learn-list").find("a.sub").removeClass("active").each((function(e){var t=new RegExp(n,"g");a(this).attr("href").match(t)&&a(this).addClass("active")})),e.student.data.member_login)switch(e.student.box.find(".js-loading").addClass("active"),e.waitFor(2).then((function(){a(".teacher-manage-content").children(".tab-pane").removeClass("active").end().find(n).addClass("active"),a("html, body").animate({scrollTop:0},0)})),window.location.hash=n,"#collect"!==n&&a(window).unbind("scroll"),"#orders"!==n&&e.redirect({path:e.win[0].location.pathname+window.location.hash}),n){case"#courses":e.notify.reset("student","course");break;case"#orders":e.waitFor(2.1).then((function(){var t=a('.my-tab[data-gene="init:setOrderTab"]').find("li.active").data("type"),o=new URLSearchParams(e.win[0].location.search),n=e.win[0].location.pathname+"?tab="+t+window.location.hash;if(o.has("action")){var i=o.get("action");n=e.win[0].location.pathname+"?tab="+t+"&action="+i+window.location.hash}e.redirect({path:n})})),e.order.order(),e.notify.reset("student","order");break;case"#wish":a(".my-wish-container").html(e.tmplStores["wish-box"].render()),t.init();break;case"#collect":var i=a(".my-collect-course");e.waitFor((function(){return i.length>0})).then((function(){t.exe("collect/my-course",i)})),e.notify.reset("student","collectCourse")}else e.student.box.find(".js-signout").addClass("active")})),t.hook("member/course",(function(t){e.member.checkUserStatus((function(){return e.student.course(t)}),null,"#mycourse")})),t.hook("mycourse/tab",(function(e){if(!e.hasClass("active")){var t=e.data("type"),o=a(".js-course-container");o.find(".js-course-tab-list li").removeClass("active").end().find(".js-course-list, .js-course-tag-list").removeClass("all online offline expire").addClass(t),e.addClass("active"),o.find(".js-course-tag-list li").removeClass("active").end().find('li[data-id="all"]').addClass("active");var n=o.find(".js-course-list .empty-view");0==e.find(".num").text()?(o.find(".js-course-tag-list").addClass("hide"),n.find("p").addClass("hide").end().find(".js-"+t+"-course-info").removeClass("hide").end().removeClass("hide")):(o.find(".js-course-tag-list").removeClass("hide"),n.addClass("hide")),o.find(".js-my-course-card").removeClass("hide")}})),t.hook("mycourse/tag",(function(e){if(!e.hasClass("active")){var t=e.data("id")||"all",o=a(".js-course-container");o.find(".js-course-tag-list li").removeClass("active"),e.addClass("active"),"all"===t?o.find(".js-my-course-card").removeClass("hide"):(o.find(".js-my-course-card").addClass("hide"),o.find(".js-my-course-card.cate-"+t).removeClass("hide"))}})),t.hook("hits/toggleCate",(function(o){var n=o.data("value"),i=e.student.box?e.student.box:a("#page");o.parents(".hit-course-title").hasClass("fixed")&&t.go2Top(),o.closest("li").toggleClass("active",!0).siblings("li").toggleClass("active",!1),i.find(".cate-all").toggleClass("hide",!0).end().find(".cate-"+n).toggleClass("hide",!1);var r=i.find(".my-course-list");r.toggleClass("hide",!1),r.each((function(){var e=a(this),t=e.find(".my-course-card:visible").length;e.toggleClass("hide",!t)})),a(".js-toolbar").removeClass("hide")})),t.hook("showBaumingInfo",(function(t){var a=t.closest(".js-my-course-card");a.length<1&&(a=t.closest(".course-cover-block__container").find(".js-my-course-card"));var o=a.data("id")||e.intro.data.id,n=a.data("uid");e.student.setToBaumingInfoStore(o,n,(function(){e.modal.showBaumingInfoModal(o,n)}))})),e.mRoute.addRoute("activity-registration-modal",(function(t){var a=parseInt(t.mpid,10),o=parseInt(t.msid,10);e.student.setToBaumingInfoStore(a,o,(function(){e.modal.showBaumingInfoModal(a,o)}))})),t.hook("initBaumingInfo",(function(a){var o=e.student.store.bauming,n=a.find(".js-iframe");e.member.checkUserStatus((function(){n.attr("src","/member/ticket/"+o.id+"/"+o.uid)}),(function(){e.modal.hide(),t.exe("attemptToLogin",null)}))})),t.hook("toTicket",(function(t){var a=e.student.store.bauming;window.open(window.location.origin+"/member/ticket/"+a.id+"/"+a.uid,"報到資訊")})),t.hook("addRating",(function(t){var a=t.data("course-id"),o=null;(e.isInPage("my-course")||e.isInPage("member"))&&(o='.js-my-course-card[data-id="'.concat(a,'"]')),e.student.setToRatingStore(e.modal.showRatingModal,o)})),e.mRoute.addRoute("add-rating-modal",(function(t){var a=null;(e.isInPage("my-course")||e.isInPage("member"))&&(a='.js-my-course-card[data-id="'.concat(t.mpid,'"]')),e.student.setToRatingStore(e.modal.showRatingModal,a)})),t.hook("ratingStar",(function(t){e.student.store.ratingScore=t.data("score")||5;var o=e.student.store.ratingScore,n=!1,i=t.find(".js-rating-star");function r(e){for(var a=1;a<=5;a+=1)a<=e?t.find(".js-rating-star[data-value=".concat(a,"]")).find(".svg-icon").addClass("icon-brand"):t.find(".js-rating-star[data-value=".concat(a,"]")).find(".svg-icon").removeClass("icon-brand")}r(o),t.on("mouseleave",(function(t){r(e.student.store.ratingScore)})),i.each((function(){a(this).on("mouseenter",(function(e){n&&(n=!1,o=0),r(o=a(this).index()+1||1)})),a(this).on("mouseleave",(function(e){n||i.each((function(){1!==a(this).data("value")&&a(this).find(".svg-icon").removeClass("icon-brand")}))})),a(this).on("click",(function(t){o=a(this).index()+1,e.student.store.ratingScore=o,n=!0}))}))})),t.hook("initRatingInfo",(function(a){e.member.current.nickname===e.member.defaultNickname&&a.addClass("no-nickname");var o=e.mRoute.currentRoute.filter((function(e){return e.includes("rating-list-modal")}))[0],n=e.parseStrToObject(o).mpid;a.find(".js-return-to-list").attr("data-courseid",n);var i=function(){this.data&&this.data[0].rating.content&&(a.find(".js-rating-comment").val(this.data[0].rating.content),a.find(".js-rating-comment").change())};t.yell("rating/one",{id:ratingID},i,i)})),t.hook("setRating",(function(t){var a=e.mRoute.currentRoute.filter((function(e){return e.includes("add-rating-modal")}))[0],o=e.parseStrToObject(a).mpid,n=e.parseStrToObject(a).msid,i=t.closest(".js-add-rating-modal"),r=e.student.store.ratingScore,s=i.find(".js-rating-comment").val(),l={id:n,course_id:o,score:parseInt(r),content:s};if(i.hasClass("no-nickname")){var c=i.find('input[name="nickname"]').val();if(c.length<=0)return void e.showErrMsg(i.find('input[name="nickname"]'),!0,"請輸入暱稱");e.member.current.nickname=c,e.member.setHtml(),e.student.rating(b(b({},l),{},{nickname:c}))}else e.student.rating(l)})),t.hook("setWish",(function(t){var o=t.closest(".my-wish-form"),n=o.find(".courseName").val(),i=o.find(".teacherName").val(),r=o.find(".descript").val(),s=o.find(".price").val();if(!a.validatr.validateForm(o))return!1;e.student.wish(o,{courseName:n,teacherName:i,description:r,price:s})})),t.hook("reWish",(function(o){a(".my-wish-container").html(e.tmplStores["wish-box"].render()),t.init()})),t.hook("apply/updateType",(function(e){var t="company"===e.val();e.parents(".type-form-group").toggleClass("company",t)})),t.hook("apply/init",(function(o){var n=function(){if(0!==this.code)switch(this.code){case 6100:e.stdErr(this),t.exe("attemptToLogin",null);break;case 7200:e.showErrMsg(btn.closest("form").find('input[name="nickname"]'),!0,e.errMsg["e"+this.code]);break;default:e.stdErr(this)}else e.stdSuccess(this),o.removeClass("step-1 step-2"),0===this.data.teacher_id?o.addClass("step-1"):o.addClass("step-2"),a(".js-apply-teacher-header").html(e.tmplStores["apply-header"].render({data:this.data})),a(".js-apply-teacher-form").html(e.tmplStores["apply-form"].render({data:this.data})),t.init()};t.yell("teacher/apply/get",{},n,n)})),t.hook("apply/set",(function(t){var o=t.closest("form");if(o.find("input").each((function(){a(this).val()===a(this).attr("placeholder")&&a(this).val("")})),!a.validatr.validateForm(o))return!1;var n=o.find('input[name="type"]:checked').val(),i=o.find('input[name="taxID"]').val();if("company"===n&&""===i)return o.find(".type-form-group").addClass("has-error"),!1;e.progressingBtn(t),e.student.setApply(o.serialize(),t)})),t.hook("apply/edit",(function(e){e.parents(".js-apply-box").removeClass("step-1 step-2").addClass("step-1")})),t.hook("exportExcel",(function(e){var t=e.data("uri");window.open(t,"_blank")})),t.hook("student/loadNameList",(function(o){var n={container:null,paginationNode:null,tableNode:null,currentPage:1,totalPages:[],init:function(e){var t=this;t.container=e,t.paginationNode=e.find(".js-student-manage-pagination"),t.tableNode=e.find(".js-student-manage-table"),t.loadPage(1,"initialize")},setupPagination:function(a){for(var o=this,n=[],i=1;i<=a;i++)n.push(i);function r(){o.paginationNode.removeClass("is--error")}function s(){o.paginationNode.addClass("is--error"),window.setTimeout((function(){r()}),2e3)}e.waitFor((function(){return!0===e.icon.iconLoaded})).then((function(){var e='<svg class="svg-icon left_arrow_new" viewBox="'.concat(t.iconStore.left_arrow_new.viewBox,'">').concat(t.iconStore.left_arrow_new.svg,"</svg>"),i='<svg class="svg-icon right_arrow_new" viewBox="'.concat(t.iconStore.right_arrow_new.viewBox,'">').concat(t.iconStore.right_arrow_new.svg,"</svg>"),l='<svg class="svg-icon more_vert" viewBox="'.concat(t.iconStore.more_vert.viewBox,'">').concat(t.iconStore.more_vert.svg,"</svg>"),c={dataSource:n,pageSize:20,prevText:e,nextText:i,ellipsisText:l,showGoInput:!0,showGoButton:!0,beforeGoButtonOnClick:function(e,t){t<1||t>Math.ceil(a/20)?s():(r(),o.turnPage(t))},beforeGoInputOnEnter:function(e,t){t<1||t>Math.ceil(a/20)?s():(r(),o.turnPage(t))},beforePageOnClick:function(e,t){o.turnPage(t)},beforeNextOnClick:function(e,t){o.turnPage(t)},beforePreviousOnClick:function(e,t){o.turnPage(t)}};o.paginationNode.pagination(c)}))},showEmpty:function(){a(".js-manage-student-list").addClass("hidden"),a(".js-student-empty").removeClass("hidden")},showLoading:function(){a(".js-manage-student-list").addClass("hidden"),a(".js-loading").removeClass("hidden")},stopLoading:function(){a(".js-manage-student-list").removeClass("hidden"),a(".js-loading").addClass("hidden")},clearTable:function(){this.tableNode.find("tbody").html("")},renderTable:function(t){var a=this;e.waitFor((function(){return e.isValid(e.tmplStores["class-student-table"])})).then((function(){var o=e.tmplStores["class-student-table"].render({data:t});a.tableNode.find("tbody").append(o)}))},loadPage:function(o,n){var i=this;i.showLoading();var r=function(){if(i.stopLoading(),0!==this.code)6100===this.code?t.exe("attemptToLogin",null):e.stdErr(this);else{var o=this.data,r=o.data,s=o.total;if(!r.length)return i.showEmpty(),void a(".js-export-btn").attr("disabled",!0).addClass("btn-disable");i.renderTable(r),"initialize"===n&&(a(".js-export-btn").attr("disabled",!1).removeClass("btn-disable"),i.totalResult=s,i.setupPagination(s),e.waitFor((function(){return e.isValid(a(".js-student-total"))})).then((function(){a(".js-student-total").text(s)})))}};t.yell("member/lotStudents",{id:a("#courseID").val(),page:o},r,r)},turnPage:function(e){this.clearTable(),this.loadPage(e)}};n.init(o)}))}(app,gee,v),a(79149),a(68234),a(43208),a(62038),a(44120),a(65770),a(42800),a(10126),a(67166),a(84832),a(66930),a(72676),a(46164);var y=a(31175);function k(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const C=function(){function e(t){var a=t.root,o=t.catelist,n=t.renderSubBox,i=t.onChange,r=t.iconMode;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var s=this;s.root=a,s.catelist=o,s.renderSubBox=n||null,s.onChange=i||null,s.iconMode=r||!0,s.root.on("click",(function(e){var t=y(e.target).closest(".category__box").length>0?y(e.target).closest(".category__box"):null;if(t){var a=t.data("id");s.showMainCate(a),"function"==typeof s.onChange&&i()}}))}var t,a;return t=e,(a=[{key:"getCateList",value:function(){var e=this.catelist;return new Promise((function(t,a){app.waitFor((function(){return void 0!==e})).then((function(){t(e)}))}))}},{key:"renderRoot",value:function(e,t){this.root.html(e.render({})),gee.init()}},{key:"render",value:function(){var e=this;y.when(app.arena.getTemplate("category-selector"),app.arena.checkIconReady()).then((function(t,a,o){e.renderRoot(t)}))}},{key:"showMainCate",value:function(e){var t=this,a=t.root.find('.category__box[data-id="'.concat(e,'"]'));t.root.find(".category__box").each((function(){y(this).removeClass("active")})),a.addClass("active"),t.root.find(".category__sub").html(t.generateSubCates(t.getCurrentSubCate(e)))}},{key:"getCurrentSubCate",value:function(e){return this.catelist.find((function(t){return parseInt(t.categoryID)===e})).subCategory}},{key:"generateSubCates",value:function(e){var t=this;return e.reduce((function(e,a){return e+(t.renderSubBox?t.renderSubBox(a):'\n                        <div class="sub__box '.concat(t.subBoxClass,'" id="').concat(a.categoryID,'">\n                            ').concat(a.category,"\n                        </div>\n                    "))}),"")}}])&&k(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();var x=a(31175);!function(e,t,a){e.profile={currentPosition:"account-accountInfo",box:void 0,currentMQIProgress:0,postProfile:function(a){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=function(){if(0!==this.code)6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this);else{if(e.job.userJobList&&0!==e.job.userJobList.length&&this.data&&this.data.nextStep)return void e.job[this.data.nextStep]();o&&e.arena.saveNotice.show()}};t.yell("member/setProfile",a,n,n)},profileForm:{form:null,tempArea:"臺灣",tempCounty:"",tempDistrict:"",tempZipcode:"",twzipcode:"",addressSelector:null,init:function(t){var o=this;o.form=t,o.addressSelector=new r(o.form.find(".js-address-selector"),{nationality:e.member.detail.nationality,city:e.member.detail.city,district:e.member.detail.district,zipcode:e.member.detail.zip,address:e.member.detail.address}),o.addressSelector.init(),o.initSexSelector(),o.form.find(".account--send-button").on("click",(function(e){e.preventDefault(),o.validateForm()&&(o.form.find(".has-error").each((function(){a(this).removeClass("has-error")})),o.updateProfile())}))},initSexSelector:function(){var e=this.form.find(".js-gender-selector");e.find(".gender-selector__option").each((function(){a(this).on("click",(function(){["s--male","s--female","s--diverse"].map((function(t){e.hasClass(t)&&e.removeClass(t)}));var t=a(this).attr("data-value");e.addClass("s--".concat(t))}))}))},validateForm:function(){var t=[],o=this;return o.form.find('input[data-required="true"]').each((function(){a(this).val().length<=0?(e.showErrMsg(a(this),!0,a(this).attr("placeholder")),t.push(!1)):t.push(!0)})),o.addressSelector.notComplete()&&(o.addressSelector.showError(),t.push(!1)),e.profile.profileForm.getBirthday()?t.push(!0):(e.showErrMsg(a(".c-date-selector"),!0,"請輸入生日"),t.push(!1)),t.every((function(e){return!0===e}))},updateProfile:function(){var t=this.form,a=(this.tempArea,this.tempCounty,this.tempDistrict,this.addressSelector);if(this.validateForm()){var o=a.getValue(),n={nickname:t.find('input[name="nickname"]').val(),name:t.find('input[name="name"]').val(),sex:this.getSex(),birthday:this.getBirthday(),tel:t.find('input[name="tel"]').val(),nationality:o.nationality,city:o.city,district:o.district,zip:o.zip,address:o.address};if(e.member.current.nickname=this.form.find('input[name="nickname"]').val(),e.member.setHtml(),e.ifLastUserExists()){var i=e.updateLastUser("username",e.member.current.nickname);e.setLastUserToCookie(i)}e.profile.postProfile(n,!0)}},getSex:function(){var e=this.form.find(".c-gender-selector");return e.hasClass("s--male")?1:e.hasClass("s--female")?2:e.hasClass("s--diverse")?3:void 0},getBirthday:function(){var e;return this.form.find(".c-date-selector").attr("data-value").split("-").forEach((function(t){e="0000"!==t&&"00"!==t})),!!e&&this.form.find(".c-date-selector").attr("data-value")}},jobForm:{root:null,optionClass:{student:"s--student",work:"s--work"},current:{identity:"",job:""},result:{identity:"",job:""},init:function(t,o){var n=this;n.root=t,n.current=o,n.root.addClass(n.optionClass[n.current.identity]),"work"===n.current.identity&&n.root.find(".js-job-select").val(n.current.job),n.root.on("click",(function(e){a(e.target).closest(".js-identity-option").length>0&&n.selectIdentity(a(e.target).closest(".js-identity-option").data("value"))})),n.root.find(".js-job-select").on("change",(function(t){"0"===a(this).val()?e.showErrMsg(a(this),!0,"請選擇一個職業類別"):(n.selectJob(a(this).val()),n.result.identity=n.current.identity,n.result.job=n.current.job,e.profile.postProfile(n.result))}))},selectIdentity:function(t){var a=this;a.clear(),a.current.identity=t,a.root.addClass(a.optionClass[t]),"student"===a.current.identity&&(a.result.identity=a.current.identity,e.profile.postProfile(a.result))},selectJob:function(e){this.current.job=e},clear:function(){var e=this;for(var t in e.optionClass)e.root.removeClass(e.optionClass[t])}},interestForm:{form:void 0,cateList:{},memberInterest:[],tempInterest:[],customInterest:[],box:void 0,inputBox:void 0,currentInput:void 0,customInput:void 0,customInputValue:"",emptyBtn:void 0,categorySelector:void 0,init:function(o){var n=this;n.form=o,n.tempInterest=e.member.detail.interest?JSON.parse(JSON.stringify(e.member.detail.interest)):[],n.customInterest=e.member.detail.customInterest?e.member.detail.customInterest.split(",").filter(Boolean):[],n.mainCateBox=n.form.find(".category__main"),n.inputBox=n.form.find(".js-interest-input"),n.customInput=n.form.find(".js-custom-input"),n.saveBtn=n.form.find(".js-interest-save"),n.customInputBtn=n.form.find(".js-add-custom-btn"),n.categorySelector=new C({root:n.form.find(".js-category-selector-root"),catelist:e.profile.interestForm.cateList,mainBoxClass:"category__main",renderSubBox:function(e){return'\n                            <div class="sub__box category__capsule js-sub-cate" data-id="'.concat(e.categoryID,'">\n                                <button>\n                                    <svg class="svg-icon check" viewBox="').concat(t.iconStore.check.viewBox,'">').concat(t.iconStore.check.svg,"</svg>\n                                </button>\n                                <span>").concat(e.category,"</span>\n                            </div>\n                            ")},onChange:e.profile.interestForm.updateSubCate,iconMode:!0}),n.categorySelector.showMainCate(71),n.updateSubCate(),n.customInterest.forEach((function(e){n.renderInput(e)})),setTimeout((function(){n.tempInterest.forEach((function(e){n.addCateClass(e.categoryID)}))}),100),n.form.on("click",(function(e){var t=a(e.target),o=t.closest(".js-sub-cate"),i=t.closest(".js-sub-cate").data("id");void 0!==i&&(n.isAddedToInterests(i)?(o.removeClass("active"),n.deleteFromInterest(i)):(n.addToInterest(o,i),n.addCateClass(i)));var r=t.closest(".js-interest-input"),s=r.data("id");if(void 0!==s){if(0===s){var l=t.parent().find("span").text().slice(1);n.deleteFromCustomInterest(l)}else n.deleteFromInterest(s);r.remove()}})),n.customInputBtn.on("click",(function(){n.addToCustomInterest()})),n.customInput.on("keypress",(function(e){13===e.keyCode&&(e.preventDefault(),n.addToCustomInterest())})),n.saveBtn.on("click",(function(){n.updateInterest()}))},addCateClass:function(e){var t=this.getCurrentCate(e).categoryIcon;this.form.find("#category__main").addClass(t)},removeFromCateClass:function(e){var t=this.getCurrentCate(e).categoryIcon;this.form.find("#category__main").removeClass(t)},getCurrentCate:function(e){var t=this,a=null,o=t.cateList.find((function(a){return t.isEqualId(a.categoryID,e)}));if(void 0!==o)a=o;else{var n=void 0;t.cateList.forEach((function(t){t.subCategory.forEach((function(a){parseInt(a.categoryID,10)===parseInt(e,10)&&(n=t)}))})),a=n}return a},updateSubCate:function(){var t=e.profile.interestForm;t.tempInterest.forEach((function(e){t.form.find('.js-sub-cate[data-id="'.concat(e.categoryID,'"]')).addClass("active")}))},isEqualId:function(e,t){return parseInt(e,10)===parseInt(t,10)},renderInput:function(o,n){var i=0,r=this;function s(){var e=t.iconStore.check;return'\n                            <div class="sub__box category__capsule adding active js-interest-input" data-id="'.concat(i,'">\n                                <button>\n                                    <svg class="svg-icon check" viewBox="').concat(e.viewBox,'">').concat(e.svg,'</svg>        \n                                </button>\n                                <span class="js-interest-capsule">').concat(o,"</span>\n                            </div>\n                        ")}n&&(i=n),e.icon.iconLoaded?(r.inputBox.append(s()),a(".adding .js-interest-capsule").text("".concat(0===i?"*":"").concat(o)),a(".adding").removeClass("adding")):a.when(e.arena.checkIconReady()).done((function(){r.inputBox.append(s()),a(".adding .js-interest-capsule").text("".concat(0===i?"*":"").concat(o)),a(".adding").removeClass("adding")}))},addToInterest:function(e,t){e.addClass("active"),this.pushToInterest(e.find("span").text(),t)},addToCustomInterest:function(){var e=this,t=e.customInput.val().trim().replace(/[^\u4e00-\u9fa5a-zA-Z0-9]/gi,"");t.length<=0||(e.renderInput(t),e.customInterest.push(t),e.customInput.val(""))},isAddedToInterests:function(e){var t=this;return void 0!==t.tempInterest.find((function(a){return t.isEqualId(a.categoryID,e)}))},pushToInterest:function(e,t){this.tempInterest.push({category:e,categoryID:t})},deleteFromInterest:function(e){var t=this;t.tempInterest.forEach((function(a,o){t.isEqualId(a.categoryID,e)&&t.tempInterest.splice(o,1)})),t.inputBox.find('.category__capsule[data-id="'.concat(e,'"]')).remove(),t.form.find('.js-sub-cate[data-id="'.concat(e,'"]')).removeClass("active");var a=[];t.tempInterest.forEach((function(e){a.push(t.getCurrentCate(e.categoryID))})),t.cateList.forEach((function(e){a.includes(e)||t.form.find(".category__main").removeClass(e.categoryIcon)}))},deleteFromCustomInterest:function(e){var t=this;t.customInterest.forEach((function(a,o){a===e&&t.customInterest.splice(o,1)}))},formResult:function(e){return e.map((function(e){return void 0!==e.categoryID?e.categoryID:e})).join(",")},updateInterest:function(){var t=this,a={interest:t.formResult(t.tempInterest),customInterest:t.formResult(t.customInterest)};e.profile.postProfile(a,!1),e.body.trigger("interestUpdated",[{interest:t.tempInterest,customInterest:t.formResult(t.customInterest)}]),e.modal.hide()}},desktopPanel:{root:void 0,buttons:void 0,init:function(e){this.root=e,this.buttons=e.find(".js-toggleTab-container").find(".account-infobar-desktop__item")},moveActive:function(e){this.buttons.each((function(){a(this).removeClass("active"),parseInt(a(this).attr("data-order"))===e&&a(this).addClass("active")}))},highlightActive:function(e,t){for(var o in t)if(a(window).scrollTop()+a(window).height()>=a(document).height())this.moveActive(6);else if(e>t[o].offsetHeight&&e<=t[o].offsetHeight+t[o].height+100){var n=parseInt(t[o].node.attr("data-order"));this.moveActive(n)}}},mobilePanel:{root:void 0,config:{startPoint:0,step:0},mask:void 0,buttons:void 0,setPanelConfig:function(){function e(e,t){return{startPoint:e,step:t}}window.innerWidth>567&&window.innerWidth<=1040?this.config=e(36,100):window.innerWidth>320?this.config=e(16,60):this.config=e(11,50)},init:function(e){if(!(window.innerWidth>1040)){var t=this;t.root=e,t.mask=e.children(".js-mask"),t.buttons=e.find(".js-button"),t.setPanelConfig()}},showPanel:function(){window.pageYOffset<a(".account__avatar").offset().top+a(".account__avatar").height()-80?a(".account-infobar-pad").removeClass("active"):a(".account-infobar-pad").addClass("active")},moveMaskTo:function(e){var t=this;1===e?t.mask.css({transform:"translateX(".concat(t.config.startPoint,"px)")}):t.mask.css({transform:"translateX(".concat(t.config.startPoint+t.config.step*(e-1),"px)")}),t.getActiveButton(e)},highlightActive:function(e,t){for(var o in t)if(a(window).scrollTop()+a(window).height()>=a(document).height())this.moveMaskTo(6);else if(e>t[o].offsetHeight&&e<=t[o].offsetHeight+t[o].height+80){var n=parseInt(t[o].node.attr("data-order"));this.moveMaskTo(n)}},getActiveButton:function(e){this.buttons.each((function(){a(this).removeClass("active"),parseInt(a(this).attr("data-order"))===e&&a(this).addClass("active")}))}},getProfile:function(a){e.member.checkUserStatus((function(){var o=function(){0!==this.code?e.stdErr(this):(e.stdSuccess(this),e.member.detail=this.data,e.member.detail.nickname=e.member.current.nickname,e.member.detail.customInterest||(e.member.detail.customInterest=""),e.member.detail.name&&e.member.detail.name.length>18&&(e.member.detail.name=""),"function"==typeof a&&a(),e.job.userJobList&&e.job.ifJobExist("MQI")&&(e.profile.currentMQIProgress=e.job.convertProgress(e.job.getJob("MQI").completeness)),e.member.setHtml(),t.event.fire("app.memberDetailLoaded"))};t.yell("member/detail",{},o,o)}))},renderSingleForm:function(t,a,o){var n=t.find("#".concat(a)).find(".js-content");n.html("");var i=o,r=e.tmplStores[a].render({data:i});n.append(r)},renderAccountForm:function(){e.profile.renderSingleForm(e.profile.box,"account-accountInfo",{fb_connected:e.member.detail.fb_connected,fb_nickname:e.member.detail.fb_nickname,google_connected:e.member.detail.google_connected,google_nickname:e.member.detail.google_nickname,account:e.member.detail.account,nickname:e.member.current.nickname}),e.member.setHtml()},renderMailForm:function(){e.profile.renderSingleForm(e.profile.box,"account-email",{verified:e.member.detail.verify,email:e.member.detail.email})},renderJobForm:function(){e.profile.renderSingleForm(e.profile.box,"account-job",{jobList:e.member.detail.jobList,job:e.member.detail.job,identity:e.member.detail.identity})},renderProfileForm:function(){e.profile.renderSingleForm(e.profile.box,"account-personalInfo",{nickname:e.member.current.nickname,intro:e.member.detail.intro,name:e.member.detail.name,sex:e.member.detail.sex,birthday:e.member.detail.birthday,tel:e.member.detail.tel,nationality:e.member.detail.nationality,city:e.member.detail.city,zip:e.member.detail.zip,address:e.member.detail.address})},renderInterestForm:function(){e.profile.interestForm.cateList=JSON.parse(JSON.stringify(e.member.detail.cateList));var t=e.profile.interestForm.cateList;for(var a in t)switch(t[a].categoryID){case"67":t[a].categoryIcon="business";break;case"68":t[a].categoryIcon="design";break;case"69":t[a].categoryIcon="technology";break;case"70":t[a].categoryIcon="language";break;case"71":t[a].categoryIcon="life"}e.profile.renderSingleForm(e.profile.box,"account-interest",{cateList:e.profile.interestForm.cateList})},renderAllForms:function(){var o=e.profile;o.renderAccountForm(),o.renderMailForm(),o.renderSingleForm(e.profile.box,"account-edmSetting",{edm:e.member.detail.emailSubscription.edm,promotion:e.member.detail.emailSubscription.promotion,system:e.member.detail.emailSubscription.system}),o.renderJobForm(),o.renderProfileForm(),o.renderInterestForm(),a(".js-send-button").each((function(){a(this).removeClass("hidden")}));var n=a(".js-account-content").find(".bs-tip-show-icon");n.each((function(){window.innerWidth>1040?a(this).on("mouseenter",(function(e){e.stopPropagation(),a(this).tooltip("show")})):a(this).parent().on("touchstart",(function(e){e.stopPropagation(),e.preventDefault(),a(this).find(".bs-tip-show-icon").tooltip("show")}))})),a(document).on("touchstart",(function(e){a(e.target).children(".bs-tip-show-icon").length<=0&&n.each((function(){a(this).tooltip("hide")}))})),t.init();var i={info:{node:e.profile.box.find("#account-accountInfo")},email:{node:e.profile.box.find("#account-email")},edmSetting:{node:e.profile.box.find("#account-edmSetting")},personalInfo:{node:e.profile.box.find("#account-personalInfo")},job:{node:e.profile.box.find("#account-job")},interest:{node:e.profile.box.find("#account-interest")}};e.waitFor((function(){return a(".done").length===Object.keys(i).length})).then((function(){for(var t in i)i[t].offsetHeight=i[t].node.offset().top,i[t].height=i[t].node.height();var o;window.pageYOffset,(o=window.innerWidth>1040?e.profile.desktopPanel:e.profile.mobilePanel).highlightActive(i),o===e.profile.mobilePanel?(o.showPanel(),o.moveMaskTo(1),a(window).scroll((function(){o.showPanel();var e=window.pageYOffset+2*a(window).height()/5;o.highlightActive(e,i)}))):a(window).scroll((function(){var e=window.pageYOffset+a(window).height()/3;o.highlightActive(e,i)}))}))},updatePassword:function(o,n){var i=function(){if(n.prop("disabled",!1),0!==this.code)switch(this.code){case 8204:e.showErrMsg(n.closest("form").find('input[name="password_old"]'),!0,e.errMsg["e"+this.code]);break;case 8206:e.showErrMsg(n.closest("form").find('input[name="password_again"]'),!0,"與上述密碼不符，請重新輸入");break;case 8212:case 8213:e.showErrMsg(n.closest("form").find('input[name="password"], input[name="password_again"]'),!0,e.errMsg["e"+this.code]);break;case 8100:case 8205:case 9100:e.showErrMsg(n.closest("form").find('input[name="password"]'),!0,e.errMsg["e"+this.code]);break;case 6100:e.stdErr(this),t.exe("attemptToLogin",null);break;default:e.stdErr(this)}else e.stdSuccess(this),e.isInPage("member/resetPassword")?window.location.pathname="/home":(e.modal.hide(),"#show-change-password"===window.location.hash&&(history.replaceState(null,null,"/account"),a("#v2Modal").find(".modal-close-btn").show()))};t.yell("member/changePassword",o,i,i)},setEmail:function(o,n){var i=function(){if(0!==this.code)switch(this.code){case 8202:case 8203:e.showErrMsg(n.closest("form").find('input[name="email"]'),!0,e.errMsg["e"+this.code]),e.arena.stopLoadingBtn(n),e.member.newPswReceiver!=e.member.current.email&&(e.member.newPswReceiver=e.member.current.email);break;case 6100:e.stdErr(this),t.exe("attemptToLogin",null);break;default:e.stdErr(this)}else e.member.newPswReceiver&&(e.member.current.email=e.member.newPswReceiver),e.stdSuccess(this),e.modal.showValidationModal("success"),a(".js-notification--email-not-validated, .js-notification--no-email").length>0&&a(".js-notification--email-not-validated, .js-notification--no-email").remove(),e.isInPage("account")&&(e.member.detail.verify=!1,e.member.detail.email=e.member.current.email,e.profile.renderMailForm())};t.yell("member/changeEmail",o,i,i)}},t.hook("toggleAccountTab",(function(t){var o={accountInfo:{node:e.profile.box.find("#account-accountInfo")},email:{node:e.profile.box.find("#account-email")},edmSetting:{node:e.profile.box.find("#account-edmSetting")},personalInfo:{node:e.profile.box.find("#account-personalInfo")},job:{node:e.profile.box.find("#account-job")},interest:{node:e.profile.box.find("#account-interest")}};e.waitFor((function(){return a(".done").length===Object.keys(o).length})).then((function(){for(var e in o)o[e].offsetHeight=o[e].node.offset().top,o[e].height=o[e].node.height();var n=t.attr("href").replace("#account-",""),i=window.innerWidth>1040?a(window).height()/4:a(window).height()/3;a("html, body").stop().animate({scrollTop:o[n].offsetHeight-i},700)}))})),t.hook("toggleSubscription",(function(e){var o=a(event.target),n=e.data("status");if(o.hasClass("js-toggle")){n="on"===n?"off":"on",e.removeClass("is--on is--off"),e.addClass("is--".concat(n)),e.data("status",n);var i=function(){};t.yell("member/subscribe",{type:"promotion"},i,i)}})),t.hook("disconnectFB",(function(o){o.prop("disabled",!0);var n=function(){if(o.prop("disabled",!1),0!==this.code)switch(this.code){case 6100:case 9101:break;default:e.stdErr(this)}else e.stdSuccess(this),a(".js-sns-box").removeClass("fb-connected"),e.modal.hide(),e.arena.saveNotice.show()};t.yell("member/fb_disconnect",{},n,n)})),t.hook("connectThirdParty",(function(t){e.member.connectThirdParty(t.data("type"))})),t.hook("disconnectThirdParty",(function(t){e.member.disconnectThirdParty(t.data("type"))})),t.hook("profile/init",(function(o){e.profile.box=a(".js-account-content"),e.profile.getProfile(e.profile.renderAllForms),"#show-change-password"===window.location.hash&&t.event.subscribe("app.modalInit",(function(){t.exe("showChangePasswordModal"),a("#v2Modal").find(".modal-close-btn").hide()})),a(document).on("job/progressUpdated",(function(){var t=e.job.convertProgress(e.job.getJob("MQI").completeness),a="",o=4-t.filter((function(e){return"1"===e})).length;o<=0||(t.forEach((function(o,n){if(t[n]!==e.profile.currentMQIProgress[n])switch(n){case 0:a="信箱認證";break;case 1:a="個人檔案";break;case 2:a="我的身份";break;case 3:a="我的興趣"}})),e.arena.saveNotice.show("完成「".concat(a,"」了！<br>還有 ").concat(o," 個步驟唷！")))}))})),t.hook("initDesktopPanel",(function(t){e.profile.desktopPanel.init(t)})),t.hook("account/initMobilePanel",(function(t){e.profile.mobilePanel.init(t.find(".account-infobar-pad__panel"))})),t.hook("account/initDateSelector",(function(a){var o=(new Date).getFullYear(),n=a.find(".js-year"),i=a.find(".js-month"),r=a.find(".js-day"),s=!1,l='<option value="0">00</option>',c={1:[31],2:[28,29],3:[31],4:[30],5:[31],6:[30],7:[31],8:[31],9:[30],10:[31],11:[30],12:[31]};function d(e,t){for(var a=e;a>=e-t;a--)n.append('<option value="'.concat(a,'">').concat(a,"</option>"))}function u(e){for(var t in i.html(""),i.append(l),e)i.append('<option value="'.concat(t,'">').concat(t,"</option>"))}function m(e){r.html(""),r.append(l);for(var t=1;t<=e;t++)r.append('<option value="'.concat(t,'">').concat(t,"</option>"))}function h(e){return e%4==0&&e%100!=0||e%400==0}function p(){if(e.member.detail.birthday){var t={year:e.member.detail.birthday.split("-")[0],month:a(e.member.detail.birthday.split("-")[1]),date:a(e.member.detail.birthday.split("-")[2])};t.year&&n.find("option[value=".concat(t.year,"]")).prop("selected",!0),t.month&&i.find("option[value=".concat(t.month,"]")).prop("selected",!0),t.date&&(h(t.year)&&2===t.month?m(29):h(t.year)||2!==t.month?m(c[t.month][0]):m(28),r.find("option[value=".concat(t.date,"]")).prop("selected",!0)),n.attr("disabled",!0),i.attr("disabled",!0),r.attr("disabled",!0)}function a(e){return 0===parseInt(e.split("")[0])?e.split("")[1]:e}}e.member.detail?(d(o,70),u(c),p()):t.event.subscribe("app.memberDetailLoaded",(function(){d(o,70),u(c),p()}));var f=a.attr("data-value")?a.attr("data-value").split("-"):"0000-00-00".split("-");n.on("change",(function(){s=h(n.val()),f[0]=n.val(),a.attr("data-value",f.join("-"))})),i.on("change",(function(){"2"===i.val()&&!0===s?m(29):"2"===i.val()&&!1===s?m(28):m(c[i.val()][0]),f[1]=e.padZero(i.val()),a.attr("data-value",f.join("-"))})),r.on("change",(function(){f[2]=e.padZero(r.val()),a.attr("data-value",f.join("-"))}))})),t.hook("account/initJobForm",(function(t){var a={identity:e.member.detail.identity?e.member.detail.identity:"work",job:e.member.detail.job?e.member.detail.job:"0"};e.profile.jobForm.init(t,a)})),t.hook("account/initProfileForm",(function(a){e.member.detail?e.profile.profileForm.init(a):t.event.subscribe("app.memberDetailLoaded",(function(){e.profile.profileForm.init(a)}))})),t.hook("setEmail",(function(t){var o=t.data("ta")?a("#"+t.data("ta")):t.closest("form");if(o.find('input[name="email"]').val().length<=0)return e.showErrMsg(o.find('input[name="email"]'),!0,"輸入電子郵件地址"),!1;if(!a.validatr.validateForm(o))return e.showErrMsg(o.find('input[name="email"]'),!0,"電子郵件地址格式錯誤，請重新輸入"),!1;if(e.member.newPswReceiver=o.find('input[name="email"]').val(),e.arena.showLoadingBtn(t),e.member.newPswReceiver!==e.member.current.email){var n=o.serialize()+"&userID=".concat(e.member.current.userID);e.profile.setEmail(n,t)}else{var i=o.serialize();!1===e.member.current.isLogin&&(i+="&userID=".concat(e.member.current.userID)),e.member.resend(i,t)}})),t.hook("changePassword",(function(t){var o=t.closest("form"),n=!0;if(!a.validatr.validateForm(o))return o.find("input").each((function(){a(this).val()===a(this).attr("placeholder")&&a(this).val(""),""===a(this).val()?(e.showErrMsg(a(this),!0,a(this).attr("data-msg")),n=!1):"pw"===a(this).data("type")&&(e.showErrMsg(a(this),o.find('input[name="password"]').isPasswdErr(),"密碼請混合使用 8 到 32 英文數字"),n=!1)})),!1;if(o.find('input[name="password_again"]')&&(e.member.confirmPassword(o)||(e.showErrMsg(o.find('input[name="password_again"]'),!0,"與上述密碼不符，請重新輸入"),n=!1,e.isInPage("member/resetPassword")||(n=!0))),n){e.progressingBtn(t);var i=o.serialize();!0===t.data("forget")&&(i+="&forget=true"),e.profile.updatePassword(i,t)}})),t.hook("changeColorOnFocus",(function(e){"focus"===window.event.type?e.parent().find("svg").addClass("icon-brand"):e.parent().find("svg").removeClass("icon-brand")})),t.hook("initInterestModal",(function(t){e.profile.interestForm.init(a(".js-add-interest-modal"))})),t.hook("initInterestForm",(function(o){function n(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a="";return e.forEach((function(e){a+='<div class="c-capsule c-capsule--red js-open-interest-modal added">\n                        '.concat(!0===t?"*":"").concat(!0===t?e:e.category,"\n                    </div>")})),a}var i=o.find(".js-category-input");i.append(n(e.member.detail.customInterest.split(",").filter((function(e){return Boolean(e)})),!0)),i.append(n(e.member.detail.interest)),e.body.on("interestUpdated",(function(t,o){var r=o.interest,s=o.customInterest;e.member.detail.interest=r,e.member.detail.customInterest=s,i.find(".added").each((function(){a(this).remove()})),i.append(n(s.split(",").filter((function(e){return Boolean(e)})),!0)),i.append(n(r))})),i.on("click",(function(e){a(e.target).hasClass("js-open-interest-modal")&&t.exe("showAddInterestModal",null)}))})),e.mRoute.addRoute("validate-email-modal",(function(){e.modal.showValidationModal("validation")}))}(app,gee,x),a(96501),a(58418),a(70259);var j=a(31175);function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){e.home={campaign:void 0,fundraising:void 0,hot:void 0,like:void 0,free:void 0,offline:void 0,version:["A","B"],currentVersion:null,campaignBlock:{tmpl:"event-course-card",root:void 0,link:void 0,sliderContainer:void 0,tabs:[],currentTab:void 0,init:function(o){var n=this;n.root=o,n.sliderContainer=n.root.find(".js-campaign-slider"),n.panel=n.root.find(".js-campaign-panel");var i=window.innerWidth>1040?4:3,r=0,s="left_arrow_new",l="right_arrow_new",c='<button class=\'slick-prev pull-left js-arrow\' data-direction="Left"><svg class="svg-icon '.concat(s,'" viewBox="').concat(t.iconStore[s].viewBox,'">').concat(t.iconStore[s].svg,"</svg></button>"),d='<button class=\'slick-next pull-left js-arrow\' data-direction="Right"><svg class="svg-icon '.concat(l,'" viewBox="').concat(t.iconStore[l].viewBox,'">').concat(t.iconStore[l].svg,"</svg></button>"),u=function(o){n.panel.append('\n                        <div \n                            class="c-panel__tab js-campaign-title '.concat(0===r?"current":"",'"\n                            data-campaignID="').concat(e.home.campaign[o].campaignID,'"\n                            data-page="').concat(r,'"\n                        >\n                            ').concat(e.home.campaign[o].shortTitle,"\n                        </div>               \n                    ")),0===r&&n.setLink(e.home.campaign[o].campaignID),n.sliderContainer.append('\n                        <div \n                            class="js-slick '.concat(0===r?"current":"",'"\n                            data-tmpl="event-course-card"\n                            data-config="{1040:3:4},{568:2:3}"\n                            data-which="GA"\n                            data-type="campaign"\n                            data-label="Slider/campaign/').concat(e.home.campaign[o].campaignID,'"\n                            data-campaignID="').concat(e.home.campaign[o].campaignID,'"\n                            data-sliderPage="').concat(r,'">\n                        </div> \n                    ')),r++;var s=e.arena.sortArrayAndPadRandomly(e.home.campaign[o].result);window.innerWidth>768?n.root.find('.js-slick[data-campaignID="'.concat(e.home.campaign[o].campaignID,'"]')).each((function(){var t,o="";s.forEach((function(t,a){o+='<div class="slider--wrapper" data-order="'.concat(a,'">').concat(e.tmplStores["event-course-card"].render({data:[t]}),"</div>")}));var n=Math.ceil(s.length/i),r=i*n-s.length;r>0&&(o+='<div class="pad-card slider--wrapper"></div>'.repeat(r));var l=(S(t={infinite:!0,slidesToShow:4,slidesToScroll:4,variableWidth:!0,useTransform:!1},"useTransform",!1),S(t,"prevArrow",c),S(t,"nextArrow",d),t);a(this).append(o),a(this).slick(l)})):window.innerWidth<=768&&window.innerWidth>568?n.root.find('.js-slick[data-campaignID="'.concat(e.home.campaign[o].campaignID,'"]')).each((function(){var t="";s.slice(0,7).forEach((function(a,o){t+='<div class="slider--wrapper" data-order="'.concat(o,'">').concat(e.tmplStores["event-course-card"].render({data:[a]}),"</div>")}));var o={infinite:!0,centerMode:!0,slidesToShow:3,slidesToScroll:3,variableWidth:!0,useTransform:!1,prevArrow:c,nextArrow:d};a(this).append(t),a(this).slick(o)})):window.innerWidth<=568&&n.root.find('.js-slick[data-campaignID="'.concat(e.home.campaign[o].campaignID,'"]')).each((function(){var t="";s.slice(0,7).forEach((function(a,o){t+='<div class="slider--wrapper" data-order="'.concat(o,'">').concat(e.tmplStores["event-course-card"].render({data:[a]}),"</div>")})),a(this).append(t),a(this).slick({infinite:!0,centerMode:!0,slidesToShow:3,slidesToScroll:1,useTransform:!1,variableWidth:!0,prevArrow:c,nextArrow:d,initialSlide:-1})})),t.init(),e.arena.initCountdown()};for(var m in e.home.campaign)u(m);n.root.find(".js-slick").each((function(){a(this).on("click",(function(e){a(e.target).closest(".slider--wrapper").attr("data-order")&&a(e.target).closest(".slider--wrapper").attr("data-order")}))})),n.root.find(".js-arrow").each((function(){a(this).on("click",(function(){var t=a(this).attr("data-click")?parseInt(a(this).attr("data-click")):1;e.track.send("eventArrow","".concat(a(this).attr("data-direction"),"Arrow"),"click".concat(t),"ga"),t++,a(this).attr("data-click",t)}))})),n.panel.on("click",(function(e){if(a(e.target).hasClass("js-campaign-title")){var t=a(e.target).attr("data-page"),o=a(e.target).attr("data-campaignID");n.setLink(o),n.panel.find(".js-campaign-title").each((function(){a(this).removeClass("current")})),a(e.target).addClass("current"),n.sliderContainer.find(".js-slick").each((function(){a(this).removeClass("current"),a(this).attr("data-sliderPage")===t&&(a(this).addClass("current"),a(this).get(0).slick.setPosition())}))}}))},setLink:function(e){this.root.find(".js-campaign-link").attr("href","/campaign/".concat(e))},getCampaign:function(t){for(var a in e.home.campaign)if(e.home.campaign[a].campaignID===t)return e.home.campaign[a]}},loadSliderBlock:function(a){if(e.home[a.attr("data-type")]&&0!==e.home[a.attr("data-type")].length){if(!a.hasClass("slick-initialized")){var o=a.parent().find(".js-slider-control"),n=e.tmplStores[a.attr("data-tmpl")],i=e.home[a.attr("data-type")]?e.home[a.attr("data-type")]:e.home.campaignBlock.getCampaign(a.attr("data-campaignID")).result,r=a.attr("data-config").split(",").map((function(e){return e.replace("{","").replace("}","")})),s=[];r.forEach((function(e){var t=e.split(":"),a={width:t[0],page:t[1],pageSize:t[2]};s.push(a)})),s=s.sort((function(e,t){return parseInt(t.width)-parseInt(e.width)}));for(var l=0;l<s.length;l++)if(window.innerWidth>=parseInt(s[l].width)){var c=isNaN(parseInt(s[l].page))?s[l].page:parseInt(s[l].page),d=parseInt(s[l].pageSize),u="";if("none"===c)i.slice(0,d).forEach((function(e,t){u+='<div class="slider--wrapper" data-order="'.concat(t,'">').concat(n.render({data:[e]}),"</div>")})),a.append(u);else{var m=i.slice(0,d*c);m.forEach((function(e,t){u+='<div class="slider--wrapper" data-order="'.concat(t,'">').concat(n.render({data:[e]}),"</div>")}));var h=c;m.length<d*c&&(h=Math.ceil(i.length/d));var p=d*h-i.length;p>0&&(u+='<div class="pad-card slider--wrapper"></div>'.repeat(p)),m.length<=d&&o.addClass("disable"),a.append(u),a.slick(e.home.getSliderConfig())}return e.arena.initCountdown(),void t.init()}}}else a.closest(".l-section").addClass("hide")},getSliderConfig:function(){var e=0,t=0;return window.innerWidth>=1041?(e=4,t=4):(e=3,t=3),{infinite:!0,slidesToShow:e,slidesToScroll:t,variableWidth:!0,useTransform:!1,prevArrow:!1,nextArrow:!1}}},t.hook("initHomeBlock",(function(o){var n=function(){e.home.campaign=this.data.campaign?this.data.campaign:null,e.home.fundraising=this.data.fundraising?e.arena.sortArrayAndPadRandomly(this.data.fundraising.result):null,e.home.hot=this.data.hot?e.arena.sortArrayAndPadRandomly(this.data.hot.result):null,e.home.free=this.data.free?e.arena.sortArrayAndPadRandomly(this.data.free.result):null,e.banner.forDomainData(this.data),(e.home.campaign||void 0!==e.home.campaign)&&a(".js-campaign-section").removeClass("hidden"),e.waitFor((function(){return void 0!==e.tmplStores["event-course-card"]&&void 0!==e.tmplStores["explore-course-card"]})).then((function(){a(".js-block").each((function(){"loadSliderBlock"===a(this).attr("func")&&e.home.loadSliderBlock(a(this))})),e.home.campaignBlock.init(a(".js-campaign-section"))}))},i="explore-course-card";void 0===e.tmplStores[i]&&e.loadHtml(i,a(".js-explore-card"));var r="event-course-card";void 0===e.tmplStores[r]&&e.loadHtml(r,a(".js-event-card"));var s="explore-course-ggc-card";void 0===e.tmplStores[s]&&e.loadHtml(s,a(".js-explore-card")),e.home.currentVersion=e.home.version[Math.round(Math.random())],e.track.send("fundSection_View","","type".concat(e.home.currentVersion),"ga"),e.body.addClass("type".concat(e.home.currentVersion," ab-tracking")),e.body.attr("data-trackingType",e.home.currentVersion),t.yell("explore/home",{},n,n),fetch("https://ggc.hkxf.com.tw/api/tag/go2yotta").then((function(e){return e.json()})).then((function(t){!function(t){e.home.offline=t.results?t.results:null,e.waitFor((function(){e.loadHtml("explore-course-ggc-card",a(".js-explore-card"))})).then((function(){a(".js-block").each((function(){"loadSliderBlock"===a(this).attr("func")&&e.home.loadSliderBlock(a(this))})),e.home.campaignBlock.init(a(".js-campaign-section"))}))}(t)}))})),t.hook("showVisitor",(function(t){e.body.on("getVisitor",(function(){t.removeClass("hidden")}))})),t.hook("fundraising/sendTrack",(function(t){var o=a(window.event.target).closest(".js-course-card");e.track.send("fundSection","courseCard_Jump_".concat(e.home.currentVersion),o.data("id"),"ga")})),t.hook("toCampaign",(function(t){var a="eventSection";void 0!==t.data("cate")&&(a=t.data("cate")),e.track.send(a,"Event_Go","eventGo","ga"),setTimeout((function(){window.location.href=window.location.origin+t.attr("href")}),100)})),t.hook("sliderControl",(function(t){a("#".concat(t.data("target"))).slick("slick".concat(t.data("direction")));var o=t.attr("data-clicked");if(void 0===o)t.attr("data-clicked",1);else{var n=parseInt(o)+1;t.attr("data-clicked",n)}e.track.send(t.data("gacate"),t.data("gaaction"),"arrow".concat(t.attr("data-clicked")),"ga")}))}(app,gee,j),a(84658);var _=a(31175);!function(e,t,a){e.apply={currentRole:"",currentStep:1,totalSteps:3,roleList:["teacher","partner"],isApply:!1,box:null,form:null,errMsg:{e4400:"聯盟夥伴申請狀態錯誤"},validated:[],validateCode:function(e){return e.length<6||e.length>20?{validated:!1,msg:"必須為 6 位以上, 20 位以下英文數字組合"}:e.match(/^(?=.*\d+)(?=.*[a-zA-Z])[0-9a-zA-Z]{6,}$/)?{validated:!0,msg:""}:{validated:!1,msg:"必須為 6 位以上, 20 位以下英文數字組合"}},init:function(t){var o=this;e.member.checkUserStatus((function(){(e.member.current.teacher||e.member.current.blogger)&&(window.location.href="/cooperation/manage")}),(function(){})),o.box=t,o.form=t.find(".js-application-form"),o.addressSelector=new r(o.box.find(".js-address-selector")),o.addressSelector.init(),a(".identity__submit").prop("disabled",!0),a(".identity__submit").addClass("disabled")},toggleCurrentRole:function(e){var t=this;if(e!==t.currentRole){t.currentRole=e;var o=t.roleList.map((function(e){return"s--".concat(e)}));t.box.removeClass(o),t.box.addClass("s--".concat(t.currentRole)),a(".identity__submit").prop("disabled",!1),a(".identity__submit").removeClass("disabled")}},clearPage:function(){for(var e=a("#page"),t=1;t<=this.totalSteps;t++)e.removeClass("s--step-".concat(t))},clearForm:function(t){t.trigger("reset"),t.find(".form-group").each((function(){a(this).removeClass("has-error has-success has-feedback has-focus has-blur")})),t.find("input[name='email']").val(e.member.current.email)},jump:function(e){var t=this,o=a("#page");t.clearPage(),t.currentStep=e,o.addClass("s--step-".concat(t.currentStep))},turnNext:function(){var e=this,t=a("#page");e.clearPage(),e.currentStep+=1,t.addClass("s--step-".concat(e.currentStep))},turnPrev:function(){var e=this,t=a("#page");e.clearForm(e.form),e.clearPage(),e.currentStep-1<0?e.currentStep=0:e.currentStep-=1,t.addClass("s--step-".concat(e.currentStep))},submitForm:function(o,n,i){var r=this;function s(e){var t;return o.find('select[name="'.concat(e,'"]')).length&&(t=o.find('select[name="'.concat(e,'"]'))),o.find('input[name="'.concat(e,'"]')).length?o.find('input[name="'.concat(e,'"]')).each((function(){"radio"===a(this).attr("type")?a(this).prop("checked")&&(t=a(this)):a(this).is(":visible")&&(t=a(this))})):o.find('textarea[name="'.concat(e,'"]')).length&&o.find('textarea[name="'.concat(e,'"]')).each((function(){a(this).is(":visible")&&(t=a(this))})),t||null}var l={realname:s("realname"),nickname:s("nickname"),email:s("email"),nationality:s("nationality"),gender:s("gender"),identity:s("identity"),phone:s("phone"),country:s("country"),city:s("county"),district:s("district"),address:s("address"),zip:s("zipcode")},c={tel:s("tel"),fb:s("fb"),ig:s("ig"),blog:s("blog"),medium:s("medium"),info:s("info"),intro:s("intro")},d={code:s("code")},u={info:s("info"),intro:s("intro")},m={type:{teacher:"0",partner:"1",author:"2"}[n],avatar:e.member.uploadedAvatar},h='<svg class="svg-icon exclamation icon-red" viewBox="'.concat(t.iconStore.exclamation.viewBox,'">').concat(t.iconStore.exclamation.svg,"</svg>");for(var p in l){"foreign"===l.country.val()&&("city"!==p&&"district"!==p&&"zip"!==p||l[p].attr("data-value","foreign"));var f=l[p].val()?l[p].val():l[p].attr("data-value");f?(r.validated.push(!0),m[p]=f):(r.validated.push(!1),e.showErrMsg(l[p],!0,h+"此為必填欄位"))}for(var v in c)c[v]?m[v]=c[v].val():m[v]="";if("partner"===n){for(var g in d){var b=d[g].val();if(b){if("code"===g){var w=r.validateCode(b);w.validated||(e.showErrMsg(d[g],!0,h+w.msg),r.validated.push(!1))}r.validated.push(!0),m[g]=b}else r.validated.push(!1),e.showErrMsg(d[g],!0,h+"此為必填欄位")}o.find("input[name='consent']").prop("checked")?r.validated.push(!0):(e.arena.saveNotice.show("請勾選「已閱讀且同意聯盟行銷內容」",5e3),r.validated.push(!1))}if("teacher"===n)for(var y in u)u[y].val()?(r.validated.push(!0),m[y]=u[y].val()):(r.validated.push(!1),e.showErrMsg(u[y],!0,h+"此為必填欄位"));m.avatar?r.validated.push(!0):(e.arena.saveNotice.show("請上傳一張大頭貼",5e3),r.validated.push(!1)),r.validated.every((function(e){return!0===e}))?t.yell("petition/apply",m,i,i):r.validated=[]},step1Submit:function(){e.apply.submitForm(e.apply.form,e.apply.currentRole,(function(){0!==this.code?console.log(this):e.apply.turnNext()}))},getMyStatus:function(o){var n=a("#page"),i=function(){if(0!==this.code)console.err("e"+this.code,err);else{var t=this;e.member.current.teacher&&e.member.current.blogger?e.cooperation.manage.changeApplicationStep(3):e.member.current.teacher||e.member.current.blogger?"1"===t.data.status?e.cooperation.manage.changeApplicationStep(3):(t.data.status,e.cooperation.manage.changeApplicationStep(1)):("1"===t.data.status||"2"===t.data.status?e.apply.currentStep=3:e.apply.currentStep=1,e.apply.isApply=!0,e.apply.clearPage(),n.addClass("s--step-".concat(e.apply.currentStep)))}};t.event.subscribe("app.memberStatusLoaded",(function(e){e.isLogin&&t.yell("petition/mine",{},i,i)}))},mine:function(a){var o=function(){0!==this.code?console.err("e"+this.code,err):e.member.current.teacher||e.member.current.blogger||("1"===this.data.status||"2"===this.data.status?e.apply.jump(3):e.apply.jump(2))};t.yell("petition/mine",{},o,o)}},t.hook("cooperation/getMyStatus",(function(t){e.apply.getMyStatus(t)})),t.hook("cooperation/checkPartnerCode",(function(a){var o,n,i=e.apply,r=a.closest(".form-group"),s=a.find("input"),l=function(e){var a=function(e){r.addClass("has-error");var a='<svg class="svg-icon exclamation icon-red" viewBox="'.concat(t.iconStore.exclamation.viewBox,'">').concat(t.iconStore.exclamation.svg,"</svg>");r.find(".error-msg").html(a+e)},n=i.validateCode(e),s=function(){r.removeClass("has-pass"),r.addClass("has-error")};if(n.validated){var l=function(){0!==this.code?(i.validated.push(!1),s(),a("代碼已被使用，請重新嘗試")):(i.validated.push(!0),o=e,r.removeClass("has-error"),r.addClass("has-pass"))};t.yell("petition/chkCode",{code:e},l,l)}else i.validated.push(!1),s(),a(n.msg)};s.bind("focus",(function(){r.removeClass("has-blur"),r.addClass("has-focus")})),s.bind("keydown",(function(){window.clearTimeout(n),n=window.setTimeout((function(){l(s.val())}),500)})),s.bind("blur",(function(){r.addClass("has-blur"),r.removeClass("has-focus"),o||l(s.val())}))})),t.hook("initApplyForm",(function(o){e.apply.init(o),o.on("click",(function(o){var n,i=a(o.target),r=e.member.current.isLogin;i.hasClass("js-toggle-role")?n=i.data("role"):i.closest(".js-toggle-role")&&(n=i.closest(".js-toggle-role").data("role")),n&&e.apply.toggleCurrentRole(n),i.hasClass("js-identity-tonext")&&!r?(t.exe("attemptToLogin",null),t.event.subscribe("app.memberStatusLoaded",(function(t){t.isLogin&&e.apply.mine()}))):i.hasClass("js-identity-tonext")?e.apply.turnNext():"BUTTON"===i.prop("tagName")&&(o.preventDefault(),i.hasClass("js-apply-prev-step")&&e.apply.turnPrev(),i.hasClass("js-apply-submit"))&&e.apply.submitForm(e.apply.form,e.apply.currentRole,(function(){0!==this.code?console.log(this):e.apply.turnNext()}))}))}))}(app,gee,_),a(21519),a(59579);var T=a(31175);!function(e,t,a){e.cooperation={},e.cooperation.manage={roles:[],currentRole:"",currentProfile:{},application:{currentStep:1},navbar:null,dashboard:null,managePage:null,applicationPage:null,ROLE_CHANGED:"manage.roleChanged",APPLICATION_STEP_CHANGED:"application.stepChanged",init:function(o){var n=this;n.navbar=o.find(".js-manage-toolbar"),n.dashboard=o.find(".js-manage-dashboard"),n.managePage=o.find(".js-page--manage"),n.applicationPage=o.find(".js-page--application"),e.body.on(n.ROLE_CHANGED,(function(e,a){t.exe("cooperation/backToDisplay",null),n.changeRole(a)})),e.body.on(n.APPLICATION_STEP_CHANGED,(function(e,t){n.changeApplicationStep(t)})),e.member.checkUserStatus((function(){["teacher","blogger"].forEach((function(t){e.member.current[t]&&("blogger"===t?(n.roles.push("partner"),n.managePage.find(".js-my-partner-code").text(e.member.current.bloggerCode)):n.roles.push(t))})),0===n.roles.length&&(window.location.href="/cooperation"),n.currentRole=n.roles[0],e.body.trigger(n.ROLE_CHANGED,[n.currentRole])}),(function(){})),n.navbar.on("click",(function(t){var o=a(t.target);o.hasClass("js-toggle-role-button")&&e.body.trigger(n.ROLE_CHANGED,[a(o).data("value")])})),n.applicationPage.on("click",(function(t){var o=a(t.target),i=n.applicationPage.find(".js-application--".concat(n.currentRole)).find(".js-application-form");o.hasClass("js-identity-tonext")&&e.body.trigger(n.APPLICATION_STEP_CHANGED,[n.application.currentStep+1]),o.hasClass("js-apply-prev-step")&&(t.preventDefault(),e.apply.clearForm(i),e.body.trigger(n.APPLICATION_STEP_CHANGED,[n.application.currentStep-1])),o.hasClass("js-apply-submit")&&(t.preventDefault(),e.apply.submitForm(i,n.currentRole,(function(){n.changeApplicationStep(3)})))}))},getProfile:function(){var a="partner"===this.currentRole?"blogger":"teacher";return new Promise((function(o,n){t.yell("".concat(a,"/intro"),{},(function(){if(0!==this.code)6100===this.code&&(e.stdErr(this),t.exe("attemptToLogin",null));else if(this.data){"pending"!==this.data.status&&"empty"!==this.data.status||o({status:this.data.status,data:null}),"old"===this.data.status&&o({status:this.data.status,data:this.data});var n={blog:this.data.blog,fb:this.data.fb,ig:this.data.ig,avatar:this.data.img||this.data.avatar,name:this.data.nickname,title:this.data.info||this.data.jobOrg,intro:this.data.intro,role:a,cate:this.data.cate};"teacher"===a&&(n.teacherID=e.member.current.teacherID),o({status:null,data:n})}else o({status:"empty",data:null})}))}))},renderProfile:function(a){var o=this.managePage.find(".js-info-display .js-info-data");o.html("");var n=e.tmplStores["personal-info"].render({data:[a]});o.append(n),t.init()},updateProfile:function(e,a){var o="partner"===this.currentRole?"blogger":"teacher";t.yell("".concat(o,"/selfUpdate"),e,a,a)},ifHasRole:function(e){return this.roles.includes(e)},changeRole:function(t){var o=this,n=["affiliate-manage","affiliate-income","article-manage"],i=["course-manage","course-income","article-manage"];if(o.currentRole=t,o.navbar.find(".js-toggle-role-button").each((function(){a(this).removeClass("is--active"),a(this).data("value")===t&&a(this).addClass("is--active")})),o.ifHasRole(t)){if(o.applicationPage.addClass("hidden"),o.managePage.removeClass("hidden"),n.forEach((function(e){o.dashboard.find(".js-dashboard-container").removeClass("s--".concat(e))})),i.forEach((function(e){o.dashboard.find(".js-dashboard-container").removeClass("s--".concat(e))})),o.dashboard.removeClass("is--teacher is--partner").addClass("is--".concat(t)),o.dashboard.find(".js-dashboard-container").addClass("s--".concat("teacher"===t?i[0]:n[0])),a.when(o.getProfile(),e.waitTmpl("personal-info")).done((function(e){o.renderProfile(e.data),o.currentProfile=e.data})),e["".concat(t,"Manage")].isInitialized)return;e["".concat(t,"Manage")].init()}else o.managePage.addClass("hidden"),o.applicationPage.removeClass("hidden is--teacher is--partner").addClass("s--".concat(t)),o.getProfile().then((function(e){switch(e.status){case"empty":return void o.changeApplicationStep(1);case"pending":return void o.changeApplicationStep(3);default:return}}))},changeApplicationStep:function(e){var t=this,a=e;a>3&&(a=3),a<0&&(a=1),t.application.currentStep=a;for(var o=1;o<=3;o++)o!==t.application.currentStep?t.applicationPage.removeClass("s--step-".concat(o)):t.applicationPage.addClass("s--step-".concat(t.application.currentStep))}},t.hook("cooperation/initManagePage",(function(t){e.cooperation.manage.init(t)})),t.hook("cooperation/toggleRoleTab",(function(e){var t=a(".js-dashboard-container"),o=a(e.event.target);if(o.hasClass("js-control-tab")){var n=o.data("tab");e.find(".js-control-tab").each((function(){a(this).data("tab")===n?t.addClass("s--".concat(n)):t.removeClass("s--".concat(a(this).data("tab")))}))}})),t.hook("cooperation/openInfoEditForm",(function(t){var o=a(".js-info-display"),n=a(".js-edit-form");o.addClass("hidden"),n.removeClass("hidden");var i=e.cooperation.manage.currentProfile;if(i.nickname=i.name,i.jobOrg=i.title,Object.keys(i).length)for(var r in i)n.find('textarea[name="'.concat(r,'"], input[name="').concat(r,'"]')).val(i[r]).change();n.find(".js-avatar-preview").attr("src",i.avatar)})),t.hook("cooperation/openAvatarEditor",(function(t){var a=e.cooperation.manage.currentRole;e.modal.showAvatarEditorModal(a)})),t.hook("cooperation/backToDisplay",(function(e){var t=a(".js-info-display"),o=a(".js-edit-form");t.removeClass("hidden"),o.addClass("hidden")})),t.hook("cooperation/updateProfile",(function(o){var n='<svg class="svg-icon exclamation icon-red" viewBox="'.concat(t.iconStore.exclamation.viewBox,'">').concat(t.iconStore.exclamation.svg,"</svg>"),i=o.closest(".js-personal-edit-form"),r=i.serialize();"partner"===e.cooperation.manage.currentRole&&(r+="&info=".concat(i.find("textarea[name='jobOrg']").val())),e.parseStrToObject(i.serialize()).nickname?e.cooperation.manage.updateProfile(r,(function(){a.when(e.cooperation.manage.getProfile(),e.waitTmpl("personal-info")).done((function(a){e.cooperation.manage.currentProfile=a.data,e.cooperation.manage.renderProfile(a.data),t.exe("cooperation/backToDisplay",i.find(".js-cancel-info-edit"))}))})):e.showErrMsg(i.find("input[name='nickname']"),!0,n+"此為必填欄位")}))}(app,gee,T),a(49613),a(75407),a(42016),a(87777),a(63701),a(57827),a(64878),a(15949),a(15390),a(21589),a(26729),a(39055),a(90221),a(66517),a(58344),a(78218),a(10965),a(75754);var I=a(31175),M=a(62163);a(48066)(I),window.qz3Cub=a(66048),o.register("zh_TW",(function(e,t,a){return[["剛剛","剛剛"],["%s 秒前","%s 秒前"],["1 分前","1 分前"],["%s 分前","%s 分前"],["1 小時前","1 小時前"],["%s 小時前","%s 小時前"],["1 天前","1 天前"],["%s 天前","%s 天前"],["1 週前","1 週前"],["%s 週前","%s 週前"],["1 月前","1 月前"],["%s 月前","%s 月前"],["1 年前","1 年前"],["%s 年前","%s 年前"]][t]})),window.timeago=o,window.stickyfill=a(88363),M.tz.setDefault("Asia/Taipei"),window.mainUrl="/",window.imgPath="/dist/",window.apiUrl=window.mainUrl+"",gee.debug=!1,window.defaultImg=function(e,t){var a={avatars:"/dist/image/default-avatars.png?v=0528",course:"/dist/image/default-course-cover.png"};t in a&&(e.src=a[t],e.onerror=null)},I.views.settings.delimiters("<%","%>"),I.views.helpers(app.formatHelper);var D=I.fn.show;I.fn.show=function(){return this.trigger("show"),D.apply(this,arguments)},I.fn.exists=function(){return this.length>0},I(document).ready((function(){app.tracking=["none"],app.init(["modal","arena","nav","member","cart","promocode","track","trackFB","scroll","mRoute","mock"])}))},69145:(e,t,a)=>{var o=a(31175);a(31175),function(e,t,a){"use strict";e.mock={mockData:{},ready:!1,init:function(){},mockAjax:function(t,a,o,n){e.waitFor((function(){return!0===e.mock.ready})).then((function(){void 0!==e.mock.mockData[t]?a?"number"==typeof o?n.call(e.mock.mockData[t][a]["page".concat(o)]):n.call(e.mock.mockData[t][a]):n.call(e.mock.mockData[t]):console.log("mock failed")}))},yell:function(e,t){o.get("../src/data/"+e+".json",(function(e){t.call(e)}))}}}(app,gee)},72676:(e,t,a)=>{var o=a(31175);a(31175),function(e,t,a){"use strict";e.anime={isLoaded:!1,loadAnimeMap:function(){o("body").append("<div id='anime-map' style=\"display: none\"></div>");var t="/dist/image/anime-svg/animemap.html?v="+e.version;o("#anime-map").load(t,(function(){e.animeStore={},o("#anime-map").find("svg").each((function(){var t=o(this);e.animeStore[t.attr("id")]={},e.animeStore[t.attr("id")].property=o(this).find("property").html(),o(this).find("property").remove(),e.animeStore[t.attr("id")].markup=o(this).html()})),e.anime.isLoaded=!0,o("#anime-map").remove()}))},startAnimation:function(e){e.addClass("running")},stopAnimation:function(e){e.removeClass("running")}},t.hook("insertAnime",(function(t){var a=t.attr("class").split(" ")[1],o=t.attr("class").split(" ").slice(1).join(" ").replace("gee","").replace(a,"");e.anime.isLoaded?t.replaceWith('<svg class="svg-anime '.concat(a," ").concat(o,'" ').concat(e.animeStore[a].property,">").concat(e.animeStore[a].markup,"</svg>")):e.waitFor((function(){return e.anime.isLoaded}),20).then((function(){t.replaceWith('<svg class="svg-anime '.concat(a," ").concat(o,'" ').concat(e.animeStore[a].property,">").concat(e.animeStore[a].markup,"</svg>"))}))})),t.hook("playAnimation",(function(e){o(".".concat(e.attr("data-targetanime"))).addClass("running")})),t.hook("stopAnimation",(function(e){o(".".concat(e.attr("data-targetanime"))).removeClass("running")}))}(app,gee)},10184:(e,t,a)=>{var o=a(79298),n=a(31175);!function(e,t,a){"use strict";e.article={current:{},oldScreen:"tablet",showStatusModal:function(t){"public"===t?e.modal.showSimpleModal("成功發佈文章","文章已發佈囉（所有人皆可閱讀此文章）","/dist/image/anime-svg/article_anime.svg",'<button class="gee modal__btn" data-gene="click:hideModal">知道了</button>'):e.modal.showSimpleModal("成功儲存草稿","草稿已儲存（只有你能看見此文章）","/dist/image/anime-svg/draft_anime.svg",'<button class="gee modal__btn" data-gene="click:hideModal">知道了</button>')},init:function(o,n){a(window).on("resize.introResize",(function(){a(".js-article-container").find(".js-article-sidebar"),e.article.oldScreen!==e.screen&&("desktop"===e.screen?a(".js-mobile-comment-container").children().detach().appendTo(".js-desktop-comment-container"):a(".js-desktop-comment-container").children().detach().appendTo(".js-mobile-comment-container"),e.article.oldScreen=e.screen)}));var i=function(){0!==this.code?e.stdErr(this):(e.stdSuccess(this),this.data.id=o,e.article.render("article-author",{data:this.data},n.find(".js-article-author")),e.article.render("article-views",{data:this.data},n.find(".js-article-views")),e.article.render("article-operation",{data:this.data},n.find(".js-article-operation")),e.article.render("article-meta",{data:this.data},n.find(".js-article-meta")),e.article.render("article-tag",{data:this.data},n.find(".js-article-tag")),e.article.render("article-share",{data:this.data},n.find(".js-article-share")),e.article.render("article-link",{data:this.data},n.find(".js-article-link")),e.article.render("article-collect",{data:this.data},n.find(".js-article-collect-box")))};t.yell("article/meta",{id:o},i,i)},load:function(a){var o=function(){if(0!==this.code)e.stdErr(this);else{e.stdSuccess(this);var t=this.data,o=a.find(".list-view");e.article.render("draft-article-box",{data:t.draft},o),e.article.render("public-article-box",{data:t.public},o),0===t.public.length+t.draft.length?a.removeClass("is-list is-empty").addClass("is-empty"):a.removeClass("is-list is-empty").addClass("is-list")}};t.yell("article/manage",{},o,o)},render:function(a,o,n,i){if(i=void 0===i||i,e.tmplStores[a]){var r=e.tmplStores[a].render(o);switch(a){case"article-editor":e.modal.stack.defaultModal.find(".modal-body").html(r);break;case"article-author":case"article-views":case"article-operation":case"article-meta":case"article-tag":case"article-share":case"article-link":n.html(r);break;case"article-collect":case"article-card":case"draft-article-box":case"public-article-box":n.append(r)}t.init()}},set:function(o,n){var i=function(){if(n.prop("disabled",!1),0!==this.code)e.stdErr(this);else{if(e.stdSuccess(this),e.editor.load("content",""),e.modal.hide(),e.article.showStatusModal(o.status),e.isInPage("cooperation/manage"))return void(o.id?e.teacherManage.updateArticleCard(this.data.id,this.data):(e.teacherManage.insertNewArticleCard(this.data),e.teacherManage.container.find(".js-dashboard-article-manage").hasClass("s--empty")&&e.teacherManage.container.find(".js-dashboard-article-manage").removeClass("s--empty")));"dtl"===e.article.current.mode?setTimeout((function(e){window.location.reload()}),2e3):(o.id&&a('.js-article-card[data-id="'+o.id+'"]').remove(),this.data.status=o.status.toLowerCase(),e.article.render("article-card",{data:this.data},a(".js-"+o.status+"-article-list")),e.article.updateList()),e.article.current.mode=""}},r=n.parents("form"),s=r.find(".js-change-image-cover").val(),l=r.find(".js-upload-photo-block").cropit("export");if(l&&1==s){var c=l.indexOf(";"),d=l.substring(11,c);"jpeg"===d&&(d="jpg");var u=e.arena.b64toBlob(l,"article[normal]"),m=new FormData;m.append("file",u,"article."+d),m.append("fileType","default"),m.append("imageType","article[normal]"),m.append("tableID",29),m.append("rowID",0),a.ajax({type:"POST",url:t.apiUri+"storage/upload",data:m,processData:!1,contentType:!1,dataType:"json"}).done((function(e){0==e.code&&(o.thumbnail=e.data.fileName,t.yell("article/set",o,i,i))}))}else t.yell("article/set",o,i,i)},status:function(o,n,i){var r=function(){if(0!==this.code)e.stdErr(this);else{e.stdSuccess(this),e.article.showStatusModal(n),i.find(".js-update-status").text("public"===n?"設為草稿":"設為公開").attr("data-status","public"===n?"draft":"public");var t=i.clone();a(".js-"+n+"-article-list").append(t),i.remove(),e.article.updateList()}};t.yell("article/status",{id:o,status:n},r,r)},del:function(o){var n=function(){0!==this.code?e.stdErr(this):(e.stdSuccess(this),e.modal.hide(),e.isInPage("cooperation/manage")?e.teacherManage.deleteArticleCard(o):(a('.js-article-card[data-id="'+o+'"]').remove(),e.article.updateList()))};t.yell("article/status",{id:o,status:"delete"},n,n)},updateList:function(){var t,o=a(".js-article-container"),n=o.find(".js-article-card").length;e.body.find(".teacher-dropdown-menu .js-article-num").text(n),n?(o.removeClass("is-empty").addClass("is-list"),(t=o.find(".js-draft-article-list")).find(".js-article-card").length?t.parent().removeClass("hide"):t.parent().addClass("hide"),(t=o.find(".js-public-article-list")).find(".js-article-card").length?t.parent().removeClass("hide"):t.parent().addClass("hide")):o.removeClass("is-list").addClass("is-empty")},showEditorModal:function(t){e.modal.show({src:"article-editor-modal",size:"lg",canClose:!1,cover:"black",mpid:t})}},t.hook("showEditorModal",(function(t){var a=t.data("id")||0;e.article.current.id=t.data("id")||0,e.article.current.mode=t.data("mode"),e.article.showEditorModal(a)})),t.hook("article/init",(function(t){var o=t.data("id");e.article.init(o,t),e.track.init();var n=a("<div></div>").addClass("img-bg-blur").append('<img src="">');a("body").append(n),a(".fr-fic").click((function(e){e.preventDefault(),a(".img-bg-blur").addClass("on").children("img").attr("src",a(this)[0].currentSrc)})),a(".img-bg-blur").click((function(e){e.preventDefault(),a(this).removeClass("on")})),a(window).scroll((function(){a(".img-bg-blur").removeClass("on")}))})),t.hook("article/copy",(function(e){new o(".js-article-copy").on("success",(function(t){e.tooltip("toggle"),t.clearSelection()}))})),t.hook("article/status",(function(t){e.track.manuallySendGA("Click",t.data("label"));var a=t.parents(".js-article-card"),o=a.data("id");e.article.status(o,t.data("status"),a)})),t.hook("article/confirm",(function(t){e.track.manuallySendGA("Click",t.data("label")),e.article.current.id=t.parents(".js-article-card").data("id"),e.modal.showSimpleModal("刪除文章","該文章刪除後內容將無法復原，<br>確定要刪除嗎？","/dist/image/anime-svg/delete_anime.svg",'<div class="modal__btn-pair"><button class="gee modal__btn" data-gene="click:hideModal">取消</button><button class="gee modal__btn btn--bordered" data-gene="click:article/del">確定刪除</button></div>')})),t.hook("article/del",(function(t){e.article.del(e.article.current.id),e.article.current.id=0})),t.hook("article/form",(function(o){t.initTmpl(o);var n={toolbarSticky:!0,toolbarStickyOffset:0,toolbarButtons:["fullscreen","bold","italic","underline","strikeThrough","fontSize","color","align","|","paragraphStyle","quote","formatOL","formatUL","outdent","indent","insertHR","-","insertLink","insertImage","insertVideo","|","selectAll","clearFormatting","|","undo","redo","h1","h2","h3","h4","h5","h6"],paragraphStyles:{"fr-article-title":"大標","fr-quote-block":"雙逗號引用區塊"},linkEditButtons:["linkOpen","linkEdit","linkRemove"]};if(e.article.current.id){var i=function(){if(e.article.current.id=0,0!==this.code)e.stdErr(this);else{var t={id:this.data.id,thumbnail:this.data.thumbnail?this.data.thumbnail:"",title:this.data.title,content:this.data.content,info:this.data.info,tag:this.data.tag,isPublish:this.data.isPublish,affiliate_uri:this.data.affiliate_uri?this.data.affiliate_uri:null};e.article.render("article-editor",{data:t},o),e.editor.init(n,"full").load("content",this.data.content);var i=a(".article-editor-container"),r=i.find(".fr-toolbar"),s=i.find(".froalaEditor");i.bind("scroll",(function(){var e=i.scrollTop(),t=s.offset().top+320,a=s.width();e>=t?r.hasClass("fixed")||r.addClass("fixed").css({position:"fixed",top:0,width:a}):r.hasClass("fixed")&&r.removeClass("fixed").css({position:"static",top:"inherit",width:"auto"})}))}};t.yell("article/one",{id:e.article.current.id},i,i)}else{e.article.render("article-editor",{data:{id:"",thumbnail:"",title:"",content:"",tag:[],isPublish:0}},o),e.editor.init(n,"full").load("content","");var r=a(".article-editor-container"),s=r.find(".fr-toolbar"),l=r.find(".froalaEditor");r.bind("scroll",(function(){var e=r.scrollTop(),t=l.offset().top+320,a=l.width();e>=t?s.hasClass("fixed")||s.addClass("fixed").css({position:"fixed",top:0,width:a}):s.hasClass("fixed")&&s.removeClass("fixed").css({position:"static",top:"inherit",width:"auto"})}))}})),t.hook("article/addTag",(function(e){if(13===e.event.keyCode)return e.event.preventDefault(),!1;if(32===e.event.keyCode){var o=a.trim(e.val());if(""===o)return!1;e.val("").before('<span class="tag" func="article/removeTag" data-title="'.concat(o,'">').concat(o,'<svg class="svg-icon close_c" viewBox="').concat(t.iconStore.close_c.viewBox,'">').concat(t.iconStore.close_c.svg,"</svg></span>"))}})),t.hook("article/removeTag",(function(e){e.remove()})),t.hook("article/manage",(function(t){var a=t.find(".js-article-container");e.article.load(a)})),t.hook("article/edit",(function(t){e.track.manuallySendGA("Click",t.data("label")),e.article.current.id=t.parents(".js-article-card").data("id"),e.article.current.mode=t.data("mode"),e.article.showEditorModal(e.article.current.id)})),e.mRoute.addRoute("article-editor-modal",(function(t){var a;t.mpid&&t.mpid>0&&(a=t.mpid,e.article.current.id=a,e.article.current.mode="manage"),e.article.showEditorModal(t.mpid)})),t.hook("article/sent",(function(t){var o=t.closest("form");if(o.find("input").each((function(){a(this).val()===a(this).attr("placeholder")&&a(this).val("")})),o.find('[name="content"]').val(e.editor.get("content")),!a.validatr.validateForm(o))return!1;e.progressingBtn(t);var n={status:t.data("status"),title:e.formatHelper.stripHtmlTag(a.trim(o.find('input[name="title"]').val())),content:a.trim(o.find('textarea[name="content"]').val()),info:e.formatHelper.stripHtmlTag(a.trim(o.find('textarea[name="info"]').val()))};t.data("id")&&(n.id=t.data("id")),n.tag=[],o.find(".article-tag-input .tag").each((function(){var e=a(this).data("id"),t=a(this).data("title");n.tag.push({id:1*e,title:t})})),e.article.set(n,t),o.find(".cropit-image-zoom-input").addClass("hide")})),t.hook("article/cropper",(function(e){var t={allowDragNDrop:!1,width:1170,height:406,smallImage:"allow",maxZoom:1.5,onFileChange:function(){a(".js-change-image-cover").val(1),a(".js-upload-btn").addClass("hide"),a(".js-change-btn").removeClass("hide")}};e.data("url")&&(t.imageState={src:e.data("url")}),e.cropit(t)})),t.hook("article/upload-photo",(function(e){e.parent(".upload-photo-block").find(".cropit-image-zoom-input").removeClass("hide"),e.parent().find(".cropit-image-input").click()})),t.hook("toArticle",(function(t){var o=a(window.event.target),n=o.closest(".js-article-card"),i=o.closest(".js-collect-btn").length>0,r=o.hasClass("js-author");r&&(window.location.pathname=o.attr("href")),!i&&!r&&n.length>0&&(e.track.send("articleSection","Article_Jump","","ga"),window.setTimeout((function(){window.location.href=window.location.origin+"/article/".concat(n.data("id"))}),100))}))}(app,gee,n)},72752:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.audio={errMsg:{},box:{},status:"",canNext:!1,canPrev:!1,canPlay:!1,sorter:0,player:null,range:null,volume:null,duration:100,init:function(){if(e.audio.box=a(".js-audio-player"),null===e.audio.player){var o="player"+("0"+Math.floor(100*Math.random()+1)).substr(-3),n=a("<audio>").attr({id:o,class:"hide"});e.audio.player=a(n).appendTo("body"),e.audio.range=e.audio.box.find("[name=schedule]"),e.audio.volume=e.audio.box.find("[name=volume]"),e.audio.bind(e.audio.player);var i=a(".js-audio-list .item[data-sorter=0]");t.audioLoad(i)}},bind:function(o){var n=e.audio.player[0];n.volume=1,o.on("canplay",(function(){e.audio.canPlay=!0,e.audio.duration=n.duration,e.audio.box.find(".schedule .duration").text(e.audio.mmss(n.duration)),n.play()})).on("ended",(function(){n.pause()})).on("play",(function(){var a=e.audio.box.find(".control button.ctrl");a.removeClass("disabled").prop("disabled",!1),a.find("svg").replaceWith('<svg class="svg-icon videopause" style="fill:#000" data-icon="pause" viewBox="'.concat(t.iconStore.videopause.viewBox,'">').concat(t.iconStore.videopause.svg,"</svg>"))})).on("pause",(function(){e.audio.box.find(".control button.ctrl").find("svg").replaceWith('<svg class="svg-icon videoplay" style="fill:#000" data-icon="play" viewBox="'.concat(t.iconStore.videoplay.viewBox,'">').concat(t.iconStore.videoplay.svg,"</svg>"))})).on("timeupdate",(function(){var a=n.currentTime/e.audio.duration*100;e.audio.range.val(a),t.sliderChange(e.audio.range),e.audio.box.find(".schedule .now").text(e.audio.mmss(n.currentTime))})),e.audio.range.on("change",(function(){if(e.audio.canPlay){var t=parseInt(a(this).val())/100*e.audio.duration;e.audio.box.find(".schedule .now").text(e.audio.mmss(t)),n.currentTime=t,n.play()}})),e.audio.volume.on("change",(function(){var e=parseInt(a(this).val())/100;n.volume=e}))},load:function(t){var a=e.audio.player[0];a.pause(),setTimeout((function(){a.src=t}),600)},play:function(t){var a=e.audio.player[0];a.paused?a.play():a.pause()},mmss:function(t){t=Math.round(t);var a=Math.floor(t/60);return t%=60,e.audio.pad(a)+":"+e.audio.pad(t)},pad:function(e){return("0"+e).slice(-2)}},t.hook("audioInit",(function(){e.audio.init();var t=e.audio.box.closest(".modal"),o=t.attr("id");a("#"+o).one("hidden.bs.modal",(function(){e.audio.player=null,t.find("audio").remove()}))})),t.hook("audioNext",(function(a){var o=e.audio.sorter,n=e.audio.box.siblings(".js-audio-list"),i=n.find("[data-sorter]");(o+=1)>=i.length-1&&(o=i.length-1);var r=n.find("[data-sorter="+o+"]");r.length>0&&e.audio.sorter!=o&&t.audioLoad(r)})),t.hook("audioPrev",(function(a){var o=e.audio.sorter,n=e.audio.box.siblings(".js-audio-list");n.find("[data-sorter]"),(o-=1)<=0&&(o=0);var i=n.find("[data-sorter="+o+"]");i.length>0&&e.audio.sorter!=o&&t.audioLoad(i)})),t.hook("audioLoad",(function(a){var o=a.data("sorter"),n=a.data("src"),i=a.find(".name").text();a.addClass("active").siblings(".item").removeClass("active"),e.audio.box.find(".filename").html('<svg class="svg-icon microphone icon-dark-grey" viewBox="'.concat(t.iconStore.microphone.viewBox,'">').concat(t.iconStore.microphone.svg,'"</svg> ')+i),e.audio.sorter=parseInt(o),e.audio.load(n)})),t.hook("audioPlay",(function(t){e.audio.play(t)})),t.hook("sliderChange",(function(e){var t=e.siblings(".audio-progress"),a=e.data("color"),o=(e.val()-e.attr("min"))/(e.attr("max")-e.attr("min"));t.css("background-image","-webkit-gradient(linear, left top, right top, color-stop("+o+", "+a+"), color-stop("+o+", #D3DEE5))")}))}(app,gee,o)},53408:(e,t,a)=>{var o=a(31175);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){"use strict";var o;e.banner=(n(o={errMsg:{},container:void 0,root:void 0,titleNode:void 0,ctaTextNode:void 0,autoplay:!0,tmplS:'<div class="slider__container" data-href="<%:url%>" data-title="<%:title%>" data-ctaType="<%:CTAtype%>">\n                <a class="slider__item" href="<%:url%>" data-which="ga" data-label="Banner/<%:title%>"> \n                    <img src="<%:imgS%>" alt="<%:title%>">\n                </a>\n            </div>',tmplL:'<div class="slider__container" data-href="<%:url%>" data-title="<%:title%>" data-ctaType="<%:CTAtype%>">\n                <a class="slider__item" href="<%:url%>" data-which="ga" data-label="Banner/<%:title%>"> \n                    <img src="<%:imgL%>" alt="<%:title%>">\n                </a>\n            </div>',ctaMap:{course:"我想要學...",campaign:"我想逛逛...",job:"我想參加...",announcement:"我想要說...",teacher:"為你推薦...",hidden:""},dot:{timer:null,time:0,root:null,counting:0,autoplaySpeed:window.innerWidth>567?7e3:1e3,animSpeed:20,init:function(e){this.root=e},onChange:function(e){},startAnimation:function(){var e=this,t=e.autoplaySpeed/e.animSpeed;e.timer=window.setInterval((function(){e.time+=e.animSpeed,e.counting+=1,e.root.css("height",10+10/t*e.counting+"px"),e.time>=e.autoplaySpeed&&e.reset()}),e.animSpeed)},stopAnimation:function(){},reset:function(){var e=this;window.clearInterval(e.timer),e.time=0,e.counting=0}}},"errMsg",{}),n(o,"banner",[]),n(o,"bannerTmpl",'<div class="item <%:active%>"><a class="track" href="<%:link%>" target="_top" data-which="ga" data-label="Banner/<%:link%>" data-hover="false"><img src="<%:imgS%>" src-large="<%:imgL%>" alt="<%:title%>"><div class="slider-description"></div></a></div>'),n(o,"init",(function(){})),n(o,"load",(function(){var a=function(){0!==this.code?e.stdErr(this):(e.banner.banner=this.data,e.banner.render(this.data))};t.yell("banner/lots",{type:e.banner.type||"homepage"},a,a)})),n(o,"render",(function(t){if(void 0!==t&&t.length){if(a.each(t,(function(t,o){var n=a.templates(e.banner.bannerTmpl).render({link:o.url,imgS:o.imgS,imgL:o.imgL,title:o.title,active:0===t?"active":"",blank:o.blank,type:e.banner.type});a(".carousel-inner").append(n)})),a("#carousel .item").length>0){var o=a(".carousel").data("type");a(".carousel").carousel({interval:"homepage"===o?5e3:2e3})}e.banner.bind(),e.track.init()}})),n(o,"bind",(function(){e.banner.change(),a(window).on("resize",(function(){e.banner.change()}))})),n(o,"change",(function(){"mobile"===e.screen?a("#carousel .item img[src-small]").each((function(){var e=a(this).attr("src");a(this).attr("src",a(this).attr("src-small")).attr("src-large",e).removeAttr("src-small")})):a("#carousel .item img[src-large]").each((function(){var e=a(this).attr("src");a(this).attr("src",a(this).attr("src-large")).attr("src-small",e).removeAttr("src-large")}))})),n(o,"replaceDomain",(function(e){var t=e.split("/");return t.splice(1,1),t[1]="/"+window.location.host+"/download",t.join("/")})),n(o,"forDomainData",(function(t){"[object Array]"===Object.prototype.toString.call(t)?t.forEach((function(t){if(void 0!==t.type){var a=t.imgL,o=t.imgS;t.imgL=e.banner.replaceDomain(a),t.imgS=e.banner.replaceDomain(o)}else{var n=t.course_image;t.course_image=e.banner.replaceDomain(n)}})):Object.values(t).forEach((function(t){"[object Object]"===Object.prototype.toString.call(t)?t.result.forEach((function(t){var a=t.course_image;t.course_image=e.banner.replaceDomain(a)})):t.forEach((function(t){t.result.forEach((function(t){var a=t.course_image;t.course_image=e.banner.replaceDomain(a)}))}))}))})),n(o,"loadSlider",(function(){return new Promise((function(a,o){var n=function(){(e.isInPage("index")||e.body.hasClass("body--homepage"))&&e.banner.forDomainData(this.data),a(this.data)};t.yell("banner/lots",{type:"homepage"},n,n)}))})),n(o,"renderSlider",(function(t){var o="",n=window.innerWidth>567?e.banner.tmplL:e.banner.tmplS;return o+a.templates(n).render({startDate:t.startDate,imgS:t.imgS,imgL:t.imgL,url:t.url,title:t.title,CTAtype:t.CTAType})})),n(o,"setTitle",(function(t){e.banner.titleNode.text(t)})),n(o,"setCTAtext",(function(t){var a=e.banner,o=a.ctaTextNode,n=a.ctaMap;o.text(n[t])})),n(o,"setType",(function(t){for(var a in e.banner.ctaMap)e.banner.container.removeClass("s--".concat(a));e.banner.container.addClass("s--".concat(t))})),n(o,"getSlickSetting",(function(e,a){return{dots:!0,infinite:!0,slidesToScroll:1,slidesToShow:a<=3?2:3,centerMode:!0,variableWidth:!0,speed:400,rows:0,pauseOnHover:!1,nextArrow:'<button class=\'slick-next pull-left js-arrow\' data-direction="next"><svg class="svg-icon right_arrow_new" viewBox="'.concat(t.iconStore.right_arrow_new.viewBox,'">').concat(t.iconStore.right_arrow_new.svg,"</svg></button>"),prevArrow:'<button class=\'slick-prev pull-left js-arrow\' data-direction="prev"><svg class="svg-icon left_arrow_new" viewBox="'.concat(t.iconStore.left_arrow_new.viewBox,'">').concat(t.iconStore.left_arrow_new.svg,"</svg></button>"),autoplay:!0,autoplaySpeed:"pc"===e?7e3:1e4}})),n(o,"stopAutoPlay",(function(){e.waitFor((function(){return!0===e.banner.loaded})).then((function(){!1!==e.banner.autoplay&&(e.banner.autoplay=!1,e.banner.root.slick("slickPause"),e.banner.root.addClass("stop-autoplay"))}))})),o),t.hook("banner/initSlider",(function(t){e.banner.container=t,e.banner.root=t.find(".js-banner-slider"),e.banner.titleNode=t.find(".js-banner-title"),e.banner.ctaTextNode=t.find(".js-banner-cta"),a.when(e.arena.checkIconReady(),e.banner.loadSlider()).done((function(t,a){var o="",n=window.innerWidth>567?"pc":"mobile";if(!a||a.length<=0)e.banner.container.addClass("hidden");else{var i=e.arena.sortArrayAndPadRandomly(a);i.forEach((function(t){o+=e.banner.renderSlider(t)})),e.banner.root.append(o),e.banner.root.slick(e.banner.getSlickSetting(n,i.length)),e.banner.autoplay=!0,e.banner.loaded=!0,e.banner.root.slick("slickGoTo",0)}})),e.banner.root.on("beforeChange",(function(t,o,n,i){n!==i&&document.querySelectorAll(".slick-center + .slick-cloned").forEach((function(e){setTimeout((function(){return e.classList.add("slick-current","slick-center")}))}));var r=a(o.$slides.get(i)),s=e.banner,l=s.setTitle,c=s.setCTAtext,d=s.setType;l(r.data("title")),c(r.data("ctatype")),d(r.data("ctatype"))})),t.on("mouseover",(function(e){0!==a(e.target).closest(".slick-center").length||a(e.target).hasClass("slick-arrow")?t.find(".slick-slider").addClass("s--mouseover"):t.find(".slick-slider").removeClass("s--mouseover")})),t.on("mouseleave",(function(e){t.find(".slick-slider").removeClass("s--mouseover")})),e.banner.root.on("click",(function(t){t.preventDefault(),e.banner.stopAutoPlay();var o=a(t.target),n=a(t.target.closest(".slick-slide"));if(o.hasClass("slick-arrow")){var i="next"===o.data("direction")?"Right":"Left",r=void 0!==o.attr("data-clicked")?parseInt(o.attr("data-clicked"),10):1,s=r+1;return o.attr("data-clicked",s),void e.track.send("heroArrow","".concat(i,"Arrow"),"arrow".concat(r),"ga")}n.hasClass("slick-center")?(e.track.send("heroSection","Banner_Jump","banner".concat(parseInt(n.attr("data-slick-index"))+1),"ga"),e.waitFor(.1).then((function(){location.href=n.data("href")}))):e.banner.root.slick("slickGoTo",n.data("slick-index"))}))})),t.hook("initBanner",(function(t){e.banner.type=t.data("type")||"homepage",e.banner.load()})),t.hook("campaign/goto",(function(t){var a=t.closest(".slick-slide").data("slick-index");a&&e.track.send("heroSection","Banner_Jump","banner".concat(a+1),"ga"),e.waitFor(.3).then((function(){location.href=t.attr("href")}))}))}(app,gee,o)},56653:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.bar={box:{},move:{},default:"",current:"",hashtag:!0,container:{},action:function(t,a){"function"==typeof a&&(e.bar.move[t]=a)},after:function(){},reset:function(){var t=window.location.hash;!e.bar.hashtag||a.trim(t)&&0!=a('[href="'+t+'"]').length||(t=e.bar.default,history.replaceState(null,null,t)),e.bar.show(null,t||e.bar.default)},animate:{work:!1,setup:function(){e.bar.animate.work&&0==e.bar.container.find(".tab-loading").length&&e.bar.container.prepend('<div class="tab-loading"></div>')},show:function(){e.bar.animate.work&&(e.bar.container.find(".tab-pane").removeClass("active").end().find(".tab-loading").toggleClass("show",!0),e.waitFor(4).then((function(){e.bar.animate.hide()})))},hide:function(){e.bar.animate.work&&e.bar.container.find(".tab-loading").eq(0).toggleClass("show",!1)}},popstate:function(t){e.bar.back=1,e.bar.show(null,window.location.hash)},show:function(t,o){e.bar.animate.show();var n=!1;t?(n=!0,o=t.attr("href")||e.bar.default):t=a('[href="'+o+'"]'),e.bar.current=o,t.parent().addClass("active").siblings().removeClass("active"),e.bar.container.find(".tab-pane").not(o).removeClass("active"),a(o).addClass("active"),0==e.bar.back&&e.bar.hashtag&&history.pushState(null,null,o),e.bar.back=0;var i=function(){"function"==typeof e.bar.move[o]&&e.bar.move[o]()};e.waitFor((function(){return"function"==typeof e.bar.move[o]}),360).then(i).fail(i),n&&e.bar.after()}},t.hook("bar/init",(function(o){e.bar.box=o,e.bar.container=a(o.data("content"))||".tab-content",o.find("a").each((function(){var n=a(this),i=n.attr("func"),r=n.attr("href");t.check(i)&&e.bar.action(r,(function(){t.exe(i,n)})),n.on("click",(function(t){if("#article"===r)e.collect.loadMyArticle(a("#article")),e.notify.reset("subscribe","collectArticle");else{if(a(window).unbind("scroll"),"#homework"!==r){var i=e.win[0].location.pathname.split("/")[2];!i||"classroom"!==i&&"dashboard"!==i||new URLSearchParams(e.win[0].location.search).has("action")&&e.redirect({path:e.win[0].location.pathname+r})}if("#homework"===r){var s=a('a[func="homework/backManageList"]');if(s.length<1&&(s=a('a[data-gene="click:homework/backManageList"]')),s.length>0&&!s.hasClass("dont-redirect")){var l=a("div.homework-intro").data("id");l||(l=a(".class-manage-info").data("id"))}}else"#qa"!==r&&"#issue"!==r||(e.forums.scrollAfterSorter=!1);"#introduction"===r?o.parents(".container-fluid").find(".classroom-container").addClass("js-introduction-active"):o.parents(".container-fluid").find(".classroom-container").removeClass("js-introduction-active")}return e.bar.show(n),!1}))})),e.waitFor(1).then((function(){window.scrollTo(0,0)})),e.notify.bind("student","subscription-tab"),e.bar.default=o.find(".js-default-tab").attr("href"),0==o.data("hash")&&(e.bar.hashtag=!1),0!=o.data("animate")&&(e.bar.animate.work=!0,e.bar.animate.setup()),e.bar.hashtag&&(window.onpopstate=e.bar.popstate),window.location.hash.includes("homework_")||e.bar.reset()}))}(app,gee,o)},65770:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.bulletin={store:{},init:function(){},setRow:function(o,n){var i=o.find('[name="id"]').val()||0,r={courseID:a("#courseID").val(),title:o.find(".board-text").val(),content:e.editor.get("content"),status:n.data("model"),permission:o.find('input[name="permission"]:checked').val(),id:i},s=function(){0!==this.code?e.stdErr(this):(e.stdSuccess(this),e.bulletin.load("draft"),e.bulletin.load("published"),t.hideModal())};t.yell("bulletin/set",r,s,s)},load:function(o){var n=a(".js-"+o+"-list"),i="draft"==o?"Draft":"Published",r={courseID:a("#courseID").val()||0,status:i},s=function(){if(0!==this.code)switch(this.code){case 6100:case 6104:t.exe("attemptToLogin",null);break;default:e.stdErr(this)}else{var i=this.data.total,r="board-"+o+"-card",s=a(".manage-board-box");if(s.removeClass("js-buletin-loading"),0===i)n.html("");else{s.addClass("js-buletin-not-empty");var l=e.tmplStores[r].render({data:this.data.result});if(n.html(l),"published"==o){var c=this.data.chunk>1;a('input[name="key"]').val(this.data.key),a('input[name="total"]').val(this.data.chunk),a(".js-bulletin-more").toggleClass("show",c),e.more.page=0,e.more.key=this.data.key,e.more.chunk=this.data.chunk,t.exe("initMore",a(".js-result-list"))}t.init(),a(".bs-tip-show").tooltip()}}};t.yell("bulletin/lots",r,s,s)},list:function(o,n){var i={courseID:o},r=function(){if(0!==this.code)e.stdErr(this);else{if(e.stdSuccess(this),0===this.data.total)var t=e.tmplStores["bulletin-empty"].render({});else t=e.tmplStores["bulletin-block"].render({data:this.data.result,isStudent:this.data.isStudent,isTeacher:this.data.isTeacher});n.find(".js-bulletin-list").html(t),a(".bs-tip-show").tooltip()}setTimeout((function(){setTimeout((function(){e.intro.hideTabLoading("#bulletin")}),400)}),600)};t.yell("bulletin/publish",i,r,r)},del:function(){var a=e.bulletin.store.board,o=(a.status,a.id),n=(a.box,function(){0!==this.code?e.stdErr(this):(e.stdSuccess(this),e.bulletin.load("draft"),e.bulletin.load("published"),t.hideModal())});t.yell("bulletin/del",{id:o},n,n)},updateBulletinMoreTag:function(){e.more.box.find(".js-load-more").removeClass("show loading")},loadRow:function(a,o){var n=function(){if(e.module.pid=null,0!==this.code)e.stdErr(this);else{var a=this.data;e.bulletin.renderBox(o,{item:a},1),e.waitFor((function(){return!o.is(":empty")})).then((function(){t.init(),e.editor.init().load("content",a.content)}))}};t.yell("bulletin/one",{id:a},n,n)},renderBox:function(o,n,i,r,s){var l=(o=o||a("#main-box")).data("tmpl");r=r||"down",n&&(i&&o.html(""),"down"===r?o.append(e.tmplStores[l].render(n)):o.prepend(e.tmplStores[l].render(n)),s&&t.go2Top())},showAddAnnouncementModal:function(){e.modal.show({src:"add-announcement-modal",size:"lg",header:"blue",title:"新增課程公告"})},showEditAnnouncementModal:function(t){e.modal.show({src:"edit-announcement-modal",header:"blue",title:"編輯課程公告",size:"lg",mpid:t})}},e.mRoute.addRoute("add-announcement-modal",e.bulletin.showAddAnnouncementModal),e.mRoute.addRoute("edit-announcement-modal",(function(t){e.module.modal="edit-announcement-modal",e.module.pid=t.mpid,e.bulletin.showEditAnnouncementModal(t.mpid)})),t.hook("initDelBoard",(function(t){var o=e.bulletin.store.board.status.toLowerCase();a(".js-del-"+o).removeClass("hide")})),t.hook("bulletin/load",(function(t){e.more.page=0,e.bulletin.load("draft"),e.bulletin.load("published")})),t.hook("bulletin/del",(function(t){e.bulletin.del(t)})),t.hook("getBulletin",(function(t){var o=a("#courseID").val()||0,n=t.attr("id");n&&e.bar.action("#"+n,(function(){e.member.checkUserStatus((function(){e.bulletin.list(o,t)}),(function(){e.bulletin.list(o,t)}),"getBulletin")}))})),t.hook("initForm",(function(o){var n=a("#"+o.data("tmpl")),i=o.data("tmpl");e.loadTmpl(i,o),e.module.pid?e.bulletin.loadRow(e.module.pid,n):(e.bulletin.renderBox(n,{item:{id:0}},1),e.waitFor((function(){return!n.is(":empty")})).then((function(){t.init(),e.editor.init().load("content","")})))})),t.hook("setRow",(function(t){var o=t.closest("form");if(o.find("input").each((function(){a(this).val()===a(this).attr("placeholder")&&a(this).val("")})),o.find('[name="content"]').val(e.editor.get("content")),!a.validatr.validateForm(o))return!1;e.progressingBtn(t),e.bulletin.setRow(o,t)})),t.hook("loadRow",(function(o){var n=(r=o.closest(".js-bulletin-block")).data("item_id")||0,i={id:n,status:o.data("model"),box:r};if(e.bulletin.store.board=i,o.data("src"))e.module.modal=o.data("src"),e.module.pid=n,e.modal.show({title:o.data("title"),src:o.data("src"),ta:o.data("ta"),size:o.data("size")?o.data("size"):"nor",canClose:o.data("close"),cover:o.data("cover"),header:o.data("class"),message:{content:o.data("msg"),status:o.data("msg-type")}});else{var r=a("#"+o.data("tmpl"));n?e.bulletin.loadRow(n,r):(e.bulletin.renderBox(r,{item:{id:0}},1),e.waitFor((function(){return!r.is(":empty")})).then((function(){t.init()})))}})),t.hook("showAddAnnouncementModal",e.bulletin.showAddAnnouncementModal),t.hook("showEditAnnouncementModal",(function(t){var a=t.closest(".js-bulletin-block").data("item_id");e.module.modal="edit-announcement-modal",e.module.pid=a,e.bulletin.showEditAnnouncementModal(a)}))}(app,gee,o)},79149:(e,t,a)=>{var o=a(58133),n=a(31175);!function(e,t,a){"use strict";e.classroom={currentQuizID:"",render:function(a,o,n,i){if(i=void 0===i||i,e.tmplStores[a]){var r=e.tmplStores[a].render(o);"empty-note"===a?n.append(r):n.html(r),t.init()}},getChapter:function(a,o){var n=function(){0!==this.code?6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this):(e.stdSuccess(this),e.classroom.render("chapter-info",this.data,a.find(".js-chapter-info")),e.classroom.render("chapter-list",this.data,a.find(".js-chapter-list"))),e.track.init()};t.yell("classroom/chapter",{id:o},n,n)},updateUnitStatus:function(a,o){if("desktop"==e.screen)var n="wait"===a.data("status")?0:1;else n="wait"===a.data("status")?1:0;var i=a.data("chapter"),r=function(){0!==this.code?e.stdErr(this):(e.stdSuccess(this),"desktop"==e.screen?1===n?(e.track.manuallySendGA("Click","Tab/Chapters/Mark as done/"+i),a.closest(".manage-block").find(".tag").addClass("update-tag").attr("data-status","wait").html("已完成").css({color:"#009fde","border-color":"#009fde"}),a.removeClass("update-tag").html("已完成")):(e.track.manuallySendGA("Click","Tab/Chapters/Mark as undone/"+i),a.closest(".manage-block").find(".tag").addClass("update-tag").attr("data-status","complete").html("標記完成").css({color:"#8b9195","border-color":"#8b9195"}),a.removeClass("update-tag")):(e.track.manuallySendGA("Click","Tab/Chapters/Mark as undone/"+i),a.closest(".manage-block").find(".tag").removeClass("update-tag").attr("data-status","wait").html("已完成").css({color:"#8b9195","border-color":"#8b9195"}),a.addClass("update-tag").html("標記完成")))};t.yell("chapter/complete",{id:o,status:n},r,r)},getNotes:function(o,n){var i=o.val()?o.val():null,r=function(){if(0!==this.code)6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this);else if(e.stdSuccess(this),e.classroom.render("note-selector",this.data,a("#note-selector")),e.classroom.render("note-list",{data:this.data.current.result},a("#note-list").find(".js-more-result")),1==this.data.current.result.length)e.more.chunk=0,a("#note-selector").find("select").val(this.data.current.result[0].chapterID),a("#note-list").find(".js-note-more").removeClass("show").addClass("hide");else{e.more.page=0,e.more.key=this.data.current.key,e.more.chunk=this.data.current.chunk;var o=this.data.current.chunk>1;a(".js-note-more").toggleClass("show",o),t.exe("initMore",a("#note-list")),t.init()}};t.yell("classroom/note",{id:n,chapter_id:i},r,r)},delNote:function(a,o){var n=function(){if(0!==this.code)e.stdErr(this);else{var t=o.parents(".unit-block");0===t.find(".note-block").length&&e.classroom.render("empty-note",{id:a},t),o.parents(".note-block").remove()}};t.yell("chapter/note/del",{id:a},n,n)},getAttachment:function(a,o){var n=function(){if(0!==this.code)e.stdErr(this);else{var o=this.data;e.waitFor((function(){return void 0!==e.tmplStores["attachment-list"]})).then((function(){a.parent(".iframe-body").find(".js-loading").remove();var n=e.tmplStores["attachment-list"].render({list:o});a.html(n),t.init()}))}};t.yell("chapter/file/get",{id:o},n,n)},getQuiz:function(o,n,i){i||(i=a(".js-quiz-lightbulb[data-id="+n+"]").data("title"));var r=function(){if(0!==this.code)e.stdErr(this);else{var t=this.data;t.quizID=n,t.currentTime=new Date,a.each(t.quiz,(function(e,t){a.each(t.options,(function(e,a){t.options[e]={name:"quiz_"+t.id,type:t.type,title:a,correct:-1!==t.answers.indexOf(e)}}))})),e.classroom.render("classroom-quiz",{list:t},o)}};t.yell("quiz/get",{id:n,examID:0},r,r)},get_certificate_status:function(t){var o=e.win[0].location.pathname;if(o.split("/").includes("classroom")){var n="";n+=t?'<a href="javascript:;" class="text-blue certificate-check-btn js-certificate-check-btn" func="classroom/certificateModal" data-src="course-certificate-modal"><icon class="svg-icon check icon-brand"></icon><span class="certificate-check-btn-text">證書已領</span></a>':'<a href="javascript:;" class="text-blue js-certificate-btn d-flex align-items-center" func="classroom/certificateModal" data-src="course-certificate-modal"><span><icon class="svg-icon certificate-horizontal icon-brand"></icon></span><span class="certificate-btn-text">完課證書</span></a>',a(".get_certificate_status").html(n);var i=a(".fixed-info");t&&i.find(".certificate .certificate-check").css("display","inline-flex")}o.split("/").includes("player")&&(n="",n+=t?'<span class="certificate-check-btn js-certificate-check-btn gee" data-gene="classroom/certificateModal" data-src="course-certificate-modal"><icon class="svg-icon check icon-white"></icon><span class="certificate-check-btn-text hidden-xs hidden-sm">證書已領</span><span class="certificate-check-icon visible-xs visible-sm"><icon class="svg-icon certificate-horizontal icon-white"></icon><div class="certificate-check"><icon class="svg-icon check icon-white"></icon></div></span></span>':'<span class="js-certificate-btn gee d-flex align-items-center" data-gene="classroom/certificateModal" data-src="course-certificate-modal"><icon class="svg-icon certificate-horizontal icon-white"></icon><span class="certificate-btn-text hidden-xs hidden-sm">完課證書</span></span>',a(".get_certificate_status").html(n))},set_certificate_status:function(){var o=a("#courseID").val(),n=function(){0!==this.code&&(e.stdErr(this),e.classroom.get_certificate_status(!0))};t.yell("quiz/set_certificate_status",{courseID:o},n,n)},showAttachmentModal:function(t,o){e.modal.show({src:"classroom-attachment-modal",cover:"opacity",header:"blue",title:t,mpid:o}),e.waitFor((function(){return a(".classroom-attachment-modal").length>0})).then((function(){var t=a(".classroom-attachment-modal").find(".js-attachment-modal-content");e.classroom.getAttachment(t,o)}))},showQuizModal:function(t){e.classroom.currentQuizID=t,e.modal.show({src:"classroom-quiz-modal",cover:"black",header:"blue",size:"lg",mpid:t}),e.waitFor((function(){return a(".classroom-quiz-modal").length>0})).then((function(){var o=a(".classroom-quiz-modal").find(".js-quiz-list");e.classroom.getQuiz(o,t)}))}},t.hook("classroom/init",(function(t){var n=a("#courseID").val();""===window.location.hash&&(window.location.hash="#bulletin"),e.waitFor((function(){return!o.isEmpty(e.intro.data)}),60).then((function(){if(e.member.current.isLogin)if(!o.isEmpty(e.member.current.userCourse)||e.member.current.staff){e.classroom.rendered=!0;var i=e.intro.data||{},r=i.isOnline?"online":"offline";i.uid=e.member.current.userCourse.userCourseID||"",i.rated=null!=e.member.current.userCourse.rating,i.student_no=e.member.current.userCourse.number||"STAFF",i.endDate=e.member.current.userCourse.deadline,e.classroom.render("classroom-header",i,t),t.removeClass("loading").addClass(r),a(".bs-tip-show").tooltip(),e.notify.bind("student","classroom-tab",n)}else alert("無學生權限"),location.href="/home";else e.stdErr({code:6104},"classroom/init")}))})),t.hook("classroom/chapters",(function(o){var n=a("#courseID").val(),i=o.attr("id");i&&(e.bar.after=function(){t.go2Top()},e.bar.action("#"+i,(function(){e.classroom.getChapter(o,n)})))})),t.hook("classroom/setUnitStatus",(function(t){var a=t.parents(".chapter-block").data("id");e.classroom.updateUnitStatus(t,a)})),t.hook("classroom/notes",(function(o){var n=a("#courseID").val(),i=o.attr("id");i&&(e.bar.after=function(){t.go2Top()},e.bar.action("#"+i,(function(){e.classroom.getNotes(o,n)})))})),t.hook("classroom/toggleNote",(function(e){var t=e.parents(".note-block");t.toggleClass("edit",!t.hasClass("edit"))})),t.hook("classroom/showNote",(function(t){if("change"==t.event.type){var o=a("#courseID").val();e.classroom.getNotes(t,o)}})),t.hook("classroom/updateNote",(function(a){var o=a.data("id"),n=a.parents(".note-block"),i=a.parents(".js-unit-block").data("id"),r=a.data("timestamp"),s=n.find(".message-area").val();if(""==s)return!1;var l=function(){0!==this.code?e.stdErr(this):(0==/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)/.test(s)&&(s=s.replace(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,4}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g,(function(e){return'<a class="inline-block" href="'+e+'" target="_blank">'+e+"</a>"}))),s=s.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2"),n.find(".message").html(s).end().removeClass("edit"))};t.yell("chapter/note/set",{parent_id:i,id:o,content:s,timestamp:r},l,l)})),t.hook("classroom/exportNote",(function(t){var o=a("#courseID").val(),n=e.body.find(".course-title").text();window.open(window.location.origin+"/export/note/"+o,n+" - 輸出筆記")})),t.hook("showAttachmentModal",(function(t){var a=t.data("id"),o=t.data("title");e.classroom.showAttachmentModal(o,a)})),e.mRoute.addRoute("classroom-attachment-modal",(function(t){var o;o=e.isInPage("player")||e.isInPage("classroomv3")?'.unit-block[data-id="'.concat(t.mpid,'"]'):'.chapter-block[data-id="'.concat(t.mpid,'"]'),e.waitFor((function(){return a(o).length>0}),30).then((function(){var n=a(o).find(".js-chapter-attachment-btn").data("title");e.classroom.showAttachmentModal(n,t.mpid)}))})),t.hook("classroom/certificateInit",(function(o){t.initTmpl(o);var n=a("#courseID").val(),i=function(){if(0!==this.code)6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this);else{var n=this.data,i=a(".course-title").text();i||(i=a(".player-title").text()),n.title=i,e.classroom.render("course-certificate",{data:n},o)}};t.yell("quiz/certificate",{id:n},i,i)})),t.hook("classroom/certificateModal",(function(t){e.modal.show({src:"course-certificate-modal",cover:"black",header:"blue",size:"lg"})})),e.mRoute.addRoute("course-certificate-modal",(function(t){e.modal.show({src:"course-certificate-modal",cover:"black",header:"blue",size:"lg"})})),t.hook("classroom/get_certificateModal",(function(o){e.modal.show({src:"get-certificate-modal",cover:"black",header:"blue",size:"lg"});var n=a("#courseID").val(),i=function(){0!==this.code&&e.stdErr(this)};t.yell("quiz/send_certificate_email",{courseID:n},i,i)})),t.hook("get_certificate",(function(o){t.initTmpl(o);var n=a("#courseID").val(),i=function(){if(0!==this.code)e.stdErr(this);else{var t=this.data;e.classroom.render("get-certificate",{data:t},o)}};t.yell("quiz/get_download_certificate_info",{courseID:n},i,i)})),t.hook("get_certificate_status",(function(o){var n=a("#courseID").val(),i=function(){if(0!==this.code)6100===this.code||e.stdErr(this);else{var t=this.data.certificate_status;e.classroom.get_certificate_status(t)}};t.yell("quiz/get_certificate_status",{courseID:n},i,i)})),t.hook("down_certificate",(function(t){"click"==t.event.type&&window.open(t.data("href")),1!=a(".get_certificate_status").find(".certificate-check-btn").length&&e.classroom.set_certificate_status()})),t.hook("showQuizModal",(function(t){var a=t.data("id");e.classroom.showQuizModal(a)})),e.mRoute.addRoute("classroom-quiz-modal",(function(t){e.classroom.showQuizModal(t.mpid)}))}(app,gee,n)},68234:(e,t,a)=>{var o=a(58133),n=a(31175);!function(e,t,a){"use strict";e.classroomv2={currentQuizID:"",get_certificate_status:function(t){e.win[0].location.pathname;var o="";o+=t?'<span class="certificate-check-btn js-certificate-check-btn gee" data-gene="classroom/certificateModal" data-src="course-certificate-modal"><icon class="svg-icon check"></icon><span class="certificate-check-btn-text">證書已領</span></span>':'<span class="js-certificate-btn gee" data-gene="classroom/certificateModal" data-src="course-certificate-modal"><icon class="svg-icon certificate-horizontal"></icon><span class="certificate-btn-text">完課證書</span></span>',a(".get_certificate_status").html(o)},isTeacherClass:function(t){t.isTeacher&&(e.body.addClass("isTeacher"),"pc"===e.getCurrentDevice(a(window).width())?window.location.hash="":window.location.hash="#video")},getPackage:function(){var o=a("#courseID").val(),n=function(){if(0!==this.code)e.stdErr(this);else if(void 0!==a(this).attr("data")){var n=this;n.data.sort((function(e,t){return e.discount>t.discount?-1:e.discount<t.discount?1:0})),e.waitFor((function(){return void 0!==e.tmplStores["classroomv3-intro-package"]})).then((function(){var i=e.tmplStores["classroomv3-intro-package"].render({data:n.data});a(".js-package-tmpl").html(i),a(".toIntro").attr("href","/course/intro/".concat(o)),t.init()}))}};t.yell("promocode/availableDiscountGroupBuy",{courseID:o},n,n)}},t.hook("classroom2/init",(function(n){var i=a("#courseID").val();"pc"===e.getCurrentDevice(a(window).width())?""!==window.location.hash&&"#video"!==window.location.hash||(window.location.hash="#bulletin"):""===window.location.hash&&(window.location.hash="#video"),"#introduction"===window.location.hash?a(".classroom-container").addClass("js-introduction-active"):a(".classroom-container").removeClass("js-introduction-active"),e.waitFor((function(){return!o.isEmpty(e.intro.data)}),60).then((function(){if(e.member.current.isLogin)if(!o.isEmpty(e.member.current.userCourse)||e.member.current.staff||e.member.current.isTeacher){e.classroom.rendered=!0;var r=e.intro.data||{},s=r.isOnline?"online":"offline";r.uid=e.member.current.userCourse.userCourseID||"",r.rated=null!=e.member.current.userCourse.rating,r.student_no=e.member.current.userCourse.number||"STAFF",r.endDate=e.member.current.userCourse.deadline,e.classroom.render("classroom-header",r,n),n.removeClass("loading").addClass(s),a(".bs-tip-show").tooltip(),e.notify.bind("student","classroom-tab",i),e.classroomv2.isTeacherClass(r),t.exe("initPackage"),t.exe("lazyload")}else e.member.current.isTeacher||(alert("無學生權限"),location.href="/home");else e.stdErr({code:6104},"classroom/init")}))})),t.hook("get_certificate_status_v2",(function(o){var n=a("#courseID").val(),i=function(){if(0!==this.code)6100===this.code||e.stdErr(this);else{var t=this.data.certificate_status;e.classroomv2.get_certificate_status(t)}};t.yell("quiz/get_certificate_status",{courseID:n},i,i)})),t.hook("changeToOldVersion",(function(){location.href="/course/player/"+e.studio2.current.course_id+"/"+e.lecture2.current.id})),t.hook("initPackage",(function(t){e.loadHtml("classroomv3/package",a(".js-package-area")),e.classroomv2.getPackage(t)}))}(app,gee,n)},94986:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.collect={animDelay:1.2,subCartStatusUpdate:0,init:function(){},set:function(a,o,n){var i=function(){if(0!==this.code)6100===this.code?t.exe("attemptToLogin",null):e.stdErr(this);else if(e.stdSuccess(this),"function"==typeof n){var i="course"===o?"courses":"articles",r=e.member.current.collects[i],s="".concat(a);r.indexOf(s)>0?r.splice(r.indexOf(s),1):r.push(s),n()}};t.yell("collect/set",{rowID:a,type:o},i,i)},load:function(o){var n=function(){0!==this.code?e.stdErr(this):(o.html(e.tmplStores["small-favorite"].render(this.data)),t.init(),a(".favorite-list-div .add_to_cart_btn").click((function(){var t=a(this).parents(".item"),o=e.win[0].location.pathname.replace(/\//g,""),n={id:t[0].dataset.id,name:t[0].dataset.name,list_name:t[0].dataset.list_name=o,brand:t[0].dataset.brand,category:t[0].dataset.category,variant:t[0].dataset.variant,list_position:t[0].dataset.list_position,quantity:t[0].dataset.quantity,price:t[0].dataset.price};e.track.add_to_cart(n,"basket"),e.track.add_to_cart_checkout(n)})))};t.yell("collect/get",{},n,n)},getMyCollects:function(a,o,n){return new Promise((function(i,r){var s=function(){6100==this.code&&(e.stdErr(this),t.exe("attemptToLogin",null)),this&&this.data.rows?i(this.data.rows):i([])};t.yell("collect/getMyCollects",{type:a,page:o,limit:n},s,s)}))},loadMyCourse:function(t){var o=a("#js-collected-course-list"),n=1;e.collect.getMyCollects("course",0,12).then((function(a){var i=a;a.length>0?(o.html(""),e.collect.renderMyCollectedCourses(i,o),e.arena.detectHitBottom((function(){n+=1,e.collect.getMyCollects("course",n,12).then((function(t){var a=t;t.length>0?e.collect.renderMyCollectedCourses(a,o):e.arena.stopDetectHitBottom()}))}))):t.addClass("is-empty")}))},loadMyArticle:function(t){var o=a("#article"),n=1;e.collect.getMyCollects("article",0,12).then((function(a){var i=a;a.length>0?(o.html(""),e.collect.renderMyCollectedArticles(i,o),e.arena.detectHitBottom((function(){n+=1,e.collect.getMyCollects("article",n,12).then((function(t){var a=t;t.length>0?e.collect.renderMyCollectedArticles(a,o):e.arena.stopDetectHitBottom()}))}))):t.addClass("s--empty")}))},deleteCourse:function(a){var o=a.data("item_id"),n=a.parents(".my-collect-course"),i=function(){0!==this.code?6100===this.code?t.exe("attemptToLogin",null):e.stdErr(this):(e.stdSuccess(this),a.closest(".course-block").remove(),0==n.find(".course-block").length&&n.addClass("is-empty"))};t.yell("collect/set",{rowID:o,type:"course"},i,i)},deleteArticle:function(a){var o=a.data("id"),n=a.parents(".my-collect-article"),i=function(){0!==this.code?6100===this.code?t.exe("attemptToLogin",null):e.stdErr(this):(e.stdSuccess(this),a.closest(".js-article-card").remove(),0===n.find(".js-article-card").length&&(n.addClass("is-empty"),n.html('<div class="empty-view center-flexbox"> <p class="text-center text-grey"> <img class="empty-article" src="/dist/image/icon/no-collect.svg?v=0913"><br> 您目前尚無任何收藏 <br> <a class="btn btn-blue" href="/explore">探索更多</a> </p></div>')))};t.yell("collect/set",{rowID:o,type:"article"},i,i)},render:function(a,o,n,i){if(i=void 0===i||i,e.tmplStores[a]){var r=e.tmplStores[a].render(o);switch(a){case"my-collect-tab":case"my-collect-article":n.html(r)}t.init()}},renderMyCollectedCourses:function(a,o){e.waitFor((function(){return void 0!==e.tmplStores["my-collect-course"]})).then((function(){var n=e.tmplStores["my-collect-course"].render({data:a});o.append(n),t.init()}))},renderMyCollectedArticles:function(o,n){e.waitFor((function(){return void 0!==e.tmplStores["my-collect-article"]})).then((function(){var i=e.tmplStores["my-collect-article"].render({data:o});n.append(i),e.waitFor((function(){return a(".js-article-card").length>0})).then((function(){e.collect.updateCollectedCards("articles")})),t.init()}))},updateCollectedCards:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"courses",o="courses"===t?"js-course-card":"js-article-card",n=e.member.current.collects?e.member.current.collects[t]:[];if(n.length>0&&a(".".concat(o)).length>0){var i=n.map((function(e){return".".concat(o,"-").concat(e)})).join(", ");a(i).addClass("s--collected")}}},t.hook("collect/course",(function(t){e.collect.set(a("#courseID").val(),"course",(function(){t.find("svg").hasClass("fav_fill")?(t.attr("title","已取消收藏").tooltip("enable").tooltip("fixTitle").tooltip("show").off("mouseleave").on("mouseleave",(function(){t.attr("title","加入收藏").tooltip("hide").tooltip("fixTitle")})),e.icon.swapIcon(t,"fav")):t.find("svg").hasClass("fav")&&(t.attr("title","已加入收藏").tooltip("enable").tooltip("fixTitle").tooltip("show").off("mouseleave").on("mouseleave",(function(){t.tooltip("hide").tooltip("disable")})),e.icon.swapIcon(t,"fav_fill","icon-red"))}))})),t.hook("collect/article",(function(t){e.collect.set(t.data("id"),"article",(function(){t.closest(".js-article-card").toggleClass("s--collected",!t.closest(".js-article-card").hasClass("s--collected"))}))})),t.hook("article/collect",(function(t){e.collect.set(t.data("id"),"article",(function(){t.find("svg").hasClass("fav_fill")?e.icon.swapIcon(t,"fav"):t.find("svg").hasClass("fav")&&e.icon.swapIcon(t,"fav_fill","icon-red")}))})),t.hook("collect2Cart",(function(t){var a=t.data("item_id"),o=t.closest(".item");o.addClass("add"),e.cart.add2Cart(a);var n=o.find(".name").text(),i=parseInt(o.find(".price p").text().replace(/[^\d]/g,""),10);e.track.send("AddToCart",{content_ids:[a],content_name:n,value:i,currency:"TWD"},null,"pixel"),setTimeout((function(){var e=o.parents(".favorite-list-div");o.remove(),0===e.find(".item").length&&e.find(".empty-view").removeClass("hide")}),1e3*e.collect.animDelay)})),t.hook("myCollect2Cart",(function(o){var n=o.data("item_id");(d=o.closest(".course-block")).addClass("add"),e.cart.add2CartClean(n);var i=d.find(".title").text(),r=parseInt(d.find(".price").text().replace(/[^\d]/g,""),10);e.track.send("AddToCart",{content_ids:[n],content_name:i,value:r,currency:"TWD"},null,"pixel");var s=[],l={cls:7,txt:12,link:"javascript: app.cart.add2Cart("+n+", 1);"};s.push(l);var c=a.templates(e.cart.btnTmpl).render({btns:s});o.remove(),d.find(".status").append(c),t.clog("add_to_cart/init");var d,u=o.data("item_id"),m=(d=Array.from(document.querySelectorAll(".course-list.js-collected-course-list .view_item_list"))).filter((function(e){return parseInt(e.dataset.id)===u})),h={id:m[0].dataset.id,name:m[0].dataset.name,list_name:m[0].dataset.list_name="member/#collect",brand:m[0].dataset.brand,category:m[0].dataset.category,variant:m[0].dataset.variant,list_position:m[0].dataset.list_position,quantity:m[0].dataset.quantity,price:m[0].dataset.price};e.track.add_to_cart(h,"member"),e.track.add_to_cart_checkout(h)})),t.hook("loadCollect",(function(a){t.initTmpl(a),e.collect.load(a)}),"init"),t.hook("collect/my-course",(function(a){e.member.checkUserStatus((function(){e.collect.loadMyCourse(a)}),null,"#mycollect"),e.collect.subCartStatusUpdate||(e.collect.subCartStatusUpdate=1,t.event.subscribe("app.cartStatusUpdate",(function(){e.collect.loadMyCourse(a)})))})),t.hook("collect/my-article",(function(t){"#article"===window.location.hash&&e.collect.loadMyArticle(t)})),t.hook("tryRemoveCourse",(function(t){e.collect.deleteCourse(t)})),t.hook("tryRemoveArticle",(function(t){e.collect.deleteArticle(t)}))}(app,gee,o)},87120:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.collection={store:{CC:null,CCD:null,TC:null,TCD:null},errMsg:{e4100:"有尚未完成拆帳的節點",e4101:"節點狀態不符"},init:function(){a.extend(e.errMsg,e.collection.errMsg)},load:function(){var o=function(){0!==this.code?(6104===this.code&&e.member.checkUserStatus((function(){return location.reload()}),null,"#account"),e.stdErr(this)):(this.data.rows.length?(a(".js-empty-collection").addClass("hide"),e.collection.renderNew(this.data),e.pageCounter++):a(".js-empty-collection").removeClass("hide"),e.withdraw.check())};t.yell("collection/mine/",{type:"new"},o,o)},loadCourses:function(o){var n=function(){0!==this.code?e.stdErr(this):(this.data.rows.length&&e.collection.renderCC(this.data.rows),this.data.miscs.length?e.renderBox(e.collection.MiscBox,{data:this.data.miscs},1):a(".js-miscs-list").hide())};t.yell("collection/myCourses/",{cid:o},n,n)},loadSubrun:function(o,n,i){var r=function(){0!==this.code?e.stdErr(this):(e.renderBox(o,{data:this.data.rows},1),a(".bs-tip-show").tooltip())};t.yell("collection/mySubrun/",{pid:i,cid:e.collection.course,type:n},r,r)},loadPromoCost:function(o,n,i){var r=function(){0!==this.code?e.stdErr(this):(e.renderBox(o,{data:this.data.rows},1),a(".bs-tip-show").tooltip())};t.yell("collection/myPromocost/",{pid:i,cid:e.collection.course,type:n},r,r)},loadMisc:function(o,n,i){var r=function(){0!==this.code?e.stdErr(this):(e.renderBox(o,{data:this.data.rows},1),a(".bs-tip-show").tooltip())};t.yell("collection/myMisc/",{pid:i,cid:"Teacher"===n?0:e.collection.course,type:n},r,r)},renderNew:function(a){e.renderBox(e.collection.newBox,{data:a.rows},1),e.waitFor((function(){return!e.collection.newBox.is(":empty")})).then((function(){t.init()}))},renderCC:function(a){e.renderBox(e.collection.box,{data:a},1),e.waitFor((function(){return!e.collection.box.is(":empty")})).then((function(){t.init()}))}},t.hook("collection/load",(function(o){e.bar.after=function(){t.go2Top()},e.bar.action("#"+o.attr("id"),(function(){e.notify.reset("teacher","income"),e.pageCounter=1,e.loadHtml("collection-teacher",a("#new-collection-list"))}))})),t.hook("collection/next",(function(t){1===e.pageCounter&&(e.loadTmpl(t.data("tmpl"),t),e.collection.newBox=t),e.collection.load()})),t.hook("collection/loadDetail",(function(t){var a=t.next(".detail-box");e.track.manuallySendGA("Click",t.data("label")),e.collection.collectionID=a.data("cid"),t.hasClass("active")?(t.removeClass("active"),a.addClass("hide")):(t.addClass("active"),a.removeClass("hide")),a.is(":empty")&&e.loadHtml("collection-course",a)})),t.hook("collection/loadCourses",(function(t){var a=t.data("tmpl");e.collection.box=t,e.loadTmpl(a,t),e.collection.loadCourses(e.collection.collectionID)})),t.hook("collection/loadMiscs",(function(t){var a=t.data("tmpl");e.collection.MiscBox=t,e.loadTmpl(a,t)})),t.hook("collection/loadCDModal",(function(t){var o=t.data("src"),n="./"+o,i=t.data("tid");e.collection.course=i,e.modal.slienceMode=1,e.modal.show({src:n,size:"lg",title:t.attr("title")}),e.waitFor((function(){return e.collection.modal=a(".js-course-finance"),e.collection.modal.length>0})).then((function(){var n=t.closest("tr"),i=n.closest(".detail-box").prev(".item.show"),r=n.closest(".s--open-detail").data("collectionid");a(".js-collection-date").html(i.find(".date").html()),a(".js-collection-name").html(i.find(".title").html()),a(".js-course-name").html(n.find(".text-black").html()),"income-table-modal"===o&&e.collection.loadSubrun(e.collection.modal,"Income",r),"refound-table-modal"===o&&e.collection.loadSubrun(e.collection.modal,"Refund",r),"promotion-table-modal"===o&&e.collection.loadPromoCost(e.collection.modal,"Cost",r),"promotion-refound-table-modal"===o&&e.collection.loadPromoCost(e.collection.modal,"Return",r),"miscellaneous-table-modal"===o&&e.collection.loadMisc(e.collection.modal,"Course",r)}))})),t.hook("collection/loadTCDModal",(function(t){var o=t.data("src"),n="./"+o,i=t.data("tid");e.collection.teacher=i,e.modal.slienceMode=1,e.modal.show({src:n,size:"lg",title:t.attr("title")}),e.waitFor((function(){return e.collection.modal=a(".teacher-income"),e.collection.modal.length>0})).then((function(){"tmisc"===o&&e.collection.loadMisc(e.collection.modal,"Teacher"),"Done"===e.module.status&&a(".save-tcd-raw").hide()}))})),t.hook("collection/react",(function(e){var o=a(e.event.target).closest(".item.show"),n=o.attr("func");void 0!==n&&(n="collection/"+n,t.check(n)&&(o.event=e.event,t.exe(n,o),e.event.preventDefault()))})),t.hook("collection/reactC",(function(e){var o=a(e.event.target).closest("a").length?a(e.event.target).closest("a"):a(e.event.target),n=o.attr("func");void 0!==n&&(n="collection/"+n,t.check(n)&&(o.event=e.event,t.exe(n,o),e.event.preventDefault()))}))}(app,gee,o)},59579:(e,t,a)=>{var o=a(58133),n=a(31175);!function(e,t,a){"use strict";e.partnerManage={isInitialized:!1,tabs:["affiliate-manage","affiliate-income"],currentTab:"affiliate-manage",container:null,currentStatsPage:0,showAnnouncementModal:function(o){var n=function(){var n=this.data;t.event.subscribe("modal.loaded",(function(e){if("cooperation-announcement-modal"===e){var t=a(".cooperation-announcement-modal");t.find(".js-announcement-title").text(n.title),t.find(".js-announcement-date").text(n.publishDate),t.find(".js-announcement-content").html(n.content)}})),e.modal.show({src:"cooperation-announcement-modal",size:"l",ta:"v2Modal",cover:"white",mpid:o})};t.yell("announce/one",{id:o},n,n)},showCampaignModal:function(a){var o=this;e.modal.show({src:"cooperation-campaign-modal",size:"new-xs",ta:"v2Modal",cover:"white"});var n=function(){o.tempCampaign=this.data};t.yell("affiliate/one",{id:a},n,n)},showShareLinkModal:function(){var t=function(){e.member.current.blogger||e.member.current.bloggerCode?e.modal.show({src:"cooperation-share-link-modal",size:"v2-m",ta:"v2Modal",cover:"white"}):(e.modal.show({src:"share-link-modal",size:"v2-m",ta:"v2Modal",cover:"white"}),e.partnerManage.initLinkModal())};e.member.checkUserStatus(t(),t())},showNoteModal:function(t,a){e.modal.show({src:"cooperation-note-modal",size:"v2-m",ta:"v2Modal",cover:"white",canClose:!1}),e.partnerManage.tempShotern={id:t,note:a}},updateShotern:function(a,o,n){var i=function(){e.modal.hide()};t.yell("shorten/note",{id:a,note:o},i,i)},displayCampaignModal:function(){var o=this;a.when(new Promise((function(t,a){e.waitFor((function(){return e.isValid(o.tempCampaign)})).then((function(){t(o.tempCampaign)}))})),e.waitTmpl("cooperation-campaign-modal")).done((function(n){var i="1"===o.campaigns.filter((function(e){return e.id===n.id}))[0].joined,r=e.tmplStores["cooperation-campaign-modal"].render({data:[n]}),s=i?"s--joining":"s--not-joining",l=a(".cooperation-campaign-modal");l.find(".js-loading").remove(),l.find(".js-campaign-modal").html(r).addClass(s),t.init()}))},init:function(){var e=this;e.container=a(".js-dashboard-container.s--partner"),e.renderCampaigns(),e.renderAnnouncements(),e.renderStatistic(),e.renderIncomes(),e.container.on("click",(function(e){a(e.target)})),e.isInitialized=!0},getCampaigns:function(){return new Promise((function(e,a){t.yell("affiliate/list",{},(function(){0===this.code&&e(this.data)}))}))},getIncomes:function(){return new Promise((function(e,a){t.yell("affiliate/summary",{type:"byEvent"},(function(){0===this.code&&e(this.data.rows)}))}))},renderIncomes:function(){var n=this;a.when(n.getIncomes(),e.waitTmpl("new-income-item"),e.arena.checkIconReady()).done((function(i){n.incomes=i;var r=n.container.find(".js-new-income-item-tmpl"),s=e.tmplStores["new-income-item"].render({data:i}),l=0;o.map(i,(function(e){l+=1*e.bloggerIncome-1*e.bloggerRefund})),a(".js-income-pending").text(e.formatHelper.numFormat(l)),r.find(".js-income-detail-tbody").append(s),t.init()}))},renderCampaigns:function(){var o=this;a.when(o.getCampaigns(),e.waitTmpl("campaign-card"),e.arena.checkIconReady()).done((function(a){o.campaigns=a;var n=document.getElementById("js-default-campaign"),i=o.container.find(".js-campaign-slick"),r=e.tmplStores["campaign-card"].render({data:a});n.innerHTML=a.default.value+"%",i.append(r),t.init(),i.slick(o.getSlickSetting(a.length))}))},getSlickSetting:function(e){var a="left_arrow_new",o="right_arrow_new",n='<button class=\'slick-prev pull-left js-arrow\' data-direction="Left"><svg class="svg-icon '.concat(a,'" viewBox="').concat(t.iconStore[a].viewBox,'">').concat(t.iconStore[a].svg,"</svg></button>"),i='<button class=\'slick-next pull-left js-arrow\' data-direction="Right"><svg class="svg-icon '.concat(o,'" viewBox="').concat(t.iconStore[o].viewBox,'">').concat(t.iconStore[o].svg,"</svg></button>"),r=3,s=!0,l=window.innerWidth>768?3:1,c=!(window.innerWidth>567),d=window.innerWidth>768&&n,u=window.innerWidth>768&&i;return e<3&&window.innerWidth<567&&(r=1,s=!1),{infinite:s,slidesToShow:r,slidesToScroll:l,centerMode:c,variableWidth:!0,useTransform:!1,prevArrow:d,nextArrow:u,dots:!0}},toggleCampaign:function(){var e=this.container.find(".js-announcement-area");e.hasClass("s--open")?e.removeClass("s--open"):e.addClass("s--open")},getLatestAnnouncements:function(){return new Promise((function(e,a){t.yell("announce/latest",{},(function(){0===this.code&&e(this.data.rows)}))}))},renderAnnouncements:function(){var o=this;a.when(o.getLatestAnnouncements(),e.waitTmpl("announcement-item")).done((function(a){var n=o.container.find(".js-announcement-list");if(0!==a.length){var i=e.tmplStores["announcement-item"].render({data:a});n.append(i),t.init()}else n.closest(".js-announcement-area").addClass("s--empty")}))},getStatistic:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(a,o){t.yell("shorten/list",{page:e},(function(){0===this.code&&a(this.data)}))}))},renderStatistic:function(){var o=this;a.when(o.getStatistic(),e.waitTmpl("stats-item")).done((function(a){if(0!==a.rows.length){var n=e.tmplStores["stats-item"].render({data:a.rows});o.container.find(".js-stats-list").html(n),o.renderStatisticPage(a),t.init()}else o.container.find(".js-performance-statistic").addClass("s--empty")}))},renderStatisticPage:function(a){for(var o=this,n=o.container.find(".js-explore-pagination"),i='<svg class="svg-icon left_arrow_new" viewBox="'.concat(t.iconStore.left_arrow_new.viewBox,'">').concat(t.iconStore.left_arrow_new.svg,"</svg>"),r='<svg class="svg-icon right_arrow_new" viewBox="'.concat(t.iconStore.right_arrow_new.viewBox,'">').concat(t.iconStore.right_arrow_new.svg,"</svg>"),s=[],l=1;l<=a.total;l++)s.push(l);var c=function(a){o.currentStatsPage=a,o.getStatistic(o.currentStatsPage).then((function(a){var n=e.tmplStores["stats-item"].render({data:a.rows});o.container.find(".js-stats-list").html(n),t.init()}))};n.pagination({dataSource:s,prevText:i,nextText:r,pageSize:6,showPageNumbers:!1,showNavigator:!0,beforeNextOnClick:function(e,t){c(t)},beforePreviousOnClick:function(e,t){c(t)}})},initLinkModal:function(){t.event.subscribe("modal.loaded",(function(e){if("share-link-modal"===e){var t=a(".share-link-modal .js-share-link-modal");t.find(".js-share-link").text(location.href),t.find(".js-sns-link--facebook").on("click",(function(){var e="http://www.facebook.com/share.php?u=".concat(encodeURIComponent(location.href));window.open(e,"","width=640,height=480")})),t.find(".js-sns-link--line").on("click",(function(){var e="https://lineit.line.me/share/ui?url=".concat(encodeURIComponent(location.href));window.open(e,"","width=640,height=480")}))}}))},renewLink:function(e,a){return new Promise((function(o,n){var i=function(){o(this.data)};t.yell("shorten/renew",{origin:e,note:a},i,i)}))},loadTotalIncome:function(){},getPendingWithdrawalList:function(){},renderPendingWithdrawalList:function(){},getIncomeDetail:function(e){},getIncomeItem:function(e){},expandIncomeDetail:function(e,t){},closeIncomeDetail:function(e){},getWithdrawalList:function(){},renderWithdrawalList:function(){}},t.hook("partner/openAnnouncement",(function(t){var a=t.data("announceid");e.partnerManage.showAnnouncementModal(a)})),e.mRoute.addRoute("cooperation-announcement-modal",(function(t){e.partnerManage.showAnnouncementModal(t.mpid)})),t.hook("partner/toggleAnnouncement",(function(t){e.partnerManage.toggleCampaign()})),t.hook("partner/openCampaignModal",(function(t){var a=t.closest(".js-campaign-card").data("campaignid");e.partnerManage.showCampaignModal(a)})),t.hook("partner/initCampaignModal",(function(t){e.partnerManage.displayCampaignModal()})),t.hook("partner/join",(function(a){var o=function(){this.code,e.partnerManage.campaigns.forEach((function(t){parseInt(t.id,10)===parseInt(e.partnerManage.tempCampaign.id,10)&&(t.joined="1")})),e.partnerManage.container.find('.js-campaign-card[data-campaignid="'.concat(e.partnerManage.tempCampaign.id,'"]')).addClass("is--selected"),a.closest(".js-campaign-modal").removeClass("s--not-joining").addClass("s--joining")};t.yell("affiliate/join",{aid:e.partnerManage.tempCampaign.id},o,o)})),t.hook("partner/openShareLinkModal",(function(t){e.partnerManage.showShareLinkModal()})),t.hook("partner/openNoteModal",(function(t){var a=t.data("note");null==a&&(a=""),e.partnerManage.showNoteModal(t.data("pid"),a)})),t.hook("partner/updateShotern",(function(t){var o=t.closest(".js-share-link-modal--partner").find("input[name='shareLink']").val();a(".item__note").each((function(){a(this).find(".note_box").data("parma")==e.partnerManage.tempShotern.id&&(a(this).find(".note_box").text("".concat(o)),a(this).find(".js-note-edit").data("note",o))})),e.partnerManage.updateShotern(e.partnerManage.tempShotern.id,o,t)})),t.hook("partner/initPartnerLinkModal",(function(t){t.addClass("s--normal");var o="normal",n=t.find(".js-copy-target"),i=a("link[rel='canonical']").attr("href"),r=window.localStorage.getItem(i)?window.localStorage.getItem(i):"",s=function(t){return e.partnerManage.renewLink(i,t).then((function(e){var a=window.location.origin+e.link;if("Facebook"===t||"Line"===t)return new Promise((function(e,t){e(a)}));n.text(a),r=a,window.localStorage.setItem(i,a)}))};"normal"===o?n.text(location.href):r?n.text(r):t.find(".js-form-blogger").addClass("s--link-n").removeClass("s--link-h"),t.find(".modal__title＿＿group").on("click",(function(e){var i=a(e.target);"normal"===(o=i.data("link")?i.data("link"):"normal")?(t.addClass("s--normal").removeClass("s--blogger"),n.text(location.href)):(t.addClass("s--blogger").removeClass("s--normal"),r?(n.text(r),t.find(".js-form-blogger").addClass("s--link-h").removeClass("s--link-n")):t.find(".js-form-blogger").addClass("s--link-n").removeClass("s--link-h"))})),t.find(".link--facebook_share").on("click",(function(){var e="";"normal"===o?(e="http://www.facebook.com/share.php?u=".concat(encodeURIComponent(location.href)),window.open(e,"","width=640,height=480")):s("Facebook").then((function(t){e="http://www.facebook.com/share.php?u=".concat(encodeURIComponent(t)),window.open(e,"","width=640,height=480")}))})),t.find(".link--line_share").on("click",(function(){var e="";"normal"===o?(e="https://lineit.line.me/share/ui?url=".concat(encodeURIComponent(location.href)),window.open(e,"","width=640,height=480")):s("Line").then((function(t){e="https://lineit.line.me/share/ui?url=".concat(encodeURIComponent(t)),window.open(e,"","width=640,height=480")}))})),t.find(".js-link-refresh-btn").on("mouseover",(function(){a(this).tooltip()})),t.find(".js-link-refresh-btn").on("click",(function(){s()})),t.find(".new__link__btn").on("click",(function(){s(),t.find(".js-form-blogger").addClass("s--link-h").removeClass("s--link-n")}))}))}(app,gee,n)},21519:(e,t,a)=>{var o=a(31175);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){"use strict";e.teacherManage={isInitialized:!1,tabs:["course-manage","course-income"],currentTab:"course-manage",container:null,currentArticles:0,showShareLinkModal:function(o,n){t.event.subscribe("modal.loaded",(function(e){if("share-link-modal"===e){var t=a(".share-link-modal .js-share-link-modal");t.find(".js-sns-link--facebook").attr("href",o),t.find(".js-share-link").text("".concat(window.location.origin,"/course/intro/").concat(n))}})),e.modal.show({src:"share-link-modal",size:"v2-m",ta:"v2Modal",cover:"white"})},init:function(){var t=this;t.container=a(".js-dashboard-container.s--teacher"),t.renderCourseCards(),t.renderArticleLists(),t.loadTotalIncome(),t.renderPendingWithdrawalList(),t.renderWithdrawalList(),e.loadHtml("cooperation/income-item-detail",a(".js-income-detail-tmpl")),t.container.on("click",(function(o){var n=a(o.target);if(n.hasClass("js-share-course-btn")&&t.showShareLinkModal(n.data("fblink"),n.data("courseid")),n.hasClass("js-article-edit-btn")&&(e.article.current.id=n.closest(".js-manage-article-item").data("articleid"),e.article.showEditorModal(e.article.current.id)),n.hasClass("js-toggle-article-status-btn")){var i=n.closest(".js-manage-article-item"),r=i.hasClass("s--draft")?"public":"draft",s=i.data("articleid");t.setArticleStatus(s,r,(function(){t.toggleArticleStatus(s,r)}))}if(n.hasClass("js-article-delete-btn")&&(e.article.current.id=n.closest(".js-manage-article-item").data("articleid"),e.modal.showSimpleModal("刪除文章","該文章刪除後內容將無法復原，<br>確定要刪除嗎？","/dist/image/anime-svg/delete_anime.svg",'<div class="modal__btn-pair"><button class="gee modal__btn" data-gene="click:hideModal">取消</button><button class="gee modal__btn btn--bordered" data-gene="click:article/del">確定刪除</button></div>')),n.hasClass("js-manage-add-article-btn")&&(e.article.current.id=0,e.article.showEditorModal(e.article.current.id)),n.hasClass("js-expand-button")){var l=n.closest(".js-income-item"),c=l.data("collectionid");l.hasClass("s--open-detail")?t.closeIncomeDetail(l):t.expandIncomeDetail(c,l)}})),t.isInitialized=!0},getCourseList:function(){return new Promise((function(e,a){t.yell("teacher/course",{},(function(){0!==this.code&&a(),e(this.data)}))}))},getNotification:function(){return new Promise((function(t,a){e.waitFor((function(){return e.isValid(e.member.current)&&e.isValid(e.member.current.notify)})).then((function(){t(e.member.current.notify.teacher.course.list)}))}))},renderCourseCards:function(){var o=a(".js-dashboard-course-list");a.when(this.getCourseList(),this.getNotification(),e.waitTmpl("course-item")).done((function(a,n,i){o.find(".js-tmpl-course-item").remove();var r=[],s=[],l=[],c=[],d=[],u=[],m=[],h=[],p=function(t){var o=a[t];"finish"==t&&(a.finish.forEach((function(e){l.push(e)})),o=[]),"offline"==t&&(a.offline.forEach((function(e){0==e.offline.isOver?c.push(e):l.push(e)})),o=[],c.forEach((function(e){o.push(e)})),l.forEach((function(e){o.push(e)}))),"online"==t&&(a.online.forEach((function(e){h.push(e)})),o=[],m.forEach((function(e){o.push(e)})),h.forEach((function(e){o.push(e)}))),"backer"==t&&(a.backer.forEach((function(e){1==e.backer.after?0==e.backer.isOver&&d.push(e):u.push(e),1==e.isOnline&&1==e.isBacker&&1==e.backer.after&&1==e.backer.isOver&&m.push(e)})),o=[],u.forEach((function(e){o.push(e)})),d.forEach((function(e){o.push(e)}))),Array.isArray(o)?o.forEach((function(a){var o={};if(e.isValid(a)){for(var i in a)o[i]=a[i],"course_id"===i&&(o.notification=n[a[i]]),o.courseStatus=t;r.push(o)}})):s.push(a.total)};for(var f in a)p(f);var v=e.tmplStores["course-item"].render({data:r,total:s});o.append(v),t.init()})).catch((function(e){}))},getArticleList:function(){return new Promise((function(e,a){t.yell("article/manage",{},(function(){0!==this.code&&a(),e(this.data)}))}))},renderArticleLists:function(){var o=this;a.when(o.getArticleList(),e.waitTmpl("article-item")).done((function(a){if(a.draft.length+a.public.length!==0){o.container.find(".js-article-item-tmpl").remove();var n=[];a.draft.forEach((function(e){n.push(i(i({},e),{},{status:"draft"}))})),a.public.forEach((function(e){n.push(i(i({},e),{},{status:"public"}))})),n=n.sort((function(e,t){return t.id-e.id})),o.currentArticles=n.length;var r=e.tmplStores["article-item"].render({data:n});o.container.find(".js-article-manage-list").append(r),t.init()}else o.container.find(".js-dashboard-article-manage").addClass("s--empty")}))},getNewArticleCard:function(t){var a={};for(var o in t)"status"===o?"Published"===t[o]?a.status="public":a.status="draft":a[o]=t[o];return e.tmplStores["article-item"].render({data:[a]})},updateArticleCard:function(e,t){var a=this.getArticleCard(e),o=this.getNewArticleCard(t);a.replaceWith(o)},insertNewArticleCard:function(e){var a=this.getNewArticleCard(e);this.container.find(".js-article-manage-list").prepend(a),t.init()},getArticleCard:function(e){return this.container.find(".js-manage-article-item[data-articleid=".concat(e,"]"))},setArticleStatus:function(e,a,o){t.yell("article/status",{id:e,status:a},o,o)},toggleArticleStatus:function(e,t){this.getArticleCard(e).removeClass("s--public s--draft").addClass("s--".concat(t))},deleteArticleCard:function(e){var t=this;t.getArticleCard(e).remove(),t.currentArticles-1>0?t.currentArticles-=1:(t.currentArticles=0,t.container.find(".js-dashboard-article-manage").addClass("s--empty"))},loadTotalIncome:function(){var o=this,n=function(){this.code;var n=this.data;if(o.container.find(".js-income-total").text(a.fn.formatNum(1*n.balance+1*n.withdraw,0)),o.container.find(".js-income-pending").text(a.fn.formatNum(n.balance,0)),"Pending"===n.status?(o.container.find(".js-income-pending-text").text("請款審核中..."),n.request>0&&(o.container.find(".js-withdraw-request-btn").text("請款明細"),o.container.find(".js-withdraw-operation-box").removeClass("s--disabled").addClass("s--pending"),e.withdraw.balance=n.request,e.withdraw.request=n.request,e.withdraw.balanceTax=Math.floor(.05*n.request),e.withdraw.invoice_type=n.invoice_type)):(o.container.find(".js-income-pending-text").text("尚未提領"),o.container.find(".js-withdraw-request-btn").text("立即請款"),n.balance>0?(o.container.find(".js-withdraw-operation-box").removeClass("s--pending s--disabled"),e.withdraw.balance=n.balance,e.withdraw.balanceTax=Math.floor(.05*n.balance),e.withdraw.invoice_type=n.invoice_type):o.container.find(".js-withdraw-operation-box").removeClass("s--pending").addClass("s--disabled")),n.notices.length>0){e.withdraw.notices=n.notices;var i=e.withdraw.notices,r=0;!function a(o){t.event.clearSubscribe("modal.closed"),o&&(e.withdraw.currentNotice=o,"Paid"===o.status?e.modal.show({src:"withdraw-success-modal",size:"lg",canClose:!1,header:"blue",title:"請款成功"}):e.modal.show({src:"withdraw-fail-modal",size:"lg",canClose:!1,header:"blue",title:"請款申請未通過"}),t.event.subscribe("modal.closed",(function(){r+=1,window.setTimeout((function(){a(i[r])}),500)})))}(i[r])}};t.yell("withdraw/check",{},n,n)},getPendingWithdrawalList:function(){return new Promise((function(e,a){t.yell("collection/mine/",{type:"new"},(function(){this.code,e(this.data)}))}))},renderPendingWithdrawalList:function(){var o=this;a.when(o.getPendingWithdrawalList(),e.waitTmpl("pending-income-item")).done((function(a){if(0!==a.rows.length){var n=e.tmplStores["pending-income-item"].render({data:a.rows});o.container.find(".js-pending-income-list").append(n),t.init()}else o.container.find(".js-dashboard-course-income").addClass("s--empty--pending")}))},getIncomeDetail:function(e){return new Promise((function(a,o){t.yell("collection/myCourses/",{cid:e},(function(){a(this.data.rows)}))}))},getIncomeItem:function(e){return this.container.find('.js-income-item[data-collectionid="'.concat(e,'"]'))},expandIncomeDetail:function(o,n){var i=this;e.collection.collectionID=o,n.data("loaded")?n.addClass("s--open-detail"):a.when(i.getIncomeDetail(o),e.waitTmpl("income-item-detail")).done((function(a){var n=i.getIncomeItem(o),r=e.tmplStores["income-item-detail"].render({data:a});n.find(".js-income-detail-tbody").append(r),t.init(),n.addClass("s--open-detail"),n.attr("data-loaded",!0)}))},closeIncomeDetail:function(e){e.removeClass("s--open-detail")},getWithdrawalList:function(){return new Promise((function(e,a){t.yell("withdraw/mine/",{},(function(){this.code,e(this.data)}))}))},renderWithdrawalList:function(){var o=this;a.when(o.getWithdrawalList(),e.waitTmpl("withdrawal-income-item")).done((function(a){if(a){var n=e.tmplStores["withdrawal-income-item"].render({data:a.rows});o.container.find(".js-withdrawal-list").append(n),t.init()}else o.container.find(".js-dashboard-course-income").addClass("s--empty--withdrawal")}))}}}(app,gee,o)},84658:(e,t,a)=>{var o=a(31175);function n(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return i(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){l=!0,r=e},f:function(){try{s||null==a.return||a.return()}finally{if(l)throw r}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}a(58133).result,function(e,t,a){"use strict";e.coupon={tempCookie:"",errMsg:{e5200:"無效的優惠代碼",e5201:"優惠券異常，請聯繫客服",e5202:"抱歉，優惠券不存在",e5203:"優惠券已全數用完",e5204:"不在優惠券使用的名單中",e5205:"優惠券已存在，無法儲存",e5206:"優惠券的課程已被購買",e5207:"優惠券的課程已被購買",e5208:"僅限於購物車頁面輸入使用",e5209:"優惠券已被使用囉",e5210:"抱歉，優惠券不存在",e5211:"不符合結帳課程",e5212:"不符合折扣條件",e5213:"不符合金額規定",e5214:"不符合課堂數量條件"},getCouponsFromCookie:function(){return a.cookie("boundCoupons")?a.cookie("boundCoupons").split("-"):[]},saveBoundCouponsCookie:function(e){a.cookie("boundCoupons",e.join("-"),{expires:30,path:"/"})},ifExistInCouponCookie:function(t){return e.coupon.getCouponsFromCookie().includes(t)},addCoursesToCart:function(a,o){var n=function(){if(0===this.code){var t=this.data.redirect+"#code=".concat(o);window.location.href=t}else e.modal.showErrorModal(e.coupon.errMsg["e".concat(this.code)])};t.yell("promocode/addToCart",{courses:a,unCheck:1},n,n)},getAvailableCoupons:function(){var e=function(){t.event.fire("app.availableCouponGet",this.data)};t.yell("promocode/showAvailable",null,e,e)},getFormattedCoupon:function(e,t){var a=this,o=Object.assign({},e);return o.status=t,o.courseType=a.getCourseType(e),o.courses=e.courses&&e.courses.length>1?e.courses.map((function(e,t){return e.idx=t+1,e})):e.courses,o.condition=a.getCondition(e),o.courses.length>0&&(o.bindedCourses=a.getBindedCourses(o.courses)),"available"===t?(o.isEmergent=a.isEmergent(e.endTime),o.isEmergent?o.endTime=1e3*parseInt(e.endTime,10):a.isPermanent(e.endTime)?o.endTime="無期限":o.endTime=a.convertTimestampToString(e.endTime),o.isNewlyCreated=a.isNewlyCreated(e)):(o.isEmergent=!1,o.endTime=a.convertTimestampToString(e.endTime),o.isNewlyCreated=!1),o},convertTimestampToString:function(t){var a=new Date(1e3*t),o=e.padZero(a.getFullYear()),n=e.padZero(a.getMonth()+1),i=e.padZero(a.getDate()),r=e.padZero(a.getHours()),s=e.padZero(a.getMinutes()),l=e.padZero(a.getSeconds());return"".concat(o,"/").concat(n,"/").concat(i," ").concat(r,":").concat(s,":").concat(l)},isNewlyCreated:function(t){return!e.coupon.ifExistInCouponCookie(t.pcl_code)},isEmergent:function(t){var a=e.member.timestamp;return 1e3*parseInt(t,10)-1e3*a<2592e5},isPermanent:function(t){var a=e.member.timestamp;return 1e3*parseInt(t,10)-1e3*a>15768e8},getCourseType:function(e){var t={fundraising:{id:"242",title:"線上募資課程"},nonFundraising:{id:"243",title:"非募資中課程"},offline:{id:"244",title:"實體課程"},online:{id:"245",title:"線上課程"}};if("bundle_courses"===e.type)return"課程組合包";if("remarketing"===e.type)return"";if("1"===e.pce_category_setting&&"0"===e.course_setting){var a=e.course_category.split(",");if(3===a.length&&a.includes(t.nonFundraising.id)&&a.includes(t.online.id)&&a.includes(t.offline.id))return"線上非募資＆實體課程";if(2===a.length&&a.includes(t.fundraising.id)&&a.includes(t.offline.id))return"線上募資＆實體課程";for(var o in t)if(parseInt(t[o].id,10)===parseInt(a[0]))return"".concat(t[o].title)}return"1"===e.course_setting?0===e.courses.length?"":e.courses[0].name:"0"===e.pce_category_setting&&"0"===e.course_setting?"全部":void 0},getCondition:function(e){return"1"===e.pce_price_range?"course"===e.pce_price_range_type?"課程須滿 NT$ ".concat(e.pce_price_range_low):"count"===e.pce_price_range_type?""!==e.pce_campaign_name?"活動頁面任選 ".concat(e.pce_price_range_low," 堂以上"):"課程須滿 ".concat(e.pce_price_range_low," 堂"):""!==e.pce_campaign_name?"活動須滿 NT$ ".concat(e.pce_price_range_low):"訂單須滿 NT$ ".concat(e.pce_price_range_low):"任意價格"},getBindedCourses:function(e){return e.map((function(e){return e.courseID})).join(",")},animateSpecificCoupon:function(a){e.waitFor((function(){return!0===e.coupon.showcase.couponsLoaded}),30).then((function(){e.coupon.showcase.moveToCoupon(a),t.event.subscribe("showcaseMoved",(function(){e.coupon.animateCoupon(a),t.event.clearSubscribe("showcaseMoved")}))}))},showSaveNotice:function(t){e.arena.saveNotice.show(t,5e3)},autobind:function(a){var o=function(){if(0!==this.code)switch(e.coupon.isBinding=!1,this.code){case 5205:return e.arena.saveNotice.show(e.coupon.errMsg.e5205,3e3,"error"),void e.coupon.animateSpecificCoupon(this.data.pcl_code);case 5203:return void e.modal.showCouponUsedOutModal();default:return void e.arena.saveNotice.show(e.coupon.errMsg["e".concat(this.code)],5e3,"error")}else e.coupon.isBinding=!0,e.coupon.showSaveNotice(),e.coupon.showcase.selectTab("available"),e.coupon.showcase.getCoupon("available"),e.coupon.animateSpecificCoupon(this.data.pcl_code)};t.yell("promocode/autoBind",{token:a},o,o)},animateCoupon:function(e){var t=a("#".concat(e));t.addClass("s--animating"),window.setTimeout((function(){t.removeClass("s--animating")}),1400)},showcase:{root:null,tab:null,tmpl:"coupon-ticket-vertical",currentTab:"available",coupons:null,types:{available:"s--available",used:"s--used",expired:"s--expired"},showcaseArea:null,couponWidth:null,dragging:!1,prevMouseX:null,dragDirection:null,loaded:!1,couponsLoaded:!1,moved:!1,init:function(t){var o,n,i=this;function r(){window.clearInterval(o),window.clearTimeout(n)}i.root=t,i.tab=i.root.find(".js-showtab"),i.showcaseArea=i.root.find(".showcase__area"),e.waitFor((function(){return void 0!==e.coupon.isBinding})).then((function(){e.coupon.isBinding||i.getCoupon("available")})),i.root.on("click",(function(e){var t=e.target,o=a(t);void 0!==o.data("coupontype")&&(i.selectTab(o.data("coupontype")),i.getCoupon(o.data("coupontype")))})),i.root.find(".js-showcase__control").on("mouseover",(function(t){t.preventDefault();var n=a(t.target);n.hasClass("js-control-button")?(o&&window.clearInterval(o),o=window.setInterval((function(){e.coupon.showcase.moveShowcase(n.data("direction"),0,r)}),20)):r()})),i.root.find(".js-showcase__control").on("mouseleave",(function(e){o&&window.clearInterval(o)})),i.root.find(".js-showcase__control").on("touchstart",(function(t){t.preventDefault();var i=a(t.target);i.hasClass("js-control-button")&&(r(),o=window.setInterval((function(){e.coupon.showcase.moveShowcase(i.data("direction"),20,r)}),20),n=window.setTimeout((function(){o&&window.clearInterval(o)}),300))})),i.loaded=!0},moveShowcase:function(e,t,a){var o=t||15,n=this,i=n.root.find(".js-area-".concat(n.currentTab)),r=parseInt(i.css("margin-left").replace("px",""),10),s=r-o;if("left"===e){if(r>=0)return i.css("margin-left","0px"),void("function"==typeof a&&a());i.css("margin-left","".concat(r+o,"px"))}else{if(i.offset().left+i.width()<=n.showcaseArea.offset().left+n.showcaseArea.width())return void("function"==typeof a&&a());i.css("margin-left","".concat(s,"px"))}},moveToCoupon:function(o){var n=this;n.moved=!1,e.waitFor((function(){return a("#".concat(o)).length>0})).then((function(){var e=a("#".concat(o)),i=n.root.find(".js-area-".concat(n.currentTab)),r=parseInt(i.css("margin-left").replace("px",""),10),s=window.innerWidth/2-(e.width()/2-20),l=r,c=window.setInterval((function(){var a=l-20;e.offset().left<=s?(n.moved=!0,t.event.fire("showcaseMoved"),window.clearInterval(c)):i.css("margin-left","".concat(a,"px")),l=a}),15)}))},resetPosition:function(){var e=this,t=e.root.find(".js-area-".concat(e.currentTab));e.root.find(".js-area-".concat(e.currentTab)).closest(".area").removeClass("s--empty"),t.css("margin-left","0px")},renderCoupons:function(o,n){var i=this;i.root.find(".js-area-".concat(n)).closest(".area").removeClass("s--loading"),e.waitFor((function(){return void 0!==e.tmplStores[i.tmpl]})).then((function(){if(!o)return i.root.find(".tab--".concat(n)).append('<span class="coupon-num">(0)</span>'),void i.root.find(".js-area-".concat(n)).closest(".area").addClass("s--empty");var r=[],s=[],l=[];i.root.find(".js-area-".concat(n)).closest(".area").removeClass("s--empty"),i.root.find(".tab--".concat(n)).append('<span class="coupon-num">('.concat(o?o.length:0,")</span>")),JSON.parse(JSON.stringify(o)).forEach((function(t){r.push(t.pcl_code);var a=e.coupon.getFormattedCoupon(t,n);a.isNewlyCreated?l.push(a):s.push(a)})),s=l.concat(s);var c=e.tmplStores[i.tmpl].render({data:s});i.root.find(".js-area-".concat(n)).append(c),t.init(),i.couponsLoaded=!0,e.coupon.isBinding||(e.coupon.isBinding=!1),"available"===n&&e.coupon.saveBoundCouponsCookie(r),window.innerWidth<568||i.showcaseArea.find(".area").each((function(){a(this).width()>i.showcaseArea.width()&&(a(this).on("mousedown",(function(e){a(e.target).hasClass("coupon__link")||1===e.which&&(e.preventDefault(),i.dragging=!0,i.prevMouseX=e.clientX)})),a(this).on("touchstart",(function(e){a(e.target).hasClass("coupon__link")||(e.preventDefault(),i.dragging=!0,i.prevTouchX=e.originalEvent.changedTouches[0].clientX,i.prevTouchY=e.originalEvent.changedTouches[0].clientY)})),a(this).on("mousemove",(function(t){if(i.dragging){var a=i.prevMouseX-t.clientX;i.dragDirection=a>0?"left":"right",e.coupon.showcase.moveShowcase(i.dragDirection)}})),a(this).on("touchmove",(function(t){if(t.preventDefault(),i.dragging){var o=i.prevTouchY-t.originalEvent.changedTouches[0].clientY;if(Math.abs(o)>60){var n=a("html, document").scrollTop();o<0?a("html, document").scrollTop(n-20):a("html, document").scrollTop(n+20)}else{var r=i.prevTouchX-t.originalEvent.changedTouches[0].clientX;i.dragDirection=r>0?"right":"left",e.coupon.showcase.moveShowcase(i.dragDirection,10)}}})),a(this).on("mouseup touchend",(function(e){1===e.which&&(i.dragging=!1,i.prevMouseX=null,i.prevTouchX=null,i.prevTouchY=null)})))}))}))},getCoupon:function(a){var o=this,i="available"===a?"endTime":"";o.couponsLoaded=!1,o.root.find(".js-area-".concat(a)).html(""),o.root.find(".js-area-".concat(a)).closest(".area").addClass("s--loading");var r=function(){var i=this.data;if("available"===a){var r=[];t.event.subscribe("student.memberCourse",(function(s){var l,c=n(i);try{for(c.s();!(l=c.n()).done;){var d=l.value;if(""!==d.pce_campaign_name&&"0"!==d.pce_price_range_low){var u,m=0,h=n(d.courses);try{var p=function(){var t=u.value,a=s.list.some((function(e){return t.courseID===e.id})),o=e.member.current.unpaidSourseID.some((function(e){return Number(t.courseID)===e}));a||o||(m+=Number(t.price))};for(h.s();!(u=h.n()).done;)p()}catch(e){h.e(e)}finally{h.f()}Number(d.pce_price_range_low)<=m&&r.push(d)}else r.push(d)}}catch(e){c.e(e)}finally{c.f()}t.event.clearSubscribe("student.memberCourse"),o.coupons=r,o.renderCoupons(r,a)})),e.student.course()}else o.coupons=i,o.renderCoupons(i,a);6100===this.code&&(e.stdErr(this),t.exe("attemptToLogin",null))};t.yell("promocode/list",{status:a,sort:i},r,r)},clearTab:function(){var e=this,t=[];for(var o in e.types)t.push(e.types[o]);t.join(" "),e.root.removeClass(t.join(" ")),e.root.find(".tab").each((function(){a(this).find(".coupon-num").remove()}))},selectTab:function(e){var t=this;t.clearTab(),t.currentTab=e,t.root.addClass(t.types[t.currentTab]),t.resetPosition()}}},t.hook("coupon/initShowcase",(function(t){e.member.getUserTimestamp((function(){e.coupon.showcase.init(t)}))})),t.hook("promocode/addToCart",(function(t){e.coupon.addCoursesToCart(t.data("itemid"),t.data("code"))})),t.hook("removeCoupon",(function(t){e.promocode.currentCode=null,e.promocode.total=0,e.member.cartStatus(),t.closest(".promocode-form").removeClass("s--has-coupon"),a("#promocode").val("")})),t.hook("autoBindCode",(function(t){var a;window.location.search.replace("?","").split("&").forEach((function(e){"key"===e.split("=")[0]&&(a=e.split("=")[1])})),e.member.checkUserStatus((function(){a?(e.coupon.autobind(a),history.pushState(null,null,"/coupon")):e.coupon.isBinding=!1}),(function(){}))})),t.hook("keyinCouponCode",(function(o){var n=o,i=o.find(".js-code-input");function r(o){var r=function(){i.val(""),0!==this.code?(n.addClass("has-error"),s(e.coupon.errMsg["e".concat(this.code)]),a(e.body).on("click",(function(t){n.removeClass("has-error"),a(e.body).unbind("click")}))):(e.coupon.showSaveNotice(),e.coupon.showcase.selectTab("available"),e.coupon.showcase.getCoupon("available"),e.coupon.animateSpecificCoupon(this.data.pcl_code))};function s(e){var a=n.find(".error-msg");a.html("");var o='<svg class="svg-icon exclamation icon-red" viewBox="'.concat(t.iconStore.exclamation.viewBox,'">').concat(t.iconStore.exclamation.svg,"</svg>");a.html("".concat(o," <span>").concat(e,"</span>"))}o.length<=0?(n.addClass("has-error"),s("請輸入優惠券代碼"),a(e.body).on("click",(function(t){n.removeClass("has-error"),a(e.body).unbind("click")}))):t.yell("promocode/bind",{code:o},r,r)}i.on("keyup focus",(function(){n.hasClass("has-error")&&n.removeClass("has-error")})),n.find("button").on("click",(function(){r(i.val())})),n.on("keypress",(function(e){var t=i.val();13===e.keyCode&&r(t)}))}))}(app,gee,o)},90221:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.basic={edit:function(o){var n=function(){0!==this.code?6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this):(o.html(e.tmplStores["course-basic-form"].render(this.data)),e.basic.store=this.data,a(".js-select-date").each((function(){var e=a(this),t=a(this).find("input");e.flatpickr({enableTime:!0,dateFormat:"Y-m-d H:i",defaultDate:t.val(),onChange:function(e,a,o){t.val(a)}})})),t.init())};t.yell("course/basic/get",{courseID:a("#courseID").val()},n,n)},set:function(o,n){var i=function(){0!==this.code?e.stdErr(this):(e.stdSuccess(this),a(".js-basic-form").find("input[name=placeID]").val(this.data.placeID).end().find("input[name=ticketID]").val(this.data.ticketID))};t.yell("course/"+n.data("step")+"/set",o,i,i)},submitForm:function(t){var o=a(".js-basic-form");o.find("input").each((function(){a(this).val()===a(this).attr("placeholder")&&a(this).val("")})),e.basic.set(o.serialize(),t),e.basic.saveTag("save")},del:function(t,o){var n=o.closest(".fileinput-box"),i=n.find("input").attr("name");n.find(".upload-success-info, .upload-progress-info, .cancel-btn").addClass("hide"),a(".js-basic-form input[name="+i+"]").val(""),"cancel"===o.data("act")&&e.nqueueFU[i].stop(o)},saveTag:function(o,n){var i=a(".js-class-edit-sidebar .manage-tab li.active"),r=a(".js-class-edit-container .js-save-btn");i.addClass("saved"),r.addClass("active"),setTimeout((function(){i.removeClass("saved"),r.removeClass("active"),"next"===o&&(e.tab.show(n),window.location.hash=n,t.go2Top())}),1e3)}},t.hook("basic/countCourseIntro",(function(e){var t=e.val().length,o=e.attr("maxlength");return a(".js-count-intro").text(t),a(".js-count-intro-remain").text(o-t),!0})),t.hook("basic/syncText",(function(e){var t=e.data("field"),o=e.val();switch(t){case"course-name":a(".js-sync-"+t).text(o);break;case"price":o=0==o||""===o?"Free":"NT $"+o,a(".js-sync-"+t).text(o);break;case"fake-price":o=0==o||""===o?"不顯示":"NT $"+o,a(".js-sync-"+t).text(o);break;case"tag":a(".js-sync-"+t).val(o)}})),t.hook("basic/removeCategory",(function(e){var t=e.data("value");e.parents(".js-category-cloud-block").find("input[value="+t+"]").prop("checked",!1),e.remove()})),t.hook("basic/toggleCategoryBlock",(function(e){if(e.hasClass("active"))e.removeClass("active");else{var t=e.parents(".js-category-cloud-block");t.find(".block").removeClass("active");var a=t.width();e.addClass("active").find(".js-category-cloud").css("width",a)}})),t.hook("basic/toggleCategory",(function(e){var a=e.parents(".js-category-cloud-block");a.find(".js-category-list li").length<2&&!e.hasClass("active")&&(a.find(".js-category-list").append('<li func="basic/removeCategory" data-value="'+e.data("id")+'">'+e.text()+'<svg class="svg-icon close_c" viewBox="'.concat(t.iconStore.close_c.viewBox,'">').concat(t.iconStore.close_c.svg,"</svg></li>")).end().find("input[value="+e.data("id")+"]").prop("checked",!0),e.addClass("active"),t.init())})),t.hook("basic/save",(function(t){e.basic.submitForm(t),t.blur()})),t.hook("basic/next",(function(t){var o=a(".js-basic-form"),n=a(".js-file-form");if(e.basic.set(o.serialize(),t),a.validatr.validateForm(o)){var i=!0;o.find("input[name=category\\[\\]]:checkbox:checked").length<=0&&(o.find("input[name=category\\[\\]]").closest("div.form-group").siblings(".error-msg").removeClass("hide"),i=!1),""==o.find("input[name=img]").val()&&(n.find("input[name=img]").siblings(".error-msg").removeClass("hide"),i=!1),n.find(".fileinput-box > .upload-success-info").hasClass("hide")&&(n.find("input[name=video]").siblings(".error-msg").removeClass("hide"),i=!1),i?e.basic.saveTag("next","#intro"):e.modal.show({title:"請填寫完整課程資料",src:"confirm-course-basic-modal",size:"sm",cover:"opacity",ta:"messageModal",header:"blue"})}else e.modal.show({title:"請填寫完整課程資料",src:"confirm-course-basic-modal",size:"sm",cover:"opacity",ta:"messageModal",header:"blue"})})),t.hook("basic/confirm",(function(a){e.basic.saveTag("next","#intro"),t.hideModal()})),t.hook("basic/init",(function(a){var o=a.attr("id");o&&e.tab.register("#"+o,(function(){e.basic.edit(a),t.go2Top()}))}))}(app,gee,o)},58344:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.editChapter={init:function(){e.editChapter.unitSortOpt={handle:".js-sub-handle",items:".unit-group",start:function(e,t){a(this).addClass("js-sortable-ing")},stop:function(t,o){a(this).removeClass("js-sortable-ing"),e.editChapter.resort()},cancel:".js-sortable-cancel"},a(".js-sortable-box").sortable({handle:".js-big-handle",items:".chapter-block-div",start:function(e,t){a(t.placeholder[0]).height(t.item.height()),a(this).addClass("js-sortable-ing")},stop:function(t,o){a(this).removeClass("js-sortable-ing"),e.editChapter.resortChapter(),e.editChapter.resort()},cancel:".js-sortable-cancel",opacity:.8}),a(".js-sortable-subbox").sortable(e.editChapter.unitSortOpt),e.editChapter.resort()},load:function(a){var o=function(){0!==this.code?6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this):(e.renderBox(e.editChapter.box,{data:this.data.chapters},1),e.editChapter.init(),e.editChapter.box.find(".js-big-handle").addClass("ui-sortable-handle"),t.init())};t.yell("chapter/simple",{courseID:e.editChapter.courseID},o,o)},save:function(o){var n=function(){0!==this.code?e.stdErr(this):(t.clog(this.data),e.editChapter.load())},i=[],r=1;e.editChapter.box.find(".chapter-block-div").each((function(e){var t=e+1,o=a(this).data("id"),n=a(this).find(".js-chapter-title").val();i.push({sort:1*t,unitID:o,title:n}),a(this).find(".js-unit-counter").each((function(e){var t=a(this).data("id"),n=a(this).find(".js-chapter-title").val();i.push({sort:r,parentID:o,unitID:t,title:n}),r++}))})),t.yell("chapter/save",{courseID:e.editChapter.courseID,list:i},n,n)},setChapter:function(a,o,n){n=0===(o=o||0)?e.editChapter.box.find(".chapter-block-div").length+1:n;var i=function(){0!==this.code?e.stdErr(this):0===o&&(e.editChapter.box.append(e.tmplStores["chapter-unit"].render({data:[{chapterID:this.data.chapterID,title:a,sort:n,subset:[]}]})),e.editChapter.box.find(".chapter-block-div:last .js-sortable-subbox").sortable(e.editChapter.unitSortOpt),t.init(),e.win.scrollBottom(0))};t.yell("chapter/unit/set",{courseID:e.editChapter.courseID,title:a,chapterID:o,parentID:0,sort:n},i,i)},setUnit:function(o,n,i){n=n||0;var r=i.closest(".chapter-block-div");0===n?r.find(".unit-group").length:e.editChapter.box.find(".js-unit-counter").index(i),0===n&&(i.append(a("#chapterUnitTmpl").render([{chapterID:0,title:o,parentID:r.data("id")}])),e.editChapter.resort(),t.init())},del:function(o,n){var i=function(){var o=n.closest(".unit-group");o.length<1&&(o=a("div.unit-group[data-id="+n.data("pid")+"]")),o.remove(),t.hidePopover(n),e.editChapter.resort()},r=function(){0!==this.code?e.stdErr(this):i()};1*o!=0?t.yell("chapter/self/del",{courseID:e.editChapter.courseID,chapterID:o},r,r):i()},delAll:function(o,n){var i=function(){if(0!==this.code)e.stdErr(this);else{var t=n.closest(".chapter-block-div");t.length<1&&(t=a("div.chapter-block-div[data-id="+n.data("pid")+"]")),t.remove(),e.editChapter.resort()}};1*o!=0?t.yell("chapter/all/del",{courseID:e.editChapter.courseID,chapterID:o},i,i):(n.closest(".chapter-block-div").remove(),t.hidePopover(n),e.editChapter.resort())},resort:function(o){var n=function(){0!==this.code?e.stdErr(this):t.clog(this.data)},i=[];e.editChapter.box.find(".js-unit-counter").each((function(e){var t=e+1,o=a(this).data("id"),n=a(this).find(".js-chapter-title").val();t<=9&&(t="0"+t),a(this).find(".no").text(t),i.push({sort:1*t,unitID:o,title:n})})),o&&t.yell("chapter/resort",{courseID:e.editChapter.courseID,resort:i},n,n)},resortChapter:function(o){var n=function(){0!==this.code?e.stdErr(this):t.clog(this.data)},i=[];e.editChapter.box.find(".chapter-block-div").each((function(e){var t=e+1,o=a(this).data("id");t<=9&&(t="0"+t),i.push({sort:1*t,unitID:o})})),o&&t.yell("chapter/resort",{courseID:e.editChapter.courseID,resort:i},n,n)}},t.hook("editChapter/react",(function(e){var o=a(e.event.target),n="editChapter/"+o.attr("func");o.data("event")===e.event.type&&t.check(n)&&(o.event=e.event,t.exe(n,o))})),t.hook("closeRemind",(function(e){a.cookie(e.data("cookie-name"),!0,{expires:3650,path:"/"})})),t.hook("hideRemind",(function(e){a.cookie(e.data("cookie-name"))&&e.remove()})),t.hook("editChapter/init",(function(t){e.editChapter.box=a("#chapter-form-div"),e.editChapter.courseID=a("#courseID").val(),e.loadTmpl(e.editChapter.box.data("tmpl"),e.editChapter.box),e.editChapter.load()})),t.hook("editChapter/insertChapter",(function(t){var a=t.event.keyCode||t.event.which,o=t.val().trim();13!==a||t.event.shiftKey||""===o||(e.editChapter.setChapter(o),t.val(""))})),t.hook("editChapter/setChapter",(function(t){var a=t.event.keyCode||t.event.which,o=t.closest(".chapter-block-div"),n=t.val().trim();n===t.data("orig").trim()||13!==a||t.event.shiftKey||""===n||(e.editChapter.setChapter(n,o.data("id"),o.data("sort")),t.data("orig",n))})),t.hook("editChapter/addUnit",(function(o){var n=o.closest(".chapter-block-div");o.parent().before(a("#chapterUnitTmpl").render([{chapterID:0,title:"",parentID:n.data("id")}])),e.editChapter.resort(),t.init()})),t.hook("editChapter/insertUnit",(function(t){var a=t.event.keyCode||t.event.which,o=t.closest(".chapter-block-div").find(".js-sortable-subbox"),n=t.val().trim();13!==a||t.event.shiftKey||""===n||(e.editChapter.setUnit(n,0,o),t.val(""))})),t.hook("editChapter/popoverDel",(function(e){var t=e.data("box");if(e.next(".popover").hasClass("in"))e.closest(t).removeClass("delete");else{e.closest(t).addClass("delete");var a=e.data("type"),o=e.data("pid"),n=e.data("act"),i=e.data("msg")||"你正在刪除？";e.data("bs.popover")||e.popover("destroy"),e.addClass("on-popover").popover({content:"<p>"+i+'</p><span class="delete-me" data-type="'+a+'" data-pid="'+o+'" data-act="'+n+'" data-event="click" func="triggerDel">是的</span><span class="close-popover-btn" data-event="click" func="hidePopover">不要</span>',html:!0,sanitize:!1,placement:"top",toggle:"manual"}).popover("show"),e.closest(t).find(".close-popover-btn").data("box",t)}})),t.hook("editChapter/hidePopover",(function(e){var t=a(e),o=t.data("box");t.closest(o).removeClass("delete").end().closest(".popover").parent().find(".on-popover").popover("destroy").removeClass("on-popover")})),t.hook("editChapter/triggerDel",(function(t){var o=a(t),n=o.data("type"),i=o.data("pid"),r=o.data("act");e[n]&&(e[n][r]?e[n][r](i,o):e[n].del(i,o))})),t.hook("editChapter/save",(function(t){e.editChapter.save(),e.basic.saveTag("save"),t.blur()}))}(app,gee,o)},39055:(e,t,a)=>{var o,n,i;n=[a(31175)],void 0===(i="function"==typeof(o=function(e){var t=a(87599);e.extend(e.FroalaEditor.POPUP_TEMPLATES,{emojis:"[_CUSTOM_LAYER_]"}),e.FroalaEditor.PLUGINS.emojis=function(e){var a=this;return this.selectedCategory=t.categories[0],this.categories=t.categories,this.initPopup=function(){var t=e.popups.create("emojis",{custom_layer:a.getPopupHtml()});return e.popups.onRefresh("emojis",a.refreshPopup),t},this.getPopupHtml=function(){var e='<div class="emojis">';return e+=a.getCategoryHtml(),(e+=a.getEmojiHtml())+"</div>"},this.getCategoryHtml=function(){var e='<div class="emoji-categories">';return a.categories.forEach((function(t){var o=t.id===a.selectedCategory.id?"emoji-category__active":"";e+='\n                <span class="fr-command emoji-category '.concat(o,'"\n                      title="').concat(t.name,'"\n                      data-cmd="emojis.setCategory"\n                      data-param1="').concat(t.id,'"\n                >'),e+=a.svgForCategory(t.id),e+="</span>"})),e+="</div>"},this.svgForCategory=function(e){switch(e){case"people":return"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'><path d='M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m0 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10'></path><path d='M8 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 8 7M16 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 16 7M15.232 15c-.693 1.195-1.87 2-3.349 2-1.477 0-2.655-.805-3.347-2H15m3-2H6a6 6 0 1 0 12 0'></path></svg>";case"nature":return"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'><path d='M15.5 8a1.5 1.5 0 1 0 .001 3.001A1.5 1.5 0 0 0 15.5 8M8.5 8a1.5 1.5 0 1 0 .001 3.001A1.5 1.5 0 0 0 8.5 8'></path><path d='M18.933 0h-.027c-.97 0-2.138.787-3.018 1.497-1.274-.374-2.612-.51-3.887-.51-1.285 0-2.616.133-3.874.517C7.245.79 6.069 0 5.093 0h-.027C3.352 0 .07 2.67.002 7.026c-.039 2.479.276 4.238 1.04 5.013.254.258.882.677 1.295.882.191 3.177.922 5.238 2.536 6.38.897.637 2.187.949 3.2 1.102C8.04 20.6 8 20.795 8 21c0 1.773 2.35 3 4 3 1.648 0 4-1.227 4-3 0-.201-.038-.393-.072-.586 2.573-.385 5.435-1.877 5.925-7.587.396-.22.887-.568 1.104-.788.763-.774 1.079-2.534 1.04-5.013C23.929 2.67 20.646 0 18.933 0M3.223 9.135c-.237.281-.837 1.155-.884 1.238-.15-.41-.368-1.349-.337-3.291.051-3.281 2.478-4.972 3.091-5.031.256.015.731.27 1.265.646-1.11 1.171-2.275 2.915-2.352 5.125-.133.546-.398.858-.783 1.313M12 22c-.901 0-1.954-.693-2-1 0-.654.475-1.236 1-1.602V20a1 1 0 1 0 2 0v-.602c.524.365 1 .947 1 1.602-.046.307-1.099 1-2 1m3-3.48v.02a4.752 4.752 0 0 0-1.262-1.02c1.092-.516 2.239-1.334 2.239-2.217 0-1.842-1.781-2.195-3.977-2.195-2.196 0-3.978.354-3.978 2.195 0 .883 1.148 1.701 2.238 2.217A4.8 4.8 0 0 0 9 18.539v-.025c-1-.076-2.182-.281-2.973-.842-1.301-.92-1.838-3.045-1.853-6.478l.023-.041c.496-.826 1.49-1.45 1.804-3.102 0-2.047 1.357-3.631 2.362-4.522C9.37 3.178 10.555 3 11.948 3c1.447 0 2.685.192 3.733.57 1 .9 2.316 2.465 2.316 4.48.313 1.651 1.307 2.275 1.803 3.102.035.058.068.117.102.178-.059 5.967-1.949 7.01-4.902 7.19m6.628-8.202c-.037-.065-.074-.13-.113-.195a7.587 7.587 0 0 0-.739-.987c-.385-.455-.648-.768-.782-1.313-.076-2.209-1.241-3.954-2.353-5.124.531-.376 1.004-.63 1.261-.647.636.071 3.044 1.764 3.096 5.031.027 1.81-.347 3.218-.37 3.235'></path></svg>";case"foods":return"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'><path d='M17 4.978c-1.838 0-2.876.396-3.68.934.513-1.172 1.768-2.934 4.68-2.934a1 1 0 0 0 0-2c-2.921 0-4.629 1.365-5.547 2.512-.064.078-.119.162-.18.244C11.73 1.838 10.798.023 9.207.023 8.579.022 7.85.306 7 .978 5.027 2.54 5.329 3.902 6.492 4.999 3.609 5.222 0 7.352 0 12.969c0 4.582 4.961 11.009 9 11.009 1.975 0 2.371-.486 3-1 .629.514 1.025 1 3 1 4.039 0 9-6.418 9-11 0-5.953-4.055-8-7-8M8.242 2.546c.641-.508.943-.523.965-.523.426.169.975 1.405 1.357 3.055-1.527-.629-2.741-1.352-2.98-1.846.059-.112.241-.356.658-.686M15 21.978c-1.08 0-1.21-.109-1.559-.402l-.176-.146c-.367-.302-.816-.452-1.266-.452s-.898.15-1.266.452l-.176.146c-.347.292-.477.402-1.557.402-2.813 0-7-5.389-7-9.009 0-5.823 4.488-5.991 5-5.991 1.939 0 2.484.471 3.387 1.251l.323.276a1.995 1.995 0 0 0 2.58 0l.323-.276c.902-.78 1.447-1.251 3.387-1.251.512 0 5 .168 5 6 0 3.617-4.187 9-7 9'></path></svg>";case"activity":return"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'><path d='M12 0C5.373 0 0 5.372 0 12c0 6.627 5.373 12 12 12 6.628 0 12-5.373 12-12 0-6.628-5.372-12-12-12m9.949 11H17.05c.224-2.527 1.232-4.773 1.968-6.113A9.966 9.966 0 0 1 21.949 11M13 11V2.051a9.945 9.945 0 0 1 4.432 1.564c-.858 1.491-2.156 4.22-2.392 7.385H13zm-2 0H8.961c-.238-3.165-1.536-5.894-2.393-7.385A9.95 9.95 0 0 1 11 2.051V11zm0 2v8.949a9.937 9.937 0 0 1-4.432-1.564c.857-1.492 2.155-4.221 2.393-7.385H11zm4.04 0c.236 3.164 1.534 5.893 2.392 7.385A9.92 9.92 0 0 1 13 21.949V13h2.04zM4.982 4.887C5.718 6.227 6.726 8.473 6.951 11h-4.9a9.977 9.977 0 0 1 2.931-6.113M2.051 13h4.9c-.226 2.527-1.233 4.771-1.969 6.113A9.972 9.972 0 0 1 2.051 13m16.967 6.113c-.735-1.342-1.744-3.586-1.968-6.113h4.899a9.961 9.961 0 0 1-2.931 6.113'></path></svg>";case"places":return"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'><path d='M6.5 12C5.122 12 4 13.121 4 14.5S5.122 17 6.5 17 9 15.879 9 14.5 7.878 12 6.5 12m0 3c-.275 0-.5-.225-.5-.5s.225-.5.5-.5.5.225.5.5-.225.5-.5.5M17.5 12c-1.378 0-2.5 1.121-2.5 2.5s1.122 2.5 2.5 2.5 2.5-1.121 2.5-2.5-1.122-2.5-2.5-2.5m0 3c-.275 0-.5-.225-.5-.5s.225-.5.5-.5.5.225.5.5-.225.5-.5.5'></path><path d='M22.482 9.494l-1.039-.346L21.4 9h.6c.552 0 1-.439 1-.992 0-.006-.003-.008-.003-.008H23c0-1-.889-2-1.984-2h-.642l-.731-1.717C19.262 3.012 18.091 2 16.764 2H7.236C5.909 2 4.738 3.012 4.357 4.283L3.626 6h-.642C1.889 6 1 7 1 8h.003S1 8.002 1 8.008C1 8.561 1.448 9 2 9h.6l-.043.148-1.039.346a2.001 2.001 0 0 0-1.359 2.097l.751 7.508a1 1 0 0 0 .994.901H3v1c0 1.103.896 2 2 2h2c1.104 0 2-.897 2-2v-1h6v1c0 1.103.896 2 2 2h2c1.104 0 2-.897 2-2v-1h1.096a.999.999 0 0 0 .994-.901l.751-7.508a2.001 2.001 0 0 0-1.359-2.097M6.273 4.857C6.402 4.43 6.788 4 7.236 4h9.527c.448 0 .834.43.963.857L19.313 9H4.688l1.585-4.143zM7 21H5v-1h2v1zm12 0h-2v-1h2v1zm2.189-3H2.811l-.662-6.607L3 11h18l.852.393L21.189 18z'></path></svg>";case"objects":return"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'><path d='M12 0a9 9 0 0 0-5 16.482V21s2.035 3 5 3 5-3 5-3v-4.518A9 9 0 0 0 12 0zm0 2c3.86 0 7 3.141 7 7s-3.14 7-7 7-7-3.141-7-7 3.14-7 7-7zM9 17.477c.94.332 1.946.523 3 .523s2.06-.19 3-.523v.834c-.91.436-1.925.689-3 .689a6.924 6.924 0 0 1-3-.69v-.833zm.236 3.07A8.854 8.854 0 0 0 12 21c.965 0 1.888-.167 2.758-.451C14.155 21.173 13.153 22 12 22c-1.102 0-2.117-.789-2.764-1.453z'></path><path d='M14.745 12.449h-.004c-.852-.024-1.188-.858-1.577-1.824-.421-1.061-.703-1.561-1.182-1.566h-.009c-.481 0-.783.497-1.235 1.537-.436.982-.801 1.811-1.636 1.791l-.276-.043c-.565-.171-.853-.691-1.284-1.794-.125-.313-.202-.632-.27-.913-.051-.213-.127-.53-.195-.634C7.067 9.004 7.039 9 6.99 9A1 1 0 0 1 7 7h.01c1.662.017 2.015 1.373 2.198 2.134.486-.981 1.304-2.058 2.797-2.075 1.531.018 2.28 1.153 2.731 2.141l.002-.008C14.944 8.424 15.327 7 16.979 7h.032A1 1 0 1 1 17 9h-.011c-.149.076-.256.474-.319.709a6.484 6.484 0 0 1-.311.951c-.429.973-.79 1.789-1.614 1.789'></path></svg>";case"symbols":return"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'><path d='M0 0h11v2H0zM4 11h3V6h4V4H0v2h4zM15.5 17c1.381 0 2.5-1.116 2.5-2.493s-1.119-2.493-2.5-2.493S13 13.13 13 14.507 14.119 17 15.5 17m0-2.986c.276 0 .5.222.5.493 0 .272-.224.493-.5.493s-.5-.221-.5-.493.224-.493.5-.493M21.5 19.014c-1.381 0-2.5 1.116-2.5 2.493S20.119 24 21.5 24s2.5-1.116 2.5-2.493-1.119-2.493-2.5-2.493m0 2.986a.497.497 0 0 1-.5-.493c0-.271.224-.493.5-.493s.5.222.5.493a.497.497 0 0 1-.5.493M22 13l-9 9 1.513 1.5 8.99-9.009zM17 11c2.209 0 4-1.119 4-2.5V2s.985-.161 1.498.949C23.01 4.055 23 6 23 6s1-1.119 1-3.135C24-.02 21 0 21 0h-2v6.347A5.853 5.853 0 0 0 17 6c-2.209 0-4 1.119-4 2.5s1.791 2.5 4 2.5M10.297 20.482l-1.475-1.585a47.54 47.54 0 0 1-1.442 1.129c-.307-.288-.989-1.016-2.045-2.183.902-.836 1.479-1.466 1.729-1.892s.376-.871.376-1.336c0-.592-.273-1.178-.818-1.759-.546-.581-1.329-.871-2.349-.871-1.008 0-1.79.293-2.344.879-.556.587-.832 1.181-.832 1.784 0 .813.419 1.748 1.256 2.805-.847.614-1.444 1.208-1.794 1.784a3.465 3.465 0 0 0-.523 1.833c0 .857.308 1.56.924 2.107.616.549 1.423.823 2.42.823 1.173 0 2.444-.379 3.813-1.137L8.235 24h2.819l-2.09-2.383 1.333-1.135zm-6.736-6.389a1.02 1.02 0 0 1 .73-.286c.31 0 .559.085.747.254a.849.849 0 0 1 .283.659c0 .518-.419 1.112-1.257 1.784-.536-.651-.805-1.231-.805-1.742a.901.901 0 0 1 .302-.669M3.74 22c-.427 0-.778-.116-1.057-.349-.279-.232-.418-.487-.418-.766 0-.594.509-1.288 1.527-2.083.968 1.134 1.717 1.946 2.248 2.438-.921.507-1.686.76-2.3.76'></path></svg>";case"flags":return"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24'><path d='M0 0l6.084 24H8L1.916 0zM21 5h-4l-1-4H4l3 12h3l1 4h13L21 5zM6.563 3h7.875l2 8H8.563l-2-8zm8.832 10l-2.856 1.904L12.063 13h3.332zM19 13l-1.5-6h1.938l2 8H16l3-2z'></path></svg>"}},this.getEmojiHtml=function(){var e='<div class="emoji-container">';return a.selectedCategory.emojis.forEach((function(t){e+='<span class="fr-command emoji" \n                    role="button" \n                    data-cmd="emojis.insertEmoji" \n                    data-param1="'.concat(t.value,'"\n                    title="').concat(t.name,'"\n                >').concat(t.value,"</span>")})),e+="</div>"},this.showPopup=function(){e.popups.get("emojis")||a.initPopup(),e.popups.setContainer("emojis",e.$tb);var t=e.$tb.find('.fr-command[data-cmd="emojis"]'),o=t.offset().left+t.outerWidth()/2,n=t.offset().top+(e.opts.toolbarBottom?10:t.outerHeight()-10);e.popups.show("emojis",o,n,t.outerHeight())},this.refreshPopup=function(){e.popups.get("emojis").html(a.getPopupHtml())},this.hidePopup=function(){e.popups.hide("emojis")},this.setSelectedCategory=function(e){a.selectedCategory=a.categories.filter((function(t){return t.id===e}))[0],a.refreshPopup()},{showPopup:this.showPopup,hidePopup:this.hidePopup,setSelectedCategory:this.setSelectedCategory}},e.FroalaEditor.DefineIcon("emojis",{NAME:"smile-o",FA5NAME:"smile"}),e.FroalaEditor.RegisterCommand("emojis",{title:"Emojis",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,plugin:"emojis",callback:function(){this.popups.isVisible("emojis")?(this.$el.find(".fr-marker")&&(this.events.disableBlur(),this.selection.restore()),this.emojis.hidePopup()):this.emojis.showPopup()}}),e.FroalaEditor.RegisterCommand("emojis.insertEmoji",{callback:function(e,t){this.html.insert(t),this.emojis.hidePopup()}}),e.FroalaEditor.RegisterCommand("emojis.setCategory",{undo:!1,focus:!1,callback:function(e,t){this.emojis.setSelectedCategory(t)}})})?o.apply(t,n):o)||(e.exports=i)},75754:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.editHomework={current:{},load:{list:function(){e.editHomework.list.removeClass("hide"),e.editHomework.form.addClass("hide");var a=function(){0!==this.code?6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this):(e.renderBox(e.editHomework.list,{data:this.data},1),t.init())};t.yell("homework/teacher/lot",{courseID:e.editHomework.courseID},a,a)},form:function(a,o){e.editHomework.list.addClass("hide"),e.editHomework.form.removeClass("hide");var n=function(){if(0!==this.code)e.stdErr(this);else{var a=this.data;e.editHomework.current.homework_id=o,e.renderBox(e.editHomework.form,{data:a},1),e.editHomework.form.find(".js-homework-title-fill").val(a.title),e.editor.init({toolbarSticky:!0,toolbarStickyOffset:0,imageStyles:{"fr-rounded":"Rounded","fr-bordered":"Bordered","fr-shadow":"Shadow","fr-closer":"Closer"},toolbarButtons:["fullscreen","bold","italic","underline","strikeThrough","fontSize","color","align","|","paragraphStyle","quote","formatOL","formatUL","outdent","indent","insertHR","-","insertLink","insertImage","insertVideo","|","selectAll","clearFormatting","|","undo","redo"]},"full").load("content",a.content),"sound"==a.type?e.editHomework.form.find("#homework-audio").prop("checked",!0):e.editHomework.form.find("#homework-"+a.type).prop("checked",!0),t.init()}};a?t.yell("homework/teacher/get",{id:o},n,n):(e.renderBox(e.editHomework.form,{},1),e.editor.init({toolbarSticky:!0,toolbarStickyOffset:0,imageStyles:{"fr-rounded":"Rounded","fr-bordered":"Bordered","fr-shadow":"Shadow","fr-closer":"Closer"},toolbarButtons:["fullscreen","bold","italic","underline","strikeThrough","fontSize","color","align","|","paragraphStyle","quote","formatOL","formatUL","outdent","indent","insertHR","-","insertLink","insertImage","insertVideo","|","selectAll","clearFormatting","|","undo","redo","h1","h2","h3","h4","h5","h6"]},"full").load("content",""),t.init())}},set:function(o){e.editHomework.current.homework_id&&(o=a.extend({},o,{id:e.editHomework.current.homework_id}));var n=function(){0!==this.code?e.stdErr(this):e.editHomework.load.list()};t.yell("homework/teacher/set",o,n,n),e.editHomework.current.homework_id=null},del:function(){var a=function(){0!==this.code?e.stdErr(this):(e.modal.hide(),e.editHomework.load.list())};t.yell("homework/teacher/del",{id:e.editHomework.current.homework_id},a,a)},validate:function(t){var a=!0,o=t.find(".js-homework-title-fill"),n=t.find("input[name=type]:checked").val();return"audio"==n&&(n="sound"),t.find(".form-group").removeClass("has-error"),o.val()||(o.closest(".form-group").addClass("has-error"),a=!1),e.editor.get("content")||(t.find(".homework-content").closest(".form-group").addClass("has-error"),a=!1),!!a&&{courseID:e.editHomework.courseID,title:o.val(),content:e.editor.get("content"),type:n}}},t.hook("editHomework/init",(function(t){e.editHomework.list=a(".js-homework-list"),e.editHomework.form=a(".js-homework-form"),e.editHomework.courseID=a("#courseID").val(),e.loadTmpl(e.editHomework.list.data("tmpl"),e.editHomework.list),e.editHomework.load.list()})),t.hook("editHomework/confirmDel",(function(t){e.editHomework.current.homework_id=t.closest(".js-homework-spec").data("id"),e.modal.show({src:"confirm-delete-homework-modal",title:"刪除作業？",size:"sm",ta:"messageModal",cover:t.data("cover"),header:t.data("class")})})),t.hook("editHomework/del",(function(t){e.editHomework.del()})),t.hook("editHomework/edit",(function(t){var a="edit"==t.data("type"),o=t.closest(".js-homework-spec").data("id");e.editHomework.list.addClass("hide"),e.editHomework.load.form(a,o)})),t.hook("editHomework/submit",(function(t){var a=t.closest(".js-homework-form"),o=e.editHomework.validate(a);o&&e.editHomework.set(o)})),t.hook("editHomework/cancel",(function(t){e.editHomework.list.removeClass("hide"),e.editHomework.form.addClass("hide"),e.editHomework.load.list()}))}(app,gee,o)},66517:(e,t,a)=>{var o=a(31175);a(39055),function(e,t,a){"use strict";e.info={edit:function(o){var n=function(){if(0!==this.code)6100===this.code?t.exe("attemptToLogin",null):e.stdErr(this);else{var n=this.data;o.html(e.tmplStores["course-info-form"].render(n)),e.info.store=n,e.waitFor((function(){return!o.is(":empty")})).then((function(){a(".js-select-date").each((function(){var e=a(this),t=a(this).find("input");e.flatpickr({dateFormat:"Y-m-d",defaultDate:t.val(),onChange:function(e,a,o){t.val(a)}})})),t.init(),e.editor.init({toolbarSticky:!0,toolbarStickyOffset:0,imageStyles:{"fr-rounded":"Rounded","fr-bordered":"Bordered","fr-shadow":"Shadow","fr-closer":"Closer"},toolbarButtons:["emojis","fullscreen","bold","italic","underline","strikeThrough","fontSize","color","align","|","paragraphStyle","quote","formatOL","formatUL","outdent","indent","insertHR","-","insertLink","insertImage","insertVideo","|","selectAll","clearFormatting","|","undo","redo","h1","h2","h3","h4","h5","h6"]},"full").load("description",n.description)}))}};t.yell("course/info/get",{courseID:a("#courseID").val()},n,n)},set:function(o,n){var i=function(){0!==this.code?6100===this.code?t.exe("attemptToLogin",null):e.stdErr(this):(e.stdSuccess(this),a(".js-info-form").find("input[name=placeID]").val(this.data.placeID))};t.yell("course/"+n.data("step")+"/set",o,i,i)},submitForm:function(t){var o=a(".js-info-form");if(o.find("input").each((function(){a(this).val()===a(this).attr("placeholder")&&a(this).val("")})),o.find("input[name=duration]:checked").hasClass("one-day"))var n=o.find(".oneDay").val()+" "+o.find(".startHour option:selected").text()+":"+o.find(".startMin option:selected").text(),i=o.find(".oneDay").val()+" "+o.find(".endHour option:selected").text()+":"+o.find(".endMin option:selected").text();else n=o.find(".startDate").val()+" 00:00",i=o.find(".endDate").val()+" 23:59";o.find('input[name="startDate"]').val(n).end().find('input[name="endDate"]').val(i).end().find('[name="description"]').val(e.editor.get("description")),e.info.set(o.serialize(),t),e.basic.saveTag("save")}},t.hook("info/setDay",(function(e){var t=e.data("value");e.find("input."+t+"-day").prop("checked",!0)})),t.hook("info/changeDuration",(function(e){if(e.is(":checked")){var t=!!e.hasClass("one-day");a(".js-info-form").find(".js-multi-day").toggleClass("hide",t).end().find(".js-one-day").toggleClass("hide",!t)}})),t.hook("info/syncMaps",(function(e){var t=e.val();if(""!=t){var o='<iframe class="gmap" width="100%" height="300" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://www.google.com/maps?q='+t+'&output=embed""></iframe>';a(".js-sync-maps").empty().append(o)}})),t.hook("info/selectTime",(function(e){e.find('option[value="'+e.data("value")+'"]').prop("selected",!0)})),t.hook("info/save",(function(t){e.info.submitForm(t),t.blur()})),t.hook("info/next",(function(t){var o=a(".js-info-form");if(o.find("input").each((function(){a(this).val()===a(this).attr("placeholder")&&a(this).val("")})),a.validatr.validateForm(o)){if(o.find("input[name=duration]:checked").hasClass("one-day"))var n=o.find(".oneDay").val()+" "+o.find(".startHour option:selected").text()+":"+o.find(".startMin option:selected").text(),i=o.find(".oneDay").val()+" "+o.find(".endHour option:selected").text()+":"+o.find(".endMin option:selected").text();else n=o.find(".startDate").val()+" 00:00",i=o.find(".endDate").val()+" 23:59";if(o.find('input[name="startDate"]').val(n),o.find('input[name="endDate"]').val(i),o.find('[name="description"]').val(e.editor.get("description")),""==o.find('[name="description"]').val())return o.find('[name="description"]').closest("div").addClass("has-error"),e.modal.show({title:"請填寫完整課程資料",src:"confirm-course-basic-modal",size:"sm",cover:"opacity",ta:"messageModal",header:"blue"}),!1;e.info.set(o.serialize(),t),e.basic.saveTag("next","#chapter")}else e.modal.show({title:"請填寫完整課程資料",src:"confirm-course-basic-modal",size:"sm",cover:"opacity",ta:"messageModal",header:"blue"})})),t.hook("info/confirm",(function(a){e.tab.show("#chapter"),window.location.hash="#chapter",t.hideModal()})),t.hook("info/init",(function(a){var o=a.attr("id");o&&e.tab.register("#"+o,(function(){e.info.edit(a),t.go2Top()}))}))}(app,gee,o)},10965:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.quiz={current:{},chapterId:"",load:{list:function(){var a=function(){0!==this.code?6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this):(e.renderBox(e.quiz.chapter,{data:this.data.chapters},1),t.init())};t.yell("quiz/list",{courseID:e.quiz.courseID},a,a)},options:function(e){var t=a(".js-"+e+"-option");t.removeClass("hide"),t.siblings(".js-type-form").addClass("hide")}},render:{form:function(o){e.quiz.reset();var n=a(".quiz-type-block"),i=o.type.toLowerCase(),r=a(".js-"+i+"-option");switch(o.type){case"Yesno":n.find("#quiz-true-false").prop("checked",!0);var s=r.find("input[name=answer_"+i+"]");o.answers.indexOf(parseInt(s.first().val()))>-1&&s.first().prop("checked",!0),o.answers.indexOf(parseInt(s.last().val()))>-1&&s.last().prop("checked",!0);break;case"Radio":n.find("#quiz-single").prop("checked",!0),r.find("input[name=options\\[\\]]").each((function(e){a(this).val(o.options[e]);var t=a(this).siblings("input[name=answer_"+i+"]");o.answers.indexOf(parseInt(t.val()))>-1&&t.prop("checked",!0)}));break;case"Checkbox":n.find("#quiz-multiple").prop("checked",!0),r.find("input[name=options\\[\\]]").each((function(e){a(this).val(o.options[e]);var t=a(this).siblings("input[name=answer_"+i+"]");o.answers.indexOf(parseInt(t.val()))>-1&&t.prop("checked",!0)}))}n.find(".js-title-fill").val(o.topic).end().find(".js-description-fill").val(o.info),e.quiz.load.options(i),e.quiz.current.topic_id=o.id,e.quiz.current.topic_sorter=o.order,e.quiz.current.topic_version=o.version,t.go2Top()},list:function(o,n,i){var r;e.quiz.chapter.addClass("hide"),e.quiz.unit.removeClass("hide"),a(".quiz-question-list").removeClass("hide"),a(".js-quiz-buttons").removeClass("hide");var s=function(){0!==this.code?e.stdErr(this):(r=this.data.examList,n?t.yell("quiz/get",{id:o,examID:this.data.examList[0].examID},l,l):(e.quiz.current.unit_id=o,e.renderBox(e.quiz.unit,{},1),e.renderBox(a(".quiz-question-list"),{},1),t.init(),a("#quiz-true-false").prop("checked",!0)))},l=function(){0!==this.code?e.stdErr(this):(e.quiz.current={unit_id:o,data:this.data},i&&(e.quiz.current.unit_title=i),e.renderBox(e.quiz.unit,{data:this.data},1),e.renderBox(a(".quiz-question-list"),{data:this.data},1),t.init(),a("#quiz-true-false").prop("checked",!0),a(".js-sortable-quiz").sortable({handle:".js-quiz-handle",items:".quiz-form-block",start:function(e,t){a(t.placeholder[0]).height(t.item.height()),a(this).addClass("js-sortable-ing")},stop:function(t,o){a(this).removeClass("js-sortable-ing"),e.quiz.resort(1)},opacity:.8}),5===r.length&&a(".quiz-group__sm-btn").addClass("hidden"),a(".quiz-group__btn").each((function(){r.length&&(a(this).attr("data-id",r.shift().examID),a(this).removeClass("hidden"))})))};t.yell("quiz/get_exam_list",{chapterID:o},s,s)}},del:{one:function(a){var o=function(){0!==this.code?e.stdErr(this):(e.modal.hide(),e.quiz.load.list())};t.yell("quiz/chapter/del",{courseID:e.quiz.courseID,chapterID:e.quiz.current.unit_id},o,o)},group:function(){var o=a(".quiz-group__btn--active").data("id");if(!o||0==o)return e.quiz.reorderAfterDelete(),e.modal.hide(),void a(".quiz-group__sm-btn").removeClass("hidden");var n=function(){0!==this.code?e.stdErr(this):(e.quiz.reorderAfterDelete(),e.modal.hide(),a(".quiz-group__sm-btn").removeClass("hidden"))};t.yell("quiz/exam/del",{courseID:e.quiz.courseID,examID:o},n,n)},all:function(a){var o=function(){0!==this.code?e.stdErr(this):(e.modal.hide(),e.quiz.load.list())};t.yell("quiz/course/del",{courseID:e.quiz.courseID},o,o)},topic:function(a,o){var n=function(){0!==this.code?e.stdErr(this):(t.hidePopover(o),e.quiz.initQuestions(!1,e.quiz.currentGroup))};t.yell("quiz/topic/del",{courseID:e.quiz.courseID,topicID:a},n,n)}},set:function(o){var n=a(".quiz-group__btn--active"),i=0;n.data("id")&&(i=n.data("id")),o=a.extend({},o,{id:e.quiz.current.unit_id,title:e.quiz.current.unit_title,examID:i}),o=e.quiz.current.topic_id?a.extend({},o,{topicID:e.quiz.current.topic_id,sorter:parseInt(e.quiz.current.topic_sorter),version:parseInt(e.quiz.current.topic_version)+1}):e.quiz.current.data&&e.quiz.current.data.quiz&&e.quiz.current.data.quiz.length?a.extend({},o,{sorter:parseInt(e.quiz.current.data.quiz[e.quiz.current.data.quiz.length-1].order)+1,version:parseInt(e.quiz.current.data.quiz[e.quiz.current.data.quiz.length-1].version)}):a.extend({},o,{sorter:1,version:1});var r=function(){0!==this.code?e.stdErr(this):(a(".quiz-group__btn--active").data("id")||a(".quiz-group__btn--active").attr("data-id",this.data.examID),e.quiz.initQuestions(!1,this.data.examID))};t.yell("quiz/set",o,r,r),e.quiz.current.topic_id=null,e.quiz.current.topic_sorter=null,e.quiz.current.topic_version=null},reset:function(){a(".quiz-type-block").find(".js-title-fill").val("").end().find(".js-type-form input[name*=answer_]").each((function(){a(this).prop("checked",!1)})).end().find(".js-type-form input[name=options\\[\\]]").each((function(){a(this).val("")})).end().find(".js-description-fill").val(""),a("#quiz-true-false").prop("checked",!0)},resort:function(o){var n=function(){0!==this.code?e.stdErr(this):t.clog(this.data)},i=[];e.quiz.unit.find(".quiz-form-block").each((function(e){var t=e,o=a(this).data("id");t<=9&&(t="0"+t),a(this).find(".no").text(t),i.push({sort:1*t,topicID:o})}));var r=a(".quiz-group__btn--active").data("id");o&&t.yell("quiz/resort",{examID:r,resort:i},n,n)},initQuestions:function(o,n){var i=a(".quiz-question-list"),r=e.quiz.chapterId,s=0;e.quiz.reset();var l=function(){0!==this.code?e.stdErr(this):(e.quiz.current.data=this.data,e.renderBox(a(".quiz-question-list"),{data:this.data},1),t.init(),a(".js-sortable-quiz").sortable({handle:".js-quiz-handle",items:".quiz-form-block",start:function(e,t){a(t.placeholder[0]).height(t.item.height()),a(this).addClass("js-sortable-ing")},stop:function(t,o){a(this).removeClass("js-sortable-ing"),e.quiz.resort(1)},opacity:.8}))};if(n)t.yell("quiz/get",{id:r,examID:n},l,l);else{var c=function(){0!==this.code?e.stdErr(this):o&&this.data.examList.length?(s=this.data.examList[0].examID,t.yell("quiz/get",{id:r,examID:s},l,l)):(e.quiz.current.data={},i.html('<p class="quiz-question-list__num">題目列表（共 0 題）</p><div class="no-quiz-block text-center"><img src="/dist/image/icon/quiz.svg?v=0913"><p class="text-grey">本單元尚未加入任何題目，請使用上方按鈕來加入測驗題目。</p></div>'))};t.yell("quiz/get_exam_list",{chapterID:r},c,c)}},reorderAfterDelete:function(){var o=a(".quiz-group__btn--active"),n=o.data("num");o.remove();for(var i=n+1;i<=5;i++){var r=a(".quiz-group__btn[data-num="+i+"]"),s=i-1,l=e.formatHelper.numToZH(s);r.attr("data-num",s),r.text("題組"+l)}var c=a(".js-quiz-group-span"),d=o.clone();c.append(d),d.addClass("hidden gee"),d.removeClass("quiz-group__btn--active"),d.attr({"data-num":5,"data-id":0});var u=e.formatHelper.numToZH(5);d.text("題組"+u),(r=a('.quiz-group__btn[data-num="1"]')).addClass("quiz-group__btn--active"),e.quiz.initQuestions(!1,r.data("id")),t.init()},validate:function(e){var t=e.find(".js-title-fill"),o=e.find("input[name=type]:checked").val(),n=e.find(".js-description-fill"),i=a(".js-"+o+"-option"),r=i.find("input[name=answer_"+o+"]:checked"),s=[],l=[],c=!0;switch(t.closest(".form-group").removeClass("has-error"),t.val()||(t.closest(".form-group").addClass("has-error"),c=!1),i.removeClass("has-error"),o){case"yesno":s=["是","否"],r.length?l.push(r.val()):(i.addClass("has-error"),c=!1);break;case"radio":i.find("input[name=options\\[\\]]").each((function(){if(!a(this).val())return i.find(".error-msg").text("此欄位為必填").end().addClass("has-error"),void(c=!1);s.push(a(this).val())})),r.length?l.push(r.val()):(i.find(".error-msg").text("請選擇正確解答").end().addClass("has-error"),c=!1);break;case"checkbox":i.find("input[name=options\\[\\]]").each((function(){if(!a(this).val())return i.find(".error-msg").text("此欄位為必填").end().addClass("has-error"),void(c=!1);s.push(a(this).val())})),r.length>=2?r.each((function(){l.push(a(this).val())})):(i.find(".error-msg").text("請至少選擇兩個選項").end().addClass("has-error"),c=!1)}return!!c&&{topic:t.val(),type:o,info:n.val(),options:s,answer:l}}},t.hook("editQuiz/init",(function(t){e.quiz.chapter=a(".js-quiz-chapter-list"),e.quiz.unit=a(".js-quiz-form"),e.quiz.courseID=a("#courseID").val(),e.loadTmpl(e.quiz.chapter.data("tmpl"),e.quiz.chapter),e.quiz.load.list(),e.quiz.currentGroup=a(".js-quiz-group").find('btn[data-num="1"]').attr("data-id")})),t.hook("editQuiz/confirmDelInfo",(function(t){var a=e.quiz.current,o=a.unit_title+" "+a.quiz_title;a.quiz_group&&t.find(".js-quiz-name-group").text(a.quiz_group),t.find(".js-quiz-name").html(o).end()})),t.hook("editQuiz/del",(function(t){"all"==t.data("type")?e.quiz.del.all(t):"題組"===a(".js-quiz-name-group").text().slice(0,2)?e.quiz.del.group(t):e.quiz.del.one(t)})),t.hook("editQuiz/unit",(function(t){var a=t.closest(".js-unit-block"),o=a.find(".js-unit-id").data("id");e.quiz.chapterId=o;var n=a.find(".js-quiz-title").text(),i="edit"==t.data("type");e.quiz.render.list(o,i,n)})),t.hook("editQuiz/newQuizGroup",(function(e){var t=e.closest(".js-quiz-group").find(".js-quiz-group-span"),o=t.find(".quiz-group__btn:not(.hidden)").length;4===o&&a(".quiz-group__sm-btn").addClass("hidden"),o>=5||t.find(".hidden").first().removeClass("hidden")})),t.hook("editQuiz/initQuestions",(function(){e.quiz.initQuestions(!0)})),t.hook("editQuiz/selectQuizGroup",(function(t){if(a(".quiz-group__btn--active").removeClass("quiz-group__btn--active"),t.addClass("quiz-group__btn--active"),t.data("id")){var o=t.data("id");e.quiz.currentGroup=o,e.quiz.initQuestions(!1,o)}else e.quiz.initQuestions(!1)})),t.hook("editQuiz/openDelPopover",(function(e){var t=e.closest(".quiz-manage-area").find(".js-quiz-count").text();e.popover({content:'<p class="quiz-red-back" data-event="click" func="confirmDel" data-cover="opacity" data-class="blue"><i class="yci-trash-o quiz-group__trash"></i>刪除所有題組'+t+"</p>",html:!0,sanitize:!1,placement:"bottom",toggle:"manual",template:'<div class="quiz-popover" role="tooltip"><div class="quiz-popover__arrow"></div><div class="popover-content"></div></div>'}),a(".quiz-popover").removeAttr("style")})),t.hook("editQuiz/confirmDel",(function(t){var a=t.closest(".js-unit-block");e.quiz.current={unit_id:a.find(".js-unit-id").data("id"),unit_title:a.find(".js-unit-title").text(),quiz_title:a.find(".js-quiz-title").text()},e.modal.show({src:"confirm-delete-quiz-modal",title:"刪除單元測驗？",size:"sm",ta:"messageModal",cover:t.data("cover"),header:t.data("class")})})),t.hook("editQuiz/confirmDelSingleGroup",(function(t){var a=t.closest(".quiz-form"),o=a.find(".quiz-form-title-unit").text(),n=a.find(".quiz-form-title-text").first().text(),i=a.find(".quiz-group__btn--active").text();e.quiz.current={unit_id:e.quiz.chapterId,unit_title:o,quiz_title:n,quiz_group:i},e.modal.show({src:"confirm-delete-quiz-modal",title:"刪除測驗題組？",size:"sm",ta:"messageModal",cover:"opacity",header:"blue"})})),t.hook("editQuiz/reset",(function(t){e.quiz.reset(),t.blur()})),t.hook("editQuiz/react",(function(e){var o=a(e.event.target),n="editQuiz/"+o.attr("func");o.data("event")===e.event.type&&t.check(n)&&(o.event=e.event,t.exe(n,o))})),t.hook("editQuiz/type",(function(t){e.quiz.load.options(t.val())})),t.hook("editQuiz/edit",(function(t){var a=t.closest(".quiz-form-block").data("index");e.quiz.render.form(e.quiz.current.data.quiz[a])})),t.hook("editQuiz/checked",(function(e){e.find("input:checkbox, input:radio").each((function(){var e=a(this);parseInt(e.data("checked"))>-1&&e.prop("checked",!0)}))})),t.hook("editQuiz/submit",(function(t){var a=t.closest(".quiz-type-block"),o=e.quiz.validate(a);o&&e.quiz.set(o)})),t.hook("editQuiz/popoverDel",(function(e){var t=e.data("box");if(e.next(".popover").hasClass("in"))e.closest(t).removeClass("delete");else{e.closest(t).addClass("delete");var a=e.data("type"),o=e.data("pid"),n=e.data("act"),i=e.data("msg")||"你正在刪除？";e.data("bs.popover")||e.popover("destroy"),e.addClass("on-popover").popover({content:"<p>"+i+'</p><span class="delete-me" data-type="'+a+'" data-pid="'+o+'" data-act="'+n+'" data-event="click" func="triggerDel">是的</span><span class="close-popover-btn" data-event="click" func="hidePopover">不要</span>',html:!0,sanitize:!1,placement:"top",toggle:"manual"}).popover("show"),e.closest(t).find(".close-popover-btn").data("box",t)}})),t.hook("editQuiz/hidePopover",(function(e){var t=a(e),o=t.data("box");t.closest(o).removeClass("delete").end().closest(".popover").parent().find(".on-popover").popover("destroy").removeClass("on-popover")})),t.hook("editQuiz/triggerDel",(function(t){var o=a(t),n=o.data("type"),i=o.data("pid"),r=o.data("act");e[n]&&(e[n][r]?e[n][r](i,o):(e.quiz.currentGroup=o.closest(".quiz-form-list").attr("data-examid"),e[n].del.topic(i,o)))})),t.hook("editQuiz/cancel",(function(o){if("完成"===o.text()){var n=a(".js-quiz-goal").val();if(n){var i=function(){0!==this.code&&e.stdErr(this)};t.yell("quiz/set_quiz_goal",{quiz_goal:parseInt(n),id:e.quiz.chapterId},i,i)}}e.quiz.chapter.removeClass("hide"),e.quiz.unit.addClass("hide"),a(".quiz-question-list").addClass("hide"),a(".js-quiz-buttons").addClass("hide"),e.quiz.load.list()}))}(app,gee,o)},78218:(e,t,a)=>{var o=a(58133),n=a(31175);!function(e,t,a){"use strict";e.editVideo={worker:null,init:function(){e.editVideo.resort()},load:function(){var a=function(){0!==this.code?6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this):(e.renderBox(e.editVideo.box,{data:this.data.chapters},1),e.editVideo.init(),t.init(),e.editVideo.w1=e.upload.init(e.editVideo.box.find(".fileupload1"),"files/chunkedUpload","video"),e.editVideo.w1.callback=e.editVideo.videoCB,e.editVideo.w2=e.upload.init(e.editVideo.box.find(".fileupload2"),"files/chunkedUpload","vtt"),e.editVideo.w2.callback=e.editVideo.vttCB,e.editVideo.w3=e.upload.init(e.editVideo.box.find(".fileupload3"),"files/chunkedUpload","file"),e.editVideo.w3.callback=e.editVideo.fileCB,e.editVideo.ping())};t.yell("chapter/files",{courseID:e.editVideo.courseID},a,a)},check:function(n){var i=function(){0!==this.code?e.stdErr(this):(this.data,o.map(this.data,(function(e){null!==e.jobID||o.isEmpty(e.content)||-1!==e.content.indexOf("mp4")||a(".js-chapter-"+e.chapterID).find(".video-thumbnail").removeClass("j-progressing").addClass("j-ready").find(".thumbnail").attr("src","/video/thumbnail/"+e.content),o.isEmpty(e.jobID)||a(".js-chapter-"+e.chapterID).find(".video-thumbnail").removeClass("j-ready j-empty").addClass("j-progressing"),"e8602"!==e.duration&&"e8601"!==e.duration||a(".js-chapter-"+e.chapterID).find(".video-thumbnail").removeClass("j-ready j-progressing j-empty").addClass("j-fail")})),null===e.editVideo.worker&&(e.editVideo.worker=setInterval(e.editVideo.ping,12e4)))};t.yell("chapter/check",{chapterID:n.join(","),courseID:e.editVideo.courseID},i,i)},setLink:function(o,n,i){var r=function(){if(0!==this.code)e.stdErr(this);else{var t=a(".js-lectures-"+o);e.stdSuccess(this),t.append('<div class="file public">'+(1*t.find(".file").length+1)+". "+n+'<span type="button" class="delete-btn-span" data-event="click" func="popoverDel" data-pid="'+this.data.fileID+'" data-type="lecture" data-msg="刪除此檔案？"><i class="fa delete-btn fa-times-circle"></i></span></div>')}};t.yell("files/lecture/set",{chapterID:o,title:n,filepath:i},r,r)},setDemo:function(a,o){var n=function(){0!==this.code?e.stdErr(this):e.stdSuccess(this)};t.yell("chapter/setDemo",{chapterID:a,courseID:e.editVideo.courseID,isDemo:o?1:0},n,n)},setRestricted:function(a,o){var n=function(){0!==this.code?e.stdErr(this):e.stdSuccess(this)};t.yell("chapter/setRestricted",{chapterID:a,courseID:e.editVideo.courseID,restricted:o?1:0},n,n)},del:function(o,n){var i=function(){0!==this.code?e.stdErr(this):function(e){switch(e){case"lecture":n.closest(".file-list"),n.closest(".file.public").remove();break;case"video":n.closest(".upload-group").removeClass("j-ready").addClass("j-empty"),a(".js-chapter-"+o).find(".video-thumbnail").removeClass("j-progressing j-ready").addClass("j-empty"),n.closest(".popover").parent().find(".on-popover").popover("destroy").removeClass("on-popover");break;case"vtt":n.closest(".upload-group").removeClass("j-ready").addClass("j-empty"),n.closest(".popover").parent().find(".on-popover").popover("destroy").removeClass("on-popover")}}(r)},r=n.data("type"),s={pid:n.data("pid")};t.yell("files/"+r+"/del",s,i,i)},abort:function(t,a){var o=(a=a.closest(".fileinput-box")).find('input[type="file"]');e.editVideo.w1.stop(o)},resort:function(){e.editVideo.box.find(".unit-block").each((function(e){var t=e+1;t<=9&&(t="0"+t),a(this).find(".no").text(t)}))},vttCB:function(t){if(0!==t.code){e.stdErr(t);var o=a(this).closest(".fileinput-box");o.find(".file").replaceWith('<p class="text-grey j-af-empty" style="display: block">請上傳檔案格式 VTT 之字幕檔</p>'),e.editVideo.w2.setStatus("empty",o),o.find('input[type="file"]').val("")}else e.stdSuccess(t)},fileCB:function(o){if(t.clog(o),0!==o.code)e.stdErr(o);else if(e.stdSuccess(o),o.data.fileID){var n=a(".js-lectures-"+o.data.rowID);n.append('<div class="file public">'+(1*n.find(".file").length+1)+". "+o.data.fileName+'<span type="button" class="delete-btn-span" data-event="click" func="popoverDel" data-pid="'+o.data.fileID+'" data-type="lecture" data-msg="刪除此檔案？"><i class="fa delete-btn fa-times-circle"></i></span></div>')}},videoCB:function(o){t.clog(o),0!==o.code?e.stdErr(o):(e.stdSuccess(o),o.data.fileID&&(a(".js-chapter-"+o.data.rowID).find(".video-thumbnail").removeClass("j-empty j-ready").addClass("j-progressing"),e.editVideo.ping()))},ping:function(){var n=[];a(".unit-block").each((function(){var e=a(this).find(".video-thumbnail");e.hasClass("j-progressing")&&n.push(e.data("pid"))})),t.clog(n),o.isEmpty(n)?null!==e.editVideo.worker&&(clearInterval(e.editVideo.worker),e.editVideo.worker=null):e.editVideo.check(n)}},t.hook("editVideo/react",(function(e){var o=a(e.event.target);e.event.target.hasAttribute("func")||(o=o.parent());var n="editVideo/"+o.attr("func");o.data("event")===e.event.type&&t.check(n)&&(o.event=e.event,t.exe(n,o))})),t.hook("editVideo/showModal",(function(a){e.editVideo.cuChapterID=a.data("row-id"),t.showModal(a)})),t.hook("editVideo/saveLink",(function(o){var n=o.closest("form");if(n.find("input").each((function(){a(this).val()===a(this).attr("placeholder")&&a(this).val("")})),a("#js-file-row-id").val(e.editVideo.cuChapterID),!a.validatr.validateForm(n))return!1;e.editVideo.setLink(e.editVideo.cuChapterID,n.find('[name="title"]').val(),n.find('[name="link"]').val()),t.hideModal()})),t.hook("editVideo/init",(function(t){e.editVideo.box=a("#chapter-files-div"),e.editVideo.courseID=a("#courseID").val(),e.loadTmpl(e.editVideo.box.data("tmpl"),e.editVideo.box),e.editVideo.load()})),t.hook("editVideo/popoverDel",(function(e){var t=e.data("box");if(e.next(".popover").hasClass("in"))e.closest(t).removeClass("delete");else{e.closest(t).addClass("delete");var a=e.data("type"),o=e.data("pid"),n=e.data("act"),i=e.data("msg")||"你正在刪除？";e.find(".delete-btn").length&&e.find(".delete-btn").css("color","#009fde").addClass("js-color-change"),e.data("bs.popover")||e.popover("destroy"),e.addClass("on-popover").popover({content:"<p>"+i+'</p><span class="delete-me" data-type="'+a+'" data-pid="'+o+'" data-act="'+n+'" data-event="click" func="triggerDel">是的</span><span class="close-popover-btn" data-event="click" func="hidePopover">不要</span>',html:!0,sanitize:!1,placement:"top",toggle:"manual"}).popover("show"),e.closest(t).find(".close-popover-btn").data("box",t)}})),t.hook("editVideo/hidePopover",(function(e){var t=a(e);a(".js-color-change").length&&a(".js-color-change").css("color","#d3dee5").removeClass("js-color-change"),t.closest(".popover").parent().find(".on-popover").popover("destroy").removeClass("on-popover")})),t.hook("editVideo/setDemo",(function(t){var a=t.data("pid");e.editVideo.setDemo(a,t.prop("checked"))})),t.hook("editVideo/setRestricted",(function(t){var a=t.data("pid");e.editVideo.setRestricted(a,t.prop("checked"))})),t.hook("editVideo/triggerDel",(function(t){var o=a(t),n=o.data("pid"),i=o.data("act");e.editVideo[i]?e.editVideo[i](n,o):e.editVideo.del(n,o)}))}(app,gee,n)},16135:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.croppie={init:function(){}},t.hook("initCroppie",(function(a){if(e.member.current.isLogin){var o=e.member.current.img;-1!==o.indexOf("facebook.com/")&&(o+="?type=normal");var n=window.innerWidth<768?{width:300,height:400}:{width:600,height:400};e.croppie.current=a.find(".croppie-img").croppie({url:o,viewport:{width:220,height:220,type:"circle"},boundary:n,mouseWheelZoom:!1,quality:1})}else t.exe("attemptToLogin",null)})),t.hook("changCroppie",(function(t){var o=e.croppie.current,n=t.prop("files")[0],i=new FileReader;i.onload=function(e){var t=e.target.result;o.croppie("bind",{url:t})},o.data("file",n),a(".userfile_filename").html(n.name),i.readAsDataURL(n)})),t.hook("uploadCroppie",(function(o){e.croppie.current.croppie("result",{type:"blob",format:"png",backgroundColor:"#fff"}).then((function(n){var i=new FormData,r=o.data("filetype")?o.data("filetype"):"avatar",s=o.data("tableid")?o.data("tableid"):6;i.append("file",n,"avatar.png"),i.append("fileType",r),i.append("imageType","avatar[normal]"),i.append("tableID",s),i.append("rowID",0),a.ajax({type:"POST",url:t.apiUri+"storage/upload",data:i,processData:!1,contentType:!1,dataType:"json"}).done((function(t){if(0===t.code){if("avatar"===r){if(e.ifLastUserExists()){var o=e.updateLastUser("avatar",e.member.current.img);e.setLastUserToCookie(o)}e.member.current.img=t.data.publicPath,e.member.setHtml()}else a(".js-avatar-preview").each((function(){e.member.uploadedAvatar=t.data.fileName,a(this).attr("src",t.data.publicPath)}));e.modal.hide("avatar-modal")}}))}))}))}(app,gee,o)},9394:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.dreamandlearn={initScroll:function(){window.onscroll=function(){window.pageYOffset>t?e.classList.add("headerFixed"):e.classList.remove("headerFixed")};var e=document.getElementById("myHeader"),t=e.offsetTop},anchorChange:function(e){e.on("click",(function(){e.siblings("li").removeClass("active"),a(this).addClass("active")}))},initCarousel:function(){a(".carousel").carousel("cycle")},closeMenu:function(){document.querySelector(".trigger__checkbox").checked=!1}},t.hook("dreamandlearn/initScroll",(function(t){e.dreamandlearn.initScroll()})),t.hook("dreamandlearn/anchorChange",(function(t){e.dreamandlearn.anchorChange(t)})),t.hook("dreamandlearn/initCarousel",(function(t){e.dreamandlearn.initCarousel()})),t.hook("dreamandlearn/openIframe",(function(e){var t=e.closest(".js-open-iframe"),o=a(".branding__iframe.open,.branding__mid-section__iframe.open");if(o.length){o.removeClass("open");var n=o.attr("src");o.attr("src",n+"?mute=1")}var i=t.find(".branding__iframe,.branding__mid-section__iframe");i.addClass("open");var r=i.attr("src").split("?");i.attr("src",r[0])})),t.hook("dreamandlearn/closeIframe",(function(e){e.closest(".js-open-iframe").find(".branding__iframe").removeClass("open")})),t.hook("dreamandlearn/scroll2Top",(function(){a("html, body").animate({scrollTop:0},800)})),t.hook("dreamandlearn/scrollToSection",(function(t){var o=t.attr("href"),n=a(".branding-header").height();e.dreamandlearn.closeMenu(),a("html, body").stop().animate({scrollTop:a(o).offset().top-n},700)}))}(app,gee,o)},26729:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.editor={option:{inlineMode:!1,language:"zh_tw",key:"iC2B2A1A4zA3B2A1A1F4E1B1A10C1A6mc1VYJZa1c2a1THYBUZY==",fontSize:["8","9","10","11","12","14","16","18","24","30","36","48","60","72","96"],imageUploadURL:"/storage/editorUpload",imageUploadParam:"photo",imageMinWidth:300,imageOutputSize:!0,imageDefaultWidth:0,imageAllowedTypes:["jpeg","jpg","png","gif"],imageResizeWithPercent:!0,imageMaxSize:20971520,iconsTemplate:"font_awesome",videoUploadURL:"/files/editorUpload/set",videoUploadParam:"video",videoMaxSize:209715200,videoAllowedTypes:["mp4","m4v","mov","wmv","avi","mpg","ogv","3gp","3g2"],pasteImage:!0,pastedImagesUploadURL:"/storage/editorUpload",plainPaste:!0,heightMin:300,htmlAllowedEmptyTags:["textarea","a","iframe","span","video","style",".fa"],toolbarButtons:["fullscreen","bold","italic","underline","strikeThrough","fontSize","color","align","|","paragraphStyle","quote","formatOL","formatUL","outdent","indent","insertHR","-","insertLink","insertImage","insertVideo","|","selectAll","clearFormatting","|","undo","redo","h1","h2","h3","h4","h5","h6"],paragraphStyles:{"fr-grey-block":"灰底區塊","fr-text-gray":"Gray","fr-text-bordered":"Bordered","fr-text-spaced":"Spaced","fr-text-uppercase":"Uppercase"}},init:function(t,o){if(a.extend(e.errMsg,{e6100:"請重新登入",e8100:"缺少檔案",e8300:"檔案格式錯誤",e8301:"請上傳小於 {maxSize} MB 之檔案",e9200:"檔案上傳失敗"}),a(".froalaEditor").length>0){var n=["h1","h2","h3","h4","h5","h6"];e.editor.option.placeholderText=a(".froalaEditor").data("placeholder")||"請輸入內容。",void 0!==t&&(e.editor.option=a.extend({},e.editor.option,t)),e.editor.option.toolbarButtons.forEach((function(e){n.forEach((function(t){var o;t===e&&(o=t,a.FroalaEditor.DefineIcon(o,{NAME:"<strong>".concat(o.toUpperCase(),"</strong>"),template:"text"}),a.FroalaEditor.RegisterCommand(o,{title:"Heading ".concat(o),callback:function(e,t,a){r.apply(this,[e])?this.paragraphFormat.apply("N"):this.paragraphFormat.apply(e)},refresh:function(e){e.toggleClass("fr-active",r.apply(this,[e.data("cmd")]))}}))}))})),"full"!==o&&(e.editor.option.pluginsEnabled=["fullscreen","image","link","wordPaste","url","video","paragraphFormat","emoticons"]);var i=a(".froalaEditor").data("max-size")||1,r=function(e){var t=this.selection.blocks();if(t.length){var a=t[0],o="N",n=this.html.defaultTag();a.tagName.toLowerCase()!=n&&a!=this.el&&(o=a.tagName)}return["LI","TD","TH"].indexOf(o)>=0&&(o="N"),o.toLowerCase()==e};a(".froalaEditor").froalaEditor(e.editor.option).on("froalaEditor.image.beforeUpload",(function(t,a,o){return!(o[0]&&o[0].size>1048576*i&&(e.modal.show({src:"message-modal",ta:"messageModal",size:"sm",header:"blue",title:"錯誤訊息",message:{content:e.tmpl(e.errMsg.e8301,{maxSize:i}),status:"error",imgPath:"/dist/image/icon/image-error.svg?v=0913"}}),1))})).on("froalaEditor.image.inserted",(function(e,t,a,o){})).on("froalaEditor.image.uploaded",(function(t,a,o){return!e.errMsg["e"+o.code]||(e.modal.show({src:"message-modal",ta:"messageModal",size:"sm",header:"blue",title:"錯誤訊息",message:{content:e.tmpl(e.errMsg["e"+o.code],{maxSize:i}),status:"error"}}),!1)})).on("froalaEditor.video.beforeUpload",(function(t,a,o){return!(o[0]&&o[0].size>209715200&&(e.modal.show({src:"message-modal",ta:"messageModal",size:"sm",header:"blue",title:"錯誤訊息",message:{content:e.tmpl(e.errMsg.e8301,{maxSize:200}),status:"error"}}),1))})).on("froalaEditor.video.uploaded",(function(t,a,o){return!e.errMsg["e"+o.code]||(e.modal.show({src:"message-modal",ta:"messageModal",size:"sm",header:"blue",title:"錯誤訊息",message:{content:e.tmpl(e.errMsg["e"+o.code],{maxSize:200}),status:"error"}}),!1)})).on("froalaEditor.video.error",(function(t,a,o,n){if(2==o.code)return e.modal.show({src:"message-modal",ta:"messageModal",size:"sm",header:"blue",title:"錯誤訊息",message:{content:e.tmpl(e.errMsg["e"+n],{maxSize:200}),status:"error"}}),!1}))}return e.editor},load:function(t,o){return e.waitFor((function(){return a(".froalaEditor.col-"+t).length>0})).then((function(){a(".froalaEditor.col-"+t).froalaEditor("html.set",o),a(".froalaEditor.col-"+t).find("div.embed-responsive, div.embed-responsive-16by9").find(".fr-video").unwrap()})),e.editor},get:function(e){return a(".froalaEditor.col-"+e).froalaEditor("html.get")}},t.hook("initEditor",(function(t){e.editor.init().load("content","")}))}(app,gee,o)},44120:(e,t,a)=>{var o=a(31175);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){"use strict";e.explore={loading:!1,currentType:"all",currentSubType:"all",currentOrder:"latest",currentCourseType:"all",currentGroupID:"0",currentPage:"0",key:"",requestObj:{key:"",page:0,type:"all",subType:"all",courseType:"all",groupID:"0",order:"latest"},data:void 0,init:function(){var t=this,o=t.parseUrl(window.location.href);t.currentType=o.type,t.currentSubType=o.subType,t.currentOrder=o.order,t.key=o.key,t.currentPage=o.page,t.currentCourseType=o.courseType,t.currentGroupID=o.groupID,t.sendRequest(i(i({},o),{},{force:0}),"initialize"),a(".js-explore-mask").on("click",(function(){a(".js-mobile-explore-category").hasClass("active")&&t.categorySelector.closeMobileCategory(),e.explore.hideMask()})),a(t).on("dataLoaded",(function(o,n){var i={ta:"",path:e.explore.buildUrl({type:e.explore.currentType,subType:e.explore.currentSubType,order:e.explore.currentOrder,courseType:e.explore.currentCourseType,groupID:e.explore.currentGroupID,page:parseInt(e.explore.currentPage+1),key:e.explore.key})};return window.history.pushState(i,"",i.path),a(".js-result-total").text(t.resultTotal),!e.explore.data.result||e.explore.data.result.length<1?a(".js-empty").removeClass("hide"):a(".js-empty").hasClass("hide")||a(".js-empty").addClass("hide"),"initialize"===n?(t.categorySelector.init(),t.pageSelector.init(),t.sortingSelector.init(),t.renderCourseCards(e.explore.data.result),t.pageSelector.displayPage(parseInt(e.explore.currentPage)+1),t.stopLoading(),void e.explore.bindScrollingAndLoadEvt()):"turnPage"===n?(t.renderCourseCards(e.explore.data.result,"append"),void t.stopLoading()):"function"==typeof n?(n(),t.renderCourseCards(e.explore.data.result),void t.stopLoading()):void 0}))},bindScrollingAndLoadEvt:function(){var t=a(window),o=0;t.on("scroll",(function(){if(window.innerWidth<=768&&window.pageYOffset>=a(".js-toolbar").height()){var t=window.pageYOffset;t>o?(a(".js-toolbar--explore").addClass("s--fixed-explore"),a(".js-mobile-category__panel").addClass("s--fixed-explore")):t<o&&(a(".js-toolbar--explore").removeClass("s--fixed-explore"),a(".js-mobile-category__panel").removeClass("s--fixed-explore")),o=t}if(window.innerHeight+window.scrollY+10>=document.body.offsetHeight){var n=e.explore.currentPage+1;if(12*n>=e.explore.data.total)return;e.explore.currentPage=n,e.explore.pageSelector.goTo(e.explore.currentPage),e.waitFor(1).then((function(){e.track.view_item_list()}))}}))},unbindScrollingEvt:function(){a(window).unbind("scroll")},stopLoading:function(){a(".js-loading").addClass("hide")},showLoading:function(){a(".js-empty").hasClass("hide")||a(".js-empty").addClass("hide"),a(".js-loading").removeClass("hide")},parseUrl:function(e){var t,a={key:"",page:0,type:"all",subType:"all",courseType:"all",groupID:"0",order:"latest"};if(e.indexOf("?")>-1&&(t=e.split("?")[1]),t){var o=t.replace(/[?]/g,"").split("&"),n={};return o.forEach((function(e,t){var a=e.split("=");"exploreKey"===a[0]&&(a[0]="key"),n[a[0]]=a[1]})),n.page=parseInt(n.page)-1,n}var i=window.location.pathname.split("/").filter((function(e){return Boolean(e)}));return i.length>=2&&(a.type=i[1],a.subType=i[2]?i[2]:"all"),a},buildUrl:function(e){var t=[],a=isNaN(parseInt(e.type))?"":parseInt(e.type),o=isNaN(parseInt(e.subType))?"":parseInt(e.subType);t[0]=e.type?"type=".concat(e.type):"type=all",t[1]="&subType=".concat(void 0!==e.subType?e.subType:"all"),t[2]="&order=".concat(void 0!==e.order?e.order:"latest"),t[3]="&courseType=".concat(void 0!==e.courseType?e.courseType:"all"),t[4]="&groupID=".concat(void 0!==e.groupID?e.groupID:"0"),t[5]="&page=".concat(void 0!==e.page?e.page:"1"),t[6]="&exploreKey=".concat(e.key);var n=t.reduce((function(e,t){return e+t})),i="/explore".concat(a?"/"+a:"").concat(a&&o?"/"+o:"");return"".concat(i,"?").concat(n)},cateIDParser:function(e){var t=parseInt(e,10);return isNaN(t)?"all":t},sendRequest:function(e,o){var n=this;n.showLoading();var i=a(".js-more-result");"turnPage"!==o&&(i.html(""),n.showLoading()),e.courseType.includes("online")&&(e.courseType+=",normal");var r=function(){n.currentType=void 0===this.data.type?n.currentType:this.data.type,n.currentSubType=void 0===this.data.subType?n.currentSubType:this.data.subType,n.currentCourseType=void 0===this.data.courseType?n.currentCourseType:"all",n.data=this.data,n.resultTotal=this.data.total,n.key=this.data.key||n.key,a(n).trigger("dataLoaded",o)};t.yell("explore/more",e,r,r)},renderCourseCards:function(o,n){function i(o,n,i){var r=a(".js-more-result"),s=n.render({data:o});"append"!==i?(r.html(""),r.html(s)):r.append(s),t.init(),e.arena.initCountdown(),e.collect.updateCollectedCards()}void 0!==e.tmplStores["explore-course-card"]?i(o,e.tmplStores["explore-course-card"],n):e.waitFor((function(){return void 0!==e.tmplStores["explore-course-card"]})).then((function(){i(o,e.tmplStores["explore-course-card"],n)}))},showMask:function(){a(".js-explore-mask").addClass("show"),a("#page").addClass("vague")},hideMask:function(){a(".js-explore-mask").removeClass("show"),a("#page").removeClass("vague")},categorySelector:{root:void 0,mainBoxes:void 0,mainCateContainer:void 0,subCateContainer:void 0,cateList:void 0,statusClassMap:{},init:function(){var t=this;window.innerWidth<=768?t.root=a(".js-mobile-explore-category"):t.root=a(".js-desktop-explore-category"),t.mainBoxes=t.root.find(".js-main-box"),t.mainCateContainer=t.root.find(".js-main-container"),t.subCateContainer=a(".js-course-category-tag"),t.cateList=t.categoryInit();var o=e.explore.currentCourseType;t.toggleSorterAndFilterByCourseType(o),t.statusClassMap=t.initCateList(),t.renderMainCate(),t.getActiveMain(),t.renderSubCate(),t.getActiveSub(),t.subCateContainer.on("click",(function(o){if(a(o.target).hasClass("js-subType")){var n=a(o.target).attr("data-courseType"),i=a(o.target).attr("data-groupID");e.explore.sortingSelector.closeSelect("filter"),e.explore.sortingSelector.clearStatus("filter"),e.explore.sortingSelector.closeSelect("sorter"),e.explore.sortingSelector.clearStatus("sorter"),t.toggleSorterAndFilterByCourseType(n),e.explore.currentCourseType=n||"all",e.explore.currentGroupID=i||"0",e.explore.currentPage=0,e.explore.currentOrder="latest";var r={type:e.explore.cateIDParser(a(o.target).attr("data-type")),subType:e.explore.cateIDParser(a(o.target).attr("data-subType")),courseType:n||"all",groupID:i||"0",page:0,key:e.explore.key,order:"latest",force:1};e.explore.sendRequest(r,t.update);var s="area";switch(e.explore.currentType){case"67":s+="Business";break;case"68":s+="Design";break;case"69":s+="Technology";break;case"70":s+="Language";break;case"71":s+="Life";break;default:s+="All"}e.track.send("courseExplore","CourseType","".concat(s).concat(a(o.target).index()))}})),t.mainBoxes.each((function(){a(this).on("click",(function(){var t=isNaN(parseInt(a(this).attr("data-type")))?"all":parseInt(a(this).attr("data-type"));e.explore.categorySelector.switchMainCate(t),e.explore.sortingSelector.closeSelect("filter"),e.explore.sortingSelector.clearStatus("filter"),e.explore.sortingSelector.closeSelect("sorter"),e.explore.sortingSelector.clearStatus("sorter"),e.track.send("courseExplore","CourseType","".concat(a(this).data("label"),"0"),"ga")}))}))},toggleSorterAndFilterByCourseType:function(e){var t=a(".js-explore-sorter").eq(0),o=a(".js-explore-sorter").eq(1);"free"===e||"group"===e?o.addClass("hide"):o.hasClass("hide")&&o.removeClass("hide"),"fundraising"===e||"offline"===e||"like"===e?t.addClass("hide"):t.hasClass("hide")&&t.removeClass("hide")},getActiveMain:function(){var t=this,o=e.explore.currentType;t.root.find(".js-main-box").each((function(){a(this).removeClass("active"),e.explore.cateIDParser(a(this).attr("data-type"))===e.explore.cateIDParser(o)&&a(this).addClass("active")})),t.changeSubTitle(e.explore.cateIDParser(o)),t.changeImg(e.explore.cateIDParser(o))},changeImg:function(e){a(".js-category-image").attr("src",this.statusClassMap[e].imgPath)},changeSubTitle:function(e){a(".js-explore-subtitle").text(this.statusClassMap[e].category)},initCateList:function(){var t=e.explore.data.cateList,a={};return t.forEach((function(e,t){switch(a[e.categoryID]={},a[e.categoryID].category=e.category,a[e.categoryID].class="s--",e.categoryID){case 67:a[e.categoryID].class+="business",a[e.categoryID].imgPath="/dist/image/explore/explore_business.svg";break;case 68:a[e.categoryID].class+="design",a[e.categoryID].imgPath="/dist/image/explore/explore_design.svg";break;case 69:a[e.categoryID].class+="technology",a[e.categoryID].imgPath="/dist/image/explore/explore_technology.svg";break;case 70:a[e.categoryID].class+="language",a[e.categoryID].imgPath="/dist/image/explore/explore_language.svg";break;case 71:a[e.categoryID].class+="life",a[e.categoryID].imgPath="/dist/image/explore/explore_life.svg"}})),a.all={category:"全部",class:"s--all",imgPath:"/dist/image/explore/explore_all.svg"},a},switchMainCate:function(t){var o=this;o.currentType=t,e.explore.currentType=t,e.explore.currentPage=0,e.explore.currentGroupID=0,e.explore.currentCourseType="all",e.explore.currentOrder="latest",a(".js-explore-filter-anchor").hasClass("hide")&&a(".js-explore-filter-anchor").removeClass("hide"),a(".js-mobile-explore-category").hasClass("active")&&(a(".js-mobile-explore-category").removeClass("active"),a(".c-mobile-category__btn").text("展開分類"),e.explore.hideMask()),o.getActiveMain(),e.explore.sendRequest({key:"",page:e.explore.currentPage,type:"".concat(t),subType:"all",courseType:e.explore.currentCourseType,groupID:"0",order:"latest",force:1},o.update)},categoryInit:function(){var t=e.explore.data.cateList;return t.push({category:"全部",categoryID:"all"}),t},getCategoryIcon:function(e){return e.map((function(e){var a;switch(e.categoryID){case"all":a=t.iconStore.earth;break;case 67:a=t.iconStore.business;break;case 68:a=t.iconStore.design;break;case 69:a=t.iconStore.technology;break;case 70:a=t.iconStore.language;break;case 71:a=t.iconStore.life}return{categoryID:e.categoryID,cateIcon:a}}))},renderMainCate:function(){var t=this;e.waitFor((function(){return e.icon.iconLoaded})).then((function(){var e=t.getCategoryIcon(t.cateList);t.mainBoxes.each((function(){var t=a(this),o=parseInt(a(this).attr("data-type"),10);if(isNaN(o)){var n=e.filter((function(e){return"all"===e.categoryID}))[0];t.find(".category-icon").replaceWith('<svg class="svg-icon" viewBox="'.concat(n.cateIcon.viewBox,'">').concat(n.cateIcon.svg,"</svg>"))}else e.forEach((function(e){o===e.categoryID&&t.find(".category-icon").replaceWith('<svg class="svg-icon" viewBox="'.concat(e.cateIcon.viewBox,'">').concat(e.cateIcon.svg,"</svg>"))}))}))}))},renderSubCate:function(){var t,a,o=e.explore.categorySelector;e.explore.data.subCateList.length>0?(a=e.explore.data.subCateList).unshift({category:"所有",categoryID:"all",rowID:"".concat(e.explore.data.type),order:"0"}):a=e.nav.subListForTypeAll;var n,i,r,s=window.location;s.hash,r=s.search.replace("?","");var l=e.parseStrToObject(r);n=l.type,i=l.subType,t=e.tmplStores["course-sub-type-tag"].render({data:{subCateList:a,type:n,subType:i}}),o.subCateContainer.html(t)},getActiveSub:function(){var t=this.subCateContainer.find(".js-subType"),o=e.explore.currentType,n=e.explore.currentSubType,i=e.explore.currentCourseType,r=parseInt(e.explore.currentGroupID);t.each((function(){if(a(this).removeClass("active"),isNaN(r)||0===r||parseInt(a(this).attr("data-groupID"))!==r)if("all"===o||a(this).attr("data-subType")!==n){if("all"===o&&0===r){var e=i.split(",");if(i.includes("free"))return void("free"===a(this).attr("data-courseType")&&a(this).addClass("active"));if(i.includes("like"))return void("like"===a(this).attr("data-courseType")&&a(this).addClass("active"));if(1===e.length)return e.includes("offline")?void("offline"===a(this).attr("data-courseType")&&a(this).addClass("active")):e.includes("fundraising")?void("fundraising"===a(this).attr("data-courseType")&&a(this).addClass("active")):"all"===a(this).attr("data-courseType")?void a(this).addClass("active"):void 0}}else a(this).addClass("active");else a(this).addClass("active")}))},update:function(){var t=e.explore.categorySelector;t.renderSubCate(),t.getActiveSub(),e.explore.pageSelector.init(),e.explore.sortingSelector.getCurrentOpt("filter"),e.explore.sortingSelector.getCurrentOpt("sorter")},openMobileCategory:function(){var t=a(".js-mobile-explore-category"),o=a(".js-mobile-category-btn");e.explore.showMask(),t.addClass("active"),o.text("關閉分類")},closeMobileCategory:function(){var t=a(".js-mobile-explore-category"),o=a(".js-mobile-category-btn");e.explore.hideMask(),t.removeClass("active"),o.text("展開分類"),a(".js-explore-filter").hasClass("active")&&a(".js-explore-filter").removeClass("active")}},sortingSelector:{filter:{root:void 0,anchor:void 0,selectBox:void 0,options:void 0,textNode:void 0},sorter:{root:void 0,anchor:void 0,selectBox:void 0,options:void 0,textNode:void 0},init:function(){var t=this;t.filter.root=a(".js-explore-sorter").eq(0),t.sorter.root=a(".js-explore-sorter").eq(1);for(var o=function(){var o=i[n];t[o].anchor=t[o].root.find(".js-explore-sorter-anchor"),t[o].selectBox=t[o].root.find(".js-explore-sorter-select"),t[o].options=t[o].selectBox.find(".js-sorter-option"),t[o].textNode=t[o].root.find(".js-sorter-text"),t.clearStatus(o),t.getCurrentOpt(o),t[o].anchor.on("click",(function(e){t.toggleSelect(o)})),t[o].options.each((function(){a(this).on("click",(function(){var n="sorter"===o?"data-order":"data-courseType",i="sorter"===o?"CourseOrder":"CourseStatus";e.track.send("courseExplore",i,a(this).data("label"),"ga"),t.clearStatus(o),t.selectOption(a(this).attr(n),a(this).find("span").text(),o),t.closeSelect(o)}))}))},n=0,i=["filter","sorter"];n<i.length;n++)o()},selectOption:function(t,a,o){var n=this;if(n[o].root.addClass("s--".concat(t)),"sorter"===o)e.explore.currentOrder=t;else{var i=e.explore.currentCourseType.split(",");["all","online","fundraising"].forEach((function(e){var t=i.indexOf(e);t>-1&&i.splice(t,1)})),i.push(t),e.explore.currentCourseType=i.join(",")}e.explore.currentPage=0;var r={key:e.explore.key,page:e.explore.currentPage,type:e.explore.currentType,subType:e.explore.currentSubType,courseType:e.explore.currentCourseType,groupID:e.explore.currentGroupID,order:e.explore.currentOrder,force:1};n[o].textNode.text(a),e.explore.sendRequest(r,(function(){n.getCurrentOpt(o)}))},openSelect:function(e){this[e].root.addClass("active")},closeSelect:function(e){this[e].root.removeClass("active")},toggleSelect:function(e){var t=this;t[e].root.hasClass("active")?t.closeSelect(e):t.openSelect(e)},clearStatus:function(e){var t=this;["s--best","s--latest","s--lowest","s--all","s--online","s--fundraising"].forEach((function(a){t[e].root.removeClass(a)}))},getCurrentOpt:function(t){var o=this;o[t].selectBox.find(".js-sorter-option").each((function(){var n="sorter"===t?"data-order":"data-courseType";"group"!==e.explore.currentCourseType&&"free"!==e.explore.currentCourseType||(o.filter.root.addClass("s--all"),o.filter.textNode.text("全部課程")),(a(this).attr("data-order")===e.explore.currentOrder||e.explore.currentCourseType.includes(a(this).attr("data-courseType")))&&(o[t].root.addClass("s--".concat(a(this).attr(n))),o[t].textNode.text(a(this).find("span").text()))}))}},pageSelector:{root:void 0,total:0,initialized:!1,handleTurnPage:function(){var t=this;e.explore.unbindScrollingEvt(),a("html,body").animate({scrollTop:0},"slow");var o=function(){a(".js-more-result").html(""),e.explore.bindScrollingAndLoadEvt()};window.setTimeout((function(){e.explore.sendRequest(i(i({},t.getPageRequestObj(e.explore.currentPage)),{},{force:0}),o)}),500)},init:function(){var o=this;e.waitFor((function(){return e.icon.iconLoaded}),20).then((function(){var n='<svg class="svg-icon left_arrow_new" viewBox="'.concat(t.iconStore.left_arrow_new.viewBox,'">').concat(t.iconStore.left_arrow_new.svg,"</svg>"),i='<svg class="svg-icon right_arrow_new" viewBox="'.concat(t.iconStore.right_arrow_new.viewBox,'">').concat(t.iconStore.right_arrow_new.svg,"</svg>"),r='<svg class="svg-icon more_vert" viewBox="'.concat(t.iconStore.more_vert.viewBox,'">').concat(t.iconStore.more_vert.svg,"</svg>");o.total=o.getTotalPages(),o.root=a(".js-explore-pagination"),a(".js-explore-pagination").pagination({className:"l-explore-pagination",prevText:n,nextText:i,ellipsisText:r,dataSource:o.total,classPrefix:"l-page",pageSize:12,beforePageOnClick:function(){var t=a(window.event.target).text()-1<0?a(window.event.target).text():a(window.event.target).text()-1;e.explore.currentPage=t,o.handleTurnPage()},beforeNextOnClick:function(){var t=e.explore.currentPage+1;e.explore.currentPage=t,o.handleTurnPage()},beforePreviousOnClick:function(){var t=e.explore.currentPage-1<0?e.explore.currentPage:e.explore.currentPage-1;e.explore.currentPage=t,e.explore.currentPage=t,o.handleTurnPage()}}),o.initialized=!0}))},displayPage:function(t){var o=this;e.waitFor((function(){return o.initialized}),20).then((function(){a(".js-explore-pagination").pagination(t)}))},getTotalPages:function(){for(var t=e.explore.data.total,a=[],o=0;o<t;o++)a.push(o);return a},goTo:function(t){this.displayPage(t+1),e.explore.sendRequest(this.getPageRequestObj(parseInt(t)),"turnPage")},getPageRequestObj:function(t){return{key:e.explore.key,page:t,type:e.explore.currentType,subType:e.explore.currentSubType,courseType:e.explore.currentCourseType,groupID:e.explore.currentGroupID,order:e.explore.currentOrder}}}},t.hook("explore/init",(function(t){e.explore.init(t);var a=t.attr("data-tmpl");void 0===e.tmplStores[a]&&e.loadHtml(a,t.find(".js-result-tmpl"))})),t.hook("explore/toggleMobileCate",(function(){a(".js-mobile-explore-category").hasClass("active")?e.explore.categorySelector.closeMobileCategory():e.explore.categorySelector.openMobileCategory()}))}(app,gee,o)},10126:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.faq={get:function(){var a=function(){if(0!==this.code)e.stdErr(this);else{var a=e.tmplStores["faq-header"].render({data:this.data});e.faq.box.find(".js-faq-header").html(a),a=e.tmplStores["faq-box"].render({data:this.data}),e.faq.box.find(".js-faq-container").html(a),e.bar.after=function(){t.go2Top()},t.init(),""===window.location.hash&&e.faq.box.find('.js-desktop-category a[href="#featured"]').click()}};t.yell("question/list",{},a,a)}},t.hook("faq/init",(function(t){e.tmplStores["faq-box"]&&(e.faq.box=t,e.faq.get())})),t.hook("faqCates",(function(t){var o=t.attr("href"),n=t.text();a(".js-faq-header").find(".js-desktop-category a").each((function(e){var t=a(this).attr("href");a(".js-faq-container "+t).removeClass("active"),a(this).parent().removeClass("active"),o===t&&(a(this).parent().addClass("active"),a(".js-faq-container "+t).addClass("active"))})).end().find(".js-category-name").text(n).end().find(".js-category-btn").removeClass("active").text("展開分類").end().removeClass("active"),a(".js-toolbar").removeClass("hide"),e.body.removeClass("fixed")}))}(app,gee,o)},42800:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.forums={data:[],box:[],type:"",loading:0,preErrType:"",show:function(t){var o=t.data("type"),n=a("#courseID").val()||e.intro.data.id,i=t.data("post")||n,r=e.forums.box[o];e.forums.course_id=n,e.forums.id=i,e.forums.type=o,r.html(""),r.get(0)&&(0==r.find(".js-forums-form").length&&e.forums.render("form",{},r,!1),0==r.find(".js-comment-list").length&&e.forums.render("comment-area",{},r,!1),e.waitFor(.5).then((function(){if(0==r.find(".js-comment-list .js-forums-comment").length&&e.forums.get(),"issue"===e.forums.type||"faq"===e.forums.type){var t=r.find(".js-comment-sorter").eq(0),o=r.find(".js-sorter-list").eq(0),n=r.find(".js-comment-sorter").eq(1),i=r.find(".js-sorter-list").eq(1),s=r.find(".js-search-input"),l=s.siblings(".js-clear-btn");t.on("click",(function(){t.hasClass("is--open")?(t.removeClass("is--open"),o.addClass("hidden")):(t.addClass("is--open"),o.removeClass("hidden"))})),n.on("click",(function(){n.hasClass("is--open")?(n.removeClass("is--open"),i.addClass("hidden")):(n.addClass("is--open"),i.removeClass("hidden"))})),s.on("input",(function(){a(this).val().length<=0?l.removeClass("active"):l.addClass("active")})),s.on("keypress",(function(o){if(13===o.keyCode){var i=a(this).val();e.forums.get(t.data("value"),n.data("value"),i)}})),l.on("click",(function(){s.val(""),s.trigger("input")}))}})))},get:function(a,o,n){e.forums.toggleLoad(!0);var i=function(){if(0!==this.code){switch(e.forums.preErrType=e.forums.type,this.code){case 6100:e.stdErr(this),t.exe("attemptToLogin",null);break;case 6200:break;default:e.stdErr(this)}e.forums.render("empty",null,null,!0)}else{e.forums.loading=0;var i=this.data;if(void 0===i||0==i.length)e.forums.render("empty",null,null,!0),e.forums.scrollAfterSorter&&t.event.fire("scrollAfterSorter");else{var r=e.forums.box[e.forums.type];"issue"===e.forums.type||"faq"===e.forums.type?e.forums.paginate(r,i,a,o,n):(e.forums.render("comment",i,null,!1),e.forums.count(r,"comment")),e.forums.scrollAfterSorter&&t.event.fire("scrollAfterSorter")}}e.forums.toggleLoad(!1)};1!=e.forums.loading||e.forums.preErrType!==e.forums.type?(e.forums.loading=1,t.yell("forums/"+e.forums.type+"/get",{id:e.forums.id},i,i)):(e.forums.box[e.forums.type].find(".js-empty").length<1&&e.forums.render("empty",null,null,!0),e.forums.toggleLoad(!1))},toggleLoad:function(t){var a=e.forums.box[e.forums.type].find(".js-comment-list");t&&(a.find(".js-forums-comment").remove(),a.find(".center-flexbox").remove()),a.find(".comment-content").toggleClass("loading",t),a.find(".comment-content .tab-loading").toggleClass("show",t)},paginate:function(t,a,o,n,i){var r,s=0,l=o||"all",c=n||"new";if("discuss"===l?a=a.filter((function(t){return t.author.id===e.member.current.userID})):"reply"===l?a=a.filter((function(t){return t.reply.some((function(t){return t.author.id===e.member.current.userID}))})):"noReply"===l&&(a=a.filter((function(e){return e.reply.every((function(e){return!e.author.isTeacher}))}))),"old"===c?a=a.sort((function(e,t){return Date.parse(e.date)-Date.parse(t.date)})):"hot"===c&&(a=a.sort((function(e,t){return t.reply.length-e.reply.length}))),i){var d=new RegExp(encodeURIComponent(i.trim()),"gi");function e(e){return e.replace(/<[^>]+>|(\r\n|\r|\n)/g,"")}a=a.filter((function(t){var a=encodeURIComponent(e(t.content)).search(d);return a>=0||t.reply.some((function(t){return(a=e(t.content).search(d))>=0}))}))}r=a.slice(s,s+20),s+=20;var u="issue"===e.forums.type?"討論":"問答",m='<div class="center-flexbox"><button class="btn btn-blue comment-btn js-forums-more">查看更多'.concat(u,"</button></div>");t.find(".js-forums-more").parent(".center-flexbox").remove(),a[s]&&t.find(".comment-list-header").after(m),e.forums.render("comment",r,null,!0),e.forums.count(t,"comment",a.length),t.find(".js-forums-more").click((function(){r=a.slice(s,s+20),a[s+=20]||t.find(".js-forums-more").addClass("hidden"),e.forums.render("comment",r,null,!1,!0)}))},count:function(t,a,o){if("comment"===a){var n=t.find(".js-forums-comment-count"),i=o||t.find(".js-forums-comment").length;n.find(".num").text(i)}else{var r=t.find(".js-forums-reply-count"),s=t.find(".js-forums-reply-list"),l=s.find(".js-forums-reply").length;s.find(".js-forums-reply-toggle").toggleClass("hidden",l<3),r.toggleClass("hidden",0==l).find(".num").text(l)}e.forums.empty()},empty:function(){e.waitFor(.4).done((function(){var t=e.forums.box[e.forums.type];t.find(".js-empty").remove().end().find(".js-comment-list").removeClass("empty"),0===t.find(".js-forums-comment").length&&(t.find(".js-comment-list").addClass("empty"),e.forums.render("empty",null,null,!0))}))},set:function(o,n,i){var r=function(t){var a,o,n=i.parents(".js-forums-area").find(".js-comment-list"),r=i.parents(".js-forums-area").find(".js-comment-sorter").data("value"),s=null!==(a=i.parents(".js-forums-area").find(".js-search-input").val())&&void 0!==a?a:"",l=new RegExp(s.trim(),"gi"),c=(o=t[0].content,o.replace(/<[^>]+>|(\r\n|\r|\n)/g,"")).search(l);if(("issue"!==e.forums.type||"reply"!==r)&&c>=0&&e.forums.render("comment",t,null,!1),"issue"===e.forums.type){if("reply"!==r&&c>=0){var d=Number(n.find(".js-forums-comment-count").find(".num").text());"reply"!==r&&(d+=1),e.forums.count(n,"comment",d)}}else e.forums.count(n,"comment");if("homework"===e.forums.type){n=e.body.find('.js-homework-block[data-id="'+e.forums.id+'"] .js-hk-comment-num');var u=parseInt(n.text(),10);n.text("".concat(u+1," 則討論"))}},s=function(){if(0!==this.code)6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this);else{if(1==this.data.length){var o=this.data[0];void 0!==o.reply_id&&0!=o.reply_id?function(t){if("noReply"===a(".js-comment-sorter").eq(0).data("value")){var o,n=i.closest(".js-comment-list"),r=n.find(".js-forums-comment"),s=Number(n.find(".js-forums-comment-count").find(".num").text());return r.each((function(){if(a(this).data("id")===t[0].reply_id)return o=a(this),!1})),o.remove(),void e.forums.count(n,"comment",s-1)}var l=i.closest(".js-forums-comment");e.forums.render("reply",t,l.find(".js-forums-reply-list"),!1),e.forums.count(l,"reply")}(this.data):(e.isInPage("classroomv3")&&(this.data[0].chapter_title=e.forums.chapter_title,this.data[0].chapter_sort=e.forums.chapter_sort),r(this.data))}else r(this.data);e.forums.reset(i)}n.prop("disabled",!1).find(".fa-spinner").remove()};t.yell("forums/"+e.forums.type+"/set",o,s,s)},del:function(o,n){var i=n.closest(".js-forums-comment, .js-forums-reply");if(i.is(".js-forums-comment"))var r=i.attr("data-id"),s="comment",l=i.parent();else r=i.closest(".js-forums-comment").attr("data-id"),s="reply",l=i.closest(".js-forums-comment");var c={id:o};switch(e.forums.type){case"homework":c.homework_id=e.forums.id;break;case"article":c.article_id=e.forums.id;break;default:c.course_id=e.forums.id}r&&r!=o&&(c=a.extend({},c,{reply_id:r}));var d=function(){if(0!==this.code)e.stdErr(this);else{if(i.remove(),"issue"===e.forums.type){var t=Number(l.find(".js-forums-comment-count").find(".num").text())-1;e.forums.count(l,s,t)}else e.forums.count(l,s);if("homework"===e.forums.type){var a=e.body.find('.js-homework-block[data-id="'+e.forums.id+'"] .js-hk-comment-num'),o=parseInt(a.text(),10);a.text("".concat(o-1," 則討論"))}}};t.yell("forums/"+e.forums.type+"/del",c,d,d)},delImage:function(o,n){var i=n.closest(".img-item"),r=function(){0!==this.code?e.stdErr(this):(e.stdSuccess(this),i.fadeOut(300,(function(){a(this).remove();var e=i.find(".upload-photo");e.find("i").length<1&&e.hide()})))},s="fileID="+o;t.yell("storage/del",s,r,r)},render:function(o,n,i,r,s){switch(r=void 0===r||r,o){case"comment-area":var l="forums-comment-header";e.isInPage("classroomv3")&&(l="forums-comment-header2"),e.waitFor(.1).then((function(){if(e.tmplStores[l]){var a=e.member.current,o=e.tmplStores[l].render({type:e.forums.type,isTeacher:a.isTeacher,isLogin:a.isLogin,isBuy:a.isLogin&&(1==a.isStudent||1==a.isExStudent||1==a.isTeacher||1==a.staff)});i.append(o),t.event.fire("forum.comment-area.loaded")}}));break;case"comment":if(l="forums-comment",e.isInPage("classroomv3")&&(l="forums-comment2"),!e.tmplStores[l])return;if(i=i||e.forums.box[e.forums.type].find(".js-comment-list"),n){var c=e.member.current,d=e.tmplStores[l].render({data:n,type:e.forums.type,userID:c.userID,nickname:c.nickname===e.member.defaultNickname?"":c.nickname,member_avatar:c.img,isTeacher:c.isTeacher,isStaff:c.staff,isExStudent:c.isExStudent,isStudent:c.isStudent,isLogin:c.isLogin,isBuy:c.isLogin&&(1==c.isStudent||1==c.isExStudent||1==c.isTeacher||1==c.staff)});r?(i.find(".js-forums-comment").remove(),i.find(".comment-list-header").after(d)):s?i.find(".js-forums-comment").last().after(d):i.find(".comment-list-header").after(d),t.event.fire("forum.comment.loaded")}break;case"reply":if(l="forums-reply",!e.tmplStores[l])return;n&&(c=e.member.current,d=e.tmplStores[l].render({data:n,base:{userID:c.userID,isTeacher:c.isTeacher}}),r?i.html(d):i.append(d),t.event.fire("forum.reply.loaded"));break;case"form":function o(){var a=e.member.current||{},o=a.isLogin&&(1==a.isStudent||1==a.isExStudent||1==a.isTeacher||1==a.staff),n=a.isLogin,s=a.isLogin&&1==a.isTeacher;!1===a.isLogin&&(a.nickname="尚未登入",a.img="/dist/image/default-avatars.png?v=0528");var c=e.tmplStores[l].render({data:{type:e.forums.type,course_id:e.forums.course_id,show_form:"faq"==e.forums.type||"article"==e.forums.type?n:n&&o,show_title:"issue"==e.forums.type||"article"==e.forums.type,show_buy:"faq"!=e.forums.type&&"article"!=e.forums.type&&!o&&n,show_login:!n},member_name:a.nickname===e.member.defaultNickname?"":a.nickname,member_avatar:a.img,isTeacher:s});r?i.html(c):i.prepend(c),t.event.fire("forum.form.loaded")}l="forums-form",e.isInPage("classroomv3")&&(l="forums-form2"),e.waitFor((function(){return e.tmplStores[l]&&e.member.loaded})).then(o);break;case"empty":if(l="forums-comment-empty",!e.tmplStores[l])return;i=i||e.forums.box[e.forums.type].find(".js-comment-list");var u,m=a(".js-comment-search > .js-search-input").val(),h=i.find(".js-comment-sorter").eq(0).data("value"),p={issue:"討論",faq:"問題",noReply:"未回覆",discuss:"issue"===e.forums.type?"我發起":"我提出",reply:"我參與"};u=""!==m?"目前沒有搜尋到相關結果唷！":"all"===h?"目前沒有任何".concat(p[e.forums.type],"唷！"):"目前還沒有".concat(p[h],"的").concat(p[e.forums.type],"唷！"),d=e.tmplStores[l].render({type:e.forums.type,isTeacher:e.member.current.isTeacher,text:u}),i.find(".js-empty").remove(),i.addClass("empty").append(d)}t.init(),a(".startTime").tooltip()},reset:function(t){t.find("input").val("").end().find("textarea").val("").end().find(".upload-photo .photo-list").html("").end().find(".upload-photo").hide(),e.member.current.nickname!==e.member.defaultNickname&&(a(".js-forums-comment-form").removeClass("no-nickname"),a(".js-forums-comment-form").find(".js-forums-nickname").text(e.member.current.nickname)),e.isInPage("classroomv3")&&(a(".chapter_title_set").text(""),a(".chapter_title_set").parent().addClass("hide").next().addClass("reset-margin"),a(".timestamp").addClass("hide"))},issueGetTime:function(){e.studio2.player.pause(),e.forums.urlChapterID();var t=a.map(e.lecture2.data.list,(function(e,t){return e.id})).indexOf(e.forums.chapter_id);e.forums.chapter_title=e.lecture2.data.list[t].title,e.forums.chapter_sort=e.lecture2.data.list[t].sort;var o=e.formatHelper.timecodeConverter(Math.floor(e.studio2.player.currentTime()));a(".timestamp").removeClass("hide"),a(".time").text(o),a(".chapter_title_set").parent().removeClass("hide"),a(".chapter_title_set").text(e.forums.chapter_title)},urlChapterID:function(){var t=window.location.href.split("/"),a=t[t.length-1].split("#");e.forums.chapter_id=Number(a[0])},showPlayerDiscussionModal:function(){e.modal.show({src:"post-discussion-modal",size:"sm",ta:"v2Modal",cover:"black",canClose:!1}),e.waitFor((function(){return a(".post-discussion-modal").length>0})).then((function(){var o=a(".post-discussion-modal").find(".modal-body"),n={courseID:a("#courseID").val(),chapterID:a(".unit-block.active").data("id"),chapterTitle:"單元"+a(".unit-block.active").find(".unit-title").text(),timestamp:e.lecture.player.that.getPosition?Math.floor(e.lecture.player.that.getPosition()):1,content:a("#content").val()},i="initPostDiss-tmpl";a.when(e.waitFor((function(){return void 0!==e.tmplStores[i]})),e.waitFor((function(){return void 0!==e.member.current.nickname}))).then((function(){var a=e.tmplStores[i].render(n);o.html(a),(e.member.current.nickname===e.member.defaultNickname?"":e.member.current.nickname).length<=0&&e.modal.stack.v2Modal.find(".modal-body").find(".post-discussion-form").addClass("no-nickname"),t.init()}))}))},getPreset:function(){e.forums.loading=0,e.forums.preErrType=""},backToVideo:function(o){t.go2Top();var n=o.data("id"),i=e.lecture2.current.id,r=o.data("timestamp");if(e.studio2.current.seek=o.data("timestamp"),n===i)e.studio2.player.currentTime(r),e.studio2.player.play(r);else{var s=(o=a(".unit-block[data-id=".concat(n,"]")).first()).closest(".unit-block");0===s.length&&(o.closest(".unit-manage-container").siblings(".unit-block"),function(e){throw new TypeError('"box" is read-only')}()),e.lecture2.current.id!==n&&e.lecture2.get.video(n,(function(){e.lecture2.chapter.reset(e.lecture2.current.id),e.lecture2.current.set(n);var t=window.location.pathname.slice(1).split("/");t[3]=n;var o=window.location.hash;window.history.pushState({ta:"lecture"},null,window.location.origin+"/"+t.join("/")+o),e.lecture2.updateLite(),a(".unit-block[data-id=".concat(e.lecture2.current.id,"]")).addClass("active"),s.find(".js-tag-area").html("").append('<span class="play_now">播放中</span>')})),t.event.subscribe("app.studio2.setupPlayer",(function(){if(e.studio2.already)if(e.studio2.player.paused()){e.studio2.player.play(),s.toggleClass("active",!0).find(".js-tag-area").html("").append('<span class="play_now">播放中</span>');var t=a(".player-toolbar");t.find(".toolbar__all").addClass("hide"),t.find(".toolbar__play").removeClass("hide"),e.lecture2.chapter.reset(n,!0)}else e.studio2.player.pause(),s.toggleClass("active",!1).find(".js-tag-area").html("").append('<span class="last_view">最後觀看</span>')})),e.lecture2.box.find(".js-player-cover").addClass("hide").end().find(".js-player-quiz-area").remove(),e.lecture2.list.find(".quiz-containter").removeClass("open"),e.body.hasClass("modal-open")&&e.modal.hide()}}},t.hook("initForums",(function(t){var o=t.data("type")||"issue",n=t.data("directly")||!1;e.forums.box[o]=t,t.append('<div class="loading-view"><p class="text-grey">載入中，請稍候...</p></div>');var i=t.data("hash")||t.attr("id");i&&e.bar.action("#"+i,(function(){e.member.checkUserStatus((function(){e.forums.show(t)}),(function(){e.forums.show(t)}),"#".concat(i))})),void 0===e.htmlStores["forums-form"]&&(e.htmlStores["forums-form"]=null,e.loadHtml("forums/all",a(".js-tmpl-forums-area"))),n&&!e.forums.isWaiting&&(e.forums.isWaiting=1,e.waitFor((function(){return void 0!==e.tmplStores["forums-reply"]&&void 0!==e.tmplStores["forums-comment"]&&void 0!==e.tmplStores["forums-form"]&&void 0!==e.tmplStores["forums-comment-header"]&&void 0!==e.tmplStores["forums-comment-empty"]}),40).then((function(){e.forums.isWaiting=0,e.member.checkUserStatus((function(){return e.forums.show(t)}),(function(){return e.forums.show(t)}),"#".concat(o))}))),e.forums.scrollAfterSorter=!1})),t.hook("issueGetTime",(function(){e.forums.issueGetTime()})),t.hook("forums/leave",(function(t){var o=t.data("type"),n=t.closest(".js-forums-form, .js-forums-form-reply"),i=t.closest(".js-forums-comment-form");if(n.get(0)){var r=n.find(".js-forums-message").serialize();r=r.substr(r.indexOf("=")+1);var s=n.find(".js-forums-title").serialize();s=s.substr(s.indexOf("=")+1);var l=n.find(".js-forums-images li")}if("comment"==o&&"click"==t.event.type||"reply"===o&&13===t.event.which&&!t.event.shiftKey){var c=!0;if("issue"==e.forums.type&&"click"==t.event.type&&""==s)return c=!1,e.showErrMsg(n.find(".js-forums-title"),!0,n.find(".js-forums-title").data("msg")),!1;if(""==r&&0===l.length)return c=!1,"comment"===o&&e.showErrMsg(n.find(".js-forums-message"),!0,n.find(".js-forums-message").data("msg")),!1;if(i.hasClass("no-nickname")&&i.find('input[name="nickname"]').val().length<=0)return e.showErrMsg(i.find(".js-forums-nickname-input"),!0,"請輸入暱稱"),!1;if(c){e.progressingBtn(t);var d="message="+r;switch(e.forums.type){case"homework":d+="&homework_id="+e.forums.id;break;case"article":d+="&article_id="+e.forums.id;break;default:d+="&course_id="+e.forums.id}var u=t.closest(".js-forums-comment").attr("data-id");if(u&&(d+="&reply_id="+u),a.trim(s)&&(d+="&title="+s),l.each((function(e){d+="&image["+e+"]="+a(this).data("fileid")})),i.hasClass("no-nickname")){var m=i.find('input[name="nickname"]').val();d+="&nickname=".concat(m),e.member.current.nickname=m,e.member.setHtml()}if(t.hasClass("issueGetTime")){var h=1;Math.floor(e.studio2.player.currentTime())>0&&(h=Math.floor(e.studio2.player.currentTime())),d+="&chapterTitle="+e.forums.chapter_title,d+="&chapter_id="+e.forums.chapter_id,d+="&timestamp="+h}e.forums.set(d,t,n),n.find("label").show()}}})),t.hook("forums/more",(function(t){var a=t.closest(".js-forums-comment");if(a.find(".js-forums-reply").length>2){a.toggleClass("show-reply").end().find(".reply-toggle-box").removeClass("hidden");var o=!!a.hasClass("show-reply"),n=a.hasClass("show-reply")?"隱藏":"顯示",i=a.hasClass("show-reply")?"Tab/Discuss/Show reply":"Tab/Discuss/Hide reply",r=e.track.configCategory();e.track.send(r,"Click",i,"ga"),a.find(".js-forums-reply-list").toggleClass("active",o).end().find(".reply-toggle-box .reply-toggle-btn").text(n+"先前留言...").attr("data-label",i)}})),t.hook("forums/more2",(function(t){var a=t.closest(".js-forums-comment");if(a.find(".js-forums-reply").length>2){a.toggleClass("show-reply").end().find(".reply-toggle-box").removeClass("hidden");var o=!!a.hasClass("show-reply"),n=a.hasClass("show-reply")?"隱藏":"顯示",i=a.hasClass("show-reply")?"Tab/Discuss/Show reply":"Tab/Discuss/Hide reply",r=e.track.configCategory();e.track.send(r,"Click",i,"ga"),a.find(".js-forums-reply-list").toggleClass("active",o).end().find(".reply-toggle-box .reply-toggle-btn").text(n+"先前留言").attr("data-label",i)}})),t.hook("forums/reply",(function(e){e.closest(".js-forums-comment[data-id]").find(".js-forums-comment-reply").toggleClass("hidden",!1).find("textarea").focus()})),t.hook("forums/sorter",(function(o){var n,i=o.closest(".js-comment-sorter"),r=i.data("type"),s=i.find(".js-sorter-list"),l=o.data("value"),c=i.siblings(".js-comment-sorter").data("value"),d=o.closest(".comment-list-header").find(".js-search-input").val();s.find(".js-sorter-item").each((function(){a(this).data("value")===l?(a(this).addClass("is--selected"),n=a(this).find(".js-sorter-name").text()):a(this).removeClass("is--selected")})),i.data("value",l),i.find(".js-current-sorter").text(n),"filter"===r?e.forums.get(l,c,d):e.forums.get(c,l,d),e.forums.scrollAfterSorter=!0,t.event.subscribe("scrollAfterSorter",(function(){if(e.isInPage("intro")){var t=25,o=a(".js-toolbar").outerHeight(),n=a("#video").outerHeight(),i=a(".mobile-sidebar").outerHeight(),r=a(".course-padding").outerHeight(),s=(a(".course-intro-tab").outerHeight(),n+i+r+a(".intro-load-package").outerHeight()+a(".tab-pane.active .comment-help-info").outerHeight()+a(".tab-pane.active .comment-form").outerHeight()+t+o);if(window.innerWidth>991)var l=s+t;else l=s;a("html, body").stop().animate({scrollTop:l},700)}else e.isInPage("classroomv3")&&(t=160,o=a(".player-toolbar").outerHeight(),s=(n=a(".player-container").outerHeight())+a(".classroom-header").outerHeight()+a(".tab-pane.active .comment-help-info").outerHeight(!0)+t+a(".tab-pane.active .comment-form").outerHeight(!0)-o,l=(window.innerWidth,s),a("html, body").stop().animate({scrollTop:l},700))}))})),t.hook("forums/search",(function(t){var o=a(".sorter-group").find(".js-comment-sorter"),n=o.eq(0).data("value"),i=o.eq(1).data("value"),r=t.siblings(".js-search-input").val();e.forums.get(n,i,r)})),t.hook("initPostDiss",(function(t){var o={courseID:a("#courseID").val(),chapterID:a(".unit-block.active").data("id"),chapterTitle:"單元"+a(".unit-block.active").find(".unit-title").text(),timestamp:e.lecture.player.that.getPosition?Math.floor(e.lecture.player.that.getPosition()):1,content:a("#content").val()},n=e.modal.stack.v2Modal.find(".modal-body"),i="initPostDiss-tmpl";void 0!==e.tmplStores[i]&&(e.forums.render("initPostDiss-tmpl",o,t,!1),e.waitFor((function(){return void 0!==e.member.current.nickname})).then((function(){var t=e.tmplStores[i].render(o);n.html(t),(e.member.current.nickname===e.member.defaultNickname?"":e.member.current.nickname).length<=0&&n.find(".post-discussion-form").addClass("no-nickname")})))})),t.hook("backToVideo",(function(t){e.forums.backToVideo(t)}))}(app,gee,o)},7735:(e,t,a)=>{var o=a(62163),n=a(31175);!function(e,t,a){"use strict";var n;e.gallery=n={data:{},idx:0,show:function(t,i,r){var s=t.children(".author"),l=s.find(".nickname");if("comment-preview"===i||"reply-preview"===i)n.data={type:i,pics:[],avatars:s.find(".avatars-36").attr("src")||e.member.current.img,nickname:e.member.current.nickname,is_teacher:l.find(".teacher-tag").length,recordDate:o().format("YYYY-MM-DD HH:mm"),title:a.trim(t.find(".js-forums-title").val())||"",content:a.trim(t.find(".js-forums-message").val())||""};else{if(!l.contents().get(0))return;var c=l.contents().get(0).nodeValue;n.data={type:i,id:t.data("id"),pics:[],avatars:s.find(".avatars-36").attr("src")||e.member.current.img,nickname:a.trim(c)||e.member.current.nickname,is_teacher:l.find(".teacher-tag").length,recordDate:t.find(".create").first().html(),title:a.trim(t.find(".comment-title").first().html())||"",content:a.trim(t.find(".content").first().html())||""}}return n.idx=r,t.find(".photo-list").first().find(".img-item").each((function(e){n.data.pics.push({num:e+1,urlPath:a(this).data("href")})})),n.toggle("show"),n},render:function(){return e.modal.stack.galleryModal.find(".modal-body").html(e.tmplStores["large-gallery"].render(n.data)),a("#gallery").on("slid.bs.carousel",(function(t){var o=a(t.currentTarget).find(".item.active").data("slide-number")+1;e.mRoute.clearRoute(),e.mRoute.changeRoute(e.mRoute.configureRouteObject({src:"gallery-modal",mpid:"".concat(n.data.type,"-").concat(n.data.id),msid:o}))})),n},active:function(){return e.modal.stack.galleryModal.find(".carousel-inner .item:eq("+(parseInt(e.gallery.idx)-1)+")").addClass("active"),n},toggle:function(t){return t=t||"toggle",null===e.modal.stack.galleryModal||"show"===t?e.modal.show({title:"檢視圖片",src:"gallery-modal",size:"lg",ta:"galleryModal",mpid:"".concat(n.data.type,"-").concat(n.data.id),msid:n.idx}):e.modal.hide(),n},del:function(a,o){var n=function(){0!==this.code?6100===this.code?t.exe("attemptToLogin",null):e.stdErr(this):e.stdSuccess(this)},i="fileID="+a;t.yell("storage/del",i,n,n)}},t.hook("showGallery",(function(t){var a,o="comment";switch(t.closest(".reply").length&&(o="reply"),t.closest(".comment-form").length&&(o="comment-preview"),t.closest(".js-forums-comment-reply").length&&(o="reply-preview"),o){case"comment":a=t.closest(".comment");break;case"reply":a=t.closest(".reply");break;case"comment-preview":a=t.closest(".comment-form");break;case"reply-preview":a=t.closest(".js-forums-comment-reply")}e.gallery.show(a,o,t.data("idx"))})),e.mRoute.addRoute("gallery-modal",(function(o){var n=o.mpid.split("-");t.event.subscribe("forum.comment.loaded",(function(){var t=a(".js-forums-".concat(n[0],'[data-id="').concat(n[1],'"]'));e.gallery.show(t,n[0],o.msid)}))})),t.hook("renderGallery",(function(a){t.initTmpl(a),e.gallery.render().active()}))}(app,gee,n)},51106:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.homework={errMsg:{},expired:0,box:{},tmp:{},data:[],recorder:null,recorder_timer:{},recorder_url:"",tmpData:{},route:{pathObj:{path:null,mpid:null},init:function(){var t=this;t.pathObj=t.parsePath(),t.pathObj.mpid&&(a(".tab-pane[id='homework']").addClass("active"),e.waitFor((function(){return e.isValid(e.bar.box.length)}),30).then((function(){e.bar.show(e.bar.box.find("a[href='#homework']"))})),e.homework.getHomeworkList(t.pathObj.mpid))},parsePath:function(){var e=window.location.hash.replace("#","").split("_");return{path:e[0],mpid:e[1]}},change:function(e){var t=window.location,a=t.origin,o=t.pathname;window.history.pushState("","","".concat(a).concat(o,"#homework").concat(e?"_"+e:"")),this.pathObj=this.parsePath()},clear:function(){}},init:function(o){e.homework.courseID=a("#courseID").val()||0,e.homework.box=o;var n=o.attr("id"),i=o.data("type");"classroom"!==i||e.isInPage("classroomv3")?e.isInPage("classroomv3")&&(e.bar.after=function(){}):e.bar.after=function(){t.go2Top()},window.location.hash.includes("homework")&&e.homework.route.init(),e.bar.action("#"+n,(function(){"manage"===i&&(e.more.page=0)})),e.homework.load(i,o)},render:function(o,n,i,r){switch(r=void 0===r||r,o){case"homework-spec":case"homework-manage-spec":case"homework-list":if(!e.tmplStores[o])return;var s=e.tmplStores[o].render(n);i.html(s),a(".bs-tip-show").tooltip();break;case"homework-sound":if(!e.tmplStores[o])return;s=e.tmplStores[o].render(n),i.append(s);break;case"preview":var l=i.parents("form"),c=l.data("type"),d="youtube"===c?n:n.publicPath;switch(c){case"pdf":case"ppt":var u="homework-ppt-preview";break;case"image":u="homework-img-preview";break;case"youtube":u="homework-yt-preview"}if(!e.tmplStores[u])return;s=e.tmplStores[u].render({url:d}),l.find(".preview-area").html(s);break;case"sound-preview":if(u="homework-sound-preview",!e.tmplStores[u])return;i.find("p.default").addClass("hide").end().find(".items").removeClass("hide"),s=e.tmplStores[u].render(n),i.html(s);break;case"homework-edit":case"display-homework":e.modal.stack.defaultModal.find(".modal-body").html(e.tmplStores[o].render(e.homework.data));break;case"homework-manage-list":case"classroom-homework-list":if(!e.tmplStores[o])return;s=e.tmplStores[o].render(n),i.html(s).removeClass("hide"),e.homework.box.find(".js-homework-header, .js-homework-manage").addClass("hide"),a(".bs-tip-show").tooltip(),t.go2Top(),e.homeworkListRendered=!0,t.event.fire("homework.rendered")}t.init()},load:function(o,n,i){i=!!i;var r=function(){if(0!==this.code)e.stdErr(this);else{e.stdSuccess(this);var t=this.data,i=e.member.current.isTeacher;switch(void 0===e.member.current.isTeacher&&(i=!1),o){case"manage":e.homework.render("homework-manage-spec",t,n.find(".js-homework-manage"));break;case"classroom":e.homework.render("homework-spec",{data:t},n.find(".js-homework-spec-list"));break;default:e.homework.render("homework-spec",{list:t.teacher},n.find(".js-homework-spec-list")),"intro"===o&&t.teacher.length&&(a.each(t.student,(function(e,t){a.each(t.rows,(function(e,t){t.private_msg=i?"觀看權限：你與學員":"觀看權限：你與講師"}))})),e.homework.render("homework-list",{data:t.student},n.find(".js-homework-list")))}}};switch(o){case"manage":t.yell("homework/manage",{courseID:e.homework.courseID},r,r);break;case"classroom":t.yell("classroom/hwList",{id:e.homework.courseID},r,r);break;default:t.yell("homework/lot",{id:e.homework.courseID},r,r)}},getSpec:function(a){var o=function(){0!==this.code?e.stdErr(this):(e.stdSuccess(this),e.homework.tmp[a]=this.data)};e.homework.tmp[a]||t.yell("homework/one",{id:a},o,o)},getDtl:function(a,o){var n=function(){if(0!==this.code)e.stdErr(this);else{e.stdSuccess(this);var t=this.data;e.homework.tmp[a+"_hk"]=t}};t.yell("homework/get",{id:a},n,n)},set:function(o,n){var i=n.closest("form"),r=function(){if(0!==this.code)6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this);else{i.find("audio").remove(),e.stdSuccess(this),"classroom"===e.homework.box.data("type")?n.id?t.exe("homework/list",n):t.exe("homework/list",e.homework.box.find(".js-view-homework-list")):e.homework.load(e.homework.box.data("type"),e.homework.box,!0),e.modal.hide();var o=e.member.current.nickname,r=a(".js-course-title").text();e.modal.showSimpleModal("繳交作業成功","".concat(o," 你在「").concat(r,"」交了一份作業"),"/dist/image/anime-svg/handoverhomework_anime.svg",'<button class="gee modal__btn" data-gene="click:hideModal">知道了</button>')}};o+="&hw_id="+i.data("row-id"),t.yell("homework/set",o,r,r)},del:function(o,n){var i=n.parents(".js-homework-block"),r=n.parents(".js-homework-row");n.id=parseInt(r.attr("data-pid")),n.sorter=null,n.title=null;var s=function(){0!==this.code?e.stdErr(this):(e.stdSuccess(this),e.modal.hide(),"classroom"===e.homework.box.data("type")?e.homework.getHomeworkList(e.homework.route.pathObj.mpid):i.fadeOut(300,(function(){a(this).remove(),0===r.find(".js-homework-block").length&&(r.remove(),e.homework.box.find(".js-homework-list .empty-view").removeClass("hide"))})))};t.yell("homework/del",{id:o},s,s)},delAttachment:function(o,n){if(n)var i=n.closest(".popover").attr("id"),r=a("[aria-describedby="+i+"]"),s=r.closest("form");else s=e.homework.box;var l="storage/del",c="",d=0;if(0!==o)c="fileID="+o;else if(0!==(d=r.attr("data-hid"))){var u=n.closest("form").data("hk-id");return c="file_id="+d+"&id="+u,o=d,l="homework/del",void e.homework.resetUpload(o,d,s)}var m=function(){0!==this.code?6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this):(e.stdSuccess(this),e.homework.resetUpload(o,d,s))};t.yell(l,c,m,m)},resetUpload:function(t,o,n){var i=n.find(".item[data-pid="+t+"]"),r=n.find(".item[data-hid="+t+"]");if(i.length>0||r.length>0){(i=i.length>0?i:r).fadeOut(300,(function(){a(this).remove()}));var s=i.closest(".js-homework-audio-list"),l=s.find(".item").length;e.homework.reSort(s.find(".items")),l-1==0&&s.find("p.default").removeClass("hide")}else n.find(".files, .remove-file-btn").addClass("hide").end().find("label.fileinput-button").removeClass("hide").end().find(".preview-area").html("");n.find("div.uploaded-area span[data-id="+t+"], div.uploaded-area span[data-fid="+t+"]").remove(),0!==o&&n.find("div.uploaded-area span[data-id="+o+"]").remove()},getManageList:function(o,n){var i=function(){if(0!==this.code)e.stdErr(this);else{e.stdSuccess(this);var t=this.data;t.title=n,a.each(t.no_reply.result,(function(e,t){t.private_msg="觀看權限：你與學員"})),a.each(t.result,(function(e,t){t.private_msg="觀看權限：你與學員"})),e.homework.render("homework-manage-list",t,e.homework.box.find(".js-homework-list"))}};t.yell("homework/list",{id:o},i,i)},getHomeworkList:function(o,n,i){var r=function(){if(0!==this.code)e.stdErr(this);else{e.stdSuccess(this);var t=this.data;t.title=n,t.sorter=i,a.each(t.my.result,(function(e,t){t.private_msg="觀看權限：你與講師"})),e.homework.render("classroom-homework-list",t,e.homework.box.find(".js-homework-list")),e.track.init()}};t.yell("classroom/homework",{id:o},r,r)},getSpecModal:function(t,o,n){var i=(n=n.closest(".js-homework-spec, .homework-intro")).find(".info").text();n.find(".info").length>1&&(i=n.find(".info").first().text());var r=e.member.current.isLogin,s=e.member.current.isStudent,l=e.member.current.isExStudent,c=e.member.current.isTeacher;e.homework.data={id:n.data("id"),title:i,type:o.type||n.data("type"),sorter:n.data("sorter"),isLogin:r,isStudent:s,isTeacher:c,isExStudent:l,isEdit:"edit"===t,homework:o.homework?o.homework:[],homework_viewed:void 0===o.homework_viewed||o.homework_viewed,homework_title:o.homework_title,homework_id:o.homework_id,course_title:a(".course-title").html(),course_id:e.homework.courseID},e.modal.show({src:"add-homework-modal",size:"lg",cover:"black",canClose:!(r&&(s||c||l)),mpid:e.homework.data.homework_id?e.homework.data.homework_id:null})},hasMedia:function(){return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,!!navigator.getUserMedia},startRecord:function(t){var a=null;navigator.getUserMedia?navigator.getUserMedia({audio:!0},(function(o){(a=new MediaRecorder(o)).addEventListener("dataavailable",(function(a){e.homework.stopRecording(a,t)})),a.start(),t.addClass("hide").parents(".js-add-audio-area").addClass("is-record").end().parents(".add-audio-block").addClass("loading").find(".stop").removeClass("hide");var n=t.siblings(".stop"),i=n.find(".min"),r=n.find(".sec");i.text("00"),r.text("00");var s=new e.timer;s.tick=function(){e.homework.countRecord(i,r)},s.start(),e.homework.recorder_timer=s,e.homework.recorder=a,a=null}),(function(t){var a="錯誤訊息",o="麥克風無法使用。";"PermissionDeniedError"!==t.name&&"PermissionDismissedError"!==t.name||(a="麥克風授權提醒",o="請授權 YOTTA 使用您的麥克風"),e.modal.show({src:"message-modal",ta:"messageModal",size:"sm",header:"blue",title:a,message:{content:o,status:"sound"}})})):e.modal.show({src:"message-modal",ta:"messageModal",size:"sm",header:"blue",title:"錯誤訊息",message:{content:"此瀏覽器不支援錄音功能。",status:"sound"}})},stopRecording:function(t,a){var o=[];o.push(t.data);var n=new Blob(o,{type:"audio/webm; codecs=opus"});e.homework.tmpData=n,o=[];var i=window.URL.createObjectURL(n),r=a.parents("form");r.find(".js-preview-audio-area").removeClass("hide"),e.homework.render("sound-preview",{url:i,sort:r.find(".js-homework-audio-list .item").length},r.find(".js-preview-audio-area .preview-audio-list")),e.homework.recorder_url=i,e.homework.recorder=null,navigator.getUserMedia=null},countRecord:function(e,t){var o=parseInt(e.text()),n=parseInt(t.text());60==(n+=1)&&(o+=1,n=0),o=1===a.trim(o).length?"0"+o:o,n=1===a.trim(n).length?"0"+n:n,e.text(o),t.text(n)},reSort:function(t){t.find(".item"),t.find(".item").each((function(t){a(this).find("p").text(" 錄音"+e.formatHelper.numToZH(t))}))}},e.mRoute.addRoute("add-homework-modal",(function(o){o.mpid?e.member.checkUserStatus((function(){var t=o.mpid,n='.js-homework-block[data-id="'.concat(t,'"]');e.waitFor((function(){return e.isValid(a(n).length)})).then((function(){var t=a(n),o=t.data("id"),i=t.closest(".js-homework-row").data("pid");e.homework.getDtl(o),e.waitFor((function(){return e.homework.tmp[o+"_hk"]})).then((function(){var n=e.homework.tmp[o+"_hk"],r={homework:n,type:n[0].type?n[0].type:e.homework.tmp[i].type,homework_title:t.find(".js-homework-title").text(),homework_viewed:parseInt(t.data("viewed")),homework_id:o};e.homework.getSpecModal("edit",r,a(".js-homework-spec[data-id="+i+"]"))}))}))}),(function(){t.exe("attemptToLogin",null)})):e.member.checkUserStatus((function(){e.waitFor((function(){return e.isValid(a(".js-upload-homework-btn").length)})).then((function(){e.homework.getSpecModal("add",[],a(".js-upload-homework-btn"))}))}),(function(){t.exe("attemptToLogin",null)}))})),t.hook("homework/init",(function(t){e.homework.init(t)})),t.hook("homework/add",(function(t){e.homework.getSpecModal("add",[],t)})),t.hook("homework/sent",(function(t){var o=t.closest("form");if(t.id=t.closest(".homework-modal-t").attr("data-id"),t.sorter=null,t.title=null,o.find("input").each((function(){a(this).val()===a(this).attr("placeholder")&&a(this).val("")})),!a.validatr.validateForm(o))return!1;e.progressingBtn(t);var n=o.serialize();o.find("div.uploaded-area span").each((function(e){var t=a(this).data("fid"),o=a(this).data("path"),i=a(this).data("id"),r=a(this).html();0!==t&&(n+="&file["+e+"][fileID]="+t),o&&o.length>0&&(n+="&file["+e+"][file]="+o),0!==i&&(n+="&file["+e+"][id]="+i),r&&r.length>0&&(n+="&file["+e+"][content]="+r)}));var i=o.data("hk-id");0!==i&&(n+="&id="+i),n+="&private="+(a("[name=public]").prop("checked")?"1":"0"),e.homework.set(n,t)})),t.hook("homework/edit",(function(t){var o=t.parents(".js-homework-block"),n=o.data("id"),i=t.parents(".js-homework-row").data("pid");e.homework.getDtl(n),e.waitFor((function(){return e.homework.tmp[n+"_hk"]})).then((function(){var t=e.homework.tmp[n+"_hk"],r={homework:t,type:t[0].type?t[0].type:e.homework.tmp[i].type,homework_title:o.find(".js-homework-title").text(),homework_viewed:parseInt(o.data("viewed")),homework_id:n};e.homework.getSpecModal("edit",r,a(".js-homework-spec[data-id="+i+"]"))}))})),t.hook("homework/dtl",(function(t){var o=t.closest(".js-homework-block");if("popoverDel"!==a(window.event.target).attr("func")&&!a(window.event.target).parent().hasClass("popover-content")){var n=o.data("id");if(n){var i=o.find(".js-homework-title").text(),r=o.find(".js-author-name"),s=o.parents(".js-homework-row").data("pid"),l=a(".js-homework-spec[data-id="+s+"]");e.homework.getSpec(s),e.homework.getDtl(n),e.waitFor((function(){return e.homework.tmp[s]&&e.homework.tmp[n+"_hk"]})).then((function(){var t=e.homework.tmp[n+"_hk"],c={id:s,homework:t,homework_id:n,homework_create:o.data("create"),homework_title:i,type:t?t[0].type:e.homework.tmp[s].type,homework_author:{name:r.text(),image:r.find("img").attr("src")}},d=a.extend({},e.homework.tmp[s],c),u=e.member.current.isLogin,m=e.member.current.isStudent,h=e.member.current.isExStudent,p=e.member.current.isTeacher;e.homework.data={id:s,title:i,type:d.type||l.data("type"),isLogin:u,isStudent:m,isExStudent:h,isTeacher:p,homework:d.homework?d.homework:[],homework_id:d.homework_id,homework_title:d.homework_title,homework_create:d.homework_create,homework_author:d.homework_author,course_id:e.homework.courseID},e.modal.show({src:"homework-dtl-modal",size:"lg",canClose:!0,cover:"black",mpid:d.homework_id}),a(".modal").one("hidden.bs.modal",(function(){e.audio.player&&(e.audio.player[0].pause(),a(this).find("iframe").remove())}))}))}}})),e.mRoute.addRoute("homework-dtl-modal",(function(o){var n=o.mpid;if(e.homeworkListRendered){var i=a('.js-homework-block[data-id="'.concat(n,'"]')),r=i.find(".js-homework-title").text(),s=i.find(".js-author-name"),l=i.closest(".js-homework-row").data("pid"),c=a(".js-homework-spec[data-id="+l+"]");e.homework.getSpec(l),e.homework.getDtl(n),e.waitFor((function(){return e.homework.tmp[l]&&e.homework.tmp[n+"_hk"]})).then((function(){var t=e.homework.tmp[n+"_hk"],o={id:l,homework:t,homework_id:n,homework_create:i.data("create"),homework_title:r,type:t?t[0].type:e.homework.tmp[l].type,homework_author:{name:s.text(),image:s.find("img").attr("src")}},d=a.extend({},e.homework.tmp[l],o),u=e.member.current.isLogin,m=e.member.current.isStudent,h=e.member.current.isExStudent,p=e.member.current.isTeacher;e.homework.data={id:l,title:r,type:d.type||c.data("type"),isLogin:u,isStudent:m,isExStudent:h,isTeacher:p,homework:d.homework?d.homework:[],homework_id:d.homework_id,homework_title:d.homework_title,homework_create:d.homework_create,homework_author:d.homework_author,course_id:e.homework.courseID},e.modal.show({src:"homework-dtl-modal",size:"lg",canClose:!0,cover:"black",mpid:d.homework_id}),a(".modal").one("hidden.bs.modal",(function(){e.audio.player&&(e.audio.player[0].pause(),a(this).find("iframe").remove())}))}))}else t.event.subscribe("homework.rendered",(function(){var o=a('.js-homework-block[data-id="'.concat(n,'"]')),i=o.find(".js-homework-title").text(),r=o.find(".js-author-name"),s=o.closest(".js-homework-row").data("pid"),l=a(".js-homework-spec[data-id="+s+"]");e.homework.getSpec(s),e.homework.getDtl(n),e.waitFor((function(){return e.homework.tmp[s]&&e.homework.tmp[n+"_hk"]}),30).then((function(){var t=e.homework.tmp[n+"_hk"],c={id:s,homework:t,homework_id:n,homework_create:o.data("create"),homework_title:i,type:t?t[0].type:e.homework.tmp[s].type,homework_author:{name:r.text(),image:r.find("img").attr("src")}},d=a.extend({},e.homework.tmp[s],c),u=e.member.current.isLogin,m=e.member.current.isStudent,h=e.member.current.isExStudent,p=e.member.current.isTeacher;e.homework.data={id:s,title:i,type:d.type||l.data("type"),isLogin:u,isStudent:m,isExStudent:h,isTeacher:p,homework:d.homework?d.homework:[],homework_id:d.homework_id,homework_title:d.homework_title,homework_create:d.homework_create,homework_author:d.homework_author,course_id:e.homework.courseID},e.modal.show({src:"homework-dtl-modal",size:"lg",canClose:!0,cover:"black",mpid:d.homework_id}),a(".modal").one("hidden.bs.modal",(function(){e.audio.player&&(e.audio.player[0].pause(),a(this).find("iframe").remove())}))})),t.event.clearSubscribe("homework.rendered")}))})),t.hook("homework/list",(function(t){var a,o,n;t.id?(a=t.id,o=t.title,n=t.sorter):(a=t.parents(".js-homework-spec").data("id"),o=t.siblings(".js-homework-title").text(),n=t.parents(".js-homework-spec").data("sorter")),e.homework.route.change(a),e.homework.getHomeworkList(a,o,n)})),t.hook("homework/manageDtl",(function(t){var a=t.data("id"),o=t.siblings(".js-homework-title").text();e.homework.getManageList(a,o)})),t.hook("homework/backManageList",(function(t){t.addClass("dont-redirect"),e.homework.box.find(".js-homework-header, .js-homework-manage").removeClass("hide").end().find(".js-homework-list").addClass("hide"),a(".tab-pane[id='homework']").addClass("active"),e.more.page=0,e.homework.route.change(null)})),t.hook("rDisplayHomework",(function(a){t.initTmpl(a),e.homework.render("display-homework")})),t.hook("rHomework",(function(a){t.initTmpl(a),e.homework.render("homework-edit")})),t.hook("saveContent",(function(e){var t=e.closest(".item").data("pid"),o=e.closest(".item").data("hid"),n=e.val();0!==t?a("span[data-fid="+t+"]").html(n):0!==o&&a("span[data-id="+o+"]").html(n)})),t.hook("initContent",(function(t){var o=t.closest(".homework-modal-t"),n=o.data("id");e.homework.getSpec(n),e.waitFor((function(){return e.homework.tmp[n]})).then((function(){var t=a.templates('<img src="<%:author.image%>" class="avatars-36" onerror="window.defaultImg(this, "avatars");">講師 <%:author.name%>').render(e.homework.tmp[n]);o.find(".teacher-name").html(t).end().find(".js-homework-content").html(e.homework.tmp[n].content)}))})),t.hook("homework/toggleMore",(function(e){var o,n=!!e.hasClass("active"),i=n?"sort-desc":"sort-asc";n?(e.removeClass("active"),o="展開",e.html(o+'<svg class="svg-icon '.concat(i,'" viewBox="').concat(t.iconStore[i].viewBox,'">').concat(t.iconStore[i].svg,"</svg>")),a(".homework-intro .js-homework-content").addClass("default")):(e.addClass("active"),o="收合",e.html(o+'<svg class="svg-icon '.concat(i,'" viewBox="').concat(t.iconStore[i].viewBox,'">').concat(t.iconStore[i].svg,"</svg>")),a(".homework-intro .js-homework-content").removeClass("default"))})),t.hook("execYoutube",(function(t){if(!a.validatr.validateElement(t))return!1;var o=t.data("hid"),n=t.closest("form"),i=t.val().match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=|\?v=)([^#\&\?]*).*/);if(0!==o){var r=n.find(".uploaded-area span[data-id="+o+"]");r?r.attr("data-path",i[2]):n.find(".uploaded-area").html("").append('<span class="file" data-id="'+o+'" data-path="'+i[2]+'">')}else n.find(".uploaded-area").html("").append('<span class="file" data-path="'+i[2]+'">');e.homework.render("preview",i[2],t)})),t.hook("saveSound",(function(o){var n=o.closest("form"),i=n.data("table-id"),r=n.data("row-id"),s=n.find(".js-preview-audio-area"),l=n.find(".js-homework-audio-list .item").length;if(""!==s.find(".preview-audio-list").html()){var c=parseInt(s.find("p[data-fid]").data("fid")),d="";if(c>0)d=s.find("audio source[src]").attr("src"),n.find(".uploaded-area").append('<span class="file" data-fid="'+c+'">'),e.homework.render("homework-sound",{url:d,sort:l,id:c},n.find(".js-homework-audio-list .items"));else{var u=new FormData;u.append("file",e.homework.tmpData,"recorder.webm"),u.append("fileType","homework"),u.append("tableID",i||0),u.append("rowID",r||0),a.ajax({type:"POST",url:t.apiUri+"storage/upload",data:u,processData:!1,contentType:!1,dataType:"json"}).done((function(a){0===a.code&&(e.homework.tmpData=null,c=parseInt(a.data.fileID),d=t.apiUri+"download/homework/"+a.data.fileName,n.find(".uploaded-area").append('<span class="file" data-fid="'+c+'">'),e.homework.render("homework-sound",{url:d,sort:l,id:c},n.find(".js-homework-audio-list .items")))}))}t.resetRecord(o,!1)}})),t.hook("startRecord",(function(t){t.parents(".js-add-audio-area").hasClass("is-upload")||(e.homework.hasMedia()?e.homework.startRecord(t):alert("getUserMedia() is not supported in your browser"))})),t.hook("stopRecord",(function(t){t.addClass("hide").parents(".js-add-audio-area").removeClass("is-record").slideUp().end().parents(".add-audio-block").removeClass("loading").find(".start").removeClass("hide"),e.homework.recorder.stop(),e.homework.recorder_timer.stop()})),t.hook("resetRecord",(function(t,a){a=void 0===a||a;var o=t.parents(".upload-audio-container"),n=o.find(".js-preview-audio-area");if(""!==e.homework.recorder_url&&(URL.revokeObjectURL(e.homework.recorder_url),e.homework.recorder_url=""),a){var i=parseInt(n.find("p[data-fid]").data("fid"));i>0&&e.homework.delAttachment(i,null)}o.find(".js-add-audio-area").fadeIn(),n.find(".preview-audio-list").html("").end().addClass("hide")})),t.hook("homework/del",(function(t){var a=t.data("pid");e.modal.showSimpleModal("刪除作業","該作業刪除後內容將無法復原，<br>確定要刪除嗎？","/dist/image/anime-svg/delete_anime.svg",'<div class="modal__btn-pair"><button class="gee modal__btn" data-gene="click:hideModal">取消</button><button class="gee modal__btn btn--bordered" data-type="homework" data-pid="'.concat(a,'" onClick="gee.triggerDel(this)">確定刪除</button></div>'))}))}(app,gee,o)},66930:(e,t,a)=>{var o=a(31175);a(31175),function(e,t,a){"use strict";e.icon={iconLoaded:!1,loadIconMap:function(){o("body").append("<div class='gee iconmap' style=\"display: none\"></div>");var a="/dist/image/icon/iconmap.html?v="+e.version;o(".iconmap").load(a,(function(){t.iconStore={},o(".svg.iconmap").find("symbol").each((function(){var e=o(this).attr("id").split("-").slice(1).join("-");t.iconStore[e]={svg:o(this).html(),viewBox:o(this).attr("viewBox")}})),t.event.fire("app.iconLoaded"),e.icon.iconLoaded=!0}))},replaceIcons:function(e){e.each((function(e){var a=o(this).attr("class").split(" ")[1],n=o(this).attr("class").split(" ").slice(2).join(" ");o(this).replaceWith('<svg class="svg-icon '.concat(a," ").concat(n,'" viewBox="').concat(t.iconStore[a].viewBox,'">').concat(t.iconStore[a].svg,"</svg>"))}))},swapIcon:function(){var e=Array.from(arguments),a=e.splice(0,1)[0],o=e.splice(0,1)[0],n=t.iconStore[o],i=e.length>0?e.join(" "):"";a.find("svg").replaceWith('<svg class="svg-icon '.concat(o," ").concat(i,'" viewBox="').concat(n.viewBox,'">').concat(n.svg,"</svg>"))},createStarsTmpl:function(e,a){var o,n,i=Math.round(e);if(t.iconStore){o='<svg class="svg-icon star-fill" viewBox="'.concat(t.iconStore["star-fill"].viewBox,'">').concat(t.iconStore["star-fill"].svg,"</svg>"),n='<svg class="svg-icon star-fill empty" viewBox="'.concat(t.iconStore["star-fill"].viewBox,'">').concat(t.iconStore["star-fill"].svg,"</svg>");for(var r="",s="",l=1;l<=5;l++)r+=l<=i?o:n;return a&&(s=["不盡理想","有待加強","普普通通","相當不錯","值得推薦"][i-1]),a?'<div class="star-group d-flex align-items-center" data-score="'.concat(e,'">').concat(r,' <span style="margin-left:5px">').concat(s,"</span></div>"):'<div class="star-group d-flex align-items-center" data-score="'.concat(e,'">').concat(r,"</div>")}}},t.hook("loadIconMap",(function(t){e.icon.loadIconMap(t)})),t.hook("setStars",(function(a){e.icon.iconLoaded?a.replaceWith(e.icon.createStarsTmpl(a.attr("data-score"),a.attr("data-txtMode"))):t.event.subscribe("app.iconLoaded",(function(){a.replaceWith(e.icon.createStarsTmpl(a.attr("data-score"),a.attr("data-txtMode")))}))})),t.hookTag("icon",(function(a){e.icon.iconLoaded?e.icon.replaceIcons(a):t.event.subscribe("app.iconLoaded",(function(){e.icon.replaceIcons(a)}))})),t.hookTag("gif-loader",(function(e){e.replaceWith('<img src="'.concat("/dist/image/icon/gif-loading.gif",'" class="gif-dot-loader">'))}))}(app,gee)},77697:(e,t,a)=>{var o=a(11424),n=a(31175);a(31175).data,a(33084).supports,function(e,t,a){"use strict";e.intro={picsAmount:0,moveTotal:0,direction:0,tagLength:0,tagNum:1,containerWidth:0,movePx:0,tagMoveDist:{},leftPosition:{},packageData:[],packageIndex:0,demo:[],sticky:[],data:{},tab:[],oldScreen:"tablet",courseID:0,init:function(){e.intro.courseID=1*a("#courseID").val()||0,"desktop"===e.screen?a(".sticky-box").affix({offset:{top:0,bottom:116}}):a(".desktop-sidebar").children().detach().appendTo(".mobile-sidebar"),e.bar.after=function(){e.intro.clickTab(),t.event.subscribe("introClickTab",(function(){e.intro.clickTab}))},a(window).on("resize.introResize",(function(){e.intro.updateSidebar(),t.fixedWidth(a(".sticky-box")),t.fixedWidth(a(".course-intro-tab"))})),e.bar.action("#intro",(function(){e.bar.animate.hide(),new o({success:function(e){a(e).removeClass("simpleLoading")}})})),e.bar.action("#chapters",(function(){e.bar.animate.hide()})),e.intro.initPackageArea(),t.event.subscribe("introTabFix",(function(){e.scroll.introScroll()}))},clickTab:function(){if("desktop"==e.screen){var t=.25,o=a(".js-toolbar").outerHeight(),n=a(".intro-load-package").outerHeight(),i=a(".course-container").position().top+a("#video").outerHeight()+n+t-o;a("html, body").animate({scrollTop:i},600),a(".course-container").find(".course-padding").removeClass("hide")}else t=25,o=a(".js-toolbar").outerHeight(),i=a("#video").outerHeight()+a(".mobile-sidebar").outerHeight()+a(".course-padding").outerHeight()+a(".course-intro-tab").outerHeight()+a(".intro-load-package").outerHeight()+t-o,a("html, body").animate({scrollTop:i},600),a(".course-container").find(".course-padding").removeClass("hide");"desktop"!==e.screen&&a(".course-intro-tab").removeClass("show")},initPackageArea:function(){t.yell("promocode/availableDiscountGroupBuy",{courseID:e.intro.courseID},(function(){if(0===this.code){if(this.data){e.intro.tagLength=this.data.length;var o=this.data[e.intro.packageIndex],n=e.tmplStores["intro-package-area"].render({data:o,packageList:this.data});a(".intro-load-package").html(n),e.intro.containerWidth=a(".tag-main-wrap").width(),e.intro.packageData=this.data,t.init(),t.event.fire("getPackageData",null),e.intro.hideFirstPlus(),e.intro.picsAmount=this.data[e.intro.packageIndex].courses.length,e.intro.containerWidth>=560?e.intro.moveTotal=120+130*(e.intro.picsAmount-5):e.intro.moveTotal=120+130*(e.intro.picsAmount-3),e.intro.moveTime=e.intro.moveTotal/.024,e.intro.containerWidth>=560?(e.intro.tagLength=this.data.length-5,e.intro.movePx=84,this.data.length>6?(a(".package-tag").addClass("tagMove"),a(".package-tag").css({left:(e.intro.tagNum-1)*-e.intro.movePx})):a(".tagArrow").addClass("hide")):(e.intro.tagLength=this.data.length-2,e.intro.movePx=74,this.data.length>3?(a(".package-tag").addClass("tagMove"),a(".package-tag").css({left:(e.intro.tagNum-1)*-e.intro.movePx})):a(".tagArrow").addClass("hide")),e.intro.containerWidth>=560?e.intro.picsAmount>4&&(a(".imgCarouselWrap").addClass("imgCarouselWrapAnimate"),a(".imgCarousel").addClass("imgCarouselAnimate"),e.intro.forInterval=setInterval(e.intro.readyAnimate,5e3)):e.intro.picsAmount>2&&(a(".imgCarouselWrap").addClass("imgCarouselWrapAnimate"),a(".imgCarousel").addClass("imgCarouselAnimate"),e.intro.forInterval=setInterval(e.intro.readyAnimate,5e3)),e.intro.initTagActive(e.intro.packageIndex)}else a(".intro-load-package").addClass("hide");t.event.fire("introTabFix")}}))},changePackageArea:function(o){clearInterval(this.forInterval),a(".imgCarouselAnimate").clearQueue(),e.intro.direction=0,this.forInterval=setInterval(e.intro.readyAnimate,1e3);var n=this.packageData[o],i=e.tmplStores["intro-package-area"].render({data:n,packageList:this.packageData});a(".intro-load-package").html(i),e.intro.changeTagActive(o),t.init(),e.intro.hideFirstPlus(),e.intro.picsAmount=this.packageData[o].courses.length,e.intro.containerWidth>=560?e.intro.moveTotal=120+130*(e.intro.picsAmount-5):e.intro.moveTotal=120+130*(e.intro.picsAmount-3),e.intro.moveTime=e.intro.moveTotal/.024,e.intro.containerWidth>=560?this.packageData.length>6?(a(".package-tag").addClass("tagMove"),a(".package-tag").css({left:-84*(this.tagNum-1)})):a(".tagArrow").addClass("hide"):this.packageData.length>3?(a(".package-tag").addClass("tagMove"),a(".package-tag").css({left:-84*(this.tagNum-1)})):a(".tagArrow").addClass("hide")},initTagActive:function(e){a(".package-tag li").find("button").removeClass("active"),a(".package-tag li:nth-child(".concat(e+1,")")).find("button").addClass("active")},changeTagActive:function(e){a(".package-tag li").find("button").removeClass("active"),a(".package-tag li:nth-child(".concat(e+1,")")).find("button").addClass("active"),t.init()},hideFirstPlus:function(){a(".imgWrap:first-child").find(".plusWrap").addClass("hidePlus")},readyAnimate:function(){e.intro.containerWidth>=560?e.intro.picsAmount>4?(a(".imgCarouselWrap").addClass("imgCarouselWrapAnimate"),a(".imgCarousel").addClass("imgCarouselAnimate"),e.intro.setAnimate()):(a(".imgCarouselWrap").removeClass("imgCarouselWrapAnimate"),a(".imgCarousel").removeClass("imgCarouselAnimate"),clearInterval(this.forInterval),a(".imgCarouselAnimate").clearQueue()):e.intro.picsAmount>2?(a(".imgCarouselWrap").addClass("imgCarouselWrapAnimate"),a(".imgCarousel").addClass("imgCarouselAnimate"),e.intro.setAnimate()):(a(".imgCarouselWrap").removeClass("imgCarouselWrapAnimate"),a(".imgCarousel").removeClass("imgCarouselAnimate"),clearInterval(this.forInterval),a(".imgCarouselAnimate").clearQueue())},setAnimate:function(){0==e.intro.direction?(e.intro.direction=-1,a(".imgCarousel").animate({left:"-".concat(e.intro.moveTotal,"px")},e.intro.moveTime,"linear")):(e.intro.direction=0,a(".imgCarousel").animate({left:"0px"},e.intro.moveTime,"linear"))},goLeft:function(){this.tagNum>1&&(this.tagNum=this.tagNum-1,a(".package-tag").animate({left:"+=".concat(this.movePx,"px")},1e3))},goRight:function(){this.tagLength>this.tagNum&&(this.tagNum=this.tagNum+1,a(".package-tag").animate({left:"+=-".concat(this.movePx,"px")},1e3))},updateSidebar:function(){e.intro.oldScreen!==e.screen&&("desktop"===e.screen?(a(".mobile-sidebar").children().detach().appendTo(".desktop-sidebar"),a(".sticky-box").affix({offset:{top:0,bottom:116}})):(a(".desktop-sidebar").children().detach().appendTo(".mobile-sidebar"),a(window).off(".affix"),a(".sticky-box").css("width","100%").removeData("bs.affix").removeClass("affix affix-top affix-bottom")),e.intro.oldScreen=e.screen)},sidebar:function(o){if(0!==e.intro.courseID){var n=a(".js-course-sidebar");e.intro.data=o;var i=o.point>0?e.formatHelper.currency(o.point,"NT"):"Free";if(n.find("#stuCount").text(o.buyerCount).end().find("#point").text(i).end().find(".js-partyDate").text(o.offline.partyDate).end().find(".js-partyTime").text(o.offline.partyTime).end().find(".js-signupTo").text(o.offline.signupTo).end().find(".js-totalBuyer").text(o.offline.totalBuyer),o.pointFake>o.point&&n.find("#point").append(a("<s>").text(e.formatHelper.currency(o.pointFake,"NT"))),o.rating){var r=o.rating.avg,s=0===o.rating.total?"(0則評價)":"（查看"+o.rating.total+"則評價）",l=n.find(".star-group"),c=e.icon.createStarsTmpl(r,!1);l.replaceWith(c),n.find(".star-num").html(s),0===o.rating.total&&n.find(".course-rating").addClass("disabled")}o.isCollect?n.find(".like-btn").tooltip("disable").find(".svg-icon.fav").replaceWith('<svg class="svg-icon fav_fill icon-red" viewBox="'.concat(t.iconStore.fav_fill.viewBox,'">').concat(t.iconStore.fav_fill.svg,"</svg>")):n.find(".like-btn").attr("title","加入收藏").tooltip("enable").tooltip("fixTitle"),e.track.send("ViewContent",{content_ids:[o.id],content_name:o.name,content_type:"product",value:o.point,currency:"TWD"},null,"pixel")}},ceilDec:function(e){var t=parseInt(e)||0,a=e-t,o=0;return 0==a?o=t:a<=.5?o=t+.5:a>.5&&(o=t+1),o},hideTabLoading:function(e){a(".tab-loading").removeClass("show"),a("body").hasClass("intro")&&(a(".tab-loading").removeClass("show"),t.event.fire("introClickTab"))},getTagButton:function(t){var o=a(t).index();return e.intro.changePackageArea(o),this.packageIndex=o,this.packageIndex},displayPackageInfoModal:function(){var o=this;a.when(e.waitTmpl("intro-packageInfo-modal"),e.arena.checkIconReady()).done((function(){var n=[o.packageData[o.packageIndex]];e.log("4988",o.packageData[o.packageIndex]),e.log("4988",e.intro.packageData[e.intro.packageIndex]),e.log("4988",n),o.packageData[o.packageIndex].isEmergent=e.coupon.isEmergent(e.intro.packageData[e.intro.packageIndex].pce_endDt_timestamp),o.packageData[o.packageIndex].endDate=e.coupon.convertTimestampToString(e.intro.packageData[e.intro.packageIndex].pce_endDt_timestamp);var i=e.tmplStores["intro-packageInfo-modal"].render({singleData:n}),r=a(".intro-packageInfo-modal");r.find(".js-loading").remove(),r.find(".js-packageInfo-modal").html(i),r.find(".modal__body").css("justify-content","unset"),t.init(),a(".intro-packageInfo-modal").css("display","inline-block");var s=a(".intro-load-package").offset().top;e.log("4989",s),a("body").hasClass("mobile")&&a("body").hasClass("safari")&&a("body").addClass("modal-noScroll")}))},buyPackage:function(o){if(e.member.current.isLogin){t.exe("promocode/addToCart",o),o.find("img").removeClass("img--loading").addClass("s--loading");var n=e.track.configCategory();e.track.send(n,"Click","introPackage/go2Cart","ga")}else a("#scrollModal").css("display","none"),t.exe("attemptToLogin",null),e.member.checkUserStatus(e.intro.initPackageArea,null)}},t.hook("intro/buyPackage",(function(t){e.intro.buyPackage(t)})),t.hook("intro/showPackage",(function(t,a){e.intro.getTagButton(t);var o=e.track.configCategory();e.track.send(o,"Click","introPackage/changePackage","ga")})),t.hook("intro/goLeft",(function(){e.intro.goLeft()})),t.hook("intro/goRight",(function(){e.intro.goRight()})),t.hook("intro/showPackageInfoModal",(function(t){e.modal.showPackageInfoModal();var a=e.track.configCategory();e.track.send(a,"Click","introPackage/packageInfo","ga")})),t.hook("intro/initPackageInfoModal",(function(t){e.loadTmpl("intro-packageInfo-modal",t.find('[data-gene="init:initTmpl"]')),e.intro.displayPackageInfoModal()})),t.hook("initIntro",(function(o){e.intro.init(),t.clog("view_item/init");var n=JSON.parse(localStorage.getItem("select_content")),i=parseInt(a("#courseID").val());if(!n){var r=a(".course-sidebar-intro").data();e.track.view_item(r),localStorage.setItem("view_item_intro",JSON.stringify(r))}n&&n.id==i&&(e.track.view_item(n),localStorage.setItem("view_item",JSON.stringify(n)))})),t.hook("fixedWidth",(function(e){var t=e.closest(".col-md-8, .col-md-4");a(document).ready((function(){e.css({width:t.width()})}))}))}(app,gee,n)},96501:(e,t,a)=>{var o=a(31175);a(31175),function(e,t,a){"use strict";e.job={userJobList:void 0,loadModal:function(t){e.loadHtml("jobs/".concat(t),o("#job-modal"))},ifJobExist:function(t){return!!e.job.getJob(t)},ifJobDone:function(t){return"done"===e.job.getJob(t).status},getJob:function(t){return e.job.userJobList.filter((function(e){return e.slug===t}))[0]},showModal:function(t){0===o("#job-modal").find(".modal-mask").length&&o("#job-modal").append('<div class="modal-mask"></div>'),e.loadHtml("jobs/".concat(t),o("#job-modal")),o("#job-modal").parent().find(".modal-mask").addClass("fadein"),o("#job-modal").parent(".job-modal").removeClass("hidden"),e.waitFor(.5).then((function(){o("#job-modal").addClass("slidein")}))},showModal2:function(t){o("#job-modal").removeClass("slideup"),0===o(".job-modal").find(".modal-mask").length&&o(".job-modal").prepend('<div class="modal-mask"></div>'),e.loadHtml("jobs/".concat(t),o("#job-modal")),o("#job-modal").parent().find(".modal-mask").addClass("fadein"),o("#job-modal").parent(".job-modal").removeClass("hidden"),e.waitFor(.5).then((function(){o("#job-modal").addClass("slidein")}))},showStartModal:function(t){e.job.showModal("".concat(t,"/start-modal"))},showFinishModal:function(t){e.job.showModal("".concat(t,"/finish-modal"))},showAnnouncementModal:function(){e.job.showModal2("MQI/announcement-modal")},showJobModal:function(t){e.waitFor((function(){return void 0!==e.job.userJobList})).then((function(){e.job.ifJobExist(t)&&(e.job.ifJobDone(t)||e.job.showStartModal(t))}))},init:function(a){if(e.job.userJobList=a,!e.isInPage("account")&&!1===e.job.ifJobDone("MQI")){if("off"===o.cookie("mqi-start-modal"))return;e.job.showStartModal("MQI")}a.forEach((function(a){e.isInPage("account")&&(a.pcl_code&&(a.status="coupon"),e.loadHtml("jobs/".concat(a.slug,"/").concat(a.status),o(".js-campaign-description")),t.init())}))},nextStep:function(a){if(e.job.userJobList=a,window.location.pathname,!1===e.job.ifJobDone("MQI"))e.isInPage("account")&&t.checkStatus(o(".job-new-block"));else{var n;n=e.job.getJob("MQI").pcl_code?"jobs/MQI/coupon":"jobs/MQI/done",e.loadHtml(n,o(".js-campaign-description")),"0"===e.job.getJob("MQI").isNotified&&!0===e.job.ifJobDone("MQI")&&e.arena.saveNotice.show("個人資訊填寫完成！<br>恭喜解鎖生日優惠禮！")}},getCurrentProgress:function(){var a=function(){e.job.nextStep(this.data),o(document).trigger("job/progressUpdated")};t.yell("job/list",{},a,a)},showAlert:function(e){},finish:function(){},convertProgress:function(t){return e.decToBin(t).split("").reverse()}},t.hook("job/toggleInfo",(function(e){var a=parseInt(e.attr("data-click"));if(e.attr("data-click",a+1),2===parseInt(e.attr("data-click")))return t.toggleAccountTab(e),void e.attr("data-click",0);1===parseInt(e.attr("data-click"))&&setTimeout((function(){e.attr("data-click",0)}),200),e.closest(".js-campaign-steps").find(".js-step__icon").each((function(){o(this).removeClass("active")})),e.addClass("active");var n=e.attr("data-title"),i=e.attr("data-text"),r=window.innerWidth>768?o(".js-campaign-description.--pc"):o(".js-campaign-description.--pad");r.find(".js-description--title").text("".concat(n,"：")),r.find(".js-description--text").text(i)})),t.hook("job/closeModal",(function(t){o.cookie(t.attr("data-targetmodal"),"off",{expires:1,path:"/"});var a=o("#job-modal").parent().find(".modal-mask");a.removeClass("fadein"),a.addClass("fade"),o("#job-modal").removeClass("slidein"),o("#job-modal").addClass("slideup"),t.attr("href")&&window.open(t.attr("href")),e.waitFor(.5).then((function(){a.remove()}))})),t.hook("job/closeModal2",(function(t){t.parents(".job-modal-body").attr("data-everyTimeShow")||o.cookie(t.attr("data-targetmodal"),"off",{expires:1,path:"/"});var a=o("#job-modal").parent().find(".modal-mask");o("#job-modal").removeClass("slidein"),o("#job-modal").addClass("slideup"),t.attr("href")&&window.open(t.attr("href")),o(".job-modal-body").length<=1&&(a.removeClass("fadein"),a.addClass("fade"),e.waitFor(.5).then((function(){a.remove()})))})),t.hook("checkStatus",(function(t){for(var a=o(".js-campaign-steps"),n=e.job.convertProgress(e.job.getJob(t.attr("data-job")).completeness),i=e.job.getJob(t.attr("data-job")).steps,r=0,s=0;s<n.length;s++)"1"===n[s]&&(a.addClass("s--step".concat(s+1)),r+=100/i);t.find(".js-progress").text("".concat(r,"%"))})),t.hook("getCoupon",(function(t){e.waitFor((function(){return e.job.userJobList})).then((function(){var a=e.job.getJob(t.attr("data-job")).pcl_code;t.find(".js-coupon-code").text(a),"1"===e.job.getJob(t.attr("data-job")).couponUsed&&(t.closest(".js-job-done").addClass("s--used"),t.find(".js-coupon-code").parent("p").addClass("s--disabled"),t.find(".js-coupon-code").parent("p").append("<span>(已使用)</span>"))}))})),t.hook("copyCoupon",(function(t){e.arena.copyFromDOM(document.querySelector(".js-coupon-code"),(function(){t.tooltip("show"),e.waitFor(1.5).then((function(){t.tooltip("hide")}))}))})),t.hook("exploreEffect",(function(t){e.waitFor(.5).then((function(){t.addClass("active"),e.waitFor(.7).then((function(){t.css("transition","0.2s ease-in"),t.removeClass("active")}))}))})),t.hook("getCompleteCount",(function(t){e.waitFor((function(){return e.job.userJobList})).then((function(){t.text(e.job.getJob(t.attr("data-job")).completeCount)}))})),t.hook("job/notShowAgain",(function(e){e.find("input").on("click",(function(t){o(this).prop("checked")&&(e.parents(".job-modal-body").removeAttr("data-everyTimeShow"),e.parents(".job-modal-body").removeData("everyTimeShow"))}))})),t.hook("job/initAnnouncement",(function(t){"off"!==o.cookie("mqi-announcement-modal")&&e.job.showAnnouncementModal()}))}(app,gee)},61551:(e,t,a)=>{a(31175),function(e,t,a){"use strict";e.mRoute={routeStack:{},currentRoute:[],keys:["modal","mpid","msid"],next:!0,init:function(){e.mRoute.parseModalRoute()},defaultFunc:function(t){e.modal.show({src:t,ta:"v2Modal"})},parseModalRoute:function(){var a=new RegExp("(modal=.*)"),o=window.location.search.replace("?","").match(a);if(o)for(var n=o[0].split("modal=").filter(Boolean).map((function(t){return t="modal="+t,e.mRoute.currentRoute.push(t),e.parseStrToObject(t)})),i=function(a){e.waitFor((function(){return!0===e.mRoute.next})).then((function(){var o;(o=n[a],new Promise((function(a,n){e.mRoute.next=!1,e.mRoute.callModalFromStack(o.modal)(o),t.event.subscribe("modal.loaded",(function(){a("resolved"),t.event.clearSubscribe("modal.loaded")}))}))).then((function(){e.mRoute.next=!0}))}))},r=0;r<n.length;r++)i(r)},callModalFromStack:function(t){return void 0===e.mRoute.routeStack[t]?function(){return e.mRoute.defaultFunc(t)}:e.mRoute.routeStack[t]},addRoute:function(t,a){e.mRoute.routeStack[t]=a},clearRoute:function(){if(e.isValid(e.mRoute.currentRoute)){var t=e.mRoute.currentRoute.pop();"&"===t[t.length-1]&&(t=t.slice(0,t.length-1));var a=new RegExp("(\\??)(&?)(".concat(t,")(&?)")),o=window.location.search.replace(a,"");window.history.pushState("","",window.location.pathname+o+window.location.hash)}},changeRoute:function(t){var a=window.location.search,o=[];for(var n in t)o.push("".concat(n,"=").concat(t[n]));var i=o.join("&");a.includes(i)||(e.mRoute.currentRoute.push(i),a.length>0?(a=a+"&"+i,window.history.pushState("","",window.location.pathname+a+window.location.hash)):(a=i,window.history.pushState("","",window.location.pathname+"?"+a+window.location.hash)))},configureRouteObject:function(e){var t={modal:e.src,mpid:e.mpid,msid:e.msid};for(var a in t)t[a]||0===t[a]||delete t[a];return t}},e.mRoute.addRoute("login-modal",(function(){e.member.checkUserStatus((function(){return alert("已登入")}),(function(){t.exe("attemptToLogin",null)}))})),["account","google","facebook"].forEach((function(a){e.mRoute.addRoute("welcome-back-".concat(a,"-modal"),(function(){e.member.checkUserStatus((function(){return alert("已登入")}),(function(){t.exe("attemptToLogin",null)}))}))})),e.mRoute.addRoute("modal/coupon-info",(function(){e.modal.showInviteFriendInfoModal()})),e.mRoute.addRoute("intro-packageInfo-modal",(function(){var a=e.mRoute.currentRoute.filter((function(e){return e.includes("intro-packageInfo-modal")}))[0];e.intro.packageIndex=a?parseInt(e.parseStrToObject(a).msid):e.intro.packageIndex,e.modal.showPackageInfoModal(),t.event.subscribe("getPackageData",(function(){e.intro.displayPackageInfoModal()}))}))}(app,gee)},62038:(e,t,a)=>{var o=a(79298),n=a(31175);!function(e,t,a){"use strict";e.manage={init:function(){t.clog("manage::init")}},t.hook("send2Verify",(function(o){var n=function(){0!==this.code?e.stdErr(this):(e.stdSuccess(this),"hide"===o.data("act")?(o.hide(),a(".js-course-info-nav li:eq(0)").html("<p>審核中</p>")):(o.closest("li").html("<p>審核中</p>"),a(".validate-course-btn").hide()))};t.yell("course/verify",{courseID:a("#courseID").val()},n,n)})),t.hook("promoToggleShow",(function(e){e.toggleClass("active"),e.siblings(".promo-area").toggleClass("hide")})),t.hook("copyText",(function(e){new o(".copy-btn").on("success",(function(t){e.addClass("active").text("已複製"),t.clearSelection()}))}))}(app,gee,n)},34049:(e,t,a)=>{var o=a(79298),n=a(31175);a(58944).call,function(e,t,a){"use strict";e.member={current:{},detail:null,course:{},errMsg:{e9100:"新增失敗",e8100:"缺少參數",e8200:"驗證碼錯誤",e8202:"電子郵件地址錯誤，請重新輸入",e8203:"電子郵件地址已被註冊過，請重新輸入",e8207:"有存在相同的帳號名稱，請重新輸入",e8204:"原密碼輸入錯誤",e8205:"密碼請混合使用 8 到 32 英文數字",e8206:"密碼請混合使用 8 到 32 英文數字",e8212:"你曾經用過這個密碼，請改用其他密碼",e8213:"你最近用過這個密碼，請改用其他密碼",e8208:"帳號格式錯誤",e7100:"找不到此會員帳號，請重新輸入",e7104:"密碼錯誤，請重新輸入",e7116:"你沒有建立 YOTTA 帳號，無法重設密碼，請回登入頁使用社群帳號登入",e6100:"請重新登入",e6101:"已登入",e6102:"電子郵件已驗證",e6103:"電子郵件未驗證",e6104:"需要登入後才可使用",e6105:"此 Facebook 帳號已連接其他 YOTTA 帳號",e6200:"無此功能權限",e6202:"無教師權限",e6203:"無員工權限"},eiXwEZ:"m8g9yj2UVxFGLbOK8KP8",tempPassword:"",loaded:!1,defaultNickname:"YOTTA 學員",subList:[],init:function(){a.extend(e.errMsg,e.member.errMsg),e.member.status()},cartStatus:function(){var o=a("#courseID").val()||0,n=function(){0!==this.code?e.stdErr(this):("#collect"===e.win[0].location.hash&&t.event.fire("app.cartStatusUpdate"),this.data=this.data||{},e.intro.data=this.data.course,e.intro.sidebar(this.data.course),e.cart.store={cart:this.data.cart},e.cart.renderCart(),e.cart.renderBtn(this.data.course),this.data.cart_remove&&this.data.cart_remove.length>0&&(e.cart.store.delCart=this.data.cart_remove,e.modal.show({title:"購物車內容變更",src:"removed-cart-modal",size:"nor",cover:"opacity",header:"blue",canClose:!1})),e.promocode.currentCode?e.promocode.check(e.promocode.currentCode):(e.promocode.total=0,e.promocode.showTotal()),e.notify.bind("student","total"),e.notify.bind("student","learn-tab"),e.track.init())};t.yell("member/status",{courseID:o},n,n)},status:function(){var o=a("#courseID").val()||0,n=a("#pressID").val()||0,i=function(){if(0!==this.code)e.stdErr(this);else{if(this.data=this.data||{},e.member.current.isLogin,e.member.timestamp=this.data.timestamp,t.event.fire("app.memberTimestampLoaded",{timestamp:e.member.timestamp}),this.data.isLogin){if(a.cookie("redirect")&&!e.isInPage("member/verify")){var o=a.cookie("redirect");a.removeCookie("redirect",{path:"/"}),window.location.href=o}else if(a.cookie("redirect")){var n=a.cookie("redirect");a.removeCookie("redirect",{path:"/"}),window.location.href=n}if(e.log("member","Logined"),e.body.removeClass("login logout pending").addClass("login"),e.member.current=this.data.user,e.member.current.isLogin=!0,e.member.current.nickname=e.member.current.nickname?e.member.current.nickname:e.member.defaultNickname,e.member.current.isStudent=this.data.course.isStudent,e.member.current.isExStudent=this.data.course.isExStudent,e.member.current.isTeacher=this.data.course.isTeacher,e.member.current.notify=this.data.notify,this.data.cu_promocode&&(e.promocode.suspect=this.data.cu_promocode),(e.member.current.google_connected&&!0===e.member.current.google_connected||e.member.current.fb_connected&&!0===e.member.current.fb_connected)&&t.exe("showMergeAccountModal",null),e.member.setHtml(),e.member.current.lastLogin&&e.member.current.lastLogin.length>0&&(e.removeLastUserFromCookie(),e.setLastUserToCookie({method:e.member.current.lastLogin})),e.ifLastUserExists()){var i,r=e.getLastUserFromCookie();r.username!==e.member.current.nickname&&(i=e.updateLastUser("username",e.member.current.nickname),e.setLastUserToCookie(i)),r.avatar!==e.member.current.img&&(i=e.updateLastUser("avatar",e.member.current.img),e.setLastUserToCookie(i))}if(!0===this.data.like){var s=function(){var t=this.data.like.result;if(!(t.length<=0)&&(t.length>0&&(e.body.addClass("has-like"),(e.isInPage("index")||e.body.hasClass("body--homepage"))&&e.banner.forDomainData(t)),a('.js-block[data-type="like"]').length>0)){var o="explore-course-card";void 0===e.tmplStores[o]&&e.loadHtml(o,a(".js-explore-card")),e.waitFor((function(){return void 0!==e.tmplStores["explore-course-card"]})).then((function(){e.home.like=t||null,a('.js-block[data-type="like"]').removeClass("slick-initialized"),a('.js-block[data-type="like"]').html(""),e.home.loadSliderBlock(a('.js-block[data-type="like"]'))}))}};t.yell("explore/like",{},s,s)}if(e.message.getSystemMsg(e.message.getTotalUnreadMsgCount),window.innerWidth>1040?e.navMsgBox=a(".message-dropdown-menu.desktop"):window.innerWidth<=567?(e.navMsgBox=a(".message-dropdown-menu.mobile"),e.nav.subPanel.push(a(".message-dropdown-menu.mobile"))):(e.navMsgBox=a(".message-dropdown-menu.pad"),e.nav.subPanel.push(a(".message-dropdown-menu.pad"))),e.notify.bind("student","total"),e.notify.bind("student","learn-tab"),!this.data.user||!this.data.user.teacher||e.isInPage("player")||e.isInPage("login")||e.isInPage("basket")||(e.notify.bind("teacher","total"),e.teacher.meta()),this.data.user.new&&(e.member.newPswReceiver=this.data.user.email),e.member.checkUnpaid(),e.body.toggleClass("teacher",this.data.user.teacher).toggleClass("student",!this.data.user.teacher),this.data.user.blogger?e.body.addClass("blogger"):e.body.removeClass("blogger"),null!==e.redo&&(t.exe(e.redo,{}),e.redo=null),this.data.msg)e.modal.showSimpleModal("系統通知",this.data.msg,"/dist/image/anime-svg/doubleusers_anime.svg",'<button class="gee modal__btn" data-gene="click:hideModal">知道了</button>'),e.memeber.redirectTimer=window.setTimeout((function(){if(a.cookie("redirectToLite")){var e=a.cookie("redirectToLite");a.removeCookie("redirectToLite",{path:"/"}),window.location.href=e}}),3e3);else if(a.cookie("redirectToLite")){var l=a.cookie("redirectToLite");a.removeCookie("redirectToLite",{path:"/"}),window.location.href=l}e.waitFor((function(){return a(".js-course-card").length>0})).then((function(){e.collect.updateCollectedCards("courses")})),e.waitFor((function(){return a(".js-article-card").length>0})).then((function(){e.collect.updateCollectedCards("articles")})),0!==this.data.userJobList.length&&e.job.init(this.data.userJobList),1===e.forums.loading&&e.forums.getPreset()}else e.log("member","Did not login"),e.body.removeClass("login logout pending").addClass("logout"),e.member.current.isLogin=!1,this.data["pre-binding"]&&(a.cookie("showNewCouponNotice".concat(this.data["pre-binding"]))||(e.arena.saveNotice.show("獲得一張新優惠券，快去使用吧",5e3),a.cookie("showNewCouponNotice".concat(this.data["pre-binding"]),!0,{path:"/",expires:1})));e.member.loaded=!0,t.event.fire("app.memberStatusLoaded",{isLogin:e.member.current.isLogin}),e.intro.data=this.data.course,e.intro.sidebar(this.data.course),e.cart.store={cart:this.data.cart},e.cart.renderCart(),e.cart.renderBtn(this.data.course),this.data.cart_remove&&this.data.cart_remove.length>0&&(e.cart.store.delCart=this.data.cart_remove,e.modal.show({title:"購物車內容變更",src:"removed-cart-modal",size:"nor",cover:"opacity",header:"blue",canClose:!1})),e.track.init()}};t.yell("member/status",{courseID:o,pressID:n},i,i)},checkUserStatus:function(a,o,n){e.member.loaded&&(e.member.current.isLogin?"function"==typeof a&&(a(),e.body.hasClass("body--homepage")&&e.collect.updateCollectedCards()):"function"==typeof o&&o()),e.member.subList.includes(n)||(e.member.subList.push(n),t.event.subscribe("app.memberStatusLoaded",(function(e){e.isLogin?"function"==typeof a&&a():"function"==typeof o&&o()})))},getUserTimestamp:function(a){e.member.timestamp?a():t.event.subscribe("app.memberTimestampLoaded",a)},checkDoubleLogin:function(){void 0===e.member.loginCheckTimer&&(e.member.loginCheckTimer=window.setInterval((function(){var a=function(){0!==this.code&&(e.modal.showSimpleModal("系統通知","系統偵測帳戶已重複登入，將在三秒後強制登出","/dist/image/anime-svg/doubleusers_anime.svg",'<button class="gee modal__btn" data-gene="click:hideModal">知道了</button>'),setTimeout((function(){window.location.href="".concat(window.location.origin,"/home")}),3e3))};t.yell("member/check",{},a,a)}),18e4))},initWebSocket:function(t){var a=new WebSocket("ws://0.0.0.0:8080");a.onopen=function(o){e.member.sendInfoByWebSocket(a,{command:"filter_duplicate_member_login",email:t.email,ip:t.ip+window.location.hash}),e.member.listenByWebSocket(a,t)}},sendInfoByWebSocket:function(e,t){e.send(JSON.stringify(t))},listenByWebSocket:function(t,a){t.onmessage=function(o){switch(o.data){case"exist_other_member_login":confirm("系統檢測帳號已被其他裝置登入，是否剔除其他裝置的使用者?")?e.member.sendInfoByWebSocket(t,{command:"kick_other_member_login",email:a.email,ip:a.ip+window.location.hash}):(alert("即將登出!"),e.member.logout());break;case"duplicate_login":alert("偵測到重複登入! 即將登出!"),e.member.logout()}}},checkValid:function(){e.waitFor((function(){return void 0!==e.tmplStores["no-valid-has-email"]&&void 0!==e.tmplStores["no-valid-has-no-email"]})).then((function(){var o="";e.member.current.verify||(a("#wrapper").addClass("validation"),o=e.tmplStores["no-valid-has-email"].render(e.member.current.email)),e.member.current.email||(a("#wrapper").addClass("validation"),o=e.tmplStores["no-valid-has-no-email"].render()),a(".js-notification--no-email, .js-notification--email-not-validated").length>0&&(a(".js-notification--no-email, .js-notification--email-not-validated").remove(),a("nav").removeClass("s--has-notification"),a("body").removeClass("s--has-notification")),o.length>0&&(e.body.find("nav").prepend(o),a("nav").addClass("s--has-notification"),a("body").addClass("s--has-notification"),t.init())}))},checkUnpaid:function(){if(!a("body").hasClass("js-payment-loading")&&e.member.current.unpaidCount>0)if(a("body").hasClass("cart-step1")||a("body").hasClass("cart-step2")){a(".js-notification--unpaid").length>0&&a(".js-notification--unpaid").remove();var o="unpaid";e.waitFor((function(){return void 0!==e.tmplStores[o]})).then((function(){a("body").find("nav").prepend(e.tmplStores[o].render({data:e.member.current.unpaidCount})),a("nav").addClass("s--has-notification"),a("body").addClass("s--has-notification"),t.init()}))}else a(".js-notification--unpaid").length>0&&(a(".js-notification--unpaid").remove(),a("nav").removeClass("s--has-notification"),a("body").removeClass("s--has-notification"))},setHtml:function(){a(".my-nickname").text(e.member.current.nickname),a(".my-avatar").attr("src",e.member.current.img),a(".my-email").text(e.member.current.email),a(".my-email-input").val(e.member.current.email)},getDetail:function(){var o=function(){0!==this.code?e.stdErr(this):(e.member.detail=this.data||null,this.data.name&&a(".member-name").val(e.member.detail.name),this.data.tel&&a(".member-mobile").val(e.member.detail.tel),this.data.address&&a(".member-address").val(e.member.detail.address),t.event.fire("app.memberDetailLoaded"))};t.yell("member/detail",{},o,o)},checkAccountExist:function(e,a){a.removeClass("has-error has-pass has-feedback");var o=function(){8207!==this.code?8203!==this.code?a.addClass("has-pass"):a.addClass("has-error").find(".error-msg").text("帳號已存在"):a.addClass("has-error").find(".error-msg").text("有存在相同的帳號名稱，請重新輸入")};t.yell("member/checkAccount",e,o,o)},confirmPassword:function(e){var t=e.find('input[data-type="pw"]').val(),a=e.find('input[data-type="pwCheck"]').val();return!(!t||a!==t)},login:function(o,n){e.arena.showLoadingBtn(n);var i=function(){if(0!==this.code)switch(this.code){case 7100:case 8202:e.arena.stopLoadingBtn(n),e.showErrMsg(n.closest("form").find('input[name="account"]'),!0,e.errMsg["e"+this.code]);break;case 7104:e.arena.stopLoadingBtn(n),e.showErrMsg(n.closest("form").find('input[name="password"]'),!0,e.errMsg["e"+this.code]);break;case 6103:if(e.member.newPswReceiver=null,this.data.email&&!e.member.current.isLogin){e.member.current.email=this.data.email,e.member.current.userID=this.data.userID;var t={email:this.data.email,userID:this.data.userID};e.profile.setEmail(t,n)}break;case 6107:location.href="/account#show-change-password";break;default:e.stdErr(this)}else e.stdSuccess(this),a.cookie("acct")&&a.cookie("XCfHpdyv")&&(e.removeLastUserFromCookie(),e.setLastUserToCookie({method:"account",account:a.cookie("acct"),pw:a.cookie("XCfHpdyv")})),window.location.search.includes("intro-packageInfo-modal")?location.reload():(a("body").hasClass("intro")&&(e.intro.initPackageArea(),e.log("4988","afterlogin")),e.modal.hide(),e.member.status())};t.yell("member/login",o,i,i)},thirdPartyLogin:function(a){e.log("5075","thirdPartyLogin");var o=function(){0===this.code&&(window.location.href=this.data.redirect),e.log("5075",this.data.redirect),e.log("5075",this.data)};e.isInPage("home")||e.isInPage("login")||(e.isInPage("intro")?(e.log("5075","setRedirectCookiePackageModal"),e.setRedirectCookiePackageModal()):(e.log("5075","setRedirectCookie"),e.setRedirectCookie())),t.yell("member/3rd","".concat(a,"=true"),o,o)},connectThirdParty:function(e){var a=function(){window.location.href=this.data.redirect};t.yell("member/".concat(e,"_connect"),{},a,a)},disconnectThirdParty:function(a){var o=function(){0===this.code&&(e.profile.getProfile((function(){e.profile.renderAccountForm(),t.init()})),e.arena.saveNotice.show())};t.yell("member/".concat(a,"_disconnect"),{},o,o)},sendLoginRequest:function(t){var o=t.data("ta")?a("#"+t.data("ta")):t.closest("form"),n=!0;o.find("input").each((function(){a(this).val()===a(this).attr("placeholder")&&a(this).val(""),""===a(this).val()&&(n=!1,e.showErrMsg(a(this),!0,"輸入"+a(this).attr("placeholder")))})),n&&(e.removeLastUserFromCookie(),o.find('input[name="rememberme"]').prop("checked")?e.member.rememberMe(o.find('input[name="rememberme"]')):e.member.disableRememberMe(),e.member.login(o.serialize(),t))},askNewPasswd:function(o,n,i){var r=function(){if(0!==this.code)switch(e.arena.stopLoadingBtn(i),this.code){case 7100:e.showErrMsg(i.closest("form").find('input[name="email"]'),!0,"找不到此電子郵件地址，請重新輸入");break;case 7116:case 8202:e.showErrMsg(i.closest("form").find('input[name="email"]'),!0,e.errMsg["e"+this.code]);break;default:e.stdErr(this)}else e.stdSuccess(this),"again"===n?a(".is-resent-t").removeClass("hide"):e.modal.show({src:"forget-password-success-modal",size:"new-xs",cover:"black",ta:"v2Modal",canClose:!1})};t.yell("member/forget",o,r,r)},resend:function(o,n){var i=function(){e.arena.stopLoadingBtn(n),0!==this.code?6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this):(e.stdSuccess(this),e.modal.showValidationModal("success"),a(".is-resent-t").removeClass("hide"))};t.yell("member/resend",o,i,i)},register:function(a,o){e.arena.showLoadingBtn(o);var n=function(){if(0!==this.code)switch(this.code){case 8202:case 8203:e.arena.stopLoadingBtn(o),e.showErrMsg(o.closest("form").find('input[name="account"]'),!0,"有存在相同的帳號名稱，請重新輸入");break;case 8205:e.arena.stopLoadingBtn(o),e.showErrMsg(o.closest("form").find('input[name="password"]'),!0,e.errMsg["e"+this.code]);break;default:e.stdErr(this)}else e.stdSuccess(this),this.data.email&&!e.member.current.isLogin&&(e.member.current.email=this.data.email,e.member.current.userID=this.data.userID,e.isInPage("home")||e.isInPage("login")||(e.isInPage("intro")?(e.log("5075","這是intro頁"),e.setRedirectCookiePackageModal()):e.setRedirectCookie()),e.modal.showValidationModal("success"))};t.yell("member/register",a,n,n)},logout:function(){var a=function(){0!==this.code?e.stdErr(this):location.href="/home/"};t.yell("member/logout",{},a,a,"GET")},getMinsFromNow:function(e){return new Date((new Date).valueOf()+60*e*1e3)},yImport:function(t){return window.qz3Cub.AES.encrypt(t,e.member.eiXwEZ).toString()},yExport:function(t){return window.qz3Cub.AES.decrypt(t,e.member.eiXwEZ).toString(window.qz3Cub.enc.Utf8)},rememberMe:function(t){a.cookie("passwd")&&a.removeCookie("passwd");var o=t.closest("form");a.cookie("acct",o.find('input[name="account"]').val(),{expires:30,path:"/"});var n=e.member.yImport(o.find('input[name="password"]').val());a.cookie("XCfHpdyv",n,{expires:30,path:"/"})},disableRememberMe:function(){a.removeCookie("acct",{path:"/"}),a.removeCookie("XCfHpdyv",{path:"/"})},enableEdit:function(e){a('input[class*="member-"]').prop("readonly",!e).filter(":radio:not(:checked)").prop("disabled",!e),a('select[class*="member-"]').prop("disabled",!e)},getInviteList:function(o){var n=function(){0!==this.code?6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this):(this.data.invite.code?(e.member.render("invite-coupon-header",{data:this.data.invite},o.find(".js-invite-header .invite-header-inner")),o.find(".js-invite-header").addClass("coupon")):e.member.render("invite-normal-header",{},o.find(".js-invite-header .invite-header-inner")),e.member.setHtml(),this.data.list.length?e.member.render("invite-list-view",{data:this.data.list},o.find(".js-invite-list")):o.find(".js-invite-list-container").addClass("is-empty"),a(".bs-tip-show").tooltip())};t.yell("invite/list",{},n,n)},setInvite:function(o,n){var i={e8208:"已被邀請過囉！",e9100:"您今日已邀請超過100名好友囉！",e8203:"已經是YOTTA會員囉！",e8100:"請輸入電子信箱！",e8207:"電子信箱格式錯誤！"},r=function(){n.prop("disabled",!1);var r=n.closest("form");if(0!==this.code)switch(this.code){case 6100:e.stdErr(this),t.exe("attemptToLogin",null);break;case 8208:case 9100:case 8203:case 8207:case 8100:r.find(".form-control-feedback").text(i["e"+this.code]).addClass("error-msg").end().find(".form-group").addClass("has-error has-feedback");break;default:e.stdErr(this)}else{e.stdSuccess(this),r.find(".form-control-feedback").text("邀請已發送！").addClass("success-msg").end().find(".form-group").addClass("has-pass has-feedback").end().find("input").val("");var s=a(".js-invite-list-container");e.member.render("invite-list-block",{email:o},s.find(".js-invite-list")),s.removeClass("is-empty")}};t.yell("invite/set",{email:o},r,r)},render:function(a,o,n,i){if(i=void 0===i||i,e.tmplStores[a]){var r=e.tmplStores[a].render(o);switch(a){case"invite-normal-header":case"invite-coupon-header":n.html(r);break;case"invite-list-view":case"invite-list-block":n.append(r)}t.init()}},formFilled:function(e){return e.get(0).querySelectorAll("[required]:placeholder-shown").length}},t.hook("readySubmit",(function(t){var o=t.data("ta")?a("#"+t.data("ta")):t.closest("form");e.member.formFilled(o)>0?o.find("button.c-btn").removeClass("btn-active"):o.find("button.c-btn").addClass("btn-active")})),t.hook("login",(function(t){e.member.sendLoginRequest(t)})),t.hook("loginWithLastUser",(function(t){var a=t.closest("form").find('input[name="password"]').val(),o={account:JSON.parse(JSON.stringify(e.getLastUserFromCookie())).account,password:a};t.closest("form").find('input[name="rememberme"]').prop("checked")||(e.member.disableRememberMe(),e.removeLastUserFromCookie()),a.length<=0?e.showErrMsg(t.closest("form").find('input[name="password"]'),!0,"輸入 YOTTA 登入密碼"):e.member.login(o,t.closest("form"))})),t.hook("enterLogin",(function(t){13===window.event.keyCode&&e.member.sendLoginRequest(t)})),t.hook("askNewPasswd",(function(t){var o=t.data("ta")?a("#"+t.data("ta")):t.closest("form"),n=t.data("type")||"first";if(a("#emailInput").val())return o.is("input")?(e.member.newPswReceiver=o.val(),e.arena.showLoadingBtn(t),void e.member.askNewPasswd("email=".concat(e.member.newPswReceiver),n,t)):!!a.validatr.validateForm(o)&&(e.member.newPswReceiver=o.find('input[name="email"]').val(),e.arena.showLoadingBtn(t),void e.member.askNewPasswd(o.serialize(),n,t));e.showErrMsg(t.closest("form").find('input[name="email"]'),!0,"輸入電子信箱")})),t.hook("loadNewPswReceiver",(function(t){e.member.setHtml(),t.is("input")?t.val(e.member.newPswReceiver):t.text(e.member.newPswReceiver)})),t.hook("loadCurrent",(function(a){var o=a.data("type"),n=function(){e.waitFor((function(){return e.member.current[o]})).then((function(){a.is("input")?a.val(e.member.current[o]):a.text(e.member.current[o]),t.exe("readySubmit",a)}))};e.member.checkUserStatus(n,n,"loadCurrent")})),t.hook("loadNewPasswordReceiver",(function(a){var o=a.find("input");void 0!==e.member.newPswReceiver&&o.val(e.member.newPswReceiver),t.exe("readySubmit",a)})),t.hook("thirdPartyLogin",(function(t){e.member.thirdPartyLogin(t.data("type"))})),t.hook("editMember",(function(t){a(".member-edit-btn").toggleClass("hide",!0),e.member.enableEdit(1)})),t.hook("loginModal/switchTab",(function(e){var t=e.closest(".js-login-modal"),o=e.data("tab"),n=e.closest(".js-login-modal").find(".js-modal-banner");"login"===o?n.attr("src","/dist/image/anime-svg/login.svg"):n.attr("src","/dist/image/anime-svg/signup.svg"),t.removeClass("s--login s--register").addClass("s--".concat(o)),"login"===o&&a(".js-form-register").find("input").each((function(){a(this).val("")}))})),t.hook("validation/goTo",(function(t){e.modal.toggleValidationModal(t.data("goto"))})),t.hook("loadMyAccount",(function(o){var n=o.is("form")?o:o.closest("form");if(a.cookie("XCfHpdyv")){var i=e.member.yExport(a.cookie("XCfHpdyv"));n.find('input[name="account"]').val(a.cookie("acct")).end().find('input[name="password"]').val(i).end().find('input:checkbox[name="rememberme"]').prop("checked",!0)}t.exe("readySubmit",o),e.track.init()})),t.hook("register",(function(o){var n=o.data("ta")?a("#"+o.data("ta")):o.closest("form");t.exe("checkAccount",a("#accountInput")),t.exe("checkEmail",a("#emailInput")),t.exe("checkPsw",a("#passwordInput"));var i=!0;e.waitFor((function(){return a("#accountInput").parent(".form-group").hasClass("has-error")||a("#accountInput").parent(".form-group").hasClass("has-pass")})).then((function(){n.find(".form-group").each((function(e){a(this).hasClass("has-error")&&(i=!1)})),!0===i&&e.member.register(n.serialize(),o)}))})),t.hook("resend",(function(t){var o=t.data("ta")?a("#"+t.data("ta")):t.closest("form");if(e.arena.showLoadingBtn(t),"INPUT"!==o.prop("tagName"))return!!a.validatr.validateForm(o)&&void e.member.resend(o.serialize(),t);e.member.resend("account=".concat(o.val()),t)})),t.hook("checkReq",(function(t){""===t.val()?e.showErrMsg(t,!0,t.attr("placeholder")):e.showErrMsg(t,!1)})),t.hook("checkEmail",(function(e){var a=e.val(),o=e.closest(".form-group"),n=function(){return o.removeClass("has-error has-pass has-feedback"),8202===this.code?(o.addClass("has-error"),void o.find(".error-msg").text("電子郵件地址不符合格式")):8100===this.code?(o.addClass("has-error"),void o.find(".error-msg").text("輸入要綁定此帳號的電子郵件地址")):8203===this.code?(o.addClass("has-error"),void o.find(".error-msg").text("電子郵件地址已被註冊過，請重新輸入")):void o.addClass("has-pass")};t.yell("member/checkEmail",{email:a},n,n)})),t.hook("checkAccount",(function(t){var a=t.val();if(!new RegExp(/^[a-zA-Z0-9]*$/).test(a))return t.closest(".form-group").removeClass("has-pass has-feedback has-error").addClass("has-error"),void t.closest(".form-group").find(".error-msg").text("名稱請使用 6 到 24 英文或數字");if(a.length<6||a.length>24)return t.closest(".form-group").removeClass("has-pass has-feedback has-error").addClass("has-error"),void t.closest(".form-group").find(".error-msg").text("名稱請使用 6 到 24 英文或數字");var o={account:a};e.member.checkAccountExist(o,t.closest(".form-group"))})),t.hook("checkPsw",(function(t){"pw"!==t.data("type")?"pwCheck"===t.data("type")&&(e.member.confirmPassword(t.closest("form"))?t.closest(".form-group").removeClass("has-pass has-error has-feedback").addClass("has-pass"):(t.closest(".form-group").removeClass("has-pass has-error has-feedback").addClass("has-error"),e.showErrMsg(t,!0,"與設定密碼不符，請重新輸入"))):e.showErrMsg(t,t.isPasswdErr(),e.errMsg.e8205)})),t.hook("changePsw",(function(t){"pw"!==t.data("type")?"pwCheck"===t.data("type")&&(e.member.confirmPassword(t.closest("form"))?t.closest(".form-group").removeClass("has-pass has-error has-feedback").addClass("has-pass"):(t.closest(".form-group").removeClass("has-pass has-error has-feedback").addClass("has-error"),e.showErrMsg(t,!0,"與設定密碼不符，請重新輸入"))):e.showErrMsg(t,t.isPasswdErr(),e.errMsg.e8205)})),t.hook("modify",(function(t){var o=t.data("ta")?a("#"+t.data("ta")):t.closest("form");if(o.find("input").each((function(){a(this).val()===a(this).attr("placeholder")&&a(this).val("")})),!a.validatr.validateForm(o))return!1;a("#pwd").val()&&(e.showErrMsg(a("#pwd"),a("#pwd").isPasswdErr(),e.errMsg.e8205),e.showErrMsg(a("#cpwd"),a("#cpwd").val()!==a("#pwd").val(),e.errMsg.e8206)),e.progressingBtn(t),e.member.update(o.serialize(),t)})),t.hook("logout",(function(t){e.member.logout()})),t.hook("sendPinCode",(function(t){t.data("ta")?a("#"+t.data("ta")):t.closest("form"),a("#clock").countdown(e.member.getMinsFromNow(5),(function(e){a(this).html(e.strftime("%M:%S"))}))})),t.hook("invite/init",(function(t){e.member.checkUserStatus((function(){e.member.getInviteList(t)}),(function(){e.member.getInviteList(t)}),"invite/init")})),t.hook("invite/copy",(function(t){new o(".js-"+t.data("clipboard-text")).on("success",(function(a){t.attr("title","已複製").tooltip("enable").tooltip("fixTitle").tooltip("show").off("mouseleave").on("mouseleave",(function(){t.attr("title","複製").tooltip("hide").tooltip("fixTitle")})),a.clearSelection(),"desktop"===e.screen?t.parents(".code").find(".desktop-link-area").removeClass("hide"):t.parents(".list-block").find(".mobile-link-area").removeClass("hide")}))})),t.hook("invite/set",(function(t){var o=t.closest("form");if(o.find("input").each((function(){a(this).val()===a(this).attr("placeholder")&&a(this).val("")})),!a.validatr.validateForm(o))return o.find(".form-group").addClass("has-feedback"),!1;e.progressingBtn(t),o.find(".form-group").removeClass("has-pass has-error has-feedback").end().find(".form-control-feedback").text("").removeClass("error-msg success-msg"),e.member.setInvite(a.trim(o.find("input").val()),t)})),t.hook("createYottaAccount",(function(o){var n=o.closest("form");t.exe("checkAccount",a("#accountInput")),t.exe("checkPsw",a("#passwordInput")),t.exe("checkPsw",a("#checkPswInput"));var i=!0;n.find(".form-group").each((function(e){a(this).hasClass("has-error")&&(i=!1)}));var r=function(){if(0!==this.code)switch(this.code){case 8202:case 8203:e.arena.stopLoadingBtn(o),e.showErrMsg(o.closest("form").find('input[name="account"]'),!0,e.errMsg["e"+this.code]);break;case 8205:e.arena.stopLoadingBtn(o),e.showErrMsg(o.closest("form").find('input[name="password"]'),!0,e.errMsg["e"+this.code]);break;default:e.stdErr(this)}else e.modal.hide(),e.profile.getProfile((function(){e.profile.renderAccountForm(),t.init()}))};i&&(e.arena.showLoadingBtn(o),t.yell("member/createYottaAccount",n.serialize(),r,r))})),t.hook("attemptToLogin",(function(t){e.isInPage("login")||(e.ifLastUserExists()?e.modal.showWelcomeBackModal():e.modal.showLoginModal())}))}(app,gee,n)},68005:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.message={getSystemMsg:function(a){var o=function(){0==this.code&&(e.member.current.notify.system=this.data,a&&a())};t.yell("message/simple",{},o,o)},render:function(a,o,n,i){switch(i=void 0===i||i,a){case"inbox-sidebar":var r="inbox-sidebar";if(!e.tmplStores[r])return;var s=e.tmplStores[r].render(o);n.append(s);break;case"inbox-content":if(r="inbox-content",!e.tmplStores[r])return;s=e.tmplStores[r].render(o),n.append(s)}t.init()},getTotalUnreadMsgCount:function(){var t=e.member.current.notify;e.member.current.notify.totalUnreadCount=t.student.total+t.subscribe.total+t.system.unread,e.message.renderBox()},markUnread:function(e,t){e.append('<span class="dot dot-red"></span>')},removeUnread:function(e){e.children(".dot").remove()},markTotalNavbarMsg:function(){var t=e.member.current.notify.totalUnreadCount>=100?"99+":e.member.current.notify.totalUnreadCount,a='<span class="count js-msg-num">'.concat(t,"</span>");e.navMsgBox.parent().find(".msg-all").append(a)},removeTotalNavbarMsg:function(){a(".js-msg-num")&&a(".js-msg-num").remove()},updateNavbarMsg:function(){var t=e.member.current.notify,a=t.system,o=t.student,n=t.subscribe,i=e.navMsgBox.children(".title"),r={systemMsg:{count:null==a?void 0:a.unread,node:i.find(".js-system-notify")},courseMsg:{count:o.total,node:i.find(".js-course-notify")},subscribeMsg:{count:n.total,node:i.find(".js-subscribe-notify")}};for(var s in e.member.current.notify.totalUnreadCount>0?e.message.markTotalNavbarMsg():e.message.removeTotalNavbarMsg(),r)r[s].count>0?e.message.markUnread(r[s].node,r[s].count):e.message.removeUnread(r[s].node)},renderBox:function(){if(e.tmplStores["small-inbox"]){var a=e.navMsgBox,o=e.member.current.notify.system,n=e.tmplStores["small-inbox"].render(o);a.html(n),e.message.updateNavbarMsg(),t.init(),a.find(".li-loading").removeClass("show"),e.track.init()}},getList:function(o,n){var i=function(){if(0!==this.code)e.stdErr(this);else{e.stdSuccess(this);var t=this.data.list.length||0;e.message.render("inbox-sidebar",{list:this.data.list,system_num:t},o),e.message.render("inbox-content",{data:this.data.list},o.parent().find(".js-inbox-content")),!0===a.isNumeric(n)&&o.find(".title[data-id="+n+"]").click()}};t.yell("message/list",{},i,i)},getDtl:function(t){var a=e.body.find(".js-inbox-content");e.body.find(".js-user-info").removeClass("hide"),a.siblings(".js-default-message").addClass("hide").end().find(".js-inbox-message").addClass("hide").end().find("#inbox-message-"+t).removeClass("hide").end().removeClass("hide"),"desktop"!==e.screen&&(a.parents(".inbox-dtl-container").addClass("show"),e.body.find(".inbox-list-container").addClass("hide"))},del:function(a,o){var n=function(){if(0!==this.code)6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this);else{e.stdSuccess(this);var n=e.body.find(".js-inbox-content"),i=e.body.find(".js-inbox-system-list");a.parent(".block").remove(),n.find("#inbox-message-"+o).hasClass("hide")||(e.body.find(".js-user-info").addClass("hide"),n.siblings(".js-default-message").removeClass("hide").end().addClass("hide")),n.find("#inbox-message-"+o).remove(),0===i.find(".block").length&&i.find(".inbox-list").addClass("hide").end().find(".js-empty-view").removeClass("hide");var r=e.body.find(".js-inbox-tab"),s=parseInt(r.find(".js-inbox-system-num").text())-1;r.find(".js-inbox-system-num").text(s)}};t.yell("message/hide",{id:o},n,n)},multipleDel:function(o,n){var i=[];a.each(n,(function(){i.push(a(this).val())}));var r=function(){if(0!==this.code)6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this);else{e.stdSuccess(this),n.parents(".block").remove(),o.parent().addClass("hide").prev(".manage-edit-btn").removeClass("hide"),a(".inbox-list").find(".block").removeClass("confirm").end().find('input:checkbox[name="del"]').prop("checked",!1);var i=e.body.find(".js-inbox-tab"),r=parseInt(i.find(".js-inbox-system-num").text())-n.length;i.find(".js-inbox-system-num").text(r);var s=e.body.find(".js-inbox-system-list");0===s.find(".block").length&&(s.find(".inbox-list").addClass("hide").end().find(".js-empty-view").removeClass("hide"),o.parent().prev(".manage-edit-btn").addClass("hide"))}};t.yell("message/hide",{id:i},r,r)},isRead:function(a,o){var n=function(){0!==this.code?6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this):(e.stdSuccess(this),a.find(".is-new").remove(),e.member.current.notify.totalUnreadCount-=1,e.member.current.notify.system.unread-=1,e.message.updateNavbarMsg())};t.yell("message/read",{id:o},n,n)}},t.hook("inbox/init",(function(t){var a=window.location.hash.replace("#","");""===window.location.hash&&(window.location.hash="system"),e.message.getList(t,a)})),t.hook("inbox/dtl",(function(t){var a=t.parents(".block");if(!a.hasClass("confirm")){var o=t.data("id");e.message.getDtl(o),a.parent().find(".block").removeClass("active"),a.addClass("active"),a.find(".is-new").length&&e.message.isRead(a,o)}})),t.hook("inbox/confirmDel",(function(e){e.parent(".block").toggleClass("confirm")})),t.hook("inbox/del",(function(t){var a=t.data("id");t.prop("disabled",!0),e.message.del(t,a)})),t.hook("inbox/back",(function(t){t.parents(".inbox-dtl-container").removeClass("show"),e.body.find(".inbox-list-container").removeClass("hide")})),t.hook("inbox/toggleDel",(function(e){"del"===e.data("type")?e.toggleClass("hide").next(".manage-area").toggleClass("hide"):e.parent().addClass("hide").prev(".manage-edit-btn").removeClass("hide"),a(".inbox-list").find(".block").toggleClass("confirm").end().find('input:checkbox[name="del"]').prop("checked",!1)})),t.hook("inbox/multipleDel",(function(t){var o=a(".inbox-list").find('input[name="del"]:checked');o.length&&e.message.multipleDel(t,o)})),a(window).on("hashchange",(function(){var t=window.location.hash.replace("#","");!0===a.isNumeric(t)&&e.body.find(".js-inbox-system-list .title[data-id="+t+"]").click()}))}(app,gee,o)},60955:(e,t,a)=>{var o=a(31175);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(58944).call;var s=a(58133);s.sum,s.find,function(e,t,a){"use strict";e.modal={stack:{},slienceMode:0,forceMode:!1,bodyScrollPotion:0,safariFixList:["account"],defaultOpts:{title:"",src:"",ta:"",size:"nor",canClose:!0,cover:"white",header:"logo",message:{content:"",status:"success"}},init:function(){a(".modal").unbind().on("show.bs.modal",(function(t){var o=a(t.target).attr("id");e.log("modal","show.bs.modal::"+o),e.modal.format(o),"function"==typeof e.modal.onShown&&e.modal.onShown()})).on("hidden.bs.modal",(function(t){var o=a(t.target).attr("id");if(e.modal.stack[o]=null,e.modal.format(null),"function"==typeof e.modal.onHidden&&e.modal.onHidden(),0!==a(".modal.in").length&&e.body.addClass("modal-open"),e.route&&1!==e.modal.slienceMode){e.route.changing=1;var n="/"+e.module.name+"/"+e.module.layout;"history"===e.route.mode?window.history.pushState({ta:e.module.name,path:n},null,e.route.base+n):window.location.hash=n,e.route.currentPage=n,e.route.changing=0}"mobile"===e.screen&&e.modal.removeBodyScroll()})),t.event.fire("app.modalInit")},onShown:function(){},onHidden:function(){},safariFix:function(){e.modal.safariFixList.forEach((function(t){if(e.isInPage(t)){var a=document.querySelector("body");e.modal.bodyScrollPosition=window.pageYOffset,a.style.overflow="hidden",a.style.position="fixed",a.style.top="-".concat(e.modal.bodyScrollPosition,"px"),a.style.width="100%"}}))},show:function(o){e.modal.safariFix(),(o=a.extend({},e.modal.defaultOpts,o)).ta=o.ta?o.ta:"defaultModal";var n=a("#"+o.ta);n.opts=o,n.find(".modal-dialog").removeClass((function(e,t){return t.replace("modal-dialog","")})).addClass("modal-".concat(o.size)).end().find(".modal-title").text(o.title).end().find(".modal-header").show(),""!==o.header&&n.find(".modal-dialog").addClass("modal-"+o.header),""===o.title&&n.find(".modal-header").hide(),"html"===o.type?n.find(".modal-body").html(o.src):(n.find(".modal-dialog").addClass(o.src),e.loadHtml(o.src,n.find(".modal-body"))),"rating-list-modal"===o.src&&"mobile"===e.screen&&e.modal.addBodyScroll(),e.modal.stack[o.ta]=n,n.modal({backdrop:!1,keyboard:!1}),e.waitFor((function(){return n.find(".modal-body").children().length>0})).then((function(){t.event.fire("modal.loaded",o.src)})),o.dontChangeRoute||window.location.search.includes("intro-packageInfo-modal")||e.mRoute.routeStack[o.src]&&e.mRoute.changeRoute(e.mRoute.configureRouteObject(o))},safariFixCancel:function(){e.modal.safariFixList.forEach((function(t){if(e.isInPage(t)){var a=document.querySelector("body");a.style.removeProperty("overflow"),a.style.removeProperty("position"),a.style.removeProperty("top"),a.style.removeProperty("width"),window.scrollTo(0,e.modal.bodyScrollPosition)}}))},hide:function(o){e.modal.safariFixCancel(),"popup"!==o?(o&&e.modal.stack[o]?e.modal.stack[o].modal("hide"):a.each(e.modal.stack,(function(e,t){t&&t.modal("hide")})),window.location.search.includes("intro-packageInfo-modal")&&(e.intro.changeTagActive(e.intro.packageIndex),e.mRoute.clearRoute(),a("body").hasClass("safari")&&a("body").hasClass("mobile")&&(a("body").removeClass("modal-noScroll"),a("html, body").animate({scrollTop:a("#intro-load-package").offset().top},600,"linear"))),t.event.fire("modal.closed"),e.mRoute.clearRoute()):e.modal.stack[o].modal("hide")},format:function(o){var n=1010,i=!0,r="",s="";if(a.each(["defaultModal","galleryModal","messageModal","v2Modal","scrollModal","popup"],(function(t,a){e.modal.stack[a]&&(i=e.modal.stack[a].opts.canClose,r=e.modal.stack[a].opts.cover)})),null!==o){switch(o){case"galleryModal":n=2010;break;case"messageModal":n=3010}0===a("#modalBackdrop").length&&e.body.append('<div id="modalBackdrop" class="modal-backdrop fade in"></div>');var l=a("#"+o);l.off("click.hideModal"),!1!==i&&!1===e.modal.forceMode&&l.on("click.hideModal",(function(t){a(t.target).hasMutilClass("modal&fade&in")&&(e.log("modal","click.hideModal"),e.modal.hide(o))}))}else t.isset(e.modal.stack.galleryModal)&&(n=2010);!1!==i&&!0!==e.modal.forceMode||(s+=" modal-static "),""!==r&&(s+=" modal-"+r),e.body.removeClass("modal-static modal-black modal-white modal-opacity").addClass(s),null===o&&0===a(".modal.in").length?(a("#modalBackdrop").remove(),e.modal.forceMode=!1):a("#modalBackdrop").css("zIndex",n)},addBodyScroll:function(){e.body.addClass("modal-noScroll")},removeBodyScroll:function(){e.body.removeClass("modal-noScroll")},showLoginModal:function(){window.location.search.includes("modal=welcome-back")&&e.mRoute.clearRoute(),e.modal.show({src:"login-modal",size:"new-xs",ta:"v2Modal",cover:"black",canClose:!1})},showWelcomeBackModal:function(){window.location.search.includes("modal=login-modal")&&e.mRoute.clearRoute();var t=e.getLastUserFromCookie().method;e.modal.show({src:"welcome-back-".concat(t,"-modal"),size:"new-xs",ta:"v2Modal",cover:"black",canClose:!1})},showValidationModal:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"success";e.mRoute.clearRoute(),e.modal.show({src:"validate-email-modal",size:"new-xs",cover:"black",ta:"v2Modal",canClose:!1}),e.waitFor((function(){return 0!==a(".js-validation-modal").length})).then((function(){e.modal.toggleValidationModal(t)}))},toggleValidationModal:function(e){a(".js-validation-modal").removeClass("s--question s--success s--validation"),a(".js-validation-modal").addClass("s--".concat(e)),a(".js-validation-modal").removeClass("hidden")},showErrorModal:function(t){e.modal.show({src:"error-modal",size:"xs",ta:"v2Modal",cover:"black",canClose:!1}),e.waitFor((function(){return a(".error-modal").length>0})).then((function(){a(".error-modal").find(".modal--error").find(".js-error-msg").html(t)}))},showCouponUsedOutModal:function(){e.modal.show({src:"coupon-used-out",size:"xs",ta:"v2Modal",cover:"black",canClose:!1})},showRatingListModal:function(t){e.modal.show({src:"rating-list-modal",size:"v2-m",ta:"v2Modal",mpid:t,canClose:!1})},showBaumingInfoModal:function(t,a){var o;e.modal.slienceMode=1,e.modal.show((r(o={src:"activity-registration-modal",title:"報到資訊",header:"blue"},"title","課程資訊"),r(o,"header","blue"),r(o,"mpid",t),r(o,"msid",a),o))},showFavoriteListModal:function(){e.modal.show({src:"favorite-list-modal",title:"我的收藏",cover:"opacity",header:"blue",static:!1})},showSimpleModal:function(o,n,i,r){e.modal.show({src:"modal-template",size:"new-xs",ta:"v2Modal",cover:"black",canClose:!0}),e.waitFor((function(){return a(".modal--simple").length>0})).then((function(){a(".modal--simple").find(".js-modal-banner").attr("src",i),a(".modal--simple").find(".js-modal-title").text(o),a(".modal--simple").find(".js-modal-content").html(n),a(".modal--simple").find(".js-modal-btn-slot").html(r),t.init()}))},showRatingDtlModal:function(o,n,i){e.modal.show({src:"rating-dtl-modal",header:"logo",title:"課程評價",mpid:o,msid:n}),e.waitFor((function(){return a(".js-rating-box").length>0})).then((function(){e.renderBox(a(".js-rating-box"),{data:i},1,2),i.can_reset||a(".reset-btn").css("display","none"),t.init()}))},showRatingModal:function(t,a){e.modal.show({src:"add-rating-modal",size:"v2-m",ta:"v2Modal",cover:"white",mpid:t,msid:a})},showPackageInfoModal:function(){e.modal.show({src:"intro-packageInfo-modal",size:"scroll-xs",ta:"scrollModal",cover:"white",mpid:e.intro.courseID,msid:e.intro.packageIndex})},showReportBugModal:function(t){var a="report-bug-modal";"classroomv3"===t&&(a="report-bug-modal2"),e.modal.show({src:a,title:"問題回報與建議",size:"sm",cover:"opacity",header:"blue"})},showInviteFriendInfoModal:function(){e.modal.show({src:"modal/coupon-info",title:"如何使用優惠券",size:"sm",cover:"opacity",header:"blue"})},showAvatarEditorModal:function(o){var n=o||"avatar",i={partner:{fileType:"partner-avatar",tableID:36},teacher:{fileType:"teacher-avatar",tableID:16},petition:{fileType:"petition-avatar",tableID:37},avatar:{fileType:"avatar",tableID:6}};t.event.subscribe("modal.loaded",(function(e){if(t.event.clearSubscribe("modal.loaded"),"avatar-modal"===e){var o=a(".avatar-modal").find(".js-upload-avatar-btn");o.attr("data-fileType",i[n].fileType),o.attr("data-tableid",i[n].tableID)}})),e.modal.show({src:"avatar-modal",size:"md",canClose:!1})},showPopup:function(o,n,i,r){e.modal.show({src:"popup-template",size:"popup",ta:"popup",cover:"white",canClose:!1}),e.waitFor((function(){return e.isValid(a("#popup").find(".popup__body").length)})).then((function(){var s=a("#popup").find(".popup__body");s.addClass("bg--".concat(o)),n&&e.arena.checkIconReady().then((function(){s.find(".js-popup-icon").html('<svg class="svg-icon '.concat(n,'" viewBox="').concat(t.iconStore[n].viewBox,'">').concat(t.iconStore[n].svg,"</svg>"))})),s.find(".js-popup-title").text(i),s.find(".js-popup-content").html(r),window.setTimeout((function(){e.modal.hide("popup")}),3e3)}))}},t.hook("showModal",(function(a){if(!a.hasClass("track")&&"ga"===a.data("which")&&a.data("label")&&e.track.manuallySendGA("Click",a.data("label")),a.data("src")&&(e.modal.show({title:a.data("title"),src:a.data("src"),ta:a.data("ta"),size:a.data("size")?a.data("size"):"nor",canClose:a.data("close"),cover:a.data("cover"),header:a.data("class"),message:{content:a.data("msg"),status:a.data("msg-type")}}),t.init()),"forget-password-modal"===a.data("src")||"register-modal"===a.data("src")){var o=e.track.configCategory();e.track.send(o,"Click",a.data("label"),a.data("which"))}})),t.hook("showWelcomeModal",(function(t){e.modal.show({src:"welcome-back-modal",size:"new-xs",ta:"v2Modal",cover:"black",canClose:!1})})),t.hook("showCreateAccountModal",(function(t){e.modal.show({src:"create-account-modal",size:"new-xs",ta:"v2Modal",cover:"black",canClose:!1})})),t.hook("showChangePasswordModal",(function(t){e.modal.show({src:"change-password-modal",size:"new-xs",ta:"v2Modal",cover:"black",canClose:!1})})),t.hook("showMergeAccountModal",(function(t){e.modal.show({src:"merge-account-modal",size:"new-xs",ta:"v2Modal",cover:"black",canClose:!1})})),t.hook("showFailMergeModal",(function(t){e.modal.show({src:"fail-merge-modal",size:"new-xs",ta:"v2Modal",cover:"black",canClose:!1})})),t.hook("showInviteFriendInfoModal",(function(t){e.modal.showInviteFriendInfoModal()})),t.hook("showValidationModal",(function(t){var a=t.data("page");e.modal.showValidationModal(a)})),t.hook("showLoginModal",(function(t){e.modal.showLoginModal()})),t.hook("showAddInterestModal",(function(t){e.modal.show({src:"add-interest-modal",ta:"v2Modal",cover:"black",canClose:!1})})),t.hook("showForgetPwModal",(function(t){e.modal.show({src:"forget-password-modal",size:"new-xs",cover:"black",ta:"v2Modal",canClose:!1})})),t.hook("showUseCouponModal",(function(t){e.modal.show({src:"use-coupon-modal",size:"use-coupon",ta:"v2Modal",cover:"black",canClose:!1})})),t.hook("showPlayerDiscussionModal",(function(t){e.forums.showPlayerDiscussionModal()})),e.mRoute.addRoute("post-discussion-modal",(function(t){e.forums.showPlayerDiscussionModal()})),t.hook("hideModal",(function(t){e.modal.hide()})),t.hook("hideGalleryModal",(function(t){e.modal.hide("galleryModal")})),t.hook("initMessage",(function(t){t.closest(".modal");var a=e.modal.stack.messageModal.opts.message.content,o=e.modal.stack.messageModal.opts.message.status,n=e.modal.stack.messageModal.opts.message.imgPath;a&&t.find(".message").html(a),o&&t.find("."+o).removeClass("hide"),"error"===o&&n&&t.find(".error").attr("src",n),"success"===o&&n&&t.find(".success").attr("src",n)})),t.hook("goodbyeIE",(function(t){t.siblings(".checkbox").find("input:checkbox:checked").length>0&&a.cookie(t.data("cookie-name"),!0,{expires:30,path:"/"}),e.modal.hide()})),t.hook("getLastUser",(function(t){var a=e.getLastUserFromCookie();t.find(".js-username").text(a.username),t.find(".js-avatar").attr("src",a.avatar)})),t.hook("initUseCouponModal",(function(o){e.coupon.getAvailableCoupons(),o.addClass("s--loading"),o.find(".js-coupon-submit-btn").addClass("disabled"),t.event.subscribe("app.availableCouponGet",(function(a){if(o.removeClass("s--loading"),"string"!=typeof a){var n=a.map((function(t){return e.coupon.getFormattedCoupon(t,"available")})),i=e.tmplStores["coupon-ticket-horizontal"].render({data:n});o.find(".js-coupon-showcase").html(i),t.init(),e.promocode.currentCode&&o.find("#".concat(e.promocode.currentCode)).addClass("s--selected")}else o.addClass("s--empty")})),o.on("click",(function(t){var n=t.target,i=a(n).closest(".js-coupon");o.find(".js-coupon").each((function(){e.promocode.currentCode="",a(this).removeClass("s--selected")})),i.length>0?(o.find(".js-coupon-submit-btn").removeClass("disabled"),i.addClass("s--selected"),e.promocode.currentCode=i.data("code")):o.find(".js-coupon-submit-btn").addClass("disabled")})),o.find(".js-coupon-submit-btn").on("click",(function(t){t.target,e.promocode.currentCode?(e.promocode.check(e.promocode.currentCode),e.modal.hide()):e.modal.hide()}))})),t.hook("showRatingListModal",(function(t){var o;o=t.data("courseid")?t.data("courseid"):a("#courseID").val()?a("#courseID").val():t.closest(".js-my-course-card").data("id"),e.modal.showRatingListModal(o)})),t.hook("showFavoriteListModal",(function(t){e.modal.showFavoriteListModal()})),t.hook("showAvatarEditorModal",(function(t){t.data("filetype")?e.modal.showAvatarEditorModal(t.data("filetype")):e.modal.showAvatarEditorModal()})),t.hook("initRatingListModal",(function(o){var n=o,r=o.find(".js-list-modal"),s=o.find(".js-add-rating-modal"),l=e.mRoute.currentRoute.filter((function(e){return e.includes("rating-list-modal")}))[0],c=o.find(".js-rating-operation"),d=e.parseStrToObject(l).mpid,u=null,m=null,h=0,p=0,f="date";function v(){o.find(".js-rating-content").addClass("hidden"),o.find(".js-loading-view").removeClass("hidden")}function g(){o.find(".js-rating-content").removeClass("hidden"),o.find(".js-loading-view").addClass("hidden")}function b(e){["list","rating"].forEach((function(e){n.removeClass("is--".concat(e))})),n.addClass("is--".concat(e))}function w(t){return e.isValid(m)?t.filter((function(e){return e.id!==m.id})):t}s.find(".js-return-to-list").on("click",(function(){b("list")})),v(),a.when(e.waitFor((function(){return void 0!==e.tmplStores["rating-summary"]})),e.waitFor((function(){return void 0!==e.tmplStores["rating-list-item"]})),e.waitFor((function(){return void 0!==e.tmplStores["rating-my-rating"]})),e.waitFor((function(){return void 0!==e.member.current}))).done((function(){var l=s.find(".js-submit-rating-btn"),y=s.find(".js-delete-rating"),k=r.find(".js-rating-content"),C=r.find(".js-rating-sorter"),x=r.find(".js-sorter-list");function j(){function l(a,o){var i=n.find(".js-ratings-other"),r=e.tmplStores["rating-list-item"].render({data:w(a)});o&&i.html(""),i.append(r),t.init()}v();var b=function(){var v,b,C,x=this.data.result,j=this.data.stars,S=this.data.avg;m=this.data.myRating,h=this.data.pages,p=0,r.find(".js-rating-list").removeClass("hidden"),x?(o.find(".js-rating-empty").addClass("hidden"),o.find(".js-rating-list").removeClass("hidden"),l(x,!0),g()):(o.find(".js-rating-list").addClass("hidden"),o.find(".js-rating-empty").removeClass("hidden"),o.addClass("is--empty"),n.find(".js-ratings-other").html(""),g()),g(),e.isValid(m)?(u=m.id,m.score?(v=m,b=n.find(".js-my-rating"),C=e.tmplStores["rating-my-rating"].render({data:[i(i({},v),{},{avatar:e.member.current.img,nickname:e.member.current.nickname})]}),b.html(C),t.init(),b.removeClass("hidden"),c.find("span").text("編輯評價"),a(c[0]).addClass("is--edit"),y.removeClass("hidden"),m.content&&s.find(".js-rating-comment").val(m.content).change()):(n.find(".js-my-rating").addClass("hidden"),c.find("span").text("撰寫評價"),y.addClass("hidden"),s.find(".js-rating-comment").val("")),e.waitFor((function(){return e.isValid(e.tmplStores["rating-starset"])})).then((function(){var a=e.tmplStores["rating-starset"].render({data:[{score:m.score}]});s.find(".js-rating-stars-wrap").replaceWith(a),t.init()})),e.member.current.nickname===e.member.defaultNickname&&s.addClass("no-nickname")):c.each((function(){a(this).addClass("is--disallowed")}));var _=parseFloat(S).toFixed(1),T=o.find(".js-rating-summary"),I=e.tmplStores["rating-summary"].render({data:[{avg:_}]});T.html(I),t.init();var M=Object.keys(j),D=M.map((function(e){return j[e]})).reduce((function(e,t){return parseInt(e)+parseInt(t)}));M.forEach((function(e){a(".js-chart-item-".concat(e)).find(".js-bar").css("width","".concat(parseInt(j[e]/D*100),"%"))})),r.find(".js-total-ratings").text(D),t.init();var F=!0,P=0,E=k.height();k.unbind(),k.on("scroll",(function(e){if(F&&(P=a(this)[0].scrollHeight,a(this)[0].scrollTop+E>=P-5)){if(F=!1,p+1>=h)return;p+=1;var o=function(){l(w(this.data.result),!1),t.init()};t.yell("rating/course",{courseID:d,sorter:f,page:p},o,o),setTimeout((function(){F=!0}),300)}}))};t.yell("rating/course",{courseID:d,sorter:f,page:p},b,b)}b("list"),j(),l.on("click",(function(){var t=e.student.store.ratingScore,o=s.find(".js-rating-comment").val(),n={id:u,course_id:d,score:parseInt(t),content:e.formatHelper.stripHtmlTag(o)};o.length>300&&e.showErrMsg(o,!0,"超過字數限制");var r=function(){m.content?e.modal.showPopup("brand","pen","已儲存","謝謝你的回饋"):e.modal.showPopup("brand","paperplane","已發送","謝謝你的回饋"),e.arena.stopLoadingBtn(l),window.setTimeout((function(){b("list"),f="date",p=0,j()}),3400)};if(s.hasClass("no-nickname")){var c=s.find('input[name="nickname"]').val();if(c.length<=0)return void e.showErrMsg(s.find('input[name="nickname"]'),!0,"請輸入暱稱");e.member.current.nickname=c,e.member.setHtml(),e.arena.showLoadingBtn(a(this)),e.student.rating(i(i({},n),{},{nickname:c}),r)}else e.arena.showLoadingBtn(a(this)),e.student.rating(n,r)})),y.on("click",(function(){var a=function(){e.modal.showPopup("brand","trash","已刪除","回饋已被移除"),window.setTimeout((function(){b("list"),f="date",p=0,j()}),3e3)};t.yell("student/resetRating",{id:u},a,a)})),c.each((function(){a(this).on("click",(function(){m&&parseInt(m.viewed)<1?e.modal.showPopup("error","mycourse","無法評價","尚未看課"):b("rating")}))})),C.on("click",(function(){C.hasClass("is--open")?(C.removeClass("is--open"),x.addClass("hidden")):(C.addClass("is--open"),x.removeClass("hidden"))})),x.on("click",(function(e){var t;v(),f=a(e.target).closest(".js-sorter-item").data("value"),x.find(".js-sorter-item").each((function(){a(this).data("value")===f?(a(this).addClass("is--selected"),t=a(this).find(".js-sorter-name").text()):a(this).removeClass("is--selected")})),C.find(".js-current-sorter").text(t),p=0,j()}))}))})),e.mRoute.addRoute("favorite-list-modal",(function(t){e.modal.showFavoriteListModal()}))}(app,gee,o)},66185:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.more={total:0,store:[],errMsg:{e7110:"網頁逾時，請重新整理。"},clear:function(){(e.more.box||a(".js-result-list")).find(".js-more-result").empty().end().addClass("loading").removeClass("more").removeClass("empty")},load:function(o,n){if(e.more.status=!1,e.more.box=e.more.box?e.more.box:a(".js-result-list"),void 0!==o?e.more.page=o:e.more.page?e.more.page+=1:e.more.page=1,e.more.page>=e.more.chunk&&0!=e.more.chunk)return e.more.box.find(".js-load-more").addClass("hide").removeClass("show"),void("bulletin"==e.more.model&&e.bulletin.updateBulletinMoreTag());if(e.more.box.find(".js-load-more").removeClass("hide").addClass("show"),0==e.more.page){var i={page:0};e.more.type&&(i=a.extend({},i,{type:e.more.type})),e.more.tag&&(i=a.extend({},i,{tag:e.more.tag})),e.more.subType&&(i=a.extend({},i,{subType:e.more.subType}))}else i={key:e.more.key,page:e.more.page},e.more.type&&(i=a.extend({},i,{type:e.more.type}));var r=function(){if(0!==this.code)return o||(e.more.page-=1),e.more.clear(),void e.more.load(0);this.data.key&&(e.more.key=this.data.key,e.more.chunk=this.data.chunk,e.more.page=0,e.more.box.find(".js-load-more").toggleClass("hide",e.more.chunk>2)),e.more.box.find(".js-load-more").removeClass("loading"),e.more.data=this.data.result,"explore"==e.more.model&&this.data.type?e.more.store=this.data:"teachers"==e.more.model&&this.data.recommend&&(e.more.store=this.data,e.teacher.updateRecommend()),"homework"==e.more.model&&(a.each(this.data.result,(function(e,t){t.private_msg="觀看權限：你與學員"})),e.more.store=this.data.result),e.more.render(e.more.data),e.more.box.removeClass("loading").toggleClass("more",e.more.chunk>1).toggleClass("empty",0==this.data.total),e.more.status=!0};t.yell(e.more.model+"/more",i,r,r)},render:function(o){e.more.box=e.more.box?e.more.box:a(".js-result-list");var n=e.more.tmpl;if(e.tmplStores[n]){var i={data:o=o||e.more.data};if(o){var r=e.tmplStores[n].render(i);e.more.box.find(".js-more-result").append(r),a(".bs-tip-show").tooltip()}t.init()}},bind:function(o){var n=e.more.tmpl,i=a(window);e.body.hasClass("modal-open")&&(i=o.find(".js-more-result").parent()),i.off("scroll.infinite").on("scroll.infinite",(function(){if(e.more.status&&!e.more.autoLoad&&0!=e.more.chunk&&""!=e.more.key){var o=a(document).height();e.body.hasClass("modal-open")&&(o=i.find(".js-more-result").height()+100),i.scrollTop()>=o-i.height()-10&&(e.more.autoLoad=!0,t.loadMore())}})),void 0===e.tmplStores[n]&&e.loadHtml(n,o.find(".js-result-tmpl"))}},t.hook("initMore",(function(t){var o=t.find(".js-load-more");a.extend(e.errMsg,e.more.errMsg),e.more.model=t.data("model")||location.pathname.split("/")[1],e.more.tmpl=t.data("tmpl")||"teacher-card",e.more.type=t.data("type")||"all",t.data("key")&&(e.more.key=t.data("key")),t.data("chunk")&&(e.more.chunk=t.data("chunk")),t.data("type")&&(e.more.type=t.data("type")),e.more.autoLoad=!1,e.more.status=!0,o.is(".hide")||e.more.bind(t)})),t.hook("loadMore",(function(t){(t=t||a(".js-load-more").find("button")).length>1&&(t=a(".js-load-more.js-more-"+e.more.model).find("button")),e.more.key||(e.more.key=a('[name="key"]').val()||""),e.more.chunk||(e.more.chunk=parseInt(a('[name="total"]').val())||0),e.more.status=!1,e.more.autoLoad=!1,t.is(".js-result-list")&&(t=t.find(".js-load-more")),t.is(".js-load-more")||(t=t.closest(".js-load-more")),e.more.box=t.closest(".js-result-list"),0===e.more.box.length&&(e.more.box=a(".js-result-list")),t.closest(".js-load-more").addClass("loading"),e.more.load(),e.waitFor(1).then((function(){e.track.view_item_list()})),e.track.manuallySendGA("Click","Loadmore btn"),e.track.init()}))}(app,gee,o)},17240:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.nav={toolbar:{},subPanel:[],currentPanel:void 0,cateList:void 0,subCateList:void 0,subListForTypeAll:[{category:"所有",type:"all",subType:"all",courseType:"all",groupID:null},{category:"募資課程",type:"all",subType:"all",courseType:"fundraising",groupID:null},{category:"熱門課程",courseType:"group",type:"all",subType:"all",groupID:"63"},{category:"你可能喜歡",courseType:"like",type:"all",subType:"like",groupID:null},{category:"免費學習",type:"all",subType:"all",courseType:"free",groupID:null}],getCateList:function(){var a=this,o=function(){a.cateList=this.data.cateList,a.cateList.push({category:"全部",categoryID:"all",img:this.data.imgAll,subCategory:e.nav.subListForTypeAll});var t={};a.cateList.forEach((function(e){t[e.categoryID]={subList:[]},e.subCategory.forEach((function(o){t[e.categoryID].subList.push(a.createSubTypeObj(e.categoryID,o))}))})),a.subCateList=t};t.yell("explore/cateList",{},o,o,"GET")},createSubTypeObj:function(e,t){return{category:t.category?t.category:"所有",courseType:t.courseType?t.courseType:"all",type:isNaN(e)?"all":e,subType:t.categoryID?t.categoryID:"all",groupID:t.groupID?t.groupID:"0"}},createSubTmpl:function(e,t,a){var o={67:"Business",68:"Design",69:"Technology",70:"Language",71:"Life",all:"All"};if("all"===e.type){var n="type=".concat(e.type,"&subType=").concat(e.subType,"&order=latest&courseType=").concat(e.courseType,"&groupID=").concat(e.groupID,"&page=1");return'<a href="/explore?'.concat(n,'" class="').concat(t," ").concat("like"===e.courseType?"js-like-link":"",' js-sub-category nav-tracking-btn" data-gaaction="navExplore" data-galabel="area').concat(o[e.type]).concat(a,'">\n                        ').concat(e.category,"\n                    </a>")}return'<a href="/explore/'.concat(e.type,"/").concat(e.subType,'" class="').concat(t,' js-sub-category nav-tracking-btn" data-gaaction="navExplore" data-galabel="area').concat(o[e.type]).concat(a,'">\n                ').concat(e.category,"\n            </a>")},clearActiveSubpanel:function(){a(".js-pad-msgdropdown").removeClass("active"),a(".js-mobile-msgdropdown").removeClass("active"),a(".desktop-search-form").removeClass("active"),a(this.subPanel).each((function(){a(this).removeClass("open"),a(this).removeClass("active")}))},openSubPanel:function(t){this.clearActiveSubpanel(),this.currentPanel=t,t.addClass("open"),t.addClass("active"),t.attr("data-mask")||e.arena.toggleVagueMask(!1),"true"===t.attr("data-mask")&&e.arena.toggleVagueMask(!0)},closeSubPanel:function(t){this.clearActiveSubpanel(),t.attr("data-mask")||e.arena.toggleVagueMask(!1),"true"===t.attr("data-mask")&&e.arena.toggleVagueMask(!1)},exploreBar:{root:void 0,mainBoxes:[],allBox:void 0,subBoxes:[],subContainer:void 0,iconmap:{},cateList:void 0,subCateList:{},device:"pc",anchor:void 0,isShowing:!1,init:function(e){var t=this;window.innerWidth<567||(window.innerWidth>=1040?(t.device="pc",t.anchor=a(".toolbar-inner.desktop").find(".js-explore-anchor")):window.innerWidth<1040&&(t.device="pad",t.anchor=a(".toolbar-inner.pad").find(".js-explore-anchor")),t.root=e,t.mainBoxes=t.root.find(".js-main-box"),t.subContainer=t.root.find(".js-explore-subbox"),"pc"===t.device&&(t.bindEvtToShowCate("mouseenter"),t.bindEvtToShowSub("mouseenter"),t.closeOnEvt("mouseenter")),"pad"===t.device&&(t.bindEvtToShowCate("click"),t.bindEvtToShowSub("click"),t.closeOnEvt("click")))},getCateList:function(){e.nav.getCateList(),e.waitFor((function(){return void 0!==e.nav.cateList})).then((function(){var t=e.nav.subCateList,a=function(a){var o="";"all"!==t[a].subList[0].type?t[a].subList.forEach((function(e){t[a].html='<a href="/explore/'.concat(e.type,'" class="c-sub__capsule">\n                                    所有\n                                </a>')})):t[a].html="",t[a].subList.forEach((function(t,a){o+=e.nav.createSubTmpl(t,"c-sub__capsule",a)})),t[a].html+=o};for(var o in t)a(o)}))},show:function(){this.isShowing=!0,e.nav.openSubPanel(this.root)},close:function(){this.isShowing=!1,e.nav.closeSubPanel(this.root)},closeOnEvt:function(e){var t=this;a(window).on(e,(function(e){"mask"===a(e.target).attr("id")&&t.isShowing&&t.close()}))},bindEvtToShowCate:function(t){var a=this;a.anchor.on(t,(function(t){t.preventDefault(),void 0===e.nav.cateList?(a.getCateList(),e.waitFor((function(){return void 0!==e.nav.cateList})).then((function(){a.renderMainCate(),a.show()}))):(a.renderMainCate(),a.show())}))},renderMainCate:function(){var t=this;e.nav.cateList.forEach((function(e){t.mainBoxes.each((function(){a(this).attr("data-cateID")===e.categoryID&&(a(this).find("span").text(e.category),a(this).find("img").attr("src",e.img))}))}))},selectMainboxToActive:function(e){this.mainBoxes.each((function(){a(this).removeClass("active")})),e.addClass("active")},bindEvtToShowSub:function(e){var t=this;t.mainBoxes.each((function(){a(this).on(e,(function(e){e.stopPropagation(),e.preventDefault(),t.selectMainboxToActive(a(this)),t.currentMainId=a(this).data("cateid"),t.showSubCate(a(this).attr("data-cateID")),t.subBoxes=t.subContainer.find(".c-sub__capsule")}))}))},clearSubCate:function(){this.subContainer.html("")},showSubCate:function(t){this.subContainer.html(e.nav.subCateList[t].html)}},mobileExplore:{root:void 0,mainCateList:[],subCateList:{},currentSection:void 0,mainSections:void 0,currentSubCate:void 0,init:function(t){var o=this;o.root=t,o.mainSections=o.root.find(".js-explore-main"),o.mainSections.each((function(){a(this).on("click",(function(){e.track.send("Navbar","hamburger","area".concat(e.formatHelper.mapCateIDtoName(a(this).attr("data-cateID")),"0"),"ga"),void 0!==o.currentSection?(o.closeCate(),o.currentSection.attr("data-cateID")===a(this).attr("data-cateID")?o.currentSection=void 0:(o.currentSection=a(this),o.openCate())):(o.currentSection=a(this),o.openCate())}))})),o.root.on("click",(function(t){var n=a(t.target);o.currentSection.data("cateid"),n.hasClass("js-sub-category")&&e.track.send("Navbar","hamburger","area".concat(e.formatHelper.mapCateIDtoName(o.currentSection.attr("data-cateID"))).concat(n.index()))}))},openCate:function(){var t=this,a=t.currentSection.attr("data-cateID");t.currentSubCate=t.currentSection.parent().find(".js-explore-sub"),t.currentSection.addClass("active"),void 0!==t.subCateList[a]?t.showSubsection(a):(t.getSubCate(),e.waitFor((function(){return void 0!==e.nav.subCateList})).then((function(){t.showSubsection(a)})))},showSubsection:function(t){this.currentSubCate.html(e.nav.subCateList[t].html),this.currentSubCate.addClass("active")},closeCate:function(){var e=this;e.currentSection.removeClass("active"),e.currentSubCate.html(""),e.currentSubCate.removeClass("active")},getSubCate:function(){e.nav.getCateList(),e.waitFor((function(){return void 0!==e.nav.cateList})).then((function(){var t=e.nav.subCateList,a=function(a){var o="";"all"!==t[a].subList[0].type?t[a].subList.forEach((function(e){t[a].html='<a href="/explore/'.concat(e.type,'" class="c-explore__capsule js-sub-category track-item">\n                                    全部\n                                </a>')})):t[a].html="",t[a].subList.forEach((function(t,a){o+=e.nav.createSubTmpl(t,"c-explore__capsule track-item",a)})),t[a].html+=o};for(var o in t)a(o)}))}},recentSearchBar:{root:void 0,input:void 0,recentBox:void 0,resultBox:void 0,deleteBtn:void 0,recentSearch:[],hotSearch:void 0,hotBox:void 0,suggestions:[],init:function(o,n){var i=this;i.root=o,e.waitFor((function(){return e.tmplStores["navbar-search"]})).then((function(){i.root.html(e.tmplStores["navbar-search"].markup),i.input=n,i.deleteBtn=i.root.find(".js-recent-delete"),i.getRecentSearch(),i.getHotSearch(),i.input.on("keypress",(function(e){var t=a(this).val();13===e.keyCode&&(t=a(this).val(),i.sendSearchQuery(t))}));var o,r,s=i.input.siblings(".js-clear-btn");s.on("click",(function(){i.input.val(""),i.input.trigger("input")})),i.input.on("input",(function(e){a(this).val!==r&&(a(this).val().length<=0?s.removeClass("active"):s.addClass("active"),r=a(this).val(),window.clearTimeout(o),o=window.setTimeout((function(){if(r.length>0){var e=function(){this.data?i.renderSuggestions(r,this.data):i.resetSearchBar()};t.yell("search/getOpts",{query:r},e,e,"GET")}else i.resetSearchBar()}),600))})),i.deleteBtn.on("click",(function(){i.deleteRecentSearch()}))}))},resetSearchBar:function(){var o=this;o.root.removeClass("s--suggestions"),o.root.html(e.tmplStores["navbar-search"].markup),o.root.find("icon").each((function(){var e=a(this).attr("class").split(" ")[1],o=a(this).attr("class").split(" ").slice(2).join(" ");a(this).replaceWith('<svg class="svg-icon '.concat(e," ").concat(o,'" viewBox="').concat(t.iconStore[e].viewBox,'">').concat(t.iconStore[e].svg,"</svg>"))})),o.deleteBtn=o.root.find(".js-recent-delete"),o.deleteBtn.on("click",(function(){o.deleteRecentSearch()})),o.getHotSearch(),o.getRecentSearch(),o.root.parent().find(".l-search__box.explore")&&o.root.parent().find(".l-search__box.explore").removeClass("hidden")},pushSearchIntoCookie:function(t){var a=this;a.recentSearch.length>=3&&a.recentSearch.pop(),a.recentSearch.unshift(t);var o=a.recentSearch.join("-");e.setRecentSearchToCookie(o)},deleteRecentSearch:function(){e.removeRecentSearchFromCookie(),this.recentSearch=[],this.recentBox.css("display","none")},sendSearchQuery:function(t){t.trim().length>0&&(location.href="/search?q=".concat(t.trim()),this.pushSearchIntoCookie(t.trim())),e.track.send("Navbar","navSearch","searchInput","ga")},getRecentSearch:function(){var t=this;t.recentBox=t.root.find(".js-recent-box"),a.cookie("recentSearch")?(t.recentSearch=e.getRecentSearchFromCookie().split("-"),t.renderRecentSearch()):t.recentBox.css("display","none")},renderRecentSearch:function(){var e=this;e.resultBox=e.root.find(".js-recent-result"),e.recentSearch.forEach((function(t,o){var n='<a class="c-capsule c-capsule--grey js-search-word adding nav-tracking-btn" data-cate="Navbar" data-gaaction="navSearch" data-label="recentSearch'.concat(o+1,'" href="/search?q=').concat(t,'"></a>');e.resultBox.append(n),a(".js-search-word.adding").text(t),a(".js-search-word.adding").removeClass("adding")}))},getHotSearch:function(){var e=this;if(void 0===e.hotSearch){var a=function(){e.hotSearch=this.data,e.renderHotSearch()};t.yell("search/getOpts",a,a,"GET")}else e.renderHotSearch()},renderHotSearch:function(){var e=this;e.hotBox=e.root.find(".js-hot-box");var a="";t.isset(e.hotSearch)?(e.hotSearch.forEach((function(e,t){var o;o=""!==e.url?e.url:"/search?q=".concat(e.title),a+='<a class="c-capsule c-capsule--blue js-hot-search nav-tracking-btn" data-cate="Navbar" data-gaaction="navSearch" data-label="topSearch'.concat(t+1,'" href="').concat(o,'">').concat(e.title,"</a>")})),e.hotBox.html(a)):e.hotBox.parent().addClass("hidden")},renderSuggestions:function(e,a){var o,n=this,i={keyword:{href:"/search?q=",iconName:"search",arr:[]},course:{href:"/course/intro/",iconName:"mycourse",arr:[]},teacher:{href:"/teacher/",iconName:"personal-info",arr:[]},article:{href:"/article/",iconName:"book",arr:[]}},r="",s=0;function l(e,t){var a=new RegExp(t,"i");return e.replace(a,'<span class="note">'.concat(e.match(a),"</span>"))}for(var c in a.forEach((function(e,t){i[e.type].arr.length>=3||(s++,i[e.type].arr.push(e))})),s<12&&a.length>12&&(i.keyword.arr.forEach((function(e){a.forEach((function(t,o){"keyword"===t.type&&t.label===e.label&&a.splice(o,1)}))})),a.filter((function(e){return"keyword"===e.type})).forEach((function(e){s>=12||(i.keyword.arr.push(e),s++)}))),i)i[c].arr.forEach((function(a){var n=i[a.type].iconName;o='<svg class="svg-icon '.concat(n,'" viewBox="').concat(t.iconStore[n].viewBox,'">').concat(t.iconStore[n].svg,"</svg>"),r+='\n                            <a class="'.concat(a.type,' option nav-tracking-btn" data-cate="navbar" data-gaaction="navSearch" data-label="suggestion-search" href="').concat(a.label?i[a.type].href+a.label:i[a.type].href+a.id,'">\n                                ').concat(o,"<p>").concat(a.label?l(a.label,e):l(a.title,e),"</p>\n                            </a>")}));n.root.addClass("s--suggestions"),n.root.html(r),n.root.parent().find(".l-search__box.explore")&&n.root.parent().find(".l-search__box.explore").addClass("hidden")}},mobileSearch:{root:void 0,searchForm:void 0,init:function(t){var o=this;o.root=t,o.anchor=a(".mobile-search-btn"),o.imgs=o.root.find(".js-category-img"),o.searchForm=o.root.parent().find(".js-navbar-searchform"),o.closeBtn=o.searchForm.find(".js-close-btn"),o.insertImg(),o.anchor.on("click",(function(){o.root.hasClass("active")?o.close():o.open()})),e.nav.recentSearchBar.init(a(".js-search"),a(".toolbar-inner.pad").find(".js-search-input")),o.closeBtn.on("click",(function(){o.close()})),a("#mask").on("click",(function(e){o.close()})),o.root.on("click",(function(t){var o=a(t.target).closest(".nav-tracking-btn");o&&(t.preventDefault(),e.track.send(o.data("cate"),o.data("gaaction"),o.data("label"),"ga"),"A"===o.prop("tagName")&&void 0!==o.attr("href")&&setTimeout((function(){window.location.href=o.attr("href")}),150))}))},open:function(){var t=this;t.searchForm.addClass("active"),a(".js-toolbar--explore").addClass("s--search-active"),e.nav.openSubPanel(a(".js-mobile-search-dropdown")),setTimeout((function(){t.closeBtn.css({visibility:"visible"}),t.searchForm.find("input").focus()}),500)},close:function(){this.closeBtn.css({visibility:"hidden"}),this.searchForm.removeClass("active"),a(".js-toolbar--explore").removeClass("s--search-active"),e.nav.closeSubPanel(a(".js-mobile-search-dropdown"))},insertImg:function(){var e=this,o=function(){var t=this.data;e.imgs.each((function(){var e=parseInt(a(this).attr("data-cateID"),10);0===e?a(this).attr("src",t.imgAll):a(this).attr("src",t.cateList.filter((function(t){return parseInt(t.categoryID)===e}))[0].img)}))};t.yell("explore/cateList",{},o,o,"GET")}},desktopSearch:{root:void 0,form:void 0,input:void 0,recentSearchBox:void 0,recentSearchResult:void 0,recentSearch:[],deleteSearchBtn:void 0,isShowing:!1,init:function(t){var o=this;o.root=t,o.input=t.find(".js-search-input"),o.form=t.find(".js-desktop-search-dropdown"),e.nav.recentSearchBar.init(o.form,a(".desktop-search-form").find("input")),o.input.on("click",(function(){o.show(),a(".desktop-search-form").addClass("active")})),a(document).on("click",(function(e){"mask"===a(e.target).attr("id")&&o.isShowing&&o.hide()}))},show:function(){this.isShowing=!0,this.toggleInputActive(!0),e.nav.openSubPanel(a(".js-desktop-search-dropdown"))},hide:function(){this.toggleInputActive(!1),e.nav.closeSubPanel(a(".js-desktop-search-dropdown"))},toggleInputActive:function(e){e?this.root.addClass("active"):this.root.removeClass("active")}},init:function(){e.nav.toolbar=e.body.find(".js-toolbar"),e.nav.subPanel.push(a(".js-nav-sidebar")),e.nav.subPanel.push(a(".js-nav-explore ")),e.nav.subPanel.push(a(".member.dropdown")),e.nav.subPanel.push(a(".cart.dropdown")),e.nav.subPanel.push(a(".message.dropdown")),e.nav.subPanel.push(a(".js-mobile-search-dropdown")),e.nav.subPanel.push(a(".js-desktop-search-dropdown")),window.innerWidth>1040&&(a(".member.dropdown").on("mouseenter",(function(){e.nav.openSubPanel(a(".member.dropdown"))})),a(".cart.dropdown").on("mouseenter",(function(){e.nav.openSubPanel(a(".cart.dropdown"))})),a(".message.dropdown").on("mouseenter",(function(){e.nav.openSubPanel(a(".message.dropdown"))})))},toggleIntroToolbar:function(t){"show"===t?e.nav.toolbar.addClass("active"):e.nav.toolbar.removeClass("active")}},e.nav.sidebar={open:function(){var t=a(".js-sidebar");e.nav.openSubPanel(t),a("#mask").css("zIndex","1051"),a("body").addClass("noFlow"),a(".js-toolbar").addClass("vague"),a(".js-fixed-nav").each((function(){a(this).addClass("vague")}))},close:function(){var t=a(".js-mobile-explore-sidebar");t.hasClass("active")&&t.removeClass("active"),a("#mask").css("zIndex","1049"),a("body").removeClass("noFlow"),a(".js-toolbar").removeClass("vague");var o=a(".js-sidebar");e.nav.closeSubPanel(o),a(".js-fixed-nav").each((function(){a(this).removeClass("vague")}))}},t.hook("nav/closeSidebar",(function(t){e.nav.sidebar.close()})),t.hook("initSidebar",(function(t){t.find(".close-btn").on("click",(function(){e.nav.sidebar.close()})),a("#mask").on("click",(function(){e.nav.sidebar.close()})),t.on("click",(function(t){t.preventDefault();var o=a(t.target).closest(".track-item"),n=o.data("label");o&&(o.data("label")&&e.track.send("Navbar","hamburger",n,"ga"),o.attr("href")&&("_blank"===o.attr("target")?window.setTimeout((function(){window.open(o.attr("href"),"_blank")}),100):window.setTimeout((function(){window.location.href=o.attr("href")}),100)))})),e.track.init()})),t.hook("toggleSidebar",(function(t){a(".js-sidebar").hasClass("active")||e.nav.sidebar.open()})),t.hook("navbar/changeColor",(function(e){e.parent().addClass("active")})),t.hook("navbar/resetColor",(function(e){e.parent().removeClass("active")})),t.hook("leaveToolbar",(function(t){a(".toolbar-menu-btn").removeClass("active toolbar-menu-btn"),e.nav.toggleIntroToolbar("hide")})),t.hook("memberDropdown",(function(t){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var o=!t.parent().hasClass("open");e.body.toggleClass("modal-open",o),a(".member-dropdown-cover").toggleClass("active",o)}})),t.hook("closeMemberDropdown",(function(e){a("#membermenu").click()})),t.hook("navbar/initExplore",(function(t){e.nav.exploreBar.init(t)})),t.hook("sidebar/toggleExplore",(function(e){var t=a(".js-mobile-explore-sidebar");0===parseInt(e.attr("data-action"))?(t.removeClass("active"),t.css("display","none")):(t.css("display","block"),t.addClass("active"))})),t.hook("sidebar/initExplore",(function(t){e.nav.mobileExplore.init(t)})),t.hook("openMobileMsgDropdown",(function(t){var a=e.navMsgBox;t.parent().hasClass("active")?(e.nav.closeSubPanel(a),t.parent().removeClass("active")):(e.nav.openSubPanel(a),t.parent().addClass("active"))})),t.hook("nav/initMobileSearch",(function(t){window.innerWidth>1040||e.nav.mobileSearch.init(t)})),t.hook("desktop/searchInit",(function(t){window.innerWidth>1040&&e.nav.desktopSearch.init(t)})),t.hook("clearSearch",(function(e){var t=e.parent().find("input");t.val(""),t.trigger("input")})),t.hook("trackNavBar",(function(t){var o="Navbar",n=a(window.event.target).closest(".nav-tracking-btn").length>0?a(window.event.target).closest(".nav-tracking-btn"):null;n?(window.event.preventDefault(),n.hasClass("js-search-word")&&e.track.send(o,"navSearch","recentSearch".concat(n.index()+1)),n.hasClass("js-hot-search")&&e.track.send(o,"navSearch","topSearch".concat(n.index()+1)),n.data("gaaction")&&n.data("galabel")&&e.track.send(o,n.data("gaaction"),n.data("galabel"),"ga"),void 0!==n.closest(".js-cart-item")&&e.track.send(o,n.closest(".js-cart-item").data("gaaction"),n.closest(".js-cart-item").data("galabel"),"ga"),"A"===n.prop("tagName")&&void 0!==n.attr("href")&&("_blank"===n.attr("target")?window.setTimeout((function(){window.open(n.attr("href"),"_blank")}),100):window.setTimeout((function(){window.location.href=n.attr("href")}),100))):void 0===a(window.event.target).attr("href")&&void 0===a(window.event.target).closest("a").attr("href")||(window.location.href=a(window.event.target).attr("href")||a(window.event.target).closest("a").attr("href"))}))}(app,gee,o)},45206:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.notify={bind:function(a,o,n){function i(){if(e.member.current.isLogin){var t;if("student"===a&&(t=e.member.current.notify.student),"teacher"===a){if(!e.member.current.teacher)return;t=e.member.current.notify.teacher}switch(e.notify.update(".js-notify-income-num",t.income),o){case"total":e.notify.update(".js-notify-"+a+"-num",t.total);break;case"learn-tab":e.notify.update(".js-notify-course-num",t.course.total),e.notify.update(".js-notify-order-num",t.order),e.notify.update(".js-notify-collectCourse-num",t.course_collect);break;case"subscription-tab":e.notify.update(".js-notify-collectArticle-num",t.article_collect);break;case"manage-tab":e.notify.update(".js-notify-teacher-course-num",t.course.total),e.notify.update(".js-notify-income-num",t.income);break;case"classroom-tab":(t=t.course.list[n])&&(e.notify.update(".js-notify-bulletin-num",t.bulletinNotify),e.notify.update(".js-notify-faq-num",t.faqNotify),e.notify.update(".js-notify-issue-num",t.issueNotify),e.notify.update(".js-notify-homework-num",t.homeworkNotify),e.notify.update(".js-notify-rating-num",t.t_seenRating))}}}n=n||!1,!0===e.member.loaded?i():t.event.subscribe("app.memberStatusLoaded",(function(){i()}))},update:function(t,a){var o=a;a>=100&&(o="99+"),e.body.find(t).data("count",a).text(o),0==a?e.body.find(t).addClass("hide"):e.body.find(t).removeClass("hide")},reset:function(o,n,i){i=i||!1,e.member.checkUserStatus((function(){if("student"===o)var r=e.member.current.notify.student,s="s_"+n;if("teacher"===o){if(!e.member.current.teacher)return;r=e.member.current.notify.teacher,s="t_"+n}"subscribe"===o&&(r=e.member.current.notify.subscribe,s="s_news");var l=r.total;if("collectArticle"===n&&(l+=e.member.current.notify.student.article_collect,s="s_collectArticle"),0!==l){var c={};switch(n){case"course":var d=r.course.newCourse;if(0===d)return;var u=r.course.total;break;case"order":u=r.order;break;case"collectCourse":u=r.course_collect;break;case"collectArticle":u=e.member.current.notify.student.article_collect;break;case"income":u=r.income;break;case"subscribe":if(!i)return;c={teacherID:i},u=r.list[i]?r.list[i]:0;break;case"bulletin":case"issue":case"homework":case"rating":case"faq":if(!i)return;c={courseID:i},u=r.course.list[i].bulletinNotify,"faq"===n&&(u=r.course.list[i].faqNotify),"issue"===n&&(u=r.course.list[i].issueNotify),"homework"===n&&(u=r.course.list[i].homeworkNotify),"rating"===n&&(u=r.course.list[i].t_seenRating)}if(0!==u){var m=function(){if(0!==this.code)e.stdErr(this);else{var t=e.member.current.notify;switch("course"===n?(l-=d,t.totalUnreadCount-=d,"student"===o&&(t.student.total-=d),"subscribe"===o&&(t.subscribe.total-=d),u-=d):(l-=u,t.totalUnreadCount-=u,"student"===o&&(t.student.total-=u),"subscribe"===o&&(t.subscribe.total-=u),u=0),n){case"course":r.course.total=u,r.course.newCourse=0;break;case"order":r.order=0;break;case"collectCourse":r.course_collect=0;break;case"collectArticle":t.student.article_collect=0;break;case"income":r.income=0;break;case"subscribe":r.list[i]=0,a(".js-subscribe-list").find('li[data-id="'+i+'"]').find(".count.sub").text("0").addClass("hide");break;case"bulletin":r.course.list[i].bulletinNotify=0;break;case"issue":r.course.list[i].issueNotify=0;break;case"homework":r.course.list[i].homeworkNotify=0;break;case"rating":r.course.list[i].t_seenRating=0;break;case"faq":r.course.list[i].faqNotify=0}"teacher"===o?e.notify.update(".js-notify-teacher-num",l):(e.notify.update(".js-msg-num",t.totalUnreadCount),e.message.updateNavbarMsg()),e.notify.update(".js-notify-"+n+"-num",u),r.total=l}};t.yell("notify/"+s+"/reset",c,m,m)}}}),null,"notify/".concat(n,"/reset"))}},t.hook("notify/reset",(function(t){var a=window.location.hash.replace("#","");"qa"===a&&(a="faq");var o=t.data("nclass"),n=t.data("ntype"),i=t.data("nid");e.waitFor((function(){return!isNaN(parseInt(t.data("nid")))})).then((function(){""!==o&&""!==n&&""!==i&&a===n&&e.notify.reset(o,n,i)}))})),t.hook("notify/resets",(function(t){var a=t.data("nclass"),o=t.data("ntype"),n=t.data("nid");""!==a&&""!==o&&""!==n&&e.notify.reset(a,o,n)}))}(app,gee,o)},43208:(e,t,a)=>{var o=a(58133),n=a(31175);!function(e,t,a){"use strict";e.order={errMsg:{},order:function(){var o=function(){if(0!==this.code)6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this);else{if(!e.tmplStores["my-order-card"])return;if(!e.tmplStores["my-order-detail"])return;if(!e.tmplStores["my-order-empty-view"])return;var o=a(".js-order-container"),n=o.find(".js-order-unpaid-list");if(0===this.data.unpaid.length)var i=e.tmplStores["my-order-empty-view"].render({type:"未付款"});else i=e.tmplStores["my-order-card"].render({data:this.data.unpaid});n.html(i),o.find(".js-unpaid-num").text(this.data.unpaid.length),n=o.find(".js-order-expire-list"),i=0===this.data.expired.length?e.tmplStores["my-order-empty-view"].render({type:"已失效"}):e.tmplStores["my-order-card"].render({data:this.data.expired}),n.html(i),o.find(".js-expire-num").text(this.data.expired.length),n=o.find(".js-order-success-list"),i=0===this.data.paid.length?e.tmplStores["my-order-empty-view"].render({type:"已付款"}):e.tmplStores["my-order-card"].render({data:this.data.paid}),n.html(i),o.find(".js-success-num").text(this.data.paid.length),t.init()}};t.yell("member/order",{cate:1},o,o)},loadOneOrder:function(a,o){var n=function(){0!==this.code?e.stdErr(this):e.order.renderOrderDetail(a,this.data[0])};t.yell("member/order",{orderID:o},n,n)},renderOrderDetail:function(a,n){n.sum=0,o.map(n.details,(function(e){n.sum+=e.price}));var i={data:n},r=e.tmplStores["my-order-detail"].render(i),s=a.parents(".js-order-block");e.body.hasClass("desktop")?a.hasClass("open")?(e.track.manuallySendGA("Click","My orders/Close details"),a.removeClass("open").text("展開明細"),a.attr("data-label","My orders/Open details"),s.find(".js-order-detail").addClass("hide"),e.track.init()):(a.addClass("open").text("關閉明細"),a.attr("data-label","My orders/Close details"),0===s.find(".js-order-detail").length?(s.append(r),t.init()):s.find(".js-order-detail").removeClass("hide")):e.modal.show({title:"訂單明細",src:r,type:"html"})},loadPayment:function(a,o){var n=function(){if(0!==this.code)e.stdErr(this);else{var o=this.data[0];e.renderBox(a,{data:o},1),t.init()}};t.yell("member/order",{orderID:o},n,n)},loadCancelOrder:function(a,o,n){var i=function(){0!==this.code?(e.modal.hide(),e.stdErr(this)):(e.renderBox(a,{data:this.data[0]},1),t.init())};t.yell("member/order",{orderID:o},i,i)},removeItem:function(a,o){var n=function(){0!==this.code?e.stdErr(this):(e.order.order(),"function"==typeof o&&o())};t.yell("orders/cancel",{id:a},n,n)}},t.hook("setOrderTab",(function(t){var a=new URLSearchParams(e.win[0].location.search);if(a&&a.get("tab")){var o=a.get("tab");t.find("li[data-type="+o+"]").click()}})),t.hook("myorder/tab",(function(t){if(!t.hasClass("active")){var o=t.data("type"),n=e.win[0].location.pathname,i=e.win[0].location.search;if(new URLSearchParams(i).has("action")){var r=i.split("&");i="?tab="+o+"&"+r[1]+"#orders"}else i="?tab="+o+"#orders";e.redirect({path:n+i}),a(".js-order-container").find(".my-tab li").removeClass("active").end().find(".my-order-list").removeClass("show").end().find(".js-order-"+o+"-list").addClass("show"),t.addClass("active")}})),t.hook("myOrderTab",(function(e){var t="#"+e.attr("data-id");a(".my-order-list").removeClass("active"),a(t).addClass("active"),e.parent().find("li").removeClass("active"),e.addClass("active")})),t.hook("myOrderDetail",(function(a){if(e.tmplStores["my-order-detail"]){var o=a.attr("data-id");e.order.loadOneOrder(a,o),t.init()}})),t.hook("toPayment",(function(e){var t=e.data("id");window.open(window.location.origin+"/member/order/"+t,"付款資訊")})),t.hook("loadCancelOrderModal",(function(t){var o=t.data("id"),n=t.data("code");e.modal.show({src:"cancel-order-modal",size:"new-xs",ta:"v2Modal",cover:"opacity",mpid:o,msid:n}),e.waitFor((function(){return e.order.cancel=a(".js-cancel-order"),e.order.cancel.length>0})).then((function(){e.order.loadCancelOrder(e.order.cancel,o,n)}))})),e.mRoute.addRoute("cancel-order-modal",(function(t){e.modal.show({src:"cancel-order-modal",size:"new-xs",ta:"v2Modal",cover:"opacity",mpid:t.mpid,msid:t.msid}),e.waitFor((function(){return e.order.cancel=a(".js-cancel-order"),e.order.cancel.length>0})).then((function(){e.order.loadCancelOrder(e.order.cancel,t.mpid,t.msid)}))})),t.hook("loadPaymentModal",(function(t){var o=t.data("id");e.modal.show({src:"order-info-modal",size:"v2-m",mpid:o,ta:"v2Modal"}),e.waitFor((function(){return e.order.payment=a(".payment-detail"),e.order.payment.length>0})).then((function(){e.order.loadPayment(e.order.payment,o)}))})),e.mRoute.addRoute("order-info-modal",(function(t){var o=t.mpid;e.modal.show({src:t.modal,size:"v2-m",mpid:o,ta:"v2Modal"}),e.waitFor((function(){return e.isValid(a(".payment-detail").length)})).then((function(){e.order.payment=a(".payment-detail"),e.order.loadPayment(e.order.payment,o)}))})),t.hook("cancelOrder",(function(t){var o=t.data("id");e.order.removeItem(o,(function(){var t=a(".js-notification--unpaid .js-unpaid-count");e.member.current.unpaidCount-1>0?(e.member.current.unpaidCount--,t.text(e.member.current.unpaidCount)):(e.member.current.unpaidCount=0,a(".js-notification--unpaid")&&(a(".js-notification--unpaid").remove(),a("nav").removeClass("s--has-notification"),a("body").removeClass("s--has-notification")))})),e.modal.hide()}))}(app,gee,n)},17203:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.promocode={store:[],ta:{},total:0,currentCode:null,priceTmpl:'<p class="text-right font-xs text-del"><%:~currency(price, "NT")%></p> <p class="text-right font-xs"><%:~currency(-discount, "NT")%></p><p class="text-lightblue text-bold"><%:~currency(price-discount,"NT")%></p>',errMsg:{e5200:"無效的優惠代碼",e5201:"優惠券異常，請聯繫客服",e5202:"抱歉，優惠券不存在",e5203:"優惠券已全數用完",e5204:"不在優惠券使用的名單中",e5205:"優惠券已存在，無法儲存",e5206:"優惠券的課程已被購買",e5207:"優惠券的課程已被購買",e5208:"僅限於購物車頁面輸入使用",e5209:"優惠券已被使用囉",e5210:"抱歉，優惠券不存在",e5211:"不符合結帳課程",e5212:"不符合折扣條件",e5213:"不符合金額規定",e5214:"不符合課堂數量條件"},init:function(){a.extend(e.errMsg,e.promocode.errMsg),e.promocode.ta=a("#promocode")},check:function(o){if(o){a(".promocode-form").find('input[id="promocode"]').val(o);var n=a.templates(e.promocode.priceTmpl),i=function(){if(0!==this.code)switch(e.promocode.currentCode=null,a(".promocode-form").removeClass("s--has-coupon"),this.code){case 5200:case 5201:case 5202:case 5203:case 5204:case 5205:case 5206:case 5207:case 5208:case 5209:case 5210:case 5211:case 5212:case 5213:case 5214:var i=t.iconStore.exclamation;e.showErrMsg(e.promocode.ta,!0,'<svg class="svg-icon exclamation icon-red" viewBox="'.concat(i.viewBox,'">').concat(i.svg,"</svg>").concat(e.errMsg["e"+this.code])),a(".promocode-form").addClass("has-error");break;default:e.stdErr(this)}else e.promocode.total=this.data.amount,e.promocode.showTotal(this.data.pce_name),e.promocode.currentCode=o,this.data.items.length>0&&this.data.items.map((function(e){a("#item-"+e.id+" .price").html(n.render(e))})),a(".promocode-form").addClass("s--has-coupon"),a(".promocode-form").find(".js-coupon-title").text(this.data.pce_name)};e.promocode.total=0,e.promocode.showTotal(),a(".cart-item-list .price").each((function(){a(this).html("<p>"+e.formatHelper.currency(a(this).data("price"),"NT")+"</p>")})),t.yell("promocode/check/"+o,{},i,i)}},displayAvailableDiscount:function(){var o,n;if(a("#campaignID").val())o={campaignID:a("#campaignID").val()},n="campaignID-".concat(a("#campaignID").val());else{if(!a("#courseID").val())return;o={courseID:a("#courseID").val()},n="courseID-".concat(a("#courseID").val())}function i(e,t){e.removeClass("hidden").addClass("shown").find(".js-promotion-val").text(t)}function r(e,t){var a=0,o="";return e.forEach((function(e){var n,i,r=0;"amount"===e.pce_type?r=parseInt(e.pce_type_value):"percent"===e.pce_type&&("0"===e.pce_type_value?r=t:(n=t,i=parseInt(e.pce_type_value),r=Math.round(n*(1-parseInt(i,10)/100)))),r>a&&(a=r,o=e.pce_price_range)})),{highestDiscount:a,highestDiscountPcePriceRange:o}}var s=function(){if(0===this.code&&this.data&&Array.isArray(this.data)){var t=this.data;a.cookie("showHasCouponNotice-".concat(n))||(e.arena.saveNotice.show("你有一張優惠券，快去使用吧",5e3),a.cookie("showHasCouponNotice-".concat(n),!0,{path:"/",expires:1}));var o=window.location.pathname;o.includes("events")||o.includes("campaign")?a(".js-promotion-tag").each((function(){var o=parseInt(a(this).closest(".js-course-card").data("price"),10),n=r(t,o),s=n.highestDiscount,l=n.highestDiscountPcePriceRange,c="再折 ".concat(e.formatHelper.currency(s,"NT"));"1"===l&&(c="最高折 ".concat(e.formatHelper.currency(s,"NT"))),o===s&&(c="可享 100% 折抵"),i(a(this),c)})):o.includes("intro")&&e.waitFor((function(){return e.isValid(e.intro.data.point)})).then((function(){var o=parseInt(e.intro.data.point,10),n=r(t,o),s=n.highestDiscount,l=n.highestDiscountPcePriceRange,c="使用優惠券再折 ".concat(e.formatHelper.currency(s,"NT"));"1"===l&&(c="使用優惠券最高折 ".concat(e.formatHelper.currency(s,"NT"))),o===s&&(c="使用優惠券可享 100% 折抵"),a(".js-promotion-tag").each((function(){i(a(this),c)}))}))}};t.yell("promocode/availableDiscount",o,s,s)},checkValidInput:function(){if(1===e.promocode.ta.length&&""!==e.promocode.ta.val()&&a.validatr.validateElement(e.promocode.ta))return!0},showTotal:function(t){0===e.promocode.total?(e.cart.promocode="",a(".order-promo-txt").addClass("hide"),e.promocode.ta.closest(".form-group").removeClass("has-validated")):(e.cart.promocode=e.promocode.ta.val(),e.promocode.ta.closest(".form-group").addClass("has-validated"),a(".order-promo-txt").removeClass("hide"),a(".promo-total").text(e.formatHelper.currency(e.promocode.total,"NT"))),e.cart.renewSum()}},t.hook("enterSendPromo",(function(t){13===window.event.keyCode&&(event.preventDefault(),e.promocode.checkValidInput()&&e.promocode.check(e.promocode.ta.val()))})),t.hook("checkPromoCode",(function(t){e.promocode.checkValidInput()&&e.promocode.check(e.promocode.ta.val()||e.promocode.currentCode)})),t.hook("enablePromoInput",(function(e){var t=a(".promocode-form .btn"),o=""==e.val();e.closest(".promocode-form").removeClass("has-error"),t.toggleClass("disabled",o)})),t.hook("getPromotion",(function(t){e.member.checkUserStatus(e.promocode.displayAvailableDiscount,null)}))}(app,gee,o)},13205:(e,t,a)=>{var o=a(31175);!function(e,t,o){"use strict";a(21778),e.nqueueFU={};var n=function(a,n,i){a=-1==a.indexOf("://")?t.apiUri+a:a,i=i||"body";var r=("0"+Math.floor(100*Math.random()+1)).substr(-3),s=document.createElement("input");n=n||"default",s.type="file",s.id="fileupload"+r,s.style.cssText="display: none;";var l=o(s).appendTo(i);l.fileupload({url:a,paramName:"file",dataType:"json",maxChunkSize:1048576,tmpName:"",done:function(e,t){t.result&&t.result.code>0&&(c.box.find(".loading:eq(0)").remove(),c.error(t.result.code)),c.next(t)},add:function(e,a){c.jqXHR=a.submit().done((function(e,t,a){})).fail((function(e,a,o){t.clog("QueueFU::fail"),c.box.find(".loading:eq(0)").remove(),"abort"===o&&c.box.find(".files").text(l.tmpName).end().find(".progress .progress-bar").css("width","0%").end(),c.next()})).always((function(e,t,a){}))},start:function(e){l.tmpName=c.box.find(".files").text(),c.box.find(".progress .progress-bar").css("width","0%")},progressall:function(e,t){var a=parseInt(t.loaded/t.total*100,10);c.box.find(".progress .progress-bar").css("width",a+"%").end().find(".progress-txt").text(a+"%")},chunkdone:function(e,t){var a=t.jqXHR.responseJSON;if(a.code>0)return c.abortChunkSend=!0,c.error(a.code),!1},chunksend:function(e,t){if(c.abortChunkSend)return!1}}).prop("disabled",!o.support.fileInput).parent().addClass(o.support.fileInput?void 0:"disabled");var c={box:{},q:[],key:s.id,state:0,abortChunkSend:!1,jqXHR:{},fType:n,errMsg:{e8300:"檔案格式錯誤",e8301:"請上傳小於1.5MB之檔案"},errorUpload:function(e){},afterUpload:function(e){},beforeUpload:function(e){},afterChange:function(e,t){var a=new FileReader,o=t.find(".upload-photo"),n=(t=o.find(".photo-list")).find("li").length;o.show(),0===n&&t.sortable({items:".img-item",scroll:!1,update:function(e,a){c.reSort(t)}}),a.onload=function(e){t.append('<li class="loading"><img style="height: 100%" src="/dist/image/icon/gif-loading.gif"></li>')},a.readAsDataURL(e)},bind:function(e){o(e).each((function(){var e=this,t=o(e).closest(".fileinput-box");o(e).bind("change",c.onChange),t.find(".btn-cancel").bind("click",(function(t){c.stop(e)}))}))},reSort:function(a){return t.clog("queue::qfu.reSort"),a.find(".img-item").each((function(e){o(this).find(".num-label").text(e+1)})),e},onChange:function(e){if(this.files[0]){var t=o(this).closest(".fileinput-box");c.add(this),c.showName(this.files[0],t),c.afterChange(this.files[0],t)}o(this).prop("value","")},start:function(e,t,a){c.box=e.box,"function"==typeof c.beforeUpload&&c.beforeUpload.call(e);var o={fileType:c.fType,tableID:c.box.data("table-id"),rowID:c.box.data("row-id"),title:e.title};c.box.data("image-type")&&(o.imageType=c.box.data("image-type")),l.fileupload("add",{files:e.files,formData:o}),c.remove()},add:function(e,t,a){e.box=a||o(e).closest(".fileinput-box"),e.title=t||"",e.box.find(".btn-cancel, .progress, .progress-txt").removeClass("hide").end().find(".progress-txt").text("0%"),c.q.push(e),0===c.state&&(c.state=1,c.start(e))},remove:function(){c.q.shift()},next:function(e){e&&c.afterUpload.call(c.box,e.result),c.box.length>0&&c.box.find(".btn-cancel, .progress, .progress-txt").addClass("hide"),c.q.length>0?c.start(c.q[0]):(c.state=0,c.box={},c.jqXHR={},c.abortChunkSend=!1)},stop:function(e){var t=0;o.each(c.q,(function(a,n){e===n&&(c.removeName(o(e).closest(".fileinput-box")),c.q.splice(a,1),t=1)})),0===t&&c.jqXHR!=={}&&c.jqXHR.abort()},showName:function(e,t){var a="string"==typeof e?e:e.name;t.find(".files").text(a)},removeName:function(e){e.find(".files").empty()},error:function(t){o.extend(e.errMsg,c.errMsg),c.errorUpload.call(),e.errMsg["e"+t]&&e.modal.show({src:"message-modal",ta:"messageModal",size:"sm",header:"blue",title:"錯誤訊息",message:{content:e.errMsg["e"+t],status:"error"}})},check:function(){return!0}};return c};t.hook("initQFU",(function(t){var a=t.data("ta")||".fileupload",o=t.data("name")||"q1";a.is("input")&&!e.nqueueFU[o]&&(e.nqueueFU[o]=new n("storage/upload","default"),e.nqueueFU[o].bind(a))})),t.hook("imageQ",(function(e){var a="."+e.data("ta")||0,i=new n("storage/upload","default");i.afterUpload=function(a){var n=e.closest("form.fileinput-box").find(".photo-list"),i=n.find("li").length;if(a.data){a.data.num=i||1,a.data.can_del=1;var r=o.templates('<li class="img-item" data-fileid="<%:data.fileID%>" data-href="'.concat(t.apiUri,'download/<%:data.fileName%>">\n                    <span class="num-label"><%:data.num%></span>\n                    <a class="preview-block center-flexbox" href="javascript:;" func="showGallery" data-idx="<%:data.num%>" data-href="').concat(t.apiUri,'download/<%:data.fileName%>">\n                        <img class="img-item--image" src="').concat(t.apiUri,'download/<%:data.fileName%>">\n                    </a>\n                    <button type="button" class="remove-file-btn d-flex-center gee" data-gene="click:popoverDel" data-pid="<%:data.fileID %>" data-type="forums" data-act="delImage">\n                        <icon class="svg-icon close icon-white"></icon>\n                    </button>\n                </li>')).render({data:a.data});n.find(".loading").replaceWith(r),t.init(),i>7&&e.parent().find("label").hide()}},i.bind(a)})),t.hook("homeworkQ",(function(a){t.clog("init::homeworkQ");var o="."+a.data("ta")||0,i=new n("storage/upload","homework",a.closest("div"));i.afterUpload=function(t){if(t.data){var o=a.closest("form.fileinput-box");a.closest(".fileUploader").removeClass("has-error has-pass has-feedback"),o.find(".files").removeClass("hide").end().find(".remove-file-btn").removeClass("hide").attr("data-pid",t.data.fileID).end().find(".uploaded-area").append('<span class="file" data-fid="'+t.data.fileID+'">'),e.homework.render("preview",t.data,a)}},i.errorUpload=function(e){a.siblings("label.fileinput-button").removeClass("hide")},i.beforeUpload=function(e){a.siblings("label.fileinput-button").addClass("hide")},i.bind(o)})),t.hook("homeworkSoundQ",(function(t){if(!t.parents(".js-add-audio-area").hasClass("is-record")){var a="."+t.data("ta")||0,o=new n("storage/upload","homework");o.afterUpload=function(a){var o=t.parents("form");t.removeClass("hide").parents(".js-add-audio-area").removeClass("is-upload").slideUp().end().parents(".add-audio-block").removeClass("loading").find(".stop").addClass("hide"),o.find(".js-preview-audio-area").removeClass("hide"),e.homework.render("sound-preview",{url:a.data.publicPath,sort:o.find(".js-homework-audio-list .item").length,id:a.data.fileID},o.find(".js-preview-audio-area .preview-audio-list"))},o.beforeUpload=function(e){t.addClass("hide").parents(".js-add-audio-area").addClass("is-upload").end().parents(".add-audio-block").addClass("loading").find(".stop").removeClass("hide")},o.bind(a)}})),t.hook("basicQ",(function(t){var a="."+t.data("ta")||0,i=t.attr("name")||"q1";a.match(/\<\%/)||("video"===t.data("type")?e.nqueueFU[i]=new n("files/chunkedUpload","video",t.closest("div")):e.nqueueFU[i]=new n("storage/upload","default",t.closest("div")),e.nqueueFU[i].bind(a),e.nqueueFU[i].afterUpload=function(e){var a=e.data,n=t.closest(".fileUploader"),r="video"===t.data("type")?a.filePath.slice(12):a.fileName;n.removeClass("has-error has-pass has-feedback").find(".upload-progress-info, .js-cancel-btn").addClass("hide").end().find(".upload-success-info, .files, .js-delete-btn").removeClass("hide").end().find(".js-delete-btn").data("pid",a.fileID),o(".js-basic-form").find('input[name="'+i+'"]').val(r),"img"===i&&o(".preview-course-card .cover img").attr("src",a.publicPath)},e.nqueueFU[i].errorUpload=function(e){t.closest(".fileinput-box").find(".upload-success-info, .upload-progress-info, .js-cancel-btn").addClass("hide").end().find(".file-error-msg").removeClass("hide")},e.nqueueFU[i].beforeUpload=function(e){t.closest(".fileinput-box").find(".upload-success-info, .file-error-msg").addClass("hide").end().find(".upload-progress-info, .js-cancel-btn").removeClass("hide")})}))}(app,gee,o)},67166:(e,t,a)=>{var o=a(58133),n=a(31175);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}!function(e,t,a){"use strict";e.rating={current:"",init:function(){e.loadHtml("class/rating/bg",a(".js-tmpl-rating-bg")),e.loadHtml("class/rating/list",a(".js-tmpl-rating-list")),e.loadHtml("class/rating/card",a(".js-tmpl-rating-card"))},profile:function(){0==e.rating.box.find(".js-rating-bg").length&&e.waitFor((function(){return!o.isEmpty(e.intro.data)})).then((function(){e.rating.render("bg",e.intro.data.rating,e.rating.box,!1),e.rating.load()}))},load:function(){var o=e.intro.data.id||a("#courseID").val(),n=function(){a.extend({},e.intro.data.rating,e.rating.first),e.intro.data.rating&&e.intro.data.rating.total&&(e.rating.first.total=e.intro.data.rating.total,e.rating.render("list",e.rating.first,e.rating.box,!1))},i=function(){0!==this.code?6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this):(e.rating.first=this.data,e.rating.first.course_id=o,n())};e.rating.first?n():t.yell("rating/lots",{courseID:o},i,i)},render:function(a,o,n,i){var r="class-rating-"+a;e.waitFor((function(){return void 0!==e.tmplStores[r]})).then((function(){n=n||e.rating.box;var a=e.tmplStores[r].render({data:o});i?n.html(a):n.append(a),t.init()}))},showRatingDtl:function(o,n){var i;i=e.isInPage("classroom")?".js-classroom-header":'.js-my-course-card[data-id="'.concat(o,'"]'),e.waitFor((function(){return a(i).length>0}),50).then((function(){var s=a(i);e.waitFor((function(){return s.find(".js-course-title").length>0})).then((function(){var a=s.find(".js-rating-btn").data("reset"),i={course_name:s.find(".js-course-title").text(),can_reset:a,course_id:o,id:n},l=function(){var t=r(r({},i),this.data[0]);e.modal.showRatingDtlModal(o,n,t)};t.yell("rating/one",{id:n},l,l)}))}))}},t.hook("rating/init",(function(t){e.rating.box=t;var a=t.attr("id");a&&e.bar.action("#"+a,(function(){e.rating.profile(),e.more.page=0})),e.rating.init()})),t.hook("rating/select",(function(e){var t=e.data("value");e.find("#star"+t).prop("checked",!0)})),t.hook("rating/list",(function(t){0===t.find(".rating-list-container").length&&(e.rating.box=t,e.more.page=0,e.loadHtml("class/rating/list",a(".js-tmpl-rating-list")),e.loadHtml("class/rating/card",a(".js-tmpl-rating-card")),e.rating.load())})),e.mRoute.addRoute("rating-list-modal",(function(){e.modal.showRatingListModal()})),t.hook("rating/dtl",(function(t){var o,n=t.data("id");o=e.isInPage("classroom")?a("#courseID").val():t.closest(".js-my-course-card").data("id"),e.rating.showRatingDtl(o,n)})),e.mRoute.addRoute("rating-dtl-modal",(function(t){e.rating.showRatingDtl(t.mpid,t.msid)})),t.hook("rating/confirm",(function(t){e.modal.hide("defaultModal");var o=t.data("id"),n=t.data("cid");e.modal.show({src:"reset-rating-modal",ta:"messageModal",header:"blue",size:"sm",title:"重置課堂評價？"}),e.waitFor((function(){return a(".js-reset-rating-box").length>0})).then((function(){a(".js-reset-rating-btn").data("id",o).data("cid",n)}))})),t.hook("rating/replybox",(function(e){e.parent().find(".reply-form").removeClass("hide").find("textarea").focus(),e.remove()})),t.hook("rating/reply",(function(o){if(13===o.event.which&&!o.event.shiftKey){o.event.preventDefault();var n=a.trim(o.val());if(""==n)return!1;var i=o.closest(".js-rating-block"),r=function(){0!==this.code?e.stdErr(this):(o.parents(".rating-reply-box").remove(),e.rating.render("reply",this.data,i.find(".block-inner"),!1))};t.yell("rating/reply",{id:i.data("id"),courseID:a("#courseID").val(),content:n},r,r)}})),t.hook("rating/confirmDel",(function(t){e.rating.current=t.closest(".js-rating-block").data("id"),e.modal.show({src:"confirm-del-rating-modal",title:"刪除評價回覆？",size:"sm",cover:"opacity",ta:"messageModal",header:"blue"})})),t.hook("rating/del",(function(o){var n=e.rating.current;if(n){var i=function(){if(0!==this.code)e.stdErr(this);else{e.modal.hide();var t=a('.js-rating-block[data-id="'+n+'"]');t.find(".reply").remove(),e.rating.render("reply-box",a(".my-avatar").attr("src"),t.find(".block-inner"),!1),e.rating.current=""}};t.yell("teacher/resetReply",{id:n,courseID:a("#courseID").val()},i,i)}}))}(app,gee,n)},85251:(e,t,a)=>{var o=a(58133),n=a(31175);!function(e,t,a){"use strict";e.scroll={introBarTop:0,introBar:a(".course-intro-tab-sticky"),init:function(){if(e.scroll.navHeight=a(".js-toolbar").outerHeight(),e.scroll.paddingBox=null,e.scroll.isClassroomHeader=a(".js-classroom-header").length>0,e.scroll.isManageTab=a(".js-classroom-manage-tab").length>0,e.scroll.isArticle=a(".js-article-sidebar").length>0,e.scroll.isClassEditTab=a(".js-class-edit-header").length>0,e.scroll.isCourseIntro=e.body.hasClass("intro"),e.scroll.isSubNav=e.body.hasClass("js-scroll-subnav"),e.scroll.isSubNav&&(e.scroll.nav=a(".js-toolbar"),e.scroll.ta=a(".js-subnav"),"desktop"==e.screen?(e.scroll.carousel=a("#carousel").length?250:0,e.scroll.carouselTab=a(".teacher-category-block").length?a(".teacher-category-block").outerHeight():0):(e.scroll.carousel=a("#carousel").length?145:0,e.scroll.carouselTab=a(".teacher-category-block").length?a(".teacher-category-block").outerHeight():0),"desktop"==e.screen?e.scroll.intro=a(".hit-course-title").length?a(".hit-course-title").outerHeight()+30:0:e.scroll.intro=a(".hit-course-title").length?a(".hit-course-title").outerHeight():0,"desktop"==e.screen?e.scroll.faq=a(".js-faq-header").length?118:0:e.scroll.faq=a(".js-faq-header").length?71:0,"desktop"==e.screen?e.scroll.term=a(".js-term-header").length?a(".js-term-header h1").outerHeight()+30:0:e.scroll.term=a(".js-term-header").length?71:0,e.scroll.padding=e.scroll.carousel+e.scroll.carouselTab+e.scroll.intro+e.scroll.taTitle+e.scroll.category+e.scroll.subTitle+e.scroll.faq+e.scroll.term,e.scroll.padding>0&&e.scroll.ta.after('<div id="js-scroll-padding" class="hide" style="height:'+(e.scroll.padding-e.scroll.carousel+e.scroll.carouselTab)+'px;"></div>')),e.scroll.isArticle&&"desktop"==e.screen){e.scroll.ta=a(".js-article-sidebar"),e.scroll.ta.css({width:e.scroll.ta.width()}),e.scroll.taLeft=e.scroll.ta.position().left;var t=a(".article-hero-photo").height();a(".article-hero-photo").length?e.scroll.padding=e.scroll.navHeight+t:e.scroll.padding=e.scroll.navHeight,e.scroll.padding>0&&(e.scroll.ta.after('<div id="js-scroll-padding" class="hide" style="height:90px;"></div>'),e.scroll.paddingBox=a("#js-scroll-padding"))}e.scroll.isManageTab&&(e.scroll.ta=a(".js-classroom-manage-tab"),e.scroll.padding=e.scroll.navHeight+("desktop"===e.screen?68:0),e.scroll.padding>0&&(e.scroll.ta.after('<div id="js-scroll-padding" class="hide" style="height:90px;"></div>'),e.scroll.paddingBox=a("#js-scroll-padding"))),e.scroll.isClassroomHeader&&(e.scroll.nav=a(".js-toolbar"),e.scroll.ta=a(".js-classroom-header"),e.scroll.padding=e.scroll.navHeight+("desktop"===e.screen?129:134),e.scroll.padding>0&&(e.scroll.ta.after('<div id="js-scroll-padding" class="hide" style="height:90px;"></div>'),e.scroll.paddingBox=a("#js-scroll-padding"))),e.scroll.isClassEditTab&&(e.scroll.ta=a(".js-class-edit-header"),e.scroll.padding=0,e.scroll.padding>0&&(e.scroll.ta.after('<div id="js-scroll-padding" class="hide" style="height:136px;"></div>'),e.scroll.paddingBox=a("#js-scroll-padding")));var n=0;a(window).bind("scroll",o.throttle((function(){var t=e.win.scrollTop(),o=e.win.height(),i=e.docu.height();if(e.scroll.height=i-o,e.scroll.isSubNav)if("desktop"===e.screen){var r=e.scroll.ta.parent().width();t>=e.scroll.padding?(a("#js-scroll-padding").removeClass("hide"),e.scroll.ta.addClass("fixed"),e.scroll.ta.width(r)):(a("#js-scroll-padding").addClass("hide"),e.scroll.ta.removeClass("fixed"),e.scroll.ta.width("auto"))}else t>=e.scroll.padding&&n<t?(e.scroll.nav.addClass("hide"),e.scroll.ta.addClass("fixed").removeClass("fixed2"),a("#js-scroll-padding").removeClass("hide")):n>=e.scroll.padding?(a("#js-scroll-padding").removeClass("hide"),e.scroll.nav.removeClass("hide"),e.scroll.ta.addClass("fixed2")):(a("#js-scroll-padding").addClass("hide"),e.scroll.ta.removeClass("fixed fixed2"));(e.scroll.isClassroomHeader||e.scroll.isManageTab)&&(e.isInPage("classroomv3")||(t>=e.scroll.ta.height()-e.scroll.padding+e.scroll.navHeight+81?(e.scroll.nav.addClass("hide"),e.scroll.ta.addClass("fixed"),a(".course-cover-block__video").css("display","none"),e.scroll.paddingBox.removeClass("hide")):(e.scroll.nav.removeClass("hide"),e.scroll.ta.removeClass("fixed"),e.scroll.paddingBox.addClass("hide"),a(".course-cover-block__video").css("display","block")))),e.scroll.isClassEditTab&&(n<t?(e.scroll.ta.removeClass("fixed"),a(".js-edit-class-container").css("padding-top",0),t>=136&&a(".js-class-edit-sidebar").find(".js-sync-course-name").removeClass("hide").end().find(".inner").css("top",0)):(e.scroll.ta.addClass("fixed"),a(".js-edit-class-container").css("padding-top",160),a(".js-class-edit-sidebar").find(".js-sync-course-name").addClass("hide").end().find(".inner").attr("style",""))),n=t}),200))},introScroll:function(){if(e.scroll.navHeight=a(".js-toolbar").outerHeight(),e.scroll.paddingBox=null,e.scroll.isCourseIntro=e.body.hasClass("intro"),e.scroll.isCourseIntro){e.scroll.ta=e.body.find(".js-toolbar"),e.scroll.taHeight=e.scroll.ta.find(".toolbar-inner").height(),e.scroll.padding=0,a(".course-intro-tab-sticky"),e.scroll.introBar.outerHeight();var t=a(".intro-load-package").outerHeight();e.scroll.introBarTop="desktop"===e.screen?e.scroll.introBar.position().top:e.scroll.introBar.position().top+e.scroll.taHeight+t,"desktop"===e.screen?e.scroll.introBar.after('<div id="js-scroll-padding" class="hide" style="height:90px;"></div>'):e.scroll.introBar.after('<div id="js-scroll-padding" class="hide" style="height:41px;"></div>')}var n=0;a(window).bind("scroll",o.throttle((function(){var t=e.win.scrollTop(),o=e.win.height(),i=e.docu.height();if(e.scroll.height=i-o,e.scroll.isCourseIntro){if("desktop"===e.screen){var r=t+o;o=i-300,(u=a(".desktop .desktop-sidebar .scroll-top-btn")).toggleClass("hide",r<=o)}var s=!!e.scroll.ta.find(".notification").length,l=a(".course-intro-content").outerWidth();if("desktop"===e.screen)var c=s?130:70;else{var d=a(".mobile-fixed-course-info"),u=a(".mobile .js-mobile-to-top .scroll-top-btn");c=0}t>e.scroll.introBarTop?(e.scroll.introBar.addClass("fixed").css("top",c).css("width",l).end().find(".course-intro-tab").addClass("active").toggleClass("is-valid-f",!1===e.member.current.verify),a("#js-scroll-padding").removeClass("hide"),"desktop"!==e.screen&&(u.removeClass("hide"),d.addClass("show-info"))):(e.scroll.introBar.removeClass("fixed").css("top","auto").css("width",l).end().find(".course-intro-tab").removeClass("active"),a("#js-scroll-padding").addClass("hide"),"desktop"!==e.screen&&(u.addClass("hide"),d.removeClass("show-info"))),t>=e.scroll.taHeight&&"desktop"!==e.screen?(n>t&&(e.scroll.ta.removeClass("hide"),e.scroll.introBar.hasClass("fixed")&&e.scroll.introBar.css("top",e.scroll.taHeight)),s&&e.body.find(".wrapper").removeClass("validation")):e.scroll.ta.removeClass("hide")}n=t}),200))}}}(app,gee,n)},78580:(e,t,a)=>{a(31175),function(e,t,a){"use strict";e.search={},t.hook("toSearch",(function(e){var t=e.event.keyCode||e.event.which;if(!e.event.type.match(/key/)||13===t){var a=e.closest(".search-form").find("[name=q]").val().trim();""!==a&&(location.href="/search?q="+a)}}))}(app,gee)},58418:(e,t,a)=>{a(31175),function(e,t,a){"use strict";t.hook("initSlick",(function(e){}))}(app,gee)},12907:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.sticky={header:[],init:function(o){if(o=a.extend({},{header:null,name:"",class:"",gutters:!1,bottom:160,afterClone:function(){},onOffset:function(){},offOffset:function(){}},o),!e.sticky.header[o.name])if(""!==o.name){o.mainClass="clone"+e.sticky.rnd(),o.clone=o.header.clone().addClass(o.mainClass).removeClass("gee").prop("data-gene",null).prop("id",null),"function"==typeof o.afterClone&&o.afterClone(o),o.body="sticky"+e.sticky.rnd(),o.height=a(document).outerHeight(),e.sticky.header[o.name]=o;var n="origin"+e.sticky.rnd();o.header.before(o.clone).addClass(n),a(document).ready((function(){a(window).on("resize",(function(){e.sticky.setOffset(o)})),e.sticky.setOffset(o);var t=(a(".toolbar:visible").outerHeight()||0)+parseInt(a(".container").css("padding-top"),10)-4;e.sticky.addSheet("body."+o.body+" ."+o.mainClass+" { top: "+t+"px; visibility: visible; }"),e.sticky.addSheet("body."+o.body+" ."+n+" { visibility: hidden; }"),e.sticky.addSheet("."+o.mainClass+" { position: fixed; top: -1000px; left: 0; right: 0; z-index: 10; visibility: hidden; }"),!0===o.gutters&&e.sticky.addSheet("body.tablet ."+o.mainClass+":before , body.desktop ."+o.mainClass+':before { content: ""; background: #f7f8fa; position: fixed; top: 56px; left: -2000px; height: 34px; width: 4000px; }'),e.sticky.bind(o.body,n,o.name)}))}else t.clog("need name.")},rnd:function(){return("0"+Math.floor(100*Math.random()+1)).substr(-3)},setOffset:function(e){var t=e.header.offset()||{left:0};e.clone.css({width:e.header.width(),left:t.left||0})},bind:function(t,o,n){var i=a("."+o),r=i.position()||{top:0};a(window).scroll((function(){r=i.position()||{top:0};var o=a(window).scrollTop(),s=(i.outerHeight(),o>(r.top||0)),l=o>(a(document).outerHeight()||0)-(a(window).outerHeight()||0);s&&!l?(e.body.toggleClass(t,!0).toggleClass(t+"_bottom",!1),"function"==typeof e.sticky.header[n].onOffset&&e.sticky.header[n].onOffset()):l?e.body.toggleClass(t,!1).toggleClass(t+"_bottom",!0):s||(e.body.toggleClass(t,!1),"function"==typeof e.sticky.header[n].offOffset&&e.sticky.header[n].offOffset())}))},addSheet:function(e){var t=document.styleSheets[0];t.insertRule(e,t.cssRules.length)}},t.hook("initSticky",(function(t){var a=t.attr("id");a&&e.sticky.init({header:t,name:a,class:t.data("class")})}))}(app,gee,o)},57827:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.demo={id:0,player:{},data:{},init:function(t){e.demo.player=e.studioIntro[t],e.demo.get(),e.demo.box=e.studioIntro.box.closest(".js-demo");var o=e.intro.data.isStudent||e.intro.data.isTeacher,n=e.intro.data.point>0?e.formatHelper.currency(e.intro.data.point,"NT"):"Free";e.demo.box.find(".js-demo-title").html(e.intro.data.name).end().find(".js-demo-price").html(n).end().find(".js-demo-course").toggleClass("hide",!o).end().find(".js-demo-buyer").toggleClass("hide",o).attr("data-item_id",e.intro.data.id),e.intro.data.pointFake>0&&e.demo.box.find(".js-demo-price").append(a("<s>").text(e.formatHelper.currency(e.intro.data.pointFake,"NT")))},get:function(a,o){o=o||"lesson",a=a||e.demo.id,e.demo.id=a,e.demo.type=o;var n=function(){e.demo.set()},i=function(){0!==this.code?e.stdErr(this):this.data?(e.demo.data[a]=this.data,n()):e.modal.show({src:"message-modal",ta:"messageModal",size:"sm",header:"blue",title:"錯誤訊息",message:{content:"尚未開放試看",status:"error"}})};e.demo.data[a]?n():t.yell("video/one",{id:a,type:o},i,i)},set:function(){var t=e.demo.data[e.demo.id];t.id="videodemo";var o="li.demo[data-id="+e.demo.id+"]",n=a(o).find(".no").text(),i=a(".course-title").text();e.studioIntro.setupPlayer(t,n,i,"課程試看")},active:function(t){var a=(t=t||e.demo.box.find(".js-demo-list")).find("li.chapter[data-id="+e.demo.id+"]").position().top;t.find("li.chapter").removeClass("active").end().find("li.chapter[data-id="+e.demo.id+"]").addClass("active"),a>=t.height()&&t.scrollTop(a)},list:function(){var a=e.demo.box.find(".js-demo-list");if(!(a.find("li").length>2)){var o=function(){e.demo.render(e.demo.data.list,a,"demo-chapter-item"),a.find("li").length>2&&(a.find(".js-demo-loading").removeClass("show"),e.demo.active(a))},n=function(){if(0!==this.code)e.stdErr(this);else{if(e.demo.data.list&&e.demo.data.list.length>1)return;e.demo.data.list=this.data.rows,o()}};e.demo.data.list?o():t.yell("course/data/chapter",{id:e.intro.data.id},n,n)}},render:function(t,a,o){if(e.tmplStores[o]&&t){var n=e.tmplStores[o].render({data:t||e.demo.data.list});a.append(n)}},showDemo:function(a){e.member.checkUserStatus((function(){e.demo.id=a.mpid||a.data("id"),e.modal.slienceMode=1,e.modal.show({src:"preview-player-modal",cover:"black",mpid:e.demo.id})}),(function(){t.exe("attemptToLogin",null)}))}},t.hook("demo/show",(function(t){e.demo.showDemo(t)})),e.mRoute.addRoute("preview-player-modal",e.demo.showDemo),t.hook("demo/list",(function(t){e.waitFor(2).then((function(){e.demo.list()}))})),t.hook("demo/click",(function(t){var a=t.data("id"),o=t.data("type"),n={mpid:a};e.demo.showDemo(n),e.demo.get(a,o),e.demo.active()}))}(app,gee,o)},87777:(e,t,a)=>{var o=a(58133),n=a(62163),i=a(31175);!function(e,t,a){"use strict";e.lecture={player:{},data:{},init:function(t){e.loadHtml("studio/chapter-list",a(".js-tmpl-chapter-list")),e.loadHtml("course-card",a(".js-tmpl-course-card")),e.loadHtml("studio/quiz",a(".js-tmpl-quiz")),e.lecture.list=a(".js-player-sidebar"),e.lecture.box=a(".js-player-area"),e.lecture.player=e.studio[t],e.lecture.player.autostart=!0,e.lecture.player.onReady=e.lecture.stats.reset,e.lecture.player.onComplete=e.lecture.next.action,e.lecture.player.onPlay=e.lecture.stats.play,e.lecture.player.onPause=e.lecture.stats.pause,e.lecture.player.onSeek=e.lecture.stats.seek,e.lecture.player.onFirst=e.lecture.stats.first,window.onunload=e.lecture.stats.leave,e.lecture.set.viewed({id:a("#courseID").val()}),e.lecture.get.list()},showInfoBar:function(){a(".js-player-area .back-list-btn").removeClass("active"),e.lecture.list.find(".js-sidebar-list").toggleClass("hide",!0),e.lecture.list.find(".js-sidebar-info").animate({right:"0"},{duration:200});var t=a(".player-toolbar");t.find(".toolbar__all").removeClass("hide"),t.find(".toolbar__play").addClass("hide")},stats:{data:{},play:function(){if(o.isEmpty(e.lecture.stats.data))e.lecture.stats.reset();else{var t=e.lecture.stats.data;t.pauseTime=n().format("x"),e.lecture.stats.data=t}e.lecture.list.find('.js-sidebar-list .unit-block[data-id="'+e.lecture.current.id+'"]').find(".js-unit-pause").toggleClass("hide",!1).end().find(".js-unit-play").toggleClass("hide",!0)},seek:function(){var t=e.lecture.stats.data,a=n().format("x");t.pauseTime=a,t.playTime+=a-t.pauseTime,e.lecture.stats.data=t},pause:function(){var t=e.lecture.stats.data,a=n().format("x");t.playTime+=a-t.pauseTime,t.stayTime+=a-t.firstTime,e.lecture.stats.data=t,e.lecture.list.find('.js-sidebar-list .unit-block[data-id="'+e.lecture.current.id+'"]').find(".js-unit-play").toggleClass("hide",!1).end().find(".js-unit-pause").toggleClass("hide",!0)},reset:function(){e.lecture.stats.data={playTime:0,stayTime:0,pauseTime:n().format("x"),firstTime:n().format("x")}},first:function(){e.lecture.player.meta.seek?(e.lecture.player.set_marker("note",e.lecture.player.meta.seek),e.waitFor(3).then((function(){a(".progress-tag.note").hide()}))):e.lecture.data.current.position&&(e.lecture.player.set_marker("last",e.lecture.data.current.position),e.waitFor(3).then((function(){a(".progress-tag.last").hide()})))},leave:function(t){e.lecture.player.that.pause();var a=new FormData;a.append("id",e.lecture.current.id),a.append("lastTime",Math.floor(e.lecture.player.that.getPosition())),a.append("playTime",Math.floor(e.lecture.stats.data.playTime)),a.append("stayTime",Math.floor(e.lecture.stats.data.stayTime)),a.append("playFinish",0),e.lecture.set.last(a)}},current:{id:0,index:0,set:function(t){e.lecture.current.id=t,e.lecture.current.index=o.findIndex(e.lecture.data.list,{id:t})},get:function(){return e.lecture.current.id}},next:{box:{},timer:{},action:function(){var t=new FormData;t.append("id",e.lecture.current.id),t.append("lastTime",Math.floor(e.lecture.player.that.getPosition())),t.append("playTime",Math.floor(e.lecture.stats.data.playTime)),t.append("stayTime",Math.floor(e.lecture.stats.data.stayTime)),t.append("playFinish",1),e.lecture.set.last(t);var a=e.lecture.chapter.index(e.lecture.current.id),o=e.lecture.list.find('.js-sidebar-list .unit-block[data-id="'+e.lecture.current.id+'"]');e.lecture.data.list[a].isDone=!0,e.lecture.next.box=e.lecture.box.find(".js-player-cover"),1==e.lecture.next.isLast()?e.lecture.get.ad():(e.lecture.render("next",{},e.lecture.next.box,!0),e.lecture.next.timer=setInterval(e.lecture.next.tick,1e3),e.lecture.next.box.toggleClass("hide",!1)),e.lecture.render("tag",{tag:"complete",text:"已完成"},o.find(".js-tag-area"),!0)},tick:function(){var t=e.lecture.next.box.find(".js-player-countdown"),a=parseInt(t.html());a-1==0?(clearInterval(e.lecture.next.timer),e.lecture.next.done()):(a-=1,t.html(a))},isLast:function(){return e.lecture.current.index==e.lecture.data.list.length-1},done:function(){var a=e.lecture.chapter.next(),o=e.lecture.list.find('.js-sidebar-list .unit-block[data-id="'+a+'"]');clearInterval(e.lecture.next.timer),t["lecture/play"](o),e.waitFor(.5).then((function(){e.lecture.next.box.toggleClass("hide",!0)}))}},chapter:{index:function(t){return o.findIndex(e.lecture.data.list,{id:t})},data:function(t){t=t||e.lecture.current.id;var a=o.findIndex(e.lecture.data.list,{id:t});return e.lecture.data.list[a]},next:function(t){if((t=t||e.lecture.current.index)!==e.lecture.data.list.length-1){var a=e.lecture.data.list[t+1];return a&&a.isUnit||(a=e.lecture.data.list[t+2])&&a.isUnit?a.id:void 0}},scrollTo:function(t){t=t||e.lecture.current.id;for(var o=0,n=e.lecture.chapter.index(t);n>=0;n--)if(0==e.lecture.data.list[n].isUnit){o=n;break}var i=e.lecture.list.find(".js-sidebar-list"),r=i.find('.unit-block[data-id="'+t+'"]'),s=i.find('.sticky[data-id="'+e.lecture.data.list[o].id+'"]');"desktop"==e.screen?e.lecture.list.animate({scrollTop:"+="+(r.offset().top-s.outerHeight())},"slow"):e.lecture.list.animate({scrollTop:"+="+(r.offset().top-a(".player-container").outerHeight()-s.outerHeight())},"slow")},reset:function(t,a){t=t||e.lecture.current.id,a=a||!1;var o=e.lecture.list.find(".js-sidebar-list .tag.play"),n=o.closest(".unit-block"),i=e.lecture.chapter.data(t),r=e.lecture.current.id==t;0==o.length&&(n=e.lecture.list.find('.js-sidebar-list .unit-block[data-id="'+t+'"]')),n.toggleClass("active",!1).find(".js-tag-area").html("").end().find(".js-unit-play").toggleClass("hide",!0).end().find(".js-unit-pause").toggleClass("hide",!(r&&a)).end().find(".js-unit-sort").toggleClass("hide",r&&a),r&&a?(n.toggleClass("active",!0),e.lecture.render("tag",{tag:"play",text:"播放中"},n.find(".js-tag-area"),!0),n.off("mouseenter").off("mouseleave").on("mouseleave",(function(){n.off("mouseleave").on("mouseenter",e.lecture.unit.mousein).on("mouseleave",e.lecture.unit.mouseout)}))):i&&i.isDone&&e.lecture.render("tag",{tag:"complete",text:"已完成"},n.find(".js-tag-area"),!0)}},get:{list:function(){var o={id:e.lecture.player.meta.course_id},n=function(){if(0!==this.code)6100===this.code?t.exe("attemptToLogin",null):e.stdErr(this);else{!function(t){if(e.lecture.data.list=t.chapter,e.lecture.data.current=t.current,t.current.video)if(t.current.restricted)e.stdErr({code:6205});else{var o=window.location.pathname.slice(1).split("/");3===o.length&&(o[3]=t.current.id,window.history.pushState({ta:"lecture"},null,window.location.origin+"/"+o.join("/")));for(var n=0;n<t.chapter.length;n++)if(t.chapter[n].id===t.current.id)var i=t.chapter[n].sort;var r=a("h1.player-title").text();e.lecture.player.setup(t.current.video,t.current.subtitle,[],t.current.position,i,"課程影片",r),e.modal.onShown=function(){1==e.lecture.player.already&&e.lecture.player.that.pause()}}else e.stdErr({code:7112});e.lecture.current.set(t.current.id),e.lecture.render("list",{list:t.chapter,current:t.current},e.lecture.list.find(".js-sidebar-list"),!0),e.lecture.list.find(".js-sidebar-loading").empty(),e.lecture.list.find(".js-sidebar-loading").toggleClass("hide",!0),"desktop"!=e.screen&&e.lecture.chapter.scrollTo(e.lecture.current.id);var s=a(".unit-block[data-id="+e.lecture.current.id+"]").find(".unit-info .unit-title").text().trim(),l=a(".player");l.append('<div class="lecture-bg"><p class="lecture-title">'+s+"</p></div>"),l.mousemove((function(t){a(".lecture-bg").addClass("show"),e.waitFor(2.3).then((function(){a(".lecture-bg").removeClass("show")}))})),e.lecture.updateLite()}(this.data);var o='<input type="hidden" id="content" value="'+this.data.current.video[0].file.split("/")[4]+'">';a(".player-page").append(o)}};e.lecture.player.meta.chapter_id>0&&(o=a.extend({},o,{chapter_id:e.lecture.player.meta.chapter_id})),e.lecture.player.meta.seek>0&&(o=a.extend({},o,{seek:e.lecture.player.meta.seek})),t.yell("chapter/list",o,n,n)},all:function(o){if("desktop"===e.screen){o=o||e.lecture.current.id;var n=function(){var n,i,r;0!==this.code?6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this):(n=this.data,i=e.lecture.list.find(".js-sidebar-list").find('.unit-block[data-id="'+o+'"]').prevAll(".chapter:first"),r=a("#courseID").val(),e.lecture.render("info",{data:e.lecture.chapter.data(o),title:a.trim(i.find(".chapter-title").text()),info:n,current:e.lecture.current.id,isDone:e.lecture.chapter.data(o).isDone,isPlaying:e.lecture.current.id==o,courseID:r},e.lecture.list.find(".js-sidebar-info"),!0),e.lecture.showInfoBar(),a(".bs-tip-show").tooltip())};t.yell("chapter/all/get",{id:o},n,n)}},video:function(o,n){o=o||e.lecture.current.id;var i=function(){if(0!==this.code)e.stdErr(this);else{if(this.data.restricted){e.stdErr({code:6205});var t=a(".js-video-unit-block[data-id='".concat(e.lecture.current.id,"']")).find(".unit-title").text().trim().match(/\d+/)[0],i=a("h1.player-title").text();return void e.lecture.player.setup(e.lecture.data.current.video,e.lecture.data.current.subtitle,[],0,t,"課程影片",i,!1)}!function(t){if(t&&t.video){e.lecture.stats.reset();var i=a(".js-video-unit-block[data-id='".concat(o,"']")).find(".unit-title").text().trim().match(/\d+/)[0],r=a("h1.player-title").text();e.lecture.player.setup(t.video,t.subtitle,[],0,i,"課程影片",r),n()}else e.stdErr({code:7112})}(this.data)}};t.yell("video/one",{id:o,type:"lesson"},i,i)},ad:function(){var a=function(){var t;0!==this.code?e.stdErr(this):(t=this.data,e.lecture.render("last",t,e.lecture.next.box,!0),e.lecture.next.box.toggleClass("hide",!1))};t.yell("banner/ad",{id:e.lecture.player.meta.course_id},a,a)},quiz:function(o){var n=function(){var t;0!==this.code?e.stdErr(this):(t=this.data,a.each(t.quiz,(function(e,t){a.each(t.options,(function(e,a){t.options[e]={name:"quiz_"+t.id,type:t.type,title:a,correct:-1!==t.answers.indexOf(e)}}))})),o.currentTime=new Date,"undefined"!=t&&(e.lecture.render("quiz",{unit:o,list:t},e.lecture.box.find(".player"),!1),1==e.lecture.player.already&&e.lecture.player.that.pause()))};t.yell("quiz/get",{id:o.id,examID:0},n,n)}},set:{quiz:function(){},feedback:function(o){var n=a.Deferred();o+="&id="+e.lecture.player.meta.course_id;var i=function(){0!==this.code?(n.reject(),e.stdErr(this)):(n.resolve(),1==e.lecture.player.already&&e.lecture.player.that.play())};return t.yell("chapter/feedback",o,i,i),n.promise()},complete:function(o){var n=a.Deferred(),i=function(){0!==this.code?(n.reject(),6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this)):n.resolve()};return t.yell("chapter/complete",o,i,i),n.promise()},last:function(e){navigator.sendBeacon("/chapter/last",e)},viewed:function(o){var n=a.Deferred(),i=function(){0!==this.code?(n.reject(),e.stdErr(this)):n.resolve()};return t.yell("player/viewed",o,i,i),n.promise()},discussion:function(a){var o=function(){0!==this.code&&(6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this))};t.yell("forums/issue/set",a,o,o)}},del:{},tag:{mousein:function(){var e=a(this);e.is(".complete")&&e.toggleClass("complete",!1).toggleClass("complete-confirm",!0).html("已完成")},mouseout:function(){var e=a(this);e.is(".complete-confirm")&&e.toggleClass("complete-confirm",!1).toggleClass("complete",!0).html("已完成")}},unit:{mousein:function(){var t=a(this);t.find(".js-fun-btn").toggleClass("hide",!1),t.is(".active")||t.find(".js-unit-sort").toggleClass("hide",!0).end().find(".js-unit-play").toggleClass("hide",!1).end().find(".js-unit-pause").toggleClass("hide",!0),0==t.find(".tag").length&&(t.toggleClass("uncomplete-confirm",!0),e.lecture.render("tag",{},t.find(".js-tag-area"),!0))},mouseout:function(){var e=a(this);e.find(".js-fun-btn").toggleClass("hide",!0),e.is(".active")||e.find(".js-unit-sort").toggleClass("hide",!1).end().find(".js-unit-play").toggleClass("hide",!0).end().find(".js-unit-pause").toggleClass("hide",!0),e.is(".uncomplete-confirm")&&(e.toggleClass("uncomplete-confirm",!1),e.is(".active")||e.find(".js-tag-area").html(""))}},updateLite:function(){var e=window.location.pathname.split("/").filter(Boolean),t=e[2],o=e[3],n="/litePlayer/index.html?course=".concat(t,"&chapter=").concat(o);a("#liteLink").attr("href",n)},bind:function(t,a){var o=e.lecture.list.find(".js-sidebar-list");switch(t){case"tag":var n=o.find(".sticky");stickyfill.add(n),o.find(".tag").on("mouseenter",e.lecture.tag.mousein).on("mouseleave",e.lecture.tag.mouseout);break;case"unit":o.find(".unit-block").on("mouseenter",e.lecture.unit.mousein).on("mouseleave",e.lecture.unit.mouseout)}},render:function(o,n,i,r){switch(a(".bs-tip-show").tooltip(),o){case"list":var s="studio-chapter-list";if(!e.tmplStores[s])return;i=i||e.lecture.list.find(".js-sidebar-list");var l=e.tmplStores[s].render({data:n,current:e.lecture.current.get()});r?i.html(l):i.append(l);var c=a("html").outerHeight(),d=a(".player-container").height(),u=i.parents(".player-sidebar"),m=c-d+30;a(window).width()<=991&&u.css("height",m),e.lecture.bind("tag"),e.lecture.bind("unit");break;case"tag":if(s="studio-chapter-tag",!e.tmplStores[s])return;if(n=n.tag?n:{tag:"uncomplete-confirm",text:"標記完成"},l=e.tmplStores[s].render({data:n}),r){var h=a(l).on("mouseenter",e.lecture.tag.mousein).on("mouseleave",e.lecture.tag.mouseout);i.html("").append(h)}else i.append(l);break;case"info":if(s="studio-chapter-info",!e.tmplStores[s])return;n=n||{},l=e.tmplStores[s].render({data:n}),r?i.html(l):i.append(l),c=a("html").outerHeight();var p=a(".unit-container"),f=p.find(".chapter-title").outerHeight(),v=p.find(".unit-block").outerHeight(),g=p.find(".all__note").outerHeight(),b=a(".player-sidebar .unit-manage-container .center-message.note"),w=a(".player-sidebar .unit-manage-container .note-list.js-note-list"),y=c-f-v-g;a(window).width()>=991&&(b.css("height",y),w.css("height",y)),n.data.id==n.current&&e.note.bind();break;case"next":if(s="studio-chapter-next",!e.tmplStores[s])return;n=n||{},l=e.tmplStores[s].render({data:n}),r?i.html(l):i.append(l);var k=localStorage.getItem("autostart")||"true";k="true"==k,e.lecture.player.autostart=k,e.lecture.autostartStatus(k);break;case"last":if(s="studio-chapter-last",!e.tmplStores[s])return;n=n||{},l=e.tmplStores[s].render({data:n}),r?i.html(l):i.append(l),c=a("html").outerHeight();var C=a(".player-toolbar").outerHeight(),x=a(".player-last-container"),j=c-C;a(window).width()<=991&&x.css("height",j);break;case"quiz":if(s="studio-quiz-form",!e.tmplStores[s])return;n=n||{},l=e.tmplStores[s].render({unit:n.unit,list:n.list}),r?i.html(l):i.append(l)}t.init()},autostartStatus:function(e){e?(a(".autostart-on-block").addClass("hide"),a(".autostart-close-block").removeClass("hide"),a(".manage-block .title").html('<span class="js-player-countdown">5</span> 秒後自動播放下一單元 ...')):(a(".autostart-on-block").removeClass("hide"),a(".autostart-close-block").addClass("hide"),a(".manage-block .title").html("本單元已結束！你可以 ..."))},getAttachment:function(a,o){var n=function(){if(0!==this.code)e.stdErr(this);else{var t=this.data;e.classroom.render("attachment-list",{list:t},a)}};t.yell("chapter/file/get",{id:o},n,n)}},t.hook("lecture/status",(function(t){var o=t.closest(".unit-block"),n=o.data("id"),i=0;(t.is(".uncomplete-confirm")||t.is(".complete-confirm"))&&(t.is(".uncomplete-confirm")&&(i=1),a.when(e.lecture.set.complete({id:n,status:i})).then((function(){var a=e.lecture.chapter.index(n);a>-1&&(e.lecture.data.list[a].isDone=0!=i),0==i?o.find(".js-tag-area").html("").end().off("mouseenter").on("mouseleave",(function(){o.off("mouseleave").on("mouseenter",e.lecture.unit.mousein).on("mouseleave",e.lecture.unit.mouseout)})):(o.toggleClass("uncomplete-confirm",!1),t.toggleClass("complete",!0).html("已完成").toggleClass("uncomplete-confirm",!1))})))})),t.hook("lecture/func",(function(t){var o=t.closest(".unit-block").data("id"),n=a(".player-toolbar");n.find(".toolbar__all").removeClass("hide"),n.find(".toolbar__play").addClass("hide"),e.lecture.get.all(o),e.track.init()})),t.hook("lecture/goback",(function(t){e.lecture.list.find(".js-sidebar-info").animate({right:"-500px"},{duration:200,start:function(){e.lecture.list.find(".js-sidebar-list").toggleClass("hide",!1),e.lecture.chapter.scrollTo(e.lecture.current.id)}});var o=a(".player-toolbar");o.find(".toolbar__all").addClass("hide"),o.find(".toolbar__play").removeClass("hide")})),t.hook("lecture/play",(function(t){var o=t.closest(".unit-block");0==o.length&&(o=t.closest(".unit-manage-container").siblings(".unit-block"));var n=o.data("id");if(e.lecture.current.id!=n&&e.lecture.get.video(n,(function(){e.lecture.chapter.reset(e.lecture.current.id),e.lecture.current.set(n);var t=window.location.pathname.slice(1).split("/");t[3]=n,window.history.pushState({ta:"lecture"},null,window.location.origin+"/"+t.join("/")),e.lecture.updateLite();var o=a(".unit-block[data-id="+e.lecture.current.id+"]");o.addClass("active");var i=o.find(".unit-info .unit-title").text().trim(),r=a(".player");a(".lecture-bg").length?a(".lecture-title").text(i):r.append('<div class="lecture-bg"><p class="lecture-title">'+i+"</p></div>")})),1==e.lecture.player.already)if(o.find(".js-unit-pause").hasClass("hide")){e.lecture.player.that.play(),o.find(".js-unit-pause").toggleClass("hide",!1),o.find(".js-unit-play").toggleClass("hide",!0);var i=a(".player-toolbar");i.find(".toolbar__all").addClass("hide"),i.find(".toolbar__play").removeClass("hide"),e.lecture.chapter.reset(n,!0)}else o.find(".js-unit-play").hasClass("hide")&&(e.lecture.player.that.pause(),o.find(".js-unit-play").toggleClass("hide",!1),o.find(".js-unit-pause").toggleClass("hide",!0));e.lecture.box.find(".js-player-cover").addClass("hide").end().find(".js-player-quiz-area").remove(),e.lecture.list.find(".quiz-containter").removeClass("open"),e.body.hasClass("modal-open")&&e.modal.hide()})),t.hook("lecture/fullscreen",(function(t){t.toggleClass("active"),e.lecture.list.toggleClass("hide"),0===e.lecture.list.find(".js-sidebar-info").position().top&&(a(".back-list-btn").removeClass("active"),e.lecture.list.hasClass("hide")&&a(".back-list-btn").addClass("active"))})),t.hook("lecture/autostartOn",(function(t){localStorage.setItem("autostart",!0),e.lecture.player.autostart=!0,e.lecture.autostartStatus(!0)})),t.hook("lecture/autostartClose",(function(t){localStorage.setItem("autostart",!1),e.lecture.player.autostart=!1,e.lecture.autostartStatus(!1)})),t.hook("lecture/replay",(function(t){clearInterval(e.lecture.next.timer),e.lecture.next.box.toggleClass("hide",!0),1==e.lecture.player.already&&e.lecture.player.that.play()})),t.hook("lecture/playnext",(function(t){clearInterval(e.lecture.next.timer),e.lecture.next.done()})),t.hook("lecture/clear",(function(t){e.lecture.next.box.toggleClass("hide",!0)})),t.hook("lecture/feedback",(function(t){var o=t.closest(".js-player-feedback-form"),n=o.find("form");if(!a.validatr.validateForm(n))return!1;e.progressingBtn(t),a.when(e.lecture.set.feedback(n.serialize())).then((function(){o.toggleClass("hide",!0).siblings(".js-player-feedback-success").toggleClass("hide",!1),e.waitFor(2).then((function(){e.modal.hide()}))}))})),t.hook("lecture/discussion",(function(t){var o=t.closest(".post-discussion"),n=t.closest(".post-discussion-form"),i={course_id:a("#courseID").val(),title:a('.form-control[name="title"]').val(),message:a('.form-control[name="content"]').val(),chapterTitle:n.find(".video-title").text(),chapter_id:t.data("chapterid"),timestamp:n.find(".video-time").data("time")?n.find(".video-time").data("time"):1,nickname:n.find('input[name="nickname"]').val()};if(n.hasClass("no-nickname")){if(!a('.form-control[name="nickname"]').val())return void e.showErrMsg(a('.form-control[name="nickname"]'),!0,"請輸入暱稱");i.nickname=a('.form-control[name="nickname"]').val()}if(!a.validatr.validateForm(n))return!1;e.progressingBtn(t),a.when(e.lecture.set.discussion(i)).then((function(){o.toggleClass("hide",!0).siblings(".js-player-discussion-success").toggleClass("hide",!1)}))})),t.hook("lecture/timecodeBack",(function(e){e.parents(".form-group").toggleClass("hide").siblings(".add-timecode-block").toggleClass("hide")})),t.hook("lecture/timecodeAdd",(function(e){e.parents(".form-group").toggleClass("hide").siblings(".video-block").toggleClass("hide")})),t.hook("lecture/unit",(function(t){for(var o=0;o<e.lecture.data.list.length;o++)if(1==e.lecture.data.list[o].isUnit){var n=a("<option></option>").attr("value",e.lecture.data.list[o].title).text(o+". "+e.lecture.data.list[o].title);e.lecture.data.list[o].id==e.lecture.current.id&&n.prop("selected",!0),t.append(n)}})),t.hook("lecture/share",(function(t){var o="https://www.yottau.com.tw/course/intro/"+e.lecture.player.meta.course_id;window.open("https://www.facebook.com/dialog/share?app_id="+a('meta[property="fb:app_id"]').attr("content")+"&href="+o,"發佈到Facebook","menubar=no,resizable=yes,width=600,height=300")})),t.hook("lecture/chapter",(function(e){var t=a("#courseID").val(),o=e.data("id"),n=window.location.origin+"/course/player/"+t+"/"+o;e.data("timestamp")&&(n+="?timestamp="+e.data("timestamp")),"no"==e.data("page")?window.location.href=n:window.open(n)})),t.hook("quiz/init",(function(t){a(".js-quiz-id, .js-quiz-time, .js-quiz-examId").remove(),a(".js-quiz-init").removeClass("disabled"),e.lecture.box.find(".js-player-quiz-area").remove(),t.addClass("disabled");var o={id:t.data("id"),no:t.data("no"),title:t.data("title")};e.lecture.get.quiz(o)})),t.hook("quiz/submit",(function(o){var n=parseInt(a(".js-quiz-id").text()),i=parseInt(a(".js-quiz-examId").text()),r=new Date(a(".js-quiz-time").text()),s=new Date,l=Math.ceil((s-r)/1e3),c=[];a(".js-quiz-list").find(".form-group").each((function(){var e=parseInt(a(this).attr("id")),t=a(this).find("input:selected, input:checked"),o={topicID:e,answer:[]};t.val()?(t.each((function(){var e=a(this).val();o.answer.push(e)})),c.push(o)):c.push(o)}));var d={chapterID:n,examID:i,examTime:l,answers:c},u=function(){0!==this.code?e.stdErr(this):e.stdSuccess(this)};o.parents(".js-quiz-list").addClass("active").find(".quiz-form-block").each((function(e){var t=!0;a(this).find("label").each((function(e){!!a(this).has(".correct-tag").length===a(this).find("input").prop("checked")||(t=!1)})),t?a(this).addClass("is-correct"):a(this).addClass("is-fail")})),a(".unit-menu-icon").removeClass("disabled"),t.yell("quiz/set_answer",d,u,u)})),t.hook("quiz/clear",(function(e){var t=e.parents(".js-quiz-list");a(".js-quiz-time").text(new Date),t.find("input:checkbox, input:radio").prop("checked",!1).end().find(".quiz-form-block").removeClass("is-correct is-fail").end().removeClass("active")})),t.hook("quiz/close",(function(t){e.lecture.box.find(".js-player-quiz-area").remove(),1==e.lecture.player.already&&e.lecture.player.that.play(),a(".unit-menu-icon").removeClass("disabled")})),t.hook("attachment/download",(function(e){"click"==e.event.type&&window.open(e.data("path"))})),t.hook("lecture/attachment",(function(a){var o=e.body.find(".js-attachment-btn");if(o){var n=o.data("id");o.removeClass("js-attachment-btn"),t.initTmpl(a),e.lecture.getAttachment(a,n)}})),t.hook("toLitePlayer",(function(e){window.location.href=e.attr("href")}))}(app,gee,i)},63701:(e,t,a)=>{var o=a(58133),n=a(62163),i=a(31175);!function(e,t,a){"use strict";e.lecture2={data:{},init:function(){e.loadHtml("studio/chapter-list2",a(".js-tmpl-chapter-list")),e.loadHtml("course-card",a(".js-tmpl-course-card")),e.loadHtml("studio/quiz2",a(".js-tmpl-quiz")),e.lecture2.list=a(".js-player-sidebar"),e.lecture2.box=a(".js-player-area"),window.onunload=e.lecture2.leave,e.lecture2.set.viewed({id:a("#courseID").val()}),e.lecture2.get.list()},showInfoBar:function(){a(".js-player-area .back-list-btn").removeClass("active"),e.lecture2.list.find(".js-sidebar-list").toggleClass("hide",!0),e.lecture2.list.find(".js-sidebar-info").animate({right:"0"},{duration:200})},current:{id:0,index:0,set:function(t){e.lecture2.current.id=t,e.lecture2.current.index=o.findIndex(e.lecture2.data.list,{id:t})},get:function(){return e.lecture2.current.id}},next:{box:{},timer:{},action:function(){var t=new FormData;t.append("id",e.lecture2.current.id),t.append("lastTime",Math.floor(e.studio2.player.currentTime())),t.append("playTime",Math.floor(e.studio2.statsData.playTime)),t.append("stayTime",Math.floor(e.studio2.statsData.stayTime)),t.append("playFinish",1),e.lecture2.set.last(t);var o=e.lecture2.chapter.index(e.lecture2.current.id),n=e.lecture2.list.find('.js-sidebar-list .unit-block[data-id="'.concat(e.lecture2.current.id,'"]')).find("input"),i=a(".unit-container").find(".unit-block");i.data("id")===e.lecture2.current.id&&i.find("input").prop("checked",!0),e.lecture2.data.list[o].isDone=!0,n.prop("checked",!0),e.lecture2.next.box=e.lecture2.box.find(".js-player-cover"),e.lecture2.next.isLast()?e.lecture2.get.ad():(e.lecture2.render("next",{},e.lecture2.next.box,!0),/iPhone|iPad|iPod/i.test(navigator.userAgent)||(e.lecture2.next.timer=setInterval(e.lecture2.next.tick,1e3)),e.lecture2.next.box.toggleClass("hide",!1))},tick:function(){var t=e.lecture2.next.box.find(".js-player-countdown"),a=parseInt(t.html());a-1==0?(clearInterval(e.lecture2.next.timer),e.lecture2.next.done()):(a-=1,t.html(a))},isFirst:function(){return 1===e.lecture2.current.index},isLast:function(){return e.lecture2.current.index===e.lecture2.data.list.length-1},done:function(){var a=e.lecture2.chapter.next(),o=e.lecture2.list.find('.js-sidebar-list .unit-block[data-id="'.concat(a,'"]'));clearInterval(e.lecture2.next.timer),t.exe("lecture2/play",o),e.lecture2.next.box.toggleClass("hide",!0)}},chapter:{index:function(t){return o.findIndex(e.lecture2.data.list,{id:t})},data:function(t){t=t||e.lecture2.current.id;var a=o.findIndex(e.lecture2.data.list,{id:t});return e.lecture2.data.list[a]},next:function(t){if((t=t||e.lecture2.current.index)!==e.lecture2.data.list.length-1){var a=e.lecture2.data.list[t+1];return a&&a.isUnit||(a=e.lecture2.data.list[t+2])&&a.isUnit?a.id:void 0}},prev:function(t){if(0!==(t=t||e.lecture2.current.index)){var a=e.lecture2.data.list[t-1];return a&&a.isUnit||(a=e.lecture2.data.list[t-2])&&a.isUnit?a.id:void 0}},reset:function(t,a){t=t||e.lecture2.current.id,a=a||!1;var o=e.lecture2.list.find(".js-sidebar-list .tag.play"),n=o.closest(".unit-block"),i=(e.lecture2.chapter.data(t),e.lecture2.current.id==t);0===o.length&&(n=e.lecture2.list.find('.js-sidebar-list .unit-block[data-id="'.concat(t,'"]'))),n.toggleClass("active",!1).find(".js-tag-area").html("").end().find(".js-unit-sort").toggleClass("hide",i&&a),i&&a&&n.toggleClass("active",!0).find(".js-tag-area").html("").append('<span class="play_now">播放中</span>')},scrollTo:function(t){t=t||e.lecture2.current.id;for(var o=0,n=e.lecture2.chapter.index(t);n>=0;n--)if(0==e.lecture2.data.list[n].isUnit){o=n;break}if(window.innerWidth>1040)var i=a(".sidebar_desktop").find(".js-sidebar-list");else i=a("#video").find(".js-sidebar-list");var r=i.find('.unit-block[data-id="'+t+'"]'),s=i.find('.sticky[data-id="'+e.lecture2.data.list[o].id+'"]');window.innerWidth,e.lecture2.list.animate({scrollTop:r.offset().top-i.offset().top-s.outerHeight()},"slow")}},get:{list:function(){var o={id:e.studio2.current.course_id},n=function(){if(0!==this.code)6100===this.code?t.exe("attemptToLogin",null):e.stdErr(this);else{!function(t){if(e.lecture2.data.list=t.chapter,e.lecture2.data.current=t.current,t.isFundraising&&a("body").addClass("fundraising"),t.current.video)if(t.current.restricted)e.lecture2.showVideoMaking();else{var o=window.location.pathname.slice(1).split("/");3===o.length&&(o[3]=t.current.id,window.history.pushState({ta:"lecture"},null,window.location.origin+"/"+o.join("/")+window.location.hash));for(var n=0,i=0;i<t.chapter.length;i++)t.chapter[i].id===t.current.id&&(n=t.chapter[i].sort);var r=a("h1.player-title").text();e.studio2.setupPlayer(t.current,n,r)}else e.lecture2.showVideoMaking();e.lecture2.current.set(t.current.id),e.lecture2.render("list",{list:t.chapter,current:t.current},e.lecture2.list.find(".js-sidebar-list"),!0),a(".unit-block[data-id="+e.lecture2.current.id+"]").find(".unit-info .unit-title").text().trim(),e.lecture2.updateLite(),e.lecture2.list.find(".js-sidebar-loading").empty(),e.lecture2.list.find(".js-sidebar-loading").toggleClass("hide",!0)}(this.data);var o='<input type="hidden" id="content" value="'+this.data.current.video[0].file.split("/")[4]+'">';a(".player-page").append(o)}};e.studio2.current.chapter_id>0&&(o=a.extend({},o,{chapter_id:e.studio2.current.chapter_id})),e.studio2.current.seek>0&&(o=a.extend({},o,{seek:e.studio2.current.seek})),t.yell("chapter/list",o,n,n)},all:function(o){o=o||e.lecture2.current.id;var n=function(){var n,i,r,s,l;0!==this.code?6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this):(n=this.data,i=e.lecture2.list.find(".js-sidebar-list").find('.unit-block[data-id="'+o+'"]').prevAll(".chapter:first"),r=a("#courseID").val(),l=!1,(s=e.lecture2.current.id==o)&&(l=e.studio2.player.paused())&&(s=!1),e.lecture2.render("info",{data:e.lecture2.chapter.data(o),title:a.trim(i.find(".chapter-title").text()),info:n,current:e.lecture2.current.id,isDone:e.lecture2.chapter.data(o).isDone,lastView:l,isPlaying:s,courseID:r},e.lecture2.list.find(".js-sidebar-info"),!0),e.lecture2.showInfoBar(),e.track.init(),a(".bs-tip-show").tooltip())};t.yell("chapter/all/get",{id:o},n,n)},video:function(o,i){o=o||e.lecture2.current.id;var r=function(){if(0!==this.code)e.stdErr(this);else{if(this.data.restricted)return void e.lecture2.showVideoMaking();!function(t){if(t&&t.video){e.lecture2.data.current.position=t.position,e.studio2.statsData={playTime:0,stayTime:0,pauseTime:n().format("x"),firstTime:n().format("x")};var r=a(".js-video-unit-block[data-id='".concat(o,"']")).find(".unit-title").text().trim().match(/\d+/)[0],s=a("h1.player-title").text();t.id=o,e.studio2.setupPlayer(t,r,s),i()}else e.lecture2.showVideoMaking()}(this.data)}};t.yell("video/one",{id:o,type:"lesson"},r,r)},quiz:function(o){var n=function(){var t;0!==this.code?e.stdErr(this):(t=this.data,a.each(t.quiz,(function(e,t){a.each(t.options,(function(e,a){t.options[e]={name:"quiz_"+t.id,type:t.type,title:a,correct:-1!==t.answers.indexOf(e)}}))})),o.currentTime=new Date,"undefined"!=t&&(e.lecture2.render("quiz",{unit:o,list:t},e.lecture2.box,!1),1==e.studio2.already&&e.studio2.player.pause(),window.innerWidth<1040&&a("body").css("overflow","hidden")))};t.yell("quiz/get",{id:o.id,examID:0},n,n)}},set:{feedback:function(o){var n=a.Deferred();o+="&id=".concat(e.studio2.current.course_id);var i=function(){0!==this.code?(n.reject(),e.stdErr(this)):(n.resolve(),e.studio2.already&&e.studio2.player.play())};return t.yell("chapter/feedback",o,i,i),n.promise()},last:function(e){navigator.sendBeacon("/chapter/last",e)},viewed:function(o){var n=a.Deferred(),i=function(){0!==this.code?(n.reject(),e.stdErr(this)):n.resolve()};return t.yell("player/viewed",o,i,i),n.promise()}},previous:function(){var a=e.lecture2.chapter.prev(),o=e.lecture2.list.find('.js-sidebar-list .unit-block[data-id="'.concat(a,'"]'));t.exe("lecture2/play",o)},render:function(o,n,i,r){switch(a(".bs-tip-show").tooltip(),o){case"list":var s="studio-chapter-list-v2";e.waitFor((function(){return void 0!==e.tmplStores[s]})).then((function(){i=i||e.lecture2.list.find(".js-sidebar-list");var o=e.tmplStores[s].render({data:n,current:e.lecture2.current.get()});r?i.html(o):i.append(o);var l=a("html").outerHeight(),c=a(".player-container").height(),d=i.parents(".player-sidebar"),u=l-c+30;a(window).width()<=991&&d.css("height",u),t.init()}));break;case"info":var l="studio-chapter-info";if(!e.tmplStores[l])return;n=n||{};var c=e.tmplStores[l].render({data:n});r?i.html(c):i.append(c);var d=a("html").outerHeight(),u=a(".unit-container"),m=u.find(".chapter-title").outerHeight(),h=u.find(".unit-block").outerHeight(),p=u.find(".all__note").outerHeight(),f=a(".player-sidebar .unit-manage-container .center-message.note"),v=a(".player-sidebar .unit-manage-container .note-list.js-note-list"),g=d-m-h-p;a(window).width()>=991&&(f.css("height",g),v.css("height",g)),n.data.id==n.current&&e.note2.bind();break;case"next":var b="studio-chapter-next";if(!e.tmplStores[b])return;n=n||{};var w=e.tmplStores[b].render({data:n});r?i.html(w):i.append(w);var y="false"!==localStorage.getItem("autostart");e.lecture2.autostartStatus(y);break;case"last":var k="studio-chapter-last";if(!e.tmplStores[k])return;n=n||{};var C=e.tmplStores[k].render({data:n});r?i.html(C):i.append(C);var x=a("html").outerHeight(),j=a(".player-toolbar").outerHeight(),S=a(".player-last-container"),_=x-j;a(window).width()<=991&&S.css("height",_);break;case"making":var T="studio-chapter-making";if(!e.tmplStores[T])return;n=n||{};var I=e.tmplStores[T].render({data:n});r?i.html(I):i.append(I);break;case"quiz":var M="studio-quiz-form-v2";e.waitFor((function(){return void 0!==e.tmplStores[M]})).then((function(){n=n||{};var a=e.tmplStores[M].render({unit:n.unit,list:n.list});r?i.html(a):i.append(a),t.init()}));break;case"notes":var D="add-note";e.waitFor((function(){return void 0!==e.tmplStores[D]})).then((function(){n=n||{};var a=e.tmplStores[D].render({data:n});r?i.html(a):i.append(a),t.init()}))}t.init()},leave:function(t){e.studio2.player.paused();var a=new FormData;a.append("id",e.lecture2.current.id),a.append("lastTime",Math.floor(e.studio2.player.currentTime())),a.append("playTime",Math.floor(e.studio2.statsData.playTime)),a.append("stayTime",Math.floor(e.studio2.statsData.stayTime)),a.append("playFinish",0),e.lecture2.set.last(a)},autostartStatus:function(e){if(/iPhone|iPad|iPod/i.test(navigator.userAgent))return a(".autostart-close-block").addClass("hide"),void a(".manage-block .title").html("本單元已結束！你可以 ...");e?(a(".autostart-on-block").addClass("hide"),a(".autostart-close-block").removeClass("hide"),a(".manage-block .title").html('<span class="js-player-countdown">5</span> 秒後自動播放下一單元 ...')):(a(".autostart-on-block").removeClass("hide"),a(".autostart-close-block").addClass("hide"),a(".manage-block .title").html("本單元已結束！你可以 ..."))},updateLite:function(){var e=window.location.pathname.split("/").filter(Boolean),t=e[2],o=e[3],n="/litePlayer/index.html?course=".concat(t,"&chapter=").concat(o);a("#liteLink").attr("href",n),a(".menu_list").find("#liteLink").attr("href",n)},showVideoMaking:function(){var t=e.lecture2.box.find(".js-player-cover");e.lecture2.render("making",{},t,!0),t.toggleClass("hide",!1).toggleClass("is--making",!0),e.lecture2.showPause(!1);var a=t.parent().find(".js-player-preview");if(a.length)a.toggleClass("hide",!1);else{var o=e.lecture2.box.find("video").attr("poster");t.before('<img class="player-preview-picture js-player-preview" src='.concat(o,">"))}},showPause:function(t){var a=e.lecture2.box.find(".js-player-pause");a.toggleClass("is-pause",t),a.find("button").removeClass("is-disable"),e.lecture2.next.isFirst()&&a.find("button").eq(0).addClass("is-disable"),e.lecture2.next.isLast()&&a.find("button").eq(4).addClass("is-disable")}},t.hook("lecture2/play",(function(o){e.studio2.isFirstVideo=!1;var n=o.closest(".unit-block");0===n.length&&(o.closest(".unit-manage-container").siblings(".unit-block"),function(e){throw new TypeError('"box" is read-only')}());var i=n.data("id");if(e.lecture2.current.id!==i){var r=a("video").parent().attr("id");(r=r?Number(r.slice(5)):r)&&r===e.lecture2.current.id&&e.lecture2.leave(),e.lecture2.get.video(i,(function(){e.lecture2.chapter.reset(e.lecture2.current.id),e.lecture2.current.set(i);var t=window.location.pathname.slice(1).split("/");t[3]=i;var o=window.location.hash;window.history.pushState({ta:"lecture"},null,window.location.origin+"/"+t.join("/")+o),e.lecture2.updateLite(),a(".unit-block[data-id=".concat(e.lecture2.current.id,"]")).addClass("active"),n.find(".js-tag-area").html("").append('<span class="play_now">播放中</span>'),a("html, body").animate({scrollTop:0},"fast")}))}t.event.subscribe("app.studio2.setupPlayer",(function(){if(e.studio2.already)if(e.studio2.player.paused()){e.studio2.player.play(),n.toggleClass("active",!0).find(".js-tag-area").html("").append('<span class="play_now">播放中</span>');var t=a(".player-toolbar");t.find(".toolbar__all").addClass("hide"),t.find(".toolbar__play").removeClass("hide"),e.lecture2.chapter.reset(i,!0)}else e.studio2.player.pause(),n.toggleClass("active",!1).find(".js-tag-area").html("").append('<span class="last_view">最後觀看</span>')})),e.lecture2.box.find(".js-player-cover").addClass("hide").end().find(".js-player-quiz-area").remove(),e.lecture2.box.find(".js-player-preview").toggleClass("hide",!0),e.lecture2.list.find(".quiz-containter").removeClass("open"),e.body.hasClass("modal-open")&&e.modal.hide()})),t.hook("lecture2/func",(function(t){var a=t.closest(".unit-block").data("id");e.lecture2.get.all(a)})),t.hook("lecture2/autostartOn",(function(t){localStorage.setItem("autostart",!0),e.lecture2.autostartStatus(!0)})),t.hook("lecture2/autostartClose",(function(t){localStorage.setItem("autostart",!1),e.lecture2.autostartStatus(!1)})),t.hook("lecture2/replay",(function(t){clearInterval(e.lecture2.next.timer),e.lecture2.next.box.toggleClass("hide",!0),e.studio2.already&&e.studio2.player.play()})),t.hook("lecture2/playnext",(function(t){clearInterval(e.lecture2.next.timer),e.lecture2.next.done()})),t.hook("lecture2/playprev",(function(t){e.lecture2.previous()})),t.hook("lecture2/playvideo",(function(t){e.studio2.player.play()})),t.hook("lecture2/rewind",(function(t){var a=e.studio2.player.currentTime()-10;e.studio2.player.currentTime(a)})),t.hook("lecture2/forward",(function(t){var a=e.studio2.player.currentTime()+10;e.studio2.player.currentTime(a)})),t.hook("lecture2/status",(function(t){var o,n=t.closest(".unit-block").data("id"),i=e.lecture2.list.find('.js-sidebar-list .unit-block[data-id="'+n+'"]').find("input");o=t.prop("checked")?1:0,a.when(e.lecture.set.complete({id:n,status:o})).then((function(){i.prop("checked")&&0==o&&i.prop("checked",!1),i.prop("checked")||1!=o||i.prop("checked",!0);var t=e.lecture2.chapter.index(n);t>-1&&(e.lecture2.data.list[t].isDone=0!=o)}))})),t.hook("lecture2/feedback",(function(t){var o=t.closest(".js-player-feedback-form"),n=o.find("form");if(!a.validatr.validateForm(n))return!1;e.progressingBtn(t),a.when(e.lecture2.set.feedback(n.serialize())).then((function(){o.toggleClass("hide",!0).siblings(".js-player-feedback-success").toggleClass("hide",!1),e.waitFor(2).then((function(){e.modal.hide()}))}))})),t.hook("lecture2/unit",(function(t){for(var o=0;o<e.lecture2.data.list.length;o++)if(e.lecture2.data.list[o].isUnit){var n=a("<option></option>").attr("value",e.lecture2.data.list[o].title).text(e.lecture2.data.list[o].title);e.lecture2.data.list[o].id==e.lecture2.current.id&&n.prop("selected",!0),t.append(n)}})),t.hook("lecture2/goback",(function(t){e.lecture2.list.find(".js-sidebar-info").animate({right:"-1000px"},{duration:200,start:function(){e.lecture2.list.find(".js-sidebar-list").toggleClass("hide",!1),e.lecture2.chapter.scrollTo(e.lecture2.current.id)}})})),t.hook("lecture2/chapter",(function(e){var t=a("#courseID").val(),o=e.data("id"),n=window.location.origin+"/course/classroomv3/"+t+"/"+o;e.data("timestamp")&&(n+="?timestamp="+e.data("timestamp")),"no"==e.data("page")?window.location.href=n:window.open(n)})),t.hook("quiz2/init",(function(t){a(".js-quiz-id, .js-quiz-time, .js-quiz-examId").remove(),a(".js-quiz-init").removeClass("disabled"),e.lecture2.box.find(".js-player-quiz-area").remove(),t.addClass("disabled");var o={id:t.data("id"),no:t.data("no"),title:t.data("title")};e.lecture2.get.quiz(o)})),t.hook("quiz2/close",(function(t){e.lecture2.box.find(".js-player-quiz-area").remove(),1==e.studio2.already&&e.studio2.player.play(),a("body").css("overflow","auto"),a(".unit-menu-icon").removeClass("disabled")})),t.hook("lecture2/exportNote/chapter",(function(e){var t=a("#courseID").val(),o=e.closest(".unit-block").data("id"),n=e.find(".unit-title").text();window.open(window.location.origin+"/export/note/"+t+"/"+o,n+" - 輸出筆記")})),t.hook("lecture2/foldChapter",(function(e){var t=e.attr("data-id");a("*[data-parentID=".concat(t,"]")).toggleClass("hide"),e.closest(".chapter").toggleClass("is--close")}))}(app,gee,i)},64878:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.note={bind:function(){var t=e.lecture.list.find(".js-sidebar-info");t.find(".js-note").on("mouseover",e.note.mousein).on("mouseleave",e.note.mouseout),t.find(".js-note-content").css("cursor","pointer")},mousein:function(){var t=a(this),o=t.data("type"),n=t.data("time");e.lecture.player.set_marker(o,n)},mouseout:function(){a(".progress-tag.note").remove()},count:function(){var e=a(".note-block").length,t=e>0;a(".unit-manage-tab").find('a[href="#note"]').find("span").text(e),a(".js-note-list").toggleClass("hide",!t),a(".js-note-empty").toggleClass("hide",t)},set:function(o,n,i){var r=function(){if(0!==this.code)6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this);else{if(i){var o=(this.data.content+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2");n.closest(".note-block").find(".content").html(o)}else{var r=e.tmplStores["studio-note-block"].render({data:this.data}),s=a(".note-list");s.append(r),t.init(),s.scrollTop(s.prop("scrollHeight"));var l=a(".player-sidebar .unit-container").find(".unit-block.active").data("id"),c=e.lecture.current.id;l!==c&&e.lecture.get.all(c),e.note.bind()}e.note.count()}};t.yell("chapter/note/set",o,r,r)},del:function(o,n){n.closest(".note-block").remove(),a(".progress-tag.note").remove();var i=function(){0!==this.code?e.stdErr(this):e.note.count()};t.yell("chapter/note/del",{id:o},i,i)}},t.hook("note/seek",(function(t){var a=t.parents(".unit-container").find(".unit-block.active").data("id"),o=e.lecture.current.id,n=t.closest(".js-note").data("time");a===o&&e.lecture.player.that.seek(n)})),t.hook("note/savev2",(function(t){if("click"==t.event.type)if(t.is("textarea")){var o=t.data("type");e.note.current=Math.floor(e.lecture.player.that.getPosition()),e.lecture.player.set_marker(o),e.waitFor(3).then((function(){t.val()||(a(".progress-tag.current").hide(),t.blur())}))}else{var n=t.closest(".js-note-edit").data("time"),i={parent_id:e.lecture.current.id,id:t.closest(".note-block").attr("id"),content:t.closest("div.manage-area").siblings("textarea").val(),timestamp:n};e.note.set(i,t,!0),t.closest(".js-note-edit").siblings(".js-note").removeClass("hide"),t.closest(".js-note-edit").addClass("hide")}else if(13!==t.event.which||t.event.shiftKey){if(13===t.event.which&&t.event.shiftKey){var r=t.height();t.height()<=82&&(t.parents(".add-note").height(r+r-6),t.height(r+r-12))}}else{var s=e.note.current?e.note.current:Math.floor(e.lecture.player.that.getPosition());i={parent_id:e.lecture.current.id,content:t.val(),timestamp:s},t.val()&&e.note.set(i,t,!1),t.val("").blur(),a(".progress-tag.current").hide(),t.height()<=82&&(t.parents(".add-note").height(34),t.height(28))}e.waitFor(1).then((function(){e.track.init()}))})),t.hook("note/markerImportant",(function(t){if("click"==t.event.type){var o={parent_id:e.lecture.current.id,content:"重點",timestamp:Math.floor(e.lecture.player.that.getPosition())};e.note.set(o,t,!1),t.val("").blur(),a(".progress-tag.current").hide(),a(".js-player-area .back-list-btn").removeClass("active"),e.lecture.list.find(".js-sidebar-list").toggleClass("hide",!0),e.lecture.list.find(".js-sidebar-info").animate({right:"0"},{duration:200});var n=a(".player-toolbar");n.find(".toolbar__all").removeClass("hide"),n.find(".toolbar__play").addClass("hide")}})),t.hook("note/edit",(function(e){e.closest(".js-note").siblings(".js-note-edit").removeClass("hide"),e.closest(".js-note").addClass("hide")})),t.hook("note/cancel",(function(e){e.closest(".js-note-edit").siblings(".js-note").removeClass("hide"),e.closest(".js-note-edit").addClass("hide")})),t.hook("note/record",(function(t){var a=t.data("type"),o=t.data("time");e.lecture.player.set_marker(a,o)}))}(app,gee,o)},15949:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.note2={bind:function(){var t=e.lecture2.list.find(".js-sidebar-info");t.find(".js-note").on("mouseover",e.note2.mousein).on("mouseleave",e.note2.mouseout),t.find(".js-note-content").css("cursor","pointer")},mousein:function(){var t=a(this),o=t.data("type"),n=t.data("time");e.studio2.set_marker(o,n)},mouseout:function(){a(".progress-tag.note").remove()},count:function(){var e=Math.floor(a(".note-block").length/2),t=e>0;a(".unit-manage-tab").find('a[href="#note"]').find("span").text(e),a(".js-note-list").toggleClass("hide",!t),a(".js-note-empty").toggleClass("hide",t)},set:function(o,n,i){var r=function(){if(0!==this.code)6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this);else{if(i){var o=(this.data.content+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2");n.closest(".note-block").find(".content").html(o)}else{var r=e.tmplStores["studio-note-block2"].render({data:this.data}),s=a(".note-list");s.append(r),t.init(),s.scrollTop(s.prop("scrollHeight"));var l=a(".player-sidebar .unit-container").find(".unit-block.active").data("id"),c=e.lecture2.current.id;l!==c&&e.lecture2.get.all(c),e.note2.bind()}if(e.note2.count(),window.innerWidth>1040)var d=a(".sidebar_desktop").find('.js-sidebar-list .unit-block[data-id="'.concat(e.lecture2.current.id,'"]'));else d=a("#video").find('.js-sidebar-list .unit-block[data-id="'.concat(e.lecture2.current.id,'"]'));var u=e.lecture2.chapter.index(e.lecture2.current.id),m=e.lecture2.data.list[u];m.haveNotes||(m.haveNotes=!0,e.lecture2.render("notes",m,d.find(".unit-menu-group")))}};t.yell("chapter/note/set",o,r,r)},del:function(a,o){var n=function(){if(0!==this.code)e.stdErr(this);else{if(o.parents(".note-block").remove(),window.innerWidth>1040)var t=e.lecture2.list.parents(".sidebar_desktop");else t=e.lecture2.list.parents("#video");var a=t.find(".note-block").length,n=a>0;if(0===a){t.find(".js-note-list").toggleClass("hide",!n),t.find(".js-note-empty").toggleClass("hide",n);var i=t.find(".unit-container .unit-block").data("id");t.find('.unit-block[data-id="'.concat(i,'"] .unit-menu-icon[func="lecture2/func"]')).remove();var r=e.lecture2.chapter.index(i);e.lecture2.data.list[r].haveNotes=!1}}};t.yell("chapter/note/del",{id:a},n,n)}},t.hook("note2/edit",(function(e){e.closest(".js-note").siblings(".js-note-edit").removeClass("hide"),e.closest(".js-note").addClass("hide")})),t.hook("note2/cancel",(function(t){t.closest(".js-note-edit").siblings(".js-note").removeClass("hide"),t.closest(".js-note-edit").addClass("hide");var a=t.parents(".unit-container").find(".unit-block").data("id");e.lecture2.get.all(a)})),t.hook("note/savev3",(function(t){if("click"==t.event.type)if(t.is("textarea")){var o=t.data("type");e.note2.current=Math.floor(e.studio2.player.currentTime()),e.studio2.set_marker(o),e.waitFor(3).then((function(){t.val()||(a(".progress-tag.current").hide(),t.blur())}))}else{var n=t.closest(".js-note-edit").data("time"),i={parent_id:e.lecture2.current.id,id:t.closest(".note-block").attr("id"),content:t.closest("div.manage-area").siblings("textarea").val(),timestamp:n};e.note2.set(i,t,!0),t.closest(".js-note-edit").siblings(".js-note").removeClass("hide"),t.closest(".js-note-edit").addClass("hide")}else if(13!==t.event.which||t.event.shiftKey){if(13===t.event.which&&t.event.shiftKey){var r=t.height();t.height()<=82&&(t.parents(".add-note").height(r+r-6),t.height(r+r-12))}}else{var s=e.note2.current?e.note2.current:Math.floor(e.studio2.player.currentTime()),l={parent_id:e.lecture2.current.id,content:t.val(),timestamp:s};t.val()&&e.note2.set(l,t,!1),t.val("").blur(),a(".progress-tag.current").hide(),e.lecture2.showInfoBar(),t.height()<=82&&(t.parents(".add-note").height(50),t.height(20))}e.waitFor(1).then((function(){e.track.init()}))})),t.hook("note/markerImportant2",(function(t){if("click"==t.event.type){var o={parent_id:e.lecture2.current.id,content:"重點",timestamp:Math.floor(e.studio2.player.currentTime())};e.note2.set(o,t,!1),t.val("").blur(),a(".progress-tag.current").hide(),a(".js-player-area .back-list-btn").removeClass("active"),e.lecture2.list.find(".js-sidebar-list").toggleClass("hide",!0),e.lecture2.list.find(".js-sidebar-info").animate({right:"0"},{duration:200});var n=a(".player-toolbar");n.find(".toolbar__all").removeClass("hide"),n.find(".toolbar__play").addClass("hide")}})),t.hook("note2/confirmDelete",(function(e){e.parents(".note-block").toggleClass("is-delete")})),t.hook("note2/delete",(function(t){var a=t.data("id");e.note2.del(a,t)})),t.hook("note2/seek",(function(t){var o=t.parents(".unit-container").find(".unit-block").data("id"),n=e.lecture2.current.id,i=t.closest(".js-note").data("time");o===n&&e.studio2.player.currentTime(i),window.innerWidth<1040&&a("html, body").animate({scrollTop:0},"fast")}))}(app,gee,o)},15390:(e,t,a)=>{var o=a(31175);!function(e,t,o){"use strict";var n=a(56487);e.shortcuts={keydownB:function(){n.bind(["b","B","ㄖ"],(function(e){o(".markerImportant").click()}))},keydownD:function(){n.bind(["d","D","ㄎ"],(function(){var e=o(".discussionModal");o(".modal.fade").hasClass("in")||e.click()}))},keydownM:function(){n.bind(["m","M","ㄩ"],(function(e){o(".markerImportantM").click()}))},keydownN:function(){n.bind(["n","N","ㄙ"],(function(){var e=o(".note__save");e.click(),e.focus(),setTimeout((function(){e.val("")}),0)}))}},t.hook("initShortcuts",(function(t){e.shortcuts.keydownB(),e.shortcuts.keydownD(),e.shortcuts.keydownN(),e.shortcuts.keydownM(),o(".bs-tip-show").tooltip()}))}(app,gee,o)},49613:(e,t,a)=>{var o=a(31175);!function(e,t,o){"use strict";var n=function(n){var i=a(51929),r=n.prop("id");if(n.is("[id]")||(r="player"+("0"+Math.floor(100*Math.random()+1)).substr(-3),n.prop("id",r)),!o.trim(r))throw"Element [id] is missing.";var s=n.closest(".modal");s.length>0&&s.one("hide.bs.modal",(function(){l.that.stop(),l.that.remove()})),e.mRoute.addRoute("report-bug-modal",(function(){e.modal.showReportBugModal()}));var l={id:r,autostart:!1,box:n,that:{},already:!1,source:"ie"==e.browser?"https://content.jwplatform.com/libraries/s4m3neKM.js":"https://content.jwplatform.com/libraries/ukTbrzxd.js",meta:{course_id:1*o("#courseID").val()||0,chapter_id:1*o("#chapterID").val()||0,seek:n.data("seek")?1*n.data("seek"):0},placeholder:{video:"https://videos.yottau.com.tw/placeholder.mp4",image:"https://www.yottau.com.tw/dist/image/default-course-cover.png"},setup:function(a,n,r,s,c,d,u,m){a=a||[],n=n||[],r=r||[],s=s||0,c=c||0,d=d||"",u=u||"",m=void 0===m||m;var h=l.config(a,n,r,c,d,u,m);if(h.sources.length<=0)return!1;l.already?(l.that.setControls(!0),l.that.load(h),!1===h.autostart?l.that.pause():l.that.play()):(i(l.source,"jwplayer"),i.ready("jwplayer",(function(){l.that=jwplayer(l.id).setup(h),l.that.on("ready",(function(){l.already=!0;var e=o(l.that.getContainer()).find("video");e.attr("x-webkit-airplay","deny"),e.attr("webkit-playsinline",!0),e.attr("playsinline",!0),0!=s&&l.that.seek(s),"function"==typeof l.onReady&&l.onReady()})).on("play",(function(){"function"==typeof l.onPlay&&l.onPlay()})).on("pause",(function(){"function"==typeof l.onPause&&l.onPause()})).on("complete",(function(){"function"==typeof l.onComplete&&l.onComplete()})).on("seek",(function(){"function"==typeof l.onSeek&&l.onSeek()})).on("time",(function(){"function"==typeof l.onTime&&l.onTime()})).on("error",(function(){"function"==typeof l.onError&&l.onError()})).on("setupError",(function(){"function"==typeof l.onSetupError&&l.onError()})).on("levelsChanged",(function(){"function"==typeof l.onLevelsChanged&&l.onLevelsChanged()})).on("firstFrame",(function(){"function"==typeof l.onFirst&&l.onFirst()})),n.length&&(l.that.addButton("/dist/image/icon/player/captionsSize.svg","字幕大小",(function(){var a='<ul class="jw-aptions-menu captionsSize hide"><li class="menu-title">字幕大小</li><li class="menu-list gee" data-gene="click:studio/captionsSize" data-value="large">大</li><li class="menu-list gee" data-gene="click:studio/captionsSize" data-value="normal">中</li><li class="menu-list gee" data-gene="click:studio/captionsSize" data-value="small">小</li></ul>';"desktop"!==e.screen&&(a='<ul class="jw-aptions-menu captionsSize hide"><li class="menu-title">字幕大小</li><li class="menu-list"><span class="menu-btn gee" data-gene="click:studio/captionsSize" data-value="large">大</span><span class="menu-btn gee" data-gene="click:studio/captionsSize" data-value="normal">中</span><span class="menu-btn gee" data-gene="click:studio/captionsSize" data-value="small">小</span></li></ul>'),e.body.find(".jw-aptions-menu.captionsSize").length||(o(".jw-icon-captions-size").after(a).click((function(e){var t=o(".jw-aptions-menu.captionsSize").hasClass("hide");o(".jw-aptions-menu.captionsSize").toggleClass("hide",!t),o(".jw-aptions-menu.captionsPosition").addClass("hide")})),o(".jw-icon-settings, .jw-icon-cc").click((function(e){o(".jw-aptions-menu.captionsPosition").addClass("hide"),o(".jw-aptions-menu.captionsSize").addClass("hide")})),t.init())}),"captionsSize","jw-settings-submenu-button jw-icon-captions-size"),l.that.addButton("/dist/image/icon/player/captionsPosition.svg","字幕位置",(function(){var a='<ul class="jw-aptions-menu captionsPosition hide"><li class="menu-title">字幕位置</li><li class="menu-list gee" data-gene="click:studio/captionsPosition" data-value="top">上</li><li class="menu-list gee" data-gene="click:studio/captionsPosition" data-value="bottom">下</li></ul>';"desktop"!==e.screen&&(a='<ul class="jw-aptions-menu captionsPosition hide"><li class="menu-title">字幕位置</li><li class="menu-list"><span class="menu-btn gee" data-gene="click:studio/captionsPosition" data-value="top">上</span><span class="menu-btn gee" data-gene="click:studio/captionsPosition" data-value="bottom">下</span></li></ul>'),e.body.find(".jw-aptions-menu.captionsPosition").length||(o(".jw-icon-captions-position").after(a).click((function(e){var t=o(".jw-aptions-menu.captionsPosition").hasClass("hide");o(".jw-aptions-menu.captionsPosition").toggleClass("hide",!t),o(".jw-aptions-menu.captionsSize").addClass("hide")})),o(".jw-icon-settings, .jw-icon-cc").click((function(e){o(".jw-aptions-menu.captionsPosition").addClass("hide"),o(".jw-aptions-menu.captionsSize").addClass("hide")})),t.init())}),"captionsPosition","jw-settings-submenu-button jw-icon-captions-position"),l.that.addButton("/dist/image/icon/player/report.svg","問題回報與建議",e.modal.showReportBugModal,"report","jw-settings-submenu-button jw-icon-report-size"))})))},config:function(e,t,a,o,n,i,r){var s;s=0!==parseInt(o)?i+" 單元"+o+" "+n:i+" "+n;var c=Math.floor(4*Math.random());if(window.location.pathname.indexOf("/course/intro")>=0)d={title:s,sources:e.length>0?e:l.get_video(l.id),image:a.length>0?a:l.get_image(l.id),tracks:t.length>0?t:[],autostart:void 0!==r?r:l.autostart,aspectratio:"16:9",width:"100%",height:"auto",stretching:"uniform",repeat:!1,preload:"auto",playbackRates:[.75,1,1.25,1.5,2],mute:!1,volume:100,controls:!0,localization:{advertising:{admessage:"該廣告將在 xx 後結束",cuetext:"廣告",loadingAd:"正在載入廣告",podmessage:"第 __AD_POD_CURRENT__/__AD_POD_LENGTH__ 條廣告。",skipmessage:"xx 後跳過廣告",skiptext:"跳過",displayHeading:"廣告"},airplay:"Airplay",audioTracks:"音軌",auto:"自動",buffer:"載入中",cast:"Chromecast",cc:"字幕",close:"關閉",errors:{badConnection:"網路連線問題，無法播放影片。",cantLoadPlayer:"播放器載入失敗。",cantPlayInBrowser:"影片無法在此瀏覽器中播放。",cantPlayVideo:"無法播放該影片。",errorCode:"錯誤代碼",liveStreamDown:"直播故障或已結束。",protectedContent:"無法播放受保護內容。",technicalError:"發生技術問題，無法播放該影片。"},fullscreen:"全螢幕",hd:"畫質",liveBroadcast:"直播",logo:"標誌",next:"下一個",nextUp:"接下來播放",notLive:"非直播",off:"關閉",pause:"暫停",play:"播放",playback:"播放",playbackRates:"播放速度",player:"播放器",playlist:"播放列表",poweredBy:"技術支持",prev:"上一個",related:{autoplaymessage:"xx 後播放下一個影片",heading:"更多影片"},replay:"重播",rewind:"快退10秒",settings:"設定",sharing:{copied:"已複製",email:"發郵件",embed:"嵌入代碼",heading:"分享",link:"連結"},slider:"滑動搜尋",stop:"停止",videoInfo:"關於影片",volume:"音量",volumeSlider:"音量調整"},renderCaptionsNatively:!1,captions:{fontSize:16,edgeStyle:"uniform",backgroundOpacity:0},ga:{label:"title"},cast:{}};else var d={title:s,sources:e.length>0?e:l.get_video(l.id),image:a.length>0?a:l.get_image(l.id),tracks:t.length>0?t:[],autostart:void 0!==r?r:l.autostart,logo:{file:"/member/gwm",position:["top-left","top-right","bottom-left","bottom-right"][c]},aspectratio:"16:9",width:"100%",height:"auto",stretching:"uniform",repeat:!1,preload:"auto",playbackRates:[.75,1,1.25,1.5,2],mute:!1,volume:100,controls:!0,localization:{advertising:{admessage:"該廣告將在 xx 後結束",cuetext:"廣告",loadingAd:"正在載入廣告",podmessage:"第 __AD_POD_CURRENT__/__AD_POD_LENGTH__ 條廣告。",skipmessage:"xx 後跳過廣告",skiptext:"跳過",displayHeading:"廣告"},airplay:"Airplay",audioTracks:"音軌",auto:"自動",buffer:"載入中",cast:"Chromecast",cc:"字幕",close:"關閉",errors:{badConnection:"網路連線問題，無法播放影片。",cantLoadPlayer:"播放器載入失敗。",cantPlayInBrowser:"影片無法在此瀏覽器中播放。",cantPlayVideo:"無法播放該影片。",errorCode:"錯誤代碼",liveStreamDown:"直播故障或已結束。",protectedContent:"無法播放受保護內容。",technicalError:"發生技術問題，無法播放該影片。"},fullscreen:"全螢幕",hd:"畫質",liveBroadcast:"直播",logo:"標誌",next:"下一個",nextUp:"接下來播放",notLive:"非直播",off:"關閉",pause:"暫停",play:"播放",playback:"播放",playbackRates:"播放速度",player:"播放器",playlist:"播放列表",poweredBy:"技術支持",prev:"上一個",related:{autoplaymessage:"xx 後播放下一個影片",heading:"更多影片"},replay:"重播",rewind:"快退10秒",settings:"設定",sharing:{copied:"已複製",email:"發郵件",embed:"嵌入代碼",heading:"分享",link:"連結"},slider:"滑動搜尋",stop:"停止",videoInfo:"關於影片",volume:"音量",volumeSlider:"音量調整"},renderCaptionsNatively:!1,captions:{fontSize:16,edgeStyle:"uniform",backgroundOpacity:0},ga:{label:"title"},cast:{}};return d},get_video:function(){var e=[];return l.box.find("source").each((function(){e.push({file:o(this).attr("src"),label:o(this).attr("label")})})),0==e.length&&(e=[{file:l.placeholder.video}]),e},get_image:function(){var e=l.box.find("img");return e.length>0?e.prop("src"):l.placeholder.image},set_marker:function(e,t){var a="",n=l.that.getDuration();switch(e){case"current":t=t||l.that.getPosition(),a="正在筆記";break;case"note":a="筆記處";break;case"last":a="最後觀看"}var i='<span class="progress-tag '+e+'" style="margin-left:-22px;top:-16px;left:'+(t=t/n*100)+'%;">';i+=a+"</span>",o(".progress-tag").remove(),o(".jwplayer").removeClass("jw-flag-user-inactive"),o(".jw-slider-time .jw-slider-container").append(i),o(".jw-controlbar").css("display","block")},onReady:function(){e.body.find(".course-intro-content").removeClass("loading")},defaultGuide:function(t){var a=t||1;if(e.isInPage("classroomv3")||e.body.hasClass("classroomv3"))var n=[{pages:1,title:"播放設定",content:"播放器提供單元切換，調整影片播放速度、字幕、畫質等相關播放設定",imgUrl:"/dist/image/icon/player/courseplayer_tour_01.svg",isNew:!1,isShow:!0,isBack:!1,isNext:!0,isFinished:!1,showBlock:""},{pages:2,title:"新增筆記",content:'輸入筆記（快捷鍵 <span class="">N</span>），或使用 <span class="">標註重點</span>（快捷鍵 Ｍ）紀錄後再整理',imgUrl:"/dist/image/icon/player/courseplayer_tour_02.svg",isNew:!1,isShow:!0,isBack:!0,isNext:!0,isFinished:!1,showBlock:".player__footer",canClose:!0},{pages:3,title:"下載筆記",content:"上課做的單元筆記，可點擊下載該單元或全部筆記方便閱讀使用",imgUrl:"/dist/image/icon/player/courseplayer_tour_03.svg",isNew:!1,isShow:!0,isBack:!0,isNext:!0,isFinished:!1,showBlock:".js-all-notes, .unit-menu-icon[data-original-title='單元筆記']"},{pages:4,title:"完成勾選",content:"勾選或取消已經完成的單元",imgUrl:"/dist/image/icon/player/courseplayer_tour_04.svg",isNew:!1,isShow:!0,isBack:!0,isNext:!0,isFinished:!1,showBlock:".checkbox"},{pages:5,title:"課堂教室",content:"下方的教室功能：公告、討論、作業、介紹與同學、講師互動並掌握自己的學習進度",imgUrl:"/dist/image/icon/player/courseplayer_tour_05.svg",isNew:!1,isShow:!0,isBack:!0,isNext:!0,isFinished:!1,showBlock:".classroom-tab-container"},{pages:6,title:"完整版／輕量版",content:'「輕量版」提供播放器版本切換</br><span class="text-blue">完整版：</span>單元列表功能：如筆記、教材、測驗</br><span class="text-blue">輕量版：</span>簡易介面功能，影片播放更加流暢',imgUrl:"/dist/image/icon/player/courseplayer_tour_06.svg",isNew:!1,isShow:!0,isBack:!0,isNext:!0,isFinished:!1,showBlock:"#liteLink"},{pages:7,title:"深色／淺色",content:"上方「黑/白」可以做顏色模式切換<br>選擇適合自己的色調",imgUrl:"/dist/image/icon/player/courseplayer_tour_07.svg",isNew:!1,isShow:!0,isBack:!0,isNext:!0,isFinished:!1,showBlock:".themes-toggle-btn"},{pages:8,title:"完課證書",content:"完成課程學習後解鎖完課證書，恭喜你獨立完成自學",imgUrl:"/dist/image/icon/player/courseplayer_tour_08.svg",isNew:!1,isShow:!0,isBack:!0,isNext:!0,isFinished:!1,showBlock:".get_certificate_status"},{pages:9,title:"課程評價",content:"給予講師鼓勵或建議，發表對於這門課程的回饋及評分吧",imgUrl:"/dist/image/icon/player/courseplayer_tour_09.svg",isNew:!1,isShow:!1,isBack:!0,isNext:!1,isFinished:!0,showBlock:".themes_btn[data-gene='click:showRatingListModal']"}];else n=[{pages:1,title:"新增筆記",content:'您可以在任何時候 <span class="hint">新增筆記</span>（快捷鍵 <span class="hint">N</span>），也可使用 <span class="hint">重點標記</span>（快捷鍵 <b>B</b>）快速紀錄重點之後再整理',imgUrl:"/dist/image/icon/player/page1.svg?v=0913",isNew:!0,isShow:!0,isBack:!1,isNext:!0,isFinished:!1,showBlock:".player__footer"},{pages:2,title:"發布討論",content:'您也可以在課堂中 <span class="hint">發布討論</span>（快捷鍵 <span class="hint">D</span>），與老師同學一起討論課程內容或疑問',imgUrl:"/dist/image/icon/player/page2.svg?v=0913",isNew:!0,isShow:!0,isBack:!0,isNext:!0,isFinished:!1,showBlock:".discussionModal"},{pages:3,title:"回到課堂教室",content:"由此可至課堂教室使用課程相關功能",imgUrl:"/dist/image/icon/player/page3.svg?v=0913",isNew:!0,isShow:!0,isBack:!0,isNext:!0,isFinished:!1,showBlock:".js-back-btn"},{pages:4,title:"播放設定",content:"您可以在此找到速度、字幕、畫質等相關設定",imgUrl:"/dist/image/icon/player/page4.svg?v=0913",isNew:!1,isShow:!0,isBack:!0,isNext:!0,isFinished:!1,showBlock:".jw-icon-settings"},{pages:5,title:"隱藏／顯示單元列表",content:"顯示單元列表可開啟更多學習相關功能",imgUrl:"/dist/image/icon/player/page5.svg?v=0913",isNew:!1,isShow:!1,isBack:!0,isNext:!1,isFinished:!0,showBlock:""}];var i=n.filter((function(e){return e.pages===a}));(l=o(".guide__card")).find(".guide__pages .page").text(i[0].pages),l.find(".guide__title .title").text(i[0].title),l.find(".guide__content").html(i[0].content),l.find(".guide__images img").attr("src",i[0].imgUrl);var r=i[0].pages;if(e.studio.setActive("pageDots","dotEach",r),(e.isInPage("classroomv3")||e.body.hasClass("classroomv3"))&&("pc"!==e.getCurrentDevice(o(window).width())||window.innerWidth>=1240&&window.innerWidth<=1303||window.innerWidth>=1041&&window.innerWidth<=1094)&&(i[0].showBlock=""),i[0].isNew?l.find(".guide__title .newTag").removeClass("hide"):l.find(".guide__title .newTag").addClass("hide"),i[0].isShow?l.find(".guide__btnGroups .isShow").removeClass("hide"):l.find(".guide__btnGroups .isShow").addClass("hide"),i[0].isBack?(l.find(".guide__pages .page__icon").addClass("isBack"),l.find(".guide__btnGroups .yotta__btn:first-child").addClass("isBack")):(l.find(".guide__pages .page__icon").removeClass("isBack"),l.find(".guide__btnGroups .yotta__btn:first-child").removeClass("isBack")),i[0].isNext?l.find(".guide__btnGroups .isNext").removeClass("hide"):l.find(".guide__btnGroups .isNext").addClass("hide"),i[0].isFinished?l.find(".guide__btnGroups .isFinished").removeClass("hide"):l.find(".guide__btnGroups .isFinished").addClass("hide"),e.isInPage("classroomv3")&&(3==i[0].pages&&(o(".chapter-block").find(".unit-block").first().addClass("js-first-unit-block"),o(".sidebar_desktop").find(".chapter-block").find(".unit-block").first().addClass("js-first-unit-block")),4===r)&&e.studio.setCheckBox(),!e.isInPage("classroomv3"))if(4==i[0].pages){var s=document.querySelector(".jw-icon-settings").getBoundingClientRect();(l=o(".guide-icon")).html('<img src="/dist/image/icon/player/nut.svg?v=0913" alt="">'),o(".guide-icon").css({top:s.y,left:s.x}),l.addClass("icon")}else{var l;(l=o(".guide-icon")).removeClass("icon")}if(e.isInPage("classroomv3"))var c=o("body");else c=o(".player-container");i[0]&&(c.find(".guide").removeClass("guide"),c.find(i[0].showBlock).addClass("guide"))},onPlay:function(){},onPause:function(){},onComplete:function(){},onTime:function(){},onSeek:function(){},onError:function(){},onLevelsChanged:function(){},onFirst:function(){}};return l};e.studio={setActive:function(e,t,a){var n=o(".".concat(e)).find(".".concat(t,":eq(").concat(a-1,")"));n.addClass("active"),n.siblings().removeClass("active")},setCheckBox:function(){var e=o(".chapter-block").find(".unit-block:eq(0)").find(".checkbox input[type='checkbox']").prop("checked"),t=o(".chapter-block").find(".unit-block:eq(1)").find(".checkbox input[type='checkbox']").prop("checked");e||o(".chapter-block").find(".unit-block:eq(0)").find(".checkbox input[type='checkbox']").prop("checked",!0),t&&o(".chapter-block").find(".unit-block:eq(1)").find(".checkbox input[type='checkbox']").prop("checked",!1)},resetCheckBox:function(){var t=e.lecture2.data.list[1].isDone,a=e.lecture2.data.list[2].isDone;o(".chapter-block").find(".unit-block:eq(0)").find(".checkbox input[type='checkbox']").prop("checked",t),o(".chapter-block").find(".unit-block:eq(1)").find(".checkbox input[type='checkbox']").prop("checked",a)}},t.hook("studio/captionsSize",(function(e){jwplayer().setCaptions({fontSize:{large:20,normal:16,small:14}[e.data("value")],edgeStyle:"uniform",backgroundOpacity:0}),e.parents(".jw-aptions-size-menu").addClass("hide")})),t.hook("studio/captionsPosition",(function(e){var t=e.data("value");o(".jwplayer .jw-captions").removeClass("top bottom").addClass(t),e.parents(".jw-aptions-menu").addClass("hide")})),t.hook("studio/normal",(function(t){var a=new n(t),i=o(".course-title").text();a.setup([],[],[],0,0,"課程介紹片",i),e.studio[a.id]=a})),t.hook("studio/demo",(function(t){var a=new n(t);e.studio[a.id]=a,e.demo.init(a.id)})),t.hook("studio/lecture",(function(t){var a=new n(t);e.studio[a.id]=a,e.lecture.init(a.id),e.body.hasClass("ie")&&!o.cookie("goodbyeIE")&&e.modal.show({src:"update-browser-modal",size:"sm",canClose:!0,cover:"opacity",header:"blue",title:"IE 瀏覽器更換建議"}),e.member.checkDoubleLogin()})),t.hook("studio/guide",(function(t){if(o.cookie(t.data("cookie-name"),!0,{expires:30,path:"/"}),t.parents(".player-guide-container").toggleClass("hide"),o(".guide-icon").removeClass("icon"),e.isInPage("classroomv3"))var a=o("body");else a=o(".player-container");a.find(".guide").removeClass("guide"),a.removeClass("guidebcg"),e.isInPage("classroomv3")&&e.studio.resetCheckBox()})),t.hook("studio/checkGuide",(function(t){e.isInPage("classroomv3")?o.cookie("player_guide_v3")&&t.addClass("hide"):o.cookie("player_guide")&&t.addClass("hide")})),t.hook("studio/initGuide",(function(t){var a=new n(t);e.isInPage("classroomv3")?o.cookie("player_guide_v3")||(o("body").addClass("guidebcg"),a.defaultGuide()):o.cookie("player_guide")||a.defaultGuide()})),t.hook("studio/preGuide",(function(e){var t=new n(e),a=o(".guide__card"),i=parseInt(a.find(".guide__pages .page").text());1!=i&&i>1&&(i-=1,t.defaultGuide(i))})),t.hook("studio/nextGuide",(function(t){var a=new n(t),i=o(".guide__card"),r=parseInt(i.find(".guide__pages .page").text());if(e.isInPage("classroomv3"))var s=9;else s=5;r<s&&(r+=1,a.defaultGuide(r))}))}(app,gee,o)},75407:(e,t,a)=>{var o=a(62163),n=a(58133),i=a(31175);!function(e,t,a){"use strict";e.studio2={already:!1,isFirstVideo:!0,current:{course_id:0,chapter_id:0,seek:0},player:{},statsData:{},videoInstance:null,setupPlayer:function(i,r,s){var l=!0;e.studio2.player.id_&&(e.studio2.player.dispose(),a(".player").prepend('<video class="video-js vjs-16-9" playsinline controls preload="auto" width="640" height="360"></video>')),a(".video-js").attr("id","video".concat(i.id)),e.vjsComponent.initPauseMask();var c=i.video.map((function(e){return{src:e.file,res:e.label,label:e.label}})),d=null;i.subtitle&&(d=[{src:i.subtitle[0].file,kind:i.subtitle[0].kind,label:i.subtitle[0].label,default:!0}]);var u=videojs("video".concat(i.id),{sources:c,tracks:d});e.studio2.player=u;var m=Math.floor(3*Math.random());u.nuevo({video_id:i.id,logo:"/member/gwm",logoposition:["RT","LT","LB"][m],shareMenu:!1,buttonRewind:!1});var h=u.getChild("ControlBar").addChild("button",{clickHandler:function(t){e.modal.showReportBugModal("classroomv3")}},13);h.controlText("問題回報與建議"),h.addClass("vjs-problem-report"),document.querySelector(".vjs-problem-report .vjs-icon-placeholder").innerHTML='<img class="img-icon" src="/dist/image/icon/icon-player-report.svg">',e.studio2.setPauseMask(),a(".vjs-big-play-button").append('<img class="img-icon video-play" src="/dist/image/icon/icon-player-play.svg">'),t.event.fire("app.studio2.setupPlayer"),u.on("ready",(function(){e.studio2.isFirstVideo&&e.studio2.player.currentTime(e.lecture2.data.current.position),e.studio2.current.seek&&e.studio2.player.currentTime(e.studio2.current.seek),e.studio2.already=!0,e.studio2.statsData={playTime:0,stayTime:0,pauseTime:o().format("x"),firstTime:o().format("x")}})),u.on("play",(function(){e.lecture2.list.find('.js-sidebar-list .unit-block[data-id="'.concat(e.lecture2.current.id,'"]')).toggleClass("active",!0).find(".js-tag-area").html("").append('<span class="play_now">播放中</span>');var t=a(".player-sidebar .unit-container").find(".unit-block");if(t.data("id")==e.lecture2.current.id&&t.toggleClass("active",!0).find(".js-tag-area").html("").append('<span class="play_now">播放中</span>'),n.isEmpty(e.lecture2.statsData))e.studio2.statsData={playTime:0,stayTime:0,pauseTime:o().format("x"),firstTime:o().format("x")};else{var i=e.studio2.statsData;i.pauseTime=o().format("x"),e.studio2.statsData=i}e.lecture2.showPause(!1);var c=l?"Play":"Resume";e.track.send("Videojs","".concat(c),"".concat(s," 單元").concat(r," 課程影片"),"ga"),l=!1})),u.on("pause",(function(){var t=e.studio2.statsData,n=o().format("x");t.playTime+=n-t.pauseTime,t.stayTime+=n-t.firstTime,e.studio2.statsData=t,e.lecture2.list.find('.js-sidebar-list .unit-block[data-id="'.concat(e.lecture2.current.id,'"]')).toggleClass("active",!1).find(".js-tag-area").html("").append('<span class="last_view">最後觀看</span>');var i=a(".player-sidebar .unit-container").find(".unit-block");i.data("id")==e.lecture2.current.id&&i.toggleClass("active",!1).find(".js-tag-area").html("").append('<span class="last_view">最後觀看</span>'),e.lecture2.showPause(!0),e.track.send("Videojs","Pause","".concat(s," 單元").concat(r," 課程影片"),"ga")})),u.on("ended",(function(){e.lecture2.showPause(!1),e.lecture2.next.action()})),u.on("seeked",(function(){var t=e.studio2.statsData,a=o().format("x");t.pauseTime=a,t.playTime+=a-t.pauseTime,e.studio2.statsData=t})),u.one("play",(function(){if(e.studio2.current.seek)e.studio2.handleCanplay((function(){e.studio2.set_marker("discuss",e.studio2.current.seek),e.waitFor(3).then((function(){e.studio2.current.seek=0,a(".progress-tag.discuss").hide()}))}));else{var o=e.lecture2.data.current.position;if(!o)return;e.studio2.isFirstVideo?e.studio2.handleCanplay((function(){e.studio2.set_marker("last",o),e.waitFor(3).then((function(){a(".progress-tag.last").hide()}))})):(t.event.subscribe("app.studio2.set_marker",(function(){var t=a(".progress-tag.jump-last");t.on("click",(function(){e.studio2.player.currentTime(o),t.hide()})),e.waitFor(10).then((function(){t.hide()}))})),e.studio2.handleCanplay((function(){e.studio2.set_marker("jump-last",o)})))}e.lecture2.list.find('.js-sidebar-list .unit-block[data-id="'.concat(e.lecture2.current.id,'"]')).toggleClass("active",!0).find(".js-tag-area").html("").append('<span class="play_now">播放中</span>')}))},handleCanplay:function(t){e.studio2.player.readyState()<1?e.studio2.player.on("canplay",t):t()},set_marker:function(o,n){var i="",r=e.studio2.player.duration();switch(o){case"current":n=n||e.studio2.player.currentTime(),i="正在筆記";break;case"note":i="筆記處";break;case"discuss":i="討論時間";break;case"last":i="最後觀看";break;case"jump-last":i="跳至最後觀看"}var s="";(n=n/r*100)<3?(s="is-front",n="calc(".concat(n,"% + 20px)")):n>90?(s="is-back",n="calc(".concat(n,"% - ").concat(12*(i.length-2),"px)")):n+="%";var l='<span class="progress-tag '.concat(o," ").concat(s,'" style="margin-left:-22px;top:-23px;left:').concat(n,';">').concat(i,"</span>");a(".progress-tag").remove(),a(".video-js").removeClass("vjs-user-inactive"),a(".vjs-progress-control .vjs-progress-holder").append(l),a(".vjs-control-bar").css("display","flex"),t.event.fire("app.studio2.set_marker")},setPauseMask:function(){var a=e.studio2.player.addChild("PauseMask");function o(e,o,n,i){a.addChild("button",{clickHandler:function(e){t.exe(o)}}).addClass(e),document.querySelector(".".concat(e)).innerHTML='<img class="img-icon '.concat(i,'" src="/dist/image/icon/icon-player-').concat(n,'.svg">')}o("vjs-prev-button","lecture2/playprev","prev"),o("vjs-rewind-button","lecture2/rewind","rewind"),o("vjs-play-button","lecture2/playvideo","play","video-play"),o("vjs-forward-button","lecture2/forward","fast-forward"),o("vjs-next-button","lecture2/playnext","next"),setTimeout((function(){document.querySelector(".vjs-prev-button").title="上一部影片",document.querySelector(".vjs-rewind-button").title="往前 10 秒",document.querySelector(".vjs-play-button").title="播放影片",document.querySelector(".vjs-forward-button").title="往後 10 秒",document.querySelector(".vjs-next-button").title="下一部影片"}),1e3)}},t.hook("studio/player",(function(t){e.studio2.current.course_id=Number(a("#courseID").val()),e.studio2.current.chapter_id=Number(a("#chapterID").val()),e.studio2.current.seek=t.data("seek")?1*t.data("seek"):0,e.lecture2.init()})),t.hook("togglePlayerSidebar",(function(){a(".js-player-menu-btn").hasClass("open")?a(".js-player-menu-btn").removeClass("open"):a(".js-player-menu-btn").addClass("open")})),t.hook("toggleTheme",(function(e){a("body").removeClass("night day").addClass(e.data("theme"))}))}(app,gee,i)},42016:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.studioIntro={already:!1,setupPlayer:function(t,o,n,i){var r=!0,s={},l=t?"".concat(t.id):"video";if(e.studioIntro[l]&&"video"!==l){e.studioIntro[l].dispose();var c='<video id="'.concat(l,'" class="video-js vjs-16-9" playsinline controls preload="auto" width="640" height="360"></video>');a(".player").prepend(c)}if(t){var d=t.video.map((function(e){return{src:e.file,res:e.label,label:e.label}})),u=null;t.subtitle&&(u=[{src:t.subtitle[0].file,kind:t.subtitle[0].kind,label:t.subtitle[0].label,default:!0}]),s={sources:d,tracks:u}}else s={};var m=videojs(l,s);e.studioIntro[l]=m,m.nuevo({shareMenu:!1}),m.on("ready",(function(){e.body.find(".course-intro-content").removeClass("loading"),e.studioIntro.already=!0})),m.on("play",(function(){var t=r?"Play":"Resume",a=o?"單元".concat(o):"";e.track.send("Videojs","".concat(t),"".concat(n," ").concat(a," ").concat(i),"ga"),r=!1})),m.on("pause",(function(){var t=o?"單元".concat(o):"";e.track.send("Videojs","Pause","".concat(n," ").concat(t," ").concat(i),"ga")})),m.on("ended",(function(){})),m.on("seeked",(function(){})),m.one("play",(function(){}))}},t.hook("studioIntro/normal",(function(t){var o=a(".course-title").text();e.studioIntro.setupPlayer(null,0,o,"課程介紹片")})),t.hook("studioIntro/demo",(function(t){e.studioIntro.box=t;var a={};a.id=e.demo.id,e.demo.init(a.id)}))}(app,gee,o)},21589:(e,t,a)=>{function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}function s(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}a(31175),function(e,t,a){"use strict";e.vjsComponent={initPauseMask:function(){var e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}(u,videojs.getComponent("Component"));var t,a,o,c,d=(o=u,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(o);if(c){var a=l(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return s(this,e)});function u(){return n(this,u),d.apply(this,arguments)}return t=u,(a=[{key:"createEl",value:function(){return videojs.dom.createEl("div",{className:"vjs-pause-container player-pause-container js-player-pause"})}}])&&i(t.prototype,a),Object.defineProperty(t,"prototype",{writable:!1}),u}();videojs.registerComponent("PauseMask",e)}}}(app,gee)},25219:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.subscribe={init:function(){},getNotifyList:function(a){var o=function(){0==this.code&&(e.stdSuccess(this),this.data.length&&(e.subscribe.render("notification-list",{data:this.data},a),a.removeClass("hide")))};t.yell("subscribe/log",{},o,o)},getSubscribeList:function(a){var o=function(){0!==this.code?6100===this.code?(e.subscribe.render("subscribe-empty-list",{},a),e.subscribe.getRecommendList(a.find(".js-recommend-teacher-list"),"full"),e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this):(e.stdSuccess(this),this.data.teachers.length?(e.subscribe.render("subscribe-teacher-list",{data:this.data.teachers},a),e.subscribe.getRecommendList(a.find(".js-recommend-teacher-list"),"default")):(e.subscribe.render("subscribe-empty-list",{},a),e.subscribe.getRecommendList(a.find(".js-recommend-teacher-list"),"full")))};t.yell("subscribe/my",{},o,o)},getSubscribeSidebar:function(a){var o=function(){if(0==this.code){e.stdSuccess(this);var t=this.data.total;e.member&&(t+=e.member.current.notify.student.article_collect),e.notify.update(".js-notify-subscribe-num",t),this.data.teachers.length&&(e.subscribe.render("sidebar-subscribe-block",{data:this.data.teachers},a.find(".js-subscribe-title")),this.data.teachers.length>3&&a.find(".js-more-subscribe").removeClass("hide").addClass("show"))}};t.yell("subscribe/my",{},o,o)},notifySubscribeNum:function(){var a=function(){if(0==this.code){e.stdSuccess(this);var t=this.data.total;e.member&&(t+=e.member.current.notify.student.article_collect),e.notify.update(".js-notify-subscribe-num",t)}};t.yell("subscribe/my",{},a,a)},getRecommendList:function(a,o){var n=function(){0!==this.code?(this.code,e.stdErr(this)):(e.stdSuccess(this),e.subscribe.render("recommend-teacher",{data:this.data},a))};t.yell("subscribe/recommend",{type:o},n,n)},render:function(a,o,n,i){if(i=void 0===i||i,e.tmplStores[a]){var r=e.tmplStores[a].render(o);switch(a){case"subscribe-empty-list":case"subscribe-teacher-list":case"recommend-teacher":case"notification-list":n.html(r);break;case"my-teacher":n.prepend(r);break;case"sidebar-subscribe-block":n.after(r)}t.init()}},updateSidebar:function(t,a){var o=t.data("id"),n=e.body.find(".js-subscribe-list");"unsubscribe"===a?e.subscribe.render("sidebar-subscribe-block",{data:[{teacherID:o,name:t.data("name"),avatars:t.data("avatars"),total:0}]},n.find(".js-subscribe-title")):n.find('li[data-id="'+o+'"]').remove()},updateSubscribeNum:function(t,a){var o=e.body.find('.js-teacher-subscribe-num[data-id="'+t+'"]');"unsubscribe"===a?o.text(parseInt(o.first().text(),10)+1):o.text(parseInt(o.first().text(),10)-1)}},t.hook("subscribe/resetTeacherNotification",(function(t){var a=t.find("a").attr("href");window.location.href=e.win[0].location.origin+a,0!=t.find(".count.sub").text()&&e.notify.reset("subscribe","subscribe",t.data("id"))})),t.hook("subscribe/set",(function(o){var n=o.data("type"),i=o.data("id"),r=o.data("set"),s=function(){if(0!==this.code)6100===this.code?(e.stdErr(this),t.exe("attemptToLogin",null)):e.stdErr(this);else{e.stdSuccess(this);var s="unsubscribe"===n?"Subscribe":"Unsubscribe";switch(e.track.send(s,s+"_teacher",i,"pixel"),r){case"my":o.parents(".js-teacher").remove(),0===(c=a(".js-subscribe-teacher-container")).find(".js-teacher").length&&(e.subscribe.render("subscribe-empty-list",{},c),e.subscribe.getRecommendList(c.find(".js-recommend-teacher-list"),"full")),a(".js-recommend-teacher-list").find(".btn[data-id="+i+"]").html('<svg class="svg-icon plus icon-white" viewBox="'.concat(t.iconStore.plus.viewBox,'">').concat(t.iconStore.plus.svg,"</svg><span>訂閱</span>")).data("type","unsubscribe").blur();var l=e.track.configCategory();e.track.send(l,"Click","Subscribed/Unsubscribe btn/"+i,"ga");break;case"recommend":var c;if("unsubscribe"===n)o.html('<icon class="svg-icon check icon-brand"></icon><span>已訂閱</span>').data("type","subscribe").blur().addClass("track").attr({"data-which":"ga","data-label":"Recommend/Unsubscribe btn/"+i,"data-hover":"false"}),0==(c=a(".js-subscribe-teacher-container")).find(".js-teacher").length&&(e.subscribe.render("subscribe-teacher-list",{},c),e.subscribe.getRecommendList(c.find(".js-recommend-teacher-list"),"default")),e.subscribe.render("my-teacher",{data:[{teacherID:i,name:o.data("name"),avatars:o.data("avatars"),new_course_num:0,new_article_num:0,total:0}]},c.find(".js-my-teacher-list")),l=e.track.configCategory(),e.track.send(l,"Click","Recommend/Subscribe btn/"+i,"ga");else o.html('<svg class="svg-icon plus icon-brand" viewBox="'.concat(t.iconStore.plus.viewBox,'">').concat(t.iconStore.plus.svg,"</svg><span>訂閱</span>")).data("type","unsubscribe").blur().addClass("track").attr({"data-which":"ga","data-label":"Recommend/Subscribe btn/"+i,"data-hover":"false"}),(c=a(".js-subscribe-teacher-container")).find(".js-teacher[data-id="+i+"]").remove(),0===c.find(".js-teacher").length&&(e.subscribe.render("subscribe-empty-list",{},c),e.subscribe.getRecommendList(c.find(".js-recommend-teacher-list"),"full")),l=e.track.configCategory(),e.track.send(l,"Click","Recommend/Unsubscribe btn/"+i,"ga");break;case"teacher-card":"unsubscribe"===n?(o.removeClass("btn-blue").addClass("btn-blue-border").html('<icon class="svg-icon check icon-brand"></icon><span>已訂閱</span>').data("type","subscribe").blur(),l=e.track.configCategory(),e.track.send(l,"Click","Teachercard/Subscribe btn/"+i,"ga")):(o.removeClass("btn-blue-border").addClass("btn-blue").html('<svg class="svg-icon plus icon-white" viewBox="'.concat(t.iconStore.plus.viewBox,'">').concat(t.iconStore.plus.svg,"</svg><span>訂閱</span>")).data("type","unsubscribe").blur(),l=e.track.configCategory(),e.track.send(l,"Click","Teachercard/Unsubscribe btn/"+i,"ga"));break;case"article":"unsubscribe"===n?o.html('<svg class="svg-icon check" viewBox="'.concat(t.iconStore.check.viewBox,'">').concat(t.iconStore.check.svg,"</svg><span>已訂閱</span>")).data("type","subscribe").blur():o.html('<svg class="svg-icon plus" viewBox="'.concat(t.iconStore.plus.viewBox,'">').concat(t.iconStore.plus.svg,"</svg><span>訂閱</span>")).data("type","unsubscribe").blur()}e.subscribe.updateSidebar(o,n),e.subscribe.updateSubscribeNum(o.data("id"),n),e.subscribe.notifySubscribeNum(),e.notify.bind("student","total");var d=a(".js-subscribe-list");d.length&&(d.find("li[data-id]").length>3?d.find(".js-more-subscribe").removeClass("hide").addClass("show"):d.find(".js-more-subscribe").removeClass("show").addClass("hide"))}};t.yell("subscribe/status",{teacherID:i},s,s)})),t.hook("subscribe/menu",(function(e){e.parents(".js-teacher").toggleClass("unsubscribe")})),t.hook("subscribe/refresh",(function(t){var a=e.body.find(".js-recommend-teacher-list");e.subscribe.getRecommendList(a,t.data("type"))})),t.hook("subscribe/init",(function(t){e.bar.action("#"+t.attr("id"),(function(){e.member.checkUserStatus((function(){e.subscribe.getNotifyList(t.find(".js-notification-list")),e.subscribe.getSubscribeList(t.find(".js-subscribe-teacher-container"))}),null,"#".concat(t.attr("id")))}))}))}(app,gee,o)},48334:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.tab={cu:null,current:"",queue:[],goBack:0,register:function(t,a){e.tab.queue[t]=a},show:function(t){a(".tab-loading").toggleClass("show",!0),e.tab.current=t,e.tab.cu.find('a[href="'+t+'"]').tab("show"),"function"==typeof e.tab.queue[t]&&e.tab.queue[t]()},hide:function(e){a(".tab-loading").toggleClass("show",!1)},onChange:function(t){e.tab.goBack=1,e.tab.show(window.location.hash)},handle:function(o){e.tab.cu=o,e.tab.cu.find("a").off("show.bs.tab").on("show.bs.tab",(function(o){e.tab.current!=o.target.hash&&(e.tab.current=o.target.hash,e.tab.queue[o.target.hash]?(a(".tab-loading").toggleClass("show",!0),e.tab.queue[o.target.hash](o)):e.tab.hide(o.target.hash),e.tab.cu.find("li").toggleClass("active",!1).end().find('a[href="'+o.target.hash+'"]').closest("li").addClass("active"),0===e.tab.goBack&&(history.pushState?history.pushState(null,null,o.target.hash):window.location.hash=o.target.hash),e.tab.goBack=0,t.go2Top())})),e.tab.cu.find("li>a").each((function(){var o=a(this),n=o.attr("func"),i=o.attr("href");t.check(n)&&e.tab.register(i,(function(){t.exe(n,o)}))})),window.onpopstate=e.tab.onChange;var n=window.location.hash,i=!1,r=!1;""===n?i=!0:0===e.tab.cu.find('a[href="'+n+'"]').length&&(i=!0,r=!0),i&&(n=e.tab.cu.find("a.js-default-tab").attr("href")),r&&(window.location.hash=n),e.tab.show(n)}},t.hook("tab/init",(function(t){var a=function(){e.tab.handle(t)};e.waitFor((function(){return void 0!==e.member.current.isLogin}),1e3).then(a,a)})),t.hook("tab/switch",(function(t){if(window.location.hash){var o=window.location.hash.substring(1);if("basic"!==o&&"intro"!==o&&"chapter"!==o)return;if("basic"===o&&((n=a(".js-basic-form")).find("input").each((function(){a(this).val()===a(this).attr("placeholder")&&a(this).val("")})),t.data("step","basic"),e.basic.set(n.serialize(),t)),"intro"===o){var n;if((n=a(".js-info-form")).find("input").each((function(){a(this).val()===a(this).attr("placeholder")&&a(this).val("")})),n.find("input[name=duration]:checked").hasClass("one-day"))var i=n.find(".oneDay").val()+" "+n.find(".startHour option:selected").text()+":"+n.find(".startMin option:selected").text(),r=n.find(".oneDay").val()+" "+n.find(".endHour option:selected").text()+":"+n.find(".endMin option:selected").text();else i=n.find(".startDate").val()+" 00:00",r=n.find(".endDate").val()+" 23:59";n.find('input[name="startDate"]').val(i).end().find('input[name="endDate"]').val(r).end().find('[name="description"]').val(e.editor.get("description")),t.data("step","info"),e.info.set(n.serialize(),t)}"chapter"===o&&(t.data("step","chapter"),e.editChapter.save()),e.basic.saveTag("save")}}))}(app,gee,o)},21563:(e,t,a)=>{var o=a(58133),n=a(31175);!function(e,t,a){"use strict";e.teacher={init:function(){t.clog("init::teacher"),e.loadHtml("teacher-course-card",e.teacher.box.find(".js-teacher-course-card"))},meta:function(){if(e.body.find(".teacher-dropdown-menu").length){var a=e.body.find(".teacher-dropdown-menu"),o=function(){if(0!==this.code)e.stdErr(this);else{e.member.current.teacherInfo=this.data,e.member.current.teacherInfo.nickname=e.member.current.nickname,e.member.current.teacherInfo.avatars=e.member.current.img;var o=e.tmplStores["small-teacher-menu"].render(e.member.current.teacherInfo);a.html(o),t.init()}a.find(".li-loading").removeClass("show")};e.waitFor((function(){return e.isValid(e.tmplStores["small-teacher-menu"])})).then((function(){t.yell("teacher/detail",{},o,o)}))}},loadList:function(t,a){e.more.type=t,e.more.tag=a,e.more.chunk=0,e.more.load(0,a)},toggleCategory:function(t){t=t||e.more.type,a(".js-teacher-category li").each((function(){a(this).find("a").data("value")===t?a(this).addClass("active"):a(this).removeClass("active")}))},loadBank:function(){var a=function(){if(0!==this.code)e.stdErr(this);else{var t=this.data.rows;e.modal.stack.defaultModal.find(".js-withdraw-bank-title").val(t.name).end().find(".js-withdraw-bank-code").val("("+t.bankID+")"+t.bankName).end().find(".js-withdraw-bank-branch").val(t.bankBranch).end().find(".js-withdraw-bank-account").val(t.account).end().find(".js-withdraw-type-info.type"+t.invoiceType).show().end().find('.js-withdraw-type-input[value="type'+t.invoiceType+'"]').prop("checked",1)}};t.yell("teacher/loadBank/",{},a,a)},course:function(n){var i=function(){if(0!==this.code)switch(this.code){case 6104:e.member.checkUserStatus((function(){e.teacher.init(),e.teacher.course(a(".manage-course-div"))}),null,"#courses"),e.stdErr(this);case 6100:break;default:e.stdErr(this)}else{var i=this.data;e.waitFor((function(){return!o.isEmpty(e.member.current)})).then((function(){var o=e.member.current.notify.teacher.course.list;i.backer&&a.each(i.backer,(function(e,t){t.notify=o[t.course_id]?o[t.course_id]:0})),i.finish&&a.each(i.finish,(function(e,t){t.notify=o[t.course_id]?o[t.course_id]:0})),i.online&&a.each(i.online,(function(e,t){t.notify=o[t.course_id]?o[t.course_id]:0})),i.offline&&a.each(i.offline,(function(e,t){t.notify=o[t.course_id]?o[t.course_id]:0})),e.renderBox(n,i,1),t.init(),e.arena.initCountdown()}))}};e.teacher.store?(e.renderBox(n,e.teacher.store,1),t.init(),e.arena.initCountdown()):t.yell("teacher/course",{},i,i)},setCol:function(a,o){var n=function(){0!==this.code?e.stdErr(this):e.stdSuccess(this)};t.yell("teacher/setCol",{col:a,val:o},n,n)},updateRecommend:function(){if(e.tmplStores["category-top-teacher-list"]){var o=e.tmplStores["category-top-teacher-list"].render({data:e.more.store});a(".js-top-teacher-list").html(o),t.init()}}},t.hook("initTeacher",(function(t){e.teacher.box=t,e.teacher.init()})),t.hook("teacher/courseinfo",(function(o){var n=a("#courseID").val();if(""===window.location.hash&&(window.location.hash="#bulletin"),n){var i=function(){if(0!==this.code)6100===this.code||e.stdErr(this);else{this.data.id=n;var i=e.tmplStores["teacher-classroom-header"].render({data:this.data});o.removeClass("loading").html(i),t.init(),a(".bs-tip-show").tooltip(),e.notify.bind("teacher","classroom-tab",n)}};t.yell("teacher/course",{courseID:n},i,i)}})),t.hook("teacher/category",(function(t){var o=a("#teacher-type").val()||"all";e.more.tag=a("#teacher-tag").val()||"1",window.onpopstate=function(t){t.state?(e.teacher.toggleCategory(t.state.id),e.more.clear(),e.teacher.loadList(t.state.id,e.more.tag)):e.teacher.loadList(e.more.type)},window.onload=function(){history.replaceState({id:o,tag:e.more.tag},null,"/teachers/"+o)}})),t.hook("teacher/list",(function(t){var o=t.data("value")||"all",n=t.data("tag")||"1",i="/teachers/"+o;e.teacher.toggleCategory(o),e.more.clear(),window.history&&history.pushState?(history.pushState({id:o,tag:n},null,i),e.teacher.loadList(o,n)):location.href=i,t.parents(".teacher-category-block").hasClass("fixed")&&a("html, body").animate({scrollTop:-1},600)})),t.hook("teacher/toggleIntroBlock",(function(t){var a=0,o=t.data("max")||230;e.notify.reset("subscribe","subscribe",t.data("id")),e.waitFor((function(){return(a=t.find(".js-teacher-full-intro").height())>0})).then((function(){a>o&&t.find(".cover").removeClass("hide open").end().removeClass("open")}))})),t.hook("teacher/toggleIntroBtn",(function(t){var a=t.closest(".js-teacher-intro"),o=!a.hasClass("open"),n=o?"收合內容":"了解更多",i=o?"Teacherintro/See less":"Teacherintro/See more";a.toggleClass("open",o),t.attr("data-label",i),t.find("span").text(n),o?e.icon.swapIcon(t,"sort-asc","icon-brand"):e.icon.swapIcon(t,"sort-desc","icon-brand")})),t.hook("toggleIntroBtn",(function(t){var a=t.closest(".intro"),o=!a.hasClass("open"),n=o?"收合內容":"了解更多";a.toggleClass("open",o),t.find("span").text(n),o?e.icon.swapIcon(t,"sort-asc","icon-white"):e.icon.swapIcon(t,"sort-desc","icon-white")})),t.hook("teacher/intro",(function(t){var a=0,o=1*(t.data("max")||230),n=t.find(".cover"),i=t.find(".intro");e.waitFor((function(){return(a=t.find(".js-teacher-intro-h-sensor").height())>0})).then((function(){a>o&&(i.removeClass("open"),n.removeClass("hide open"))})),e.notify.bind("teacher","manage-tab")})),t.hook("displayEditProfile",(function(e){a(".js-teacher-profile, .js-teacher-intro, .js-teacher-intro-form").addClass("manage")})),t.hook("leaveEditProfile",(function(t){var o=a("#teacher-intro").attr("name"),n=a("#teacher-intro").val();e.teacher.setCol(o,n),o=a("#helper-teacher-name").attr("name"),n=a("#helper-teacher-name").val(),e.teacher.setCol(o,n),o=a("#helper-teacher-job").attr("name"),n=a("#helper-teacher-job").val(),e.teacher.setCol(o,n),o=a("#helper-teacher-blog").attr("name"),n=a("#helper-teacher-blog").val(),e.teacher.setCol(o,n),o=a("#helper-teacher-fb").attr("name"),n=a("#helper-teacher-fb").val(),e.teacher.setCol(o,n),o=a("#helper-teacher-ig").attr("name"),n=a("#helper-teacher-ig").val(),e.teacher.setCol(o,n),a(".js-teacher-profile, .js-teacher-intro, .js-teacher-intro-form").removeClass("manage"),setTimeout((function(){location.reload()}),500)})),t.hook("countTeacherIntro",(function(e){var t=e.val().length,o=e.attr("maxlength");return a(".js-intro-count").text(t),a(".js-intro-remain").text(o-t),!0})),t.hook("teacher.setCol",(function(t){var a=t.attr("name"),o=t.val();e.teacher.setCol(a,o)})),t.hook("teacher.activeTag",(function(t){var o=t.find(".js-tag-list"),n=t.find(".js-active-tag-list");e.teacher.pro=[],n.find("li").each((function(){o.find('li[data-value="'+a(this).data("value")+'"]').addClass("active"),e.teacher.pro.push(a(this).data("value"))}))})),t.hook("toggleTag",(function(e){var t=e.find(".js-tag-list"),o=e.find(".js-active-tag-list"),n=e.data("limit"),i=a(e.event.target);i.is("i")&&(i=i.closest("li"));var r=i.attr("data-value");if(r>0)if(i.parent(".js-active-tag-list").length)i.remove(),t.find('li[data-value="'+r+'"]').removeClass("active");else{var s=o.find("li").length;!1===i.hasClass("active")&&s<n&&(i.addClass("active"),o.append('<li data-value="'+r+'">'+i.text()+'<i class="fa fa-times-circle" aria-hidden="true"></i></li>'))}})),t.hook("toggleManageTable",(function(e){var t=e.parents("table"),a=e.hasClass("contact-tab")||e.hasClass("payment-bg")?"display-contact":"display-payment";t.removeClass("display-payment display-contact").addClass(a)})),t.hook("teacher/loadBank",(function(t){e.teacher.loadBank()})),t.hook("teacher/loadCourse",(function(o){var n=o.attr("id");n&&(e.bar.after=function(){t.go2Top()},e.bar.action("#"+n,(function(){e.teacher.course(a(".manage-course-div"))})))}))}(app,gee,n)},62848:(e,t,a)=>{a(31175),function(e,t,a){"use strict";e.timer=function(){var e;this.interval=1e3,this.enable=new Boolean(!1),this.tick,this.start=function(){this.Enable=new Boolean(!0),(e=this).Enable&&(e.timerId=setInterval((function(){e.tick()}),e.interval))},this.stop=function(){e.Enable=new Boolean(!1),clearInterval(e.timerId)}}}(app,gee)},7067:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.track={first:0,init:function(){e.track.bindClick(e.body),e.track.first||(e.track.first++,e.track.keepAffiliate())},keepAffiliate:function(){var a=e.parseUrl("/"+location.search),o=function(){};t.isset(a.query.atm_src)&&t.yell("affiliate/pass",a.query,o,o)},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},manuallySendGA:function(t,a){var o=e.track.configCategory();e.track.send(o,t,a,"ga")},configCategory:function(){var t=e.win[0].location.pathname.split("/"),a=e.win[0].location.hash,o=t[1];if("course"===o||"teacher"===o&&("manage"===t[2]||"apply"===t[2])&&t[2]){var n=t[2];t[3]&&(n+="/"+t[3]),t[4]&&(isNaN(parseInt(t[4]))||(n+="/"+t[4]))}else if("search"===o){var i=e.win[0].location.search,r=e.win[0].location.search.split("=");n=o+"/"+(""===i?i:"?q="+decodeURI(r[1]))}else"post"===o?n=o+"/"+t[2]:(n=o,t[2]&&(isNaN(parseInt(t[2]))&&"all"!==t[2]||(n+="/"+t[2])),t[3]&&(isNaN(parseInt(t[3]))||(n+="/"+t[3])));var s=e.track.capitalizeFirstLetter(n);return a&&(s+=a),"mobile"===e.screen&&(s+=".m"),s},bind:function(t,o,n){var i=t.find(".track");i.length<1||(i.unbind(n+".gaTrack"),i.bind(n+".gaTrack",(function(){var t=a(this),n=e.track.configCategory();if("Campaign"!==n&&"Article"!==n&&"Campaign.m"!==n&&"Article.m"!==n){var i=n.split("/")[0],r=t.data("label")||t.attr("title")||e.docu.find("title").text(),s=r.split("/")[0];if(("Article"!==i||(r=r.replace("Tab","Content"),"Content"!==s||"Hover"!==o))&&("Dashboard"!==i&&"Classroom"!==i||"Tab"!==s&&"Homeworkmodal"!==s||"Hover"!==o)){var l=t.data("which");e.track.send(n,o,r,l)}}})))},bindClick:function(t){e.track.bind(t,"Click","click")},send:function(e,a,o,n){switch(n=n||"ga",t.clog(JSON.stringify({cate:e,act:a,label:o,which:n})),n){case"ga":t.isset(window.gtag)&&window.gtag("event",a,{event_category:e,event_label:o,value:""});break;case"pixel":t.isset(window.fbq)&&window.fbq("track",e,a,o);break;default:return}},view_item_list:function(t){var a=e.win[0].location.pathname.split("/"),o=a[1],n=o,i=o,r=o+"/"+a[2],s=a[2]&&"all"!==a[2]?"/"+a[2]:"",l=a[3]?"/"+a[3]:"",c=o+s+l,d=e.win[0].location.search,u=e.win[0].location.search.split("="),m=""===d?d:"query/"+decodeURI(u[1]),h=e.win[0].location.pathname;if("/"===h.charAt(0)&&(h=h.substr(1)),e.win[0].location.hash)var p=a[1]+"/#collect";if(o){switch(o){case"home":o=n;break;case"hits":o=i;break;case"campaign":o=r;break;case"explore":o=c;break;case"search":o=m;break;case"teacher":o=h;break;case"member":o=p}var f=Array.from(document.querySelectorAll(".view_item_list"));f.map((function(e){if("home"==o){var t=e.closest(".course-card-list").dataset.block;e.dataset.list_name="home/section"+t}else e.dataset.list_name=o}));var v=f.map((function(e){return{id:e.dataset.id,name:e.dataset.name,list_name:e.dataset.list_name,brand:e.dataset.brand,category:e.dataset.category,variant:e.dataset.variant,list_position:e.dataset.list_position,quantity:e.dataset.quantity,price:e.dataset.price}}));gtag("event","view_item_list",{items:v}),localStorage.setItem(o,JSON.stringify(v))}},select_content:function(e){var t={id:e.data("id"),name:e.data("name"),list_name:e.data("list_name"),brand:e.data("brand"),category:e.data("category"),variant:e.data("variant"),list_position:e.data("list_position"),quantity:e.data("quantity"),price:e.data("price")};gtag("event","select_content",{content_type:"product",items:[t]}),localStorage.setItem("select_content",JSON.stringify(t))},view_item:function(e){gtag("event","view_item",{items:[e]})},add_to_cart:function(e,t){if(t)switch(t){case"intro":case"member":case"basket":e=e;break;default:return}gtag("event","add_to_cart",{items:[e]}),localStorage.setItem("add_to_cart",JSON.stringify(e))},add_to_cart_checkout:function(e){var t=JSON.parse(localStorage.getItem("add_to_cart_checkout"))||[];t.push(e),localStorage.setItem("add_to_cart_checkout",JSON.stringify(t))},remove_from_cart:function(e,t){if(t)switch(t){case"home":case"basket":gtag("event","remove_from_cart",{items:[e]});break;case"non_interaction":gtag("event","remove_from_cart",{items:[e],non_interaction:!0});break;default:return}localStorage.setItem("remove_from_cart",JSON.stringify([e]))},begin_checkout_one:function(e){localStorage.setItem("begin_checkout",JSON.stringify(e)),gtag("event","begin_checkout",{items:e,checkout_step:"1",coupon:""})},checkout_progress_two:function(e){gtag("event","checkout_progress",{items:e,checkout_step:"2",coupon:""}),localStorage.setItem("checkout_progress_two",JSON.stringify(e))},checkout_progress_three:function(e,t){gtag("event","checkout_progress",{items:e,checkout_step:"3",coupon:t}),localStorage.setItem("checkout_progress_three",JSON.stringify(e))},purchase:function(e,t){gtag("event","purchase",{transaction_id:t.transaction_id,affiliation:t.affiliation,value:t.value,currency:t.currency,tax:t.tax,shipping:t.shipping,coupon:t.coupon,items:e}),fbq("track","Purchase",{content_ids:t.ids,value:t.value,currency:"TWD"});var a={transaction_id:t.transaction_id,affiliation:t.affiliation,value:t.value,currency:t.currency,tax:t.tax,shipping:t.shipping,coupon:t.coupon,items:e};localStorage.setItem("purchase",JSON.stringify(a)),localStorage.clear()}},t.hook("sendGA",(function(t){var a=e.track.configCategory();e.track.send(a,"Hover",t.data("label"),t.data("which"))})),t.hook("initTrack",(function(){e.track.init()})),t.hook("homeblockTracking",(function(t){var o=a(window.event.target);if(o.hasClass("tracking")&&e.track.send(o.data("gacate"),o.data("gaaction"),o.data("galabel"),"ga"),void 0!==o.closest(".slider--wrapper")&&!o.hasClass("js-collect-btn")){var n=parseInt(o.closest(".slider--wrapper").data("order"),10);isNaN(n)||e.track.send("".concat(t.data("gatype"),"Section"),"CourseCard_Jump","position".concat(n+1),"ga")}void 0!==o.attr("href")&&setTimeout((function(){window.location.href=o.attr("href")}),100)})),t.hook("explore/trackCard",(function(t){var o=a(t.event.target).closest(".js-course-card");if(!(o.length<=0)){var n=o.data("status"),i=n[0].toUpperCase()+n.slice(1)+"_Jump",r=o.data("which");e.track.send("courseCard",i,"",r),setTimeout((function(){window.location.href=o.data("href")}),100)}}))}(app,gee,o)},84832:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";var o=function(e,o){var n=("0"+Math.floor(100*Math.random()+1)).substr(-3),i=document.createElement("input");o=o||"file",i.type="file",i.id="fileupload"+n,i.style.cssText="display: none;";var r=a(i).appendTo("body");r.fileupload({url:t.apiUri+e,paramName:"file",dataType:"json",maxChunkSize:1e6,tmpName:"",done:function(e,t){s.next(t)},add:function(e,t){s.jqXHR=t.submit().done((function(e,t,a){})).fail((function(e,t,a){"abort"===a&&(s.box.removeClass("j-empty j-ready j-progressing").addClass("j-empty").find('input[type="file"]').val("").end().find(".progress-area .progress-bar").css("width","0%"),s.next())})).always((function(e,t,a){}))},start:function(e){r.tmpName=s.box.find(".files").text(),s.box.removeClass("j-empty j-ready j-progressing").addClass("j-progressing").find(".progress-area .progress-bar").css("width","0%")},progressall:function(e,t){var a=parseInt(t.loaded/t.total*100,10);s.box.find(".progress-area .progress-bar").css("width",a+"%").end().find(".progress-txt").text(a+"")}}).prop("disabled",!a.support.fileInput).parent().addClass(a.support.fileInput?void 0:"disabled");var s={box:{},q:[],state:0,status:"ready",oldStatus:"",jqXHR:{},fType:o,callback:function(e){},bind:function(e){e.each((function(){var e=this,t=a(e).closest(".fileinput-box");a(e).bind("change",(function(a){e.files[0]&&(s.add(e,e.files[0].name,t),s.showName(e.files[0],t))})),t.find(".btn-cancel").bind("click",(function(t){s.stop(e)}))}))},start:function(e,t,o){s.box=e.box,r.fileupload("add",{fileInput:a(e),formData:{fileType:s.fType,tableID:s.box.data("table-id"),rowID:s.box.data("row-id"),title:e.title}}),s.remove()},add:function(e,t,o){e.box=o||a(e).closest(".fileinput-box"),e.title=t||"",s.setStatus("progressing",e.box),e.box.find(".progress-txt").text("0"),s.q.push(e),0===s.state&&(s.state=1,s.start(e))},remove:function(){s.q.shift()},next:function(e){e&&(s.callback.call(s.box,e.result),s.setStatus("ready")),s.q.length>0?s.start(s.q[0]):(s.state=0,s.box={},s.jqXHR={})},stop:function(e){var o=e.closest(".fileinput-box"),n=0,i=o.data("row-id");t.clog(i),a.each(s.q,(function(e,t){i===t.box.data("row-id")&&(s.setStatus("empty",t.box),t.box.find('input[type="file"]').val(""),s.q.splice(e,1),hidePopover,n=1)})),0===n&&s.jqXHR!=={}&&s.jqXHR.abort()},setStatus:function(e,t){t=t||s.box,s.oldStatus=s.status,s.status=e,t!=={}&&t.removeClass("j-empty j-progressing j-ready").addClass("j-"+e)},showName:function(e,t){var a="string"==typeof e?e:e.name;t.find(".files").text(a)},removeName:function(e){e.find(".files").empty()}};return s};e.upload={init:function(e,t,a){var n=new o(t,a);return n.bind(e),n}},t.hook("initUpload",(function(e){new o(e.data("uri"),e.data("type")).bind(e.find("."+e.data("btn")))}))}(app,gee,o)},50270:(e,t,a)=>{var o=a(31175);!function(e,t,a){"use strict";e.withdraw={errMsg:{e4201:"尚有請款審核中",e4202:"餘額不足"},balance:0,init:function(){t.clog("withdraw::init")},load:function(){var o=function(){if(0!==this.code)e.stdErr(this);else{var t=!!this.data.rows.length;a(".js-empty-withdraw").toggleClass("hide",t),t&&(e.withdraw.render(this.data),e.pageCounter++)}};t.yell("withdraw/mine/",{},o,o)},new:function(a){var o=function(){a.prop("disabled",!1).find(".fa-spinner").remove(),0!==this.code?e.stdErr(this):(e.stdSuccess(this),e.modal.show({src:"success-withdraw-form-modal",size:"sm",header:"blue",title:"送出申請"}),e.isInPage("cooperation/manage")?e.teacherManage.loadTotalIncome():e.withdraw.check())};t.yell("withdraw/request",{},o,o)},seen:function(a){var o=function(){0!==this.code?e.stdErr(this):e.stdSuccess(this)};t.yell("withdraw/seen",{},o,o)},check:function(){var o=function(){if(0!==this.code)e.stdErr(this);else{var o=this.data;if(a(".js-withdraw-total").text(a.fn.formatNum(o.withdraw,0)),a(".js-balance-total").text(a.fn.formatNum(o.balance,0)),2==o.invoice_type&&a(".js-balance-total-tax").text(a.fn.formatNum(Math.floor(.05*o.balance),0)),a(".js-all-total").text(a.fn.formatNum(1*o.balance+1*o.withdraw,0)),"Pending"===o.status?o.request>0&&(a(".account-balance-div").removeClass("st-init st-ready").addClass("st-pending"),e.withdraw.balance=o.request,e.withdraw.request=o.request,e.withdraw.balanceTax=Math.floor(.05*o.request),e.withdraw.invoice_type=o.invoice_type):o.balance>0?(a(".account-balance-div").removeClass("st-init st-pending").addClass("st-ready"),e.withdraw.balance=o.balance,e.withdraw.balanceTax=Math.floor(.05*o.balance),e.withdraw.invoice_type=o.invoice_type):a(".account-balance-div").removeClass("st-init st-pending st-ready").addClass("st-empty"),o.notices.length>0){e.withdraw.notices=o.notices;var n=e.withdraw.notices,i=0;!function a(o){t.event.clearSubscribe("modal.closed"),o&&(e.withdraw.currentNotice=o,"Paid"===o.status?e.modal.show({src:"withdraw-success-modal",size:"lg",canClose:!1,header:"blue",title:"請款成功"}):e.modal.show({src:"withdraw-fail-modal",size:"lg",canClose:!1,header:"blue",title:"請款申請未通過"}),t.event.subscribe("modal.closed",(function(){i+=1,window.setTimeout((function(){a(n[i])}),500)})))}(n[i])}t.event.fire("withdraw.loaded")}};t.yell("withdraw/check",{},o,o)},render:function(a){t.clog("---------------- withdraw.render"),e.renderBox(e.withdraw.box,{data:a.rows},1),e.waitFor((function(){return!e.withdraw.box.is(":empty")})).then((function(){t.init()}))},showWithdrawFormModal:function(){e.modal.slienceMode=1,e.modal.show({src:"withdraw-form-modal",size:"lg",header:"blue",title:"提領帳戶餘額"});var o=function(){e.waitFor((function(){return a(".withdraw-form-modal").length>0})).then((function(){var t=a(".withdraw-form-modal");t.find(".js-balance-total").text(a.fn.formatNum(e.withdraw.balance,0)),2==e.withdraw.invoice_type?(t.find(".js-balance-total-tax").text(a.fn.formatNum(e.withdraw.balanceTax,0)),a(".js-invoice-total").text(a.fn.formatNum(Math.floor(1.05*e.withdraw.balance),0))):t.find(".js-balance-total-tax-p").addClass("hide"),e.withdraw.request>0?a(".js-withdraw-btn-group2").removeClass("hide"):a(".js-withdraw-btn-group1").removeClass("hide")}))};void 0!==e.withdraw.invoice_type?o():t.event.subscribe("withdraw.loaded",o)}},t.hook("withdraw/toggleBtn",(function(t){var o=!t.hasClass("open");e.track.manuallySendGA("Click",t.data("label")),t.closest(".js-withdraw-overview").toggleClass("open",o).end().toggleClass("open",o),o?(e.pageCounter=1,e.loadHtml("withdraw-list",a("#old-collection-list")),e.icon.swapIcon(t,"sort-asc","icon-white")):e.icon.swapIcon(t,"sort-desc","icon-white")})),t.hook("withdraw/openModal",(function(t){e.withdraw.showWithdrawFormModal()})),e.mRoute.addRoute("withdraw-form-modal",(function(){e.withdraw.showWithdrawFormModal()})),t.hook("withdraw/request",(function(t){e.progressingBtn(t),e.withdraw.new(t)})),t.hook("withdraw/seen",(function(t){e.modal.hide("defaultModal"),e.withdraw.seen()})),t.hook("withdraw/notice",(function(a){var o=a.data("tmpl");t.initTmpl(a),a.html(e.tmplStores[o].render({rows:[e.withdraw.currentNotice]})),e.waitFor((function(){return!a.is(":empty")})).then((function(){t.init()}))})),t.hook("withdraw/next",(function(t){1===e.pageCounter&&(e.loadTmpl(t.data("tmpl"),t),e.withdraw.box=t),e.withdraw.load()})),t.hook("withdraw/react",(function(e){var o=a(e.event.target).closest(".item.show"),n=o.attr("func");void 0!==n&&(n="withdraw/"+n,t.check(n)&&(o.event=e.event,t.exe(n,o),e.event.preventDefault()))}))}(app,gee,o)},69469:(e,t,a)=>{var o=a(31175);!function(e,t,a,n){"use strict";var i,r,s,l=function(){var e,a={},o=t.documentElement,n=t.createElement("input"),i=t.createElement("select"),r=t.createElement("textarea"),s={},l={};return a.attributes=function(e){for(var t=0,a=e.length;t<a;t++)l[e[t]]=!!(e[t]in n);return l}("max min multiple pattern required step".split(" ")),a.inputtypes=function(e){for(var a,i,r,l=0,c=e.length;l<c;l++)n.setAttribute("type",i=e[l]),(a="text"!==n.type)&&(n.value=":)",n.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(i)&&void 0!==n.style.WebkitAppearance?(o.appendChild(n),a=(r=t.defaultView).getComputedStyle&&"textfield"!==r.getComputedStyle(n,null).WebkitAppearance&&0!==n.offsetHeight,o.removeChild(n)):/^(search|tel)$/.test(i)||(a=/^(url|email)$/.test(i)?n.checkValidity&&!1===n.checkValidity():":)"!==n.value)),s[e[l]]=!!a;return s}("search tel url email datetime date month week time datetime-local number range color".split(" ")),function(o){for(var i=0,r=o.length;i<r;i++){e=n;try{e.setAttribute("type",o[i])}catch(a){e=t.createElement('<input type="'+o[i]+'">')}e.style.cssText="position:absolute;visibility:hidden;",a.inputtypes[o[i]]=!!e.checkValidity}}("text password radio checkbox".split(" ")),a.inputtypes.select=!!i.checkValidity,a.inputtypes.textarea=!!r.checkValidity,n=null,e=null,i=null,r=null,a}(),c=function(){var e={isoDate:/^(\d{4})-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/},t=/(\/|\-|\.)/g,o=/\/|\-|\./g,n="(0[1-9]|[12][0-9]|3[01])",i="(0[1-9]|1[012])",r="(\\d{4})";function s(e,t){for(var a=-1,o=e?e.length:0;++a<o;)if(e[a]===t)return a;return-1}function l(t){if(!e.isoDate.test(t))return!1;var a=e.isoDate.exec(t);return new Date(parseInt(a[1],10),parseInt(a[2],10)-1,parseInt(a[3],10))}return{formatISODate:function(e,t){function o(e){return e<10?"0"+e:e}var n=o(e.getDate()),i=o(e.getMonth()+1),r=e.getFullYear();return(t.getAttribute("data-format")||a.fn.validatr.options.dateFormat).replace("mm",i).replace("yyyy",r).replace("dd",n)},parseDate:function(e){var c=e.getAttribute("data-format")||a.fn.validatr.options.dateFormat,d=c.split(o),u=e.value.split(o),m="yyyy-mm-dd".split("-"),h=c.replace(t,"\\$1").replace("yyyy",r).replace("mm",i).replace("dd",n),p=-1,f=m.length,v=[];if(!(h=new RegExp(h)).test(e.value))return!1;for(;++p<f;)v[p]=u[s(d,m[p])];return l(v.join("-"))},parseISODate:l}}(),d=(i={color:/^#[0-9A-F]{6}$/i,email:/^[a-zA-Z0-9.!#$%&’*+\/=?\^_`{|}~\-]+@[a-zA-Z0-9\-]+(?:\.[a-zA-Z0-9\-]+)*$/,isoDate:/^(\d{4})-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/,number:/^-?\d*\.?\d*$/,time:/^([01][0-9]|2[0-3])(:([0-5][0-9])){2}$/,url:/^\s*https?:\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?\s*$/},r={boxes:/checkbox|radio/i,spaces:/,\s*/},s=function(e,t,o,n,i){var r=!0,s=a.validatr.messages.range.base,l=t,d=o;return"date"===i&&(l=t&&c.formatISODate(t,this),d=o&&c.formatISODate(o,this)),!1!==e&&(!1!==n&&(r="any"===n||(e-t)%n==0,s=a.validatr.messages.range.invalid),r&&(!1!==t&&!1!==o?(r=e>=t&&e<=o,s=a.validatr.messages.range.overUnder):!1!==t?(r=e>=t,s=a.validatr.messages.range.overflow):!1!==o&&(r=e<=o,s=a.validatr.messages.range.underflow))),{valid:!1!==e&&r,message:s.replace("{{type}}",i).replace("{{min}}",l).replace("{{max}}",d)}},{checkbox:function(e){return{valid:e.checked,message:a.validatr.messages.checkbox}},color:function(e){return{valid:i.color.test(e.value),message:a.validatr.messages.color}},date:function(e){var t=a(e),o=l.inputtypes.date?c.parseISODate(e.value):c.parseDate(e),n=!!t.attr("min")&&c.parseISODate(t.attr("min")),i=!!t.attr("max")&&c.parseISODate(t.attr("max"));return s.call(e,o,n,i,!1,"date")},email:function(e){var t=!0,o=a.validatr.messages.email.single;if(l.attributes.multiple?e.multiple:a(e).is("[multiple]")){var n=e.value.split(r.spaces);a.each(n,(function(e,n){if(!i.email.test(n))return t=!1,void(o=a.validatr.messages.email.multiple)}))}else t=i.email.test(e.value);return{valid:t,message:o}},number:function(e){var t=e.value.replace(",",""),a=(!!i.number.test(t)&&parseFloat(t),!!i.number.test(e.getAttribute("min"))&&parseFloat(e.getAttribute("min"))),o=!!i.number.test(e.getAttribute("max"))&&parseFloat(e.getAttribute("max")),n=i.number.test(e.getAttribute("step"))?parseFloat(e.getAttribute("step")):"any"===e.getAttribute("step")&&"any";return(!1===n||n<=0)&&(n=1),s.call(e,t,a,o,n,"number")},pattern:function(e){return{valid:new RegExp(e.getAttribute("pattern")).test(e.value),message:a.validatr.messages.pattern}},radio:function(e){return{valid:a(t.getElementsByName(e.name)).is(":checked"),message:a.validatr.messages.radio}},range:function(e){return this.number(e)},required:function(e){return r.boxes.test(e.type)?this[e.type](e):{valid:!!e.value.length,message:"select"===e.nodeName.toLowerCase()?a.validatr.messages.select:a.validatr.messages.required}},time:function(e){return{valid:i.time.test(e.value),message:a.validatr.messages.time}},url:function(e){return{valid:i.url.test(e.value),message:a.validatr.messages.url}}}),u={as:function(e){if("text"!==e.type)throw new Error("element must have a type of text");var t=e.getAttribute("data-as");if(d[t])return d[t](e)},match:function(e){var o=e.getAttribute("data-match"),n=t.getElementById(o)||t.getElementsByName(o)[0];return n?(a(n).off("valid.validatrinput").on("valid.validatrinput",(function(){e.value===n.value&&h(e)})),{valid:e.value===n.value,message:"'"+e.name+"' does not equal '"+n.name+"'"}):{valid:!1,message:"'"+o+"' can not be found"}}},m={boxes:/checkbox|radio/i,leftright:/left|right/i,notInput:/select|textarea/i,topbottom:/top|bottom/i};function h(e){var o=a(e).closest(".form-group");if(a(e).next(".validatr-err").remove(),o.removeClass("has-error has-pass has-feedback"),"radio"===e.type){var n=a(t.getElementsByName(e.name)).filter("[required]");n.length&&(e=n[0])}var i=a(e),r=m.notInput.test(e.nodeName)?e.nodeName.toLowerCase():e.getAttribute("type"),s=l.attributes.required?e.required:a(e).is("[required]"),c={valid:!0,message:""};if(l.inputtypes[r]?(c.valid=e.validity.valid,c.message=e.validationMessage,c.message=a(e).data("msg")?a(e).data("msg"):c.message):(s&&(c=d.required(e)),c.valid&&e.value.length&&!m.boxes.test(r)&&(e.pattern&&(r="pattern"),d[r]&&(c=d[r](e)))),c.valid)for(var h in u)if(u.hasOwnProperty(h)&&i.is("[data-"+h+"]")&&!(c=u[h](e)).valid)break;return c.valid?(i.trigger("valid"),o.addClass("has-pass has-feedback"),!0):(a.data(e,"validationMessage",c.message),i.trigger("invalid"),p(i,c.message),!1)}function p(e,t){var o=a(a.fn.validatr.options.template.replace("{{message}}",t)),n=e.closest(".form-group"),i=n.find(".error-msg");n.removeClass("has-error has-pass has-feedback").addClass("has-error"),e.one("keyup",app.clearMsg),i?i.text(t):e.after(o)}a.fn.validatr=function(){return this},a.fn.validatr.options={dateFormat:"yyyy-mm-dd",location:"bottom",position:p,showall:!0,template:'<label class="validatr-err error-msg control-label">{{message}}</label>',valid:a.noop},a.validatr=new function(){return{addTest:function(e){var t="string"!=typeof e,o=Array.prototype.slice.call(arguments,1)[0];if(t)a.extend(u,e);else{if(!o)throw new Error("You must include a callback function");u[e]=o}},getElements:function(e){if(this.formElements)return this.formElements;var t=a(e).map((function(){return a.makeArray(this.elements)})).not("fieldset, button, input[type=submit], input[type=button], input[type=reset]");return e.id&&(t=t.add(a('[form="'+e.id+'"]'))),t},validateElement:function(e){if(!e)throw new Error("method requires an element");return h(e[0]||e)},validateForm:function(e){var t,n=this.el||(e instanceof o?e[0]:e);if("form"!==n.nodeName.toLowerCase())throw new Error("you must pass a form to this method");return t=function(e){var t=!0;return e.each((function(e,o){(t||a.fn.validatr.options.showall)&&(h(o)||(t=!1))})),t}(this.formElements||this.getElements(n)),t}}},a.validatr.messages={checkbox:"Please check this box if you want to proceed.",color:"Please enter a color in the format #xxxxxx",email:{single:"Please enter an email address.",multiple:"Please enter a comma separated list of email addresses."},pattern:"Please match the requested format.",radio:"Please select one of these options.",range:{base:"Please enter a {{type}}",overflow:"Please enter a {{type}} greater than or equal to {{min}}.",overUnder:"Please enter a {{type}} greater than or equal to {{min}}<br> and less than or equal to {{max}}.",invalid:"Invalid {{type}}",underflow:"Please enter a {{type}} less than or equal to {{max}}."},required:"請輸入必填",select:"Please select an item in the list.",time:"Please enter a time in the format hh:mm:ss",url:"Please enter a url."},a.expr[":"].validatr=function(e){return!!a.data(e,"validatr")},a.validatr.addTest("chinese",(function(e){var t=new RegExp("^[一-﨩]*$"),a=(new RegExp("^[-]*$"),e.value.replace(/\s/g,"")),o=!0;return t.test(a)||(o=!1),{valid:o,message:"Please enter some chinese."}})),a.validatr.addTest("password",(function(e){return{valid:!0===/^(?=.*\d)(?=.*[a-zA-Z]){2,}(?=.*[a-zA-Z])(?!.*\s).{6,32}$/.test(e.value),message:a(e).data("msg")||"密碼最少須為六位英文數字組合"}})),a.validatr.addTest("youtube",(function(e){var t=a(e).val();if(a.trim(t)){var o=t.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=|\?v=)([^#\&\?]*).*/);if(o&&11==o[2].length)return{valid:!0}}return{valid:!1,message:"YOUTUBE 連結錯誤"}})),a.validatr.addTest("fileValid",(function(e){var t=a(e).closest("form"),o=t.find("div.uploaded-area span[data-fid]").length,n=t.find("div.uploaded-area span[data-path]").length,i=t.find("div.uploaded-area span[data-id]").length;return 0===o&&0===n&&0===i?{valid:!1,message:"請選擇一個檔案"}:{valid:!0}}))}(window,document,o)},42480:()=>{},5534:()=>{},76737:()=>{},64381:()=>{},87599:e=>{"use strict";e.exports=JSON.parse('{"categories":[{"id":"people","name":"Smileys & People","emojis":[{"name":"Grinning Face","value":"😀"},{"name":"Grinning Face with Smiling Eyes","value":"😁"},{"name":"Face with Tears of Joy","value":"😂"},{"name":"Smiling Face with Open Mouth","value":"😃"},{"name":"Smiling Face with Open Mouth and Smiling Eyes","value":"😄"},{"name":"Smiling Face with Open Mouth and Cold Sweat","value":"😅"},{"name":"Smiling Face with Open Mouth and Tightly-Closed Eyes","value":"😆"},{"name":"Winking Face","value":"😉"},{"name":"Smiling Face with Smiling Eyes","value":"😊"},{"name":"Face Savouring Delicious Food","value":"😋"},{"name":"Smiling Face with Sunglasses","value":"😎"},{"name":"Smiling Face with Heart-Shaped Eyes","value":"😍"},{"name":"Face Throwing a Kiss","value":"😘"},{"name":"Kissing Face","value":"😗"},{"name":"Kissing Face with Smiling Eyes","value":"😙"},{"name":"Kissing Face with Closed Eyes","value":"😚"},{"name":"White Smiling Face","value":"☺️"},{"name":"Slightly Smiling Face","value":"🙂"},{"name":"Neutral Face","value":"😐"},{"name":"Expressionless Face","value":"😑"},{"name":"Face Without Mouth","value":"😶"},{"name":"Smirking Face","value":"😏"},{"name":"Persevering Face","value":"😣"},{"name":"Disappointed but Relieved Face","value":"😥"},{"name":"Face with Open Mouth","value":"😮"},{"name":"Hushed Face","value":"😯"},{"name":"Sleepy Face","value":"😪"},{"name":"Tired Face","value":"😫"},{"name":"Sleeping Face","value":"😴"},{"name":"Relieved Face","value":"😌"},{"name":"Face with Stuck-out Tongue","value":"😛"},{"name":"Face with Stuck-out Tongue and Winking Eye","value":"😜"},{"name":"Face with Stuck-out Tongue and Tightly-Closed Eyes","value":"😝"},{"name":"Unamused Face","value":"😒"},{"name":"Face with Cold Sweat","value":"😓"},{"name":"Pensive Face","value":"😔"},{"name":"Confused Face","value":"😕"},{"name":"Astonished Face","value":"😲"},{"name":"Confounded Face","value":"😖"},{"name":"Disappointed Face","value":"😞"},{"name":"Worried Face","value":"😟"},{"name":"Face with Look of Triumph","value":"😤"},{"name":"Crying Face","value":"😢"},{"name":"Loudly Crying Face","value":"😭"},{"name":"Frowning Face with Open Mouth","value":"😦"},{"name":"Anguished Face","value":"😧"},{"name":"Fearful Face","value":"😨"},{"name":"Weary Face","value":"😩"},{"name":"Grimacing Face","value":"😬"},{"name":"Face with Open Mouth and Cold Sweat","value":"😰"},{"name":"Face Screaming in Fear","value":"😱"},{"name":"Flushed Face","value":"😳"},{"name":"Dizzy Face","value":"😵"},{"name":"Pouting Face","value":"😡"},{"name":"Angry Face","value":"😠"},{"name":"Face with Medical Mask","value":"😷"},{"name":"Smiling Face with Halo","value":"😇"},{"name":"Smiling Face with Horns","value":"😈"},{"name":"Imp","value":"👿"},{"name":"Japanese Ogre","value":"👹"},{"name":"Japanese Goblin","value":"👺"},{"name":"Skull","value":"💀"},{"name":"Ghost","value":"👻"},{"name":"Extraterrestrial Alien","value":"👽"},{"name":"Alien Monster","value":"👾"},{"name":"Pile of Poo","value":"💩"},{"name":"Smiling Cat Face with Open Mouth","value":"😺"},{"name":"Grinning Cat Face with Smiling Eyes","value":"😸"},{"name":"Cat Face with Tears of Joy","value":"😹"},{"name":"Smiling Cat Face with Heart-Shaped Eyes","value":"😻"},{"name":"Cat Face with Wry Smile","value":"😼"},{"name":"Kissing Cat Face with Closed Eyes","value":"😽"},{"name":"Weary Cat Face","value":"🙀"},{"name":"Crying Cat Face","value":"😿"},{"name":"Pouting Cat Face","value":"😾"},{"name":"See-No-Evil Monkey","value":"🙈"},{"name":"Hear-No-Evil Monkey","value":"🙉"},{"name":"Speak-No-Evil Monkey","value":"🙊"},{"name":"Baby","value":"👶"},{"name":"Boy","value":"👦"},{"name":"Girl","value":"👧"},{"name":"Man","value":"👨"},{"name":"Woman","value":"👩"},{"name":"Older Man","value":"👴"},{"name":"Older Woman","value":"👵"},{"name":"Police Officer","value":"👮"},{"name":"Guardsman","value":"💂"},{"name":"Construction Worker","value":"👷"},{"name":"Princess","value":"👸"},{"name":"Man with Turban","value":"👳"},{"name":"Man with Gua Pi Mao","value":"👲"},{"name":"Person with Blond Hair","value":"👱"},{"name":"Bride with Veil","value":"👰"},{"name":"Baby Angel","value":"👼"},{"name":"Father Christmas","value":"🎅"},{"name":"Person Frowning","value":"🙍"},{"name":"Person with Pouting Face","value":"🙎"},{"name":"Face with No Good Gesture","value":"🙅"},{"name":"Face with Ok Gesture","value":"🙆"},{"name":"Information Desk Person","value":"💁"},{"name":"Happy Person Raising One Hand","value":"🙋"},{"name":"Person Bowing Deeply","value":"🙇"},{"name":"Face Massage","value":"💆"},{"name":"Haircut","value":"💇"},{"name":"Pedestrian","value":"🚶"},{"name":"Runner","value":"🏃"},{"name":"Dancer","value":"💃"},{"name":"Woman with Bunny Ears","value":"👯"},{"name":"Bath","value":"🛀"},{"name":"Bust in Silhouette","value":"👤"},{"name":"Busts in Silhouette","value":"👥"},{"name":"Horse Racing","value":"🏇"},{"name":"Snowboarder","value":"🏂"},{"name":"Surfer","value":"🏄"},{"name":"Rowboat","value":"🚣"},{"name":"Swimmer","value":"🏊"},{"name":"Bicyclist","value":"🚴"},{"name":"Mountain Bicyclist","value":"🚵"},{"name":"Man and Woman Holding Hands","value":"👫"},{"name":"Two Men Holding Hands","value":"👬"},{"name":"Two Women Holding Hands","value":"👭"},{"name":"Kiss","value":"💏"},{"name":"Man Kiss Man","value":"👨‍❤️‍💋‍👨"},{"name":"Woman Kiss Woman","value":"👩‍❤️‍💋‍👩"},{"name":"Couple with Heart","value":"💑"},{"name":"Man Heart Man","value":"👨‍❤️‍👨"},{"name":"Woman Heart Woman","value":"👩‍❤️‍👩"},{"name":"Family","value":"👪"},{"name":"Man Woman Boy","value":"👨‍👩‍👦"},{"name":"Man Woman Girl","value":"👨‍👩‍👧"},{"name":"Man Woman Girl Boy","value":"👨‍👩‍👧‍👦"},{"name":"Man Woman Boy Boy","value":"👨‍👩‍👦‍👦"},{"name":"Man Woman Girl Girl","value":"👨‍👩‍👧‍👧"},{"name":"Man Man Boy","value":"👨‍👨‍👦"},{"name":"Man Man Girl","value":"👨‍👨‍👧"},{"name":"Man Man Girl Boy","value":"👨‍👨‍👧‍👦"},{"name":"Man Man Boy Boy","value":"👨‍👨‍👦‍👦"},{"name":"Man Man Girl Girl","value":"👨‍👨‍👧‍👧"},{"name":"Woman Woman Boy","value":"👩‍👩‍👦"},{"name":"Woman Woman Girl","value":"👩‍👩‍👧"},{"name":"Woman Woman Girl Boy","value":"👩‍👩‍👧‍👦"},{"name":"Woman Woman Boy Boy","value":"👩‍👩‍👦‍👦"},{"name":"Woman Woman Girl Girl","value":"👩‍👩‍👧‍👧"},{"name":"Flexed Biceps","value":"💪"},{"name":"White Left Pointing Backhand Index","value":"👈"},{"name":"White Right Pointing Backhand Index","value":"👉"},{"name":"White Up Pointing Index","value":"☝️"},{"name":"White Up Pointing Backhand Index","value":"👆"},{"name":"White Down Pointing Backhand Index","value":"👇"},{"name":"Victory Hand","value":"✌️"},{"name":"Raised Hand","value":"✋"},{"name":"Ok Hand Sign","value":"👌"},{"name":"Thumbs Up Sign","value":"👍"},{"name":"Thumbs Down Sign","value":"👎"},{"name":"Raised Fist","value":"✊"},{"name":"Fisted Hand Sign","value":"👊"},{"name":"Waving Hand Sign","value":"👋"},{"name":"Clapping Hands Sign","value":"👏"},{"name":"Open Hands Sign","value":"👐"},{"name":"Person Raising Both Hands in Celebration","value":"🙌"},{"name":"Person with Folded Hands","value":"🙏"},{"name":"Nail Polish","value":"💅"},{"name":"Ear","value":"👂"},{"name":"Nose","value":"👃"},{"name":"Footprints","value":"👣"},{"name":"Eyes","value":"👀"},{"name":"Tongue","value":"👅"},{"name":"Mouth","value":"👄"},{"name":"Kiss Mark","value":"💋"},{"name":"Heart with Arrow","value":"💘"},{"name":"Heavy Black Heart","value":"❤️"},{"name":"Beating Heart","value":"💓"},{"name":"Broken Heart","value":"💔"},{"name":"Two Hearts","value":"💕"},{"name":"Sparkling Heart","value":"💖"},{"name":"Growing Heart","value":"💗"},{"name":"Blue Heart","value":"💙"},{"name":"Green Heart","value":"💚"},{"name":"Yellow Heart","value":"💛"},{"name":"Purple Heart","value":"💜"},{"name":"Heart with Ribbon","value":"💝"},{"name":"Revolving Hearts","value":"💞"},{"name":"Heart Decoration","value":"💟"},{"name":"Love Letter","value":"💌"},{"name":"Sleeping Symbol","value":"💤"},{"name":"Anger Symbol","value":"💢"},{"name":"Bomb","value":"💣"},{"name":"Collision Symbol","value":"💥"},{"name":"Splashing Sweat Symbol","value":"💦"},{"name":"Dash Symbol","value":"💨"},{"name":"Dizzy Symbol","value":"💫"},{"name":"Speech Balloon","value":"💬"},{"name":"Thought Balloon","value":"💭"},{"name":"Eyeglasses","value":"👓"},{"name":"Necktie","value":"👔"},{"name":"T-Shirt","value":"👕"},{"name":"Jeans","value":"👖"},{"name":"Dress","value":"👗"},{"name":"Kimono","value":"👘"},{"name":"Bikini","value":"👙"},{"name":"Womans Clothes","value":"👚"},{"name":"Purse","value":"👛"},{"name":"Handbag","value":"👜"},{"name":"Pouch","value":"👝"},{"name":"School Satchel","value":"🎒"},{"name":"Mans Shoe","value":"👞"},{"name":"Athletic Shoe","value":"👟"},{"name":"High-Heeled Shoe","value":"👠"},{"name":"Womans Sandal","value":"👡"},{"name":"Womans Boots","value":"👢"},{"name":"Crown","value":"👑"},{"name":"Womans Hat","value":"👒"},{"name":"Top Hat","value":"🎩"},{"name":"Graduation Cap","value":"🎓"},{"name":"Lipstick","value":"💄"},{"name":"Ring","value":"💍"},{"name":"Gem Stone","value":"💎"}]},{"id":"nature","name":"Animals & Nature","emojis":[{"name":"Monkey Face","value":"🐵"},{"name":"Monkey","value":"🐒"},{"name":"Dog Face","value":"🐶"},{"name":"Dog","value":"🐕"},{"name":"Poodle","value":"🐩"},{"name":"Wolf Face","value":"🐺"},{"name":"Cat Face","value":"🐱"},{"name":"Cat","value":"🐈"},{"name":"Tiger Face","value":"🐯"},{"name":"Tiger","value":"🐅"},{"name":"Leopard","value":"🐆"},{"name":"Horse Face","value":"🐴"},{"name":"Horse","value":"🐎"},{"name":"Cow Face","value":"🐮"},{"name":"Ox","value":"🐂"},{"name":"Water Buffalo","value":"🐃"},{"name":"Cow","value":"🐄"},{"name":"Pig Face","value":"🐷"},{"name":"Pig","value":"🐖"},{"name":"Boar","value":"🐗"},{"name":"Pig Nose","value":"🐽"},{"name":"Ram","value":"🐏"},{"name":"Sheep","value":"🐑"},{"name":"Goat","value":"🐐"},{"name":"Dromedary Camel","value":"🐪"},{"name":"Bactrian Camel","value":"🐫"},{"name":"Elephant","value":"🐘"},{"name":"Mouse Face","value":"🐭"},{"name":"Mouse","value":"🐁"},{"name":"Rat","value":"🐀"},{"name":"Hamster Face","value":"🐹"},{"name":"Rabbit Face","value":"🐰"},{"name":"Rabbit","value":"🐇"},{"name":"Bear Face","value":"🐻"},{"name":"Koala","value":"🐨"},{"name":"Panda Face","value":"🐼"},{"name":"Paw Prints","value":"🐾"},{"name":"Chicken","value":"🐔"},{"name":"Rooster","value":"🐓"},{"name":"Hatching Chick","value":"🐣"},{"name":"Baby Chick","value":"🐤"},{"name":"Front-Facing Baby Chick","value":"🐥"},{"name":"Bird","value":"🐦"},{"name":"Penguin","value":"🐧"},{"name":"Frog Face","value":"🐸"},{"name":"Crocodile","value":"🐊"},{"name":"Turtle","value":"🐢"},{"name":"Snake","value":"🐍"},{"name":"Dragon Face","value":"🐲"},{"name":"Dragon","value":"🐉"},{"name":"Spouting Whale","value":"🐳"},{"name":"Whale","value":"🐋"},{"name":"Dolphin","value":"🐬"},{"name":"Fish","value":"🐟"},{"name":"Tropical Fish","value":"🐠"},{"name":"Blowfish","value":"🐡"},{"name":"Octopus","value":"🐙"},{"name":"Spiral Shell","value":"🐚"},{"name":"Snail","value":"🐌"},{"name":"Bug","value":"🐛"},{"name":"Ant","value":"🐜"},{"name":"Honeybee","value":"🐝"},{"name":"Lady Beetle","value":"🐞"},{"name":"Bouquet","value":"💐"},{"name":"Cherry Blossom","value":"🌸"},{"name":"White Flower","value":"💮"},{"name":"Rose","value":"🌹"},{"name":"Hibiscus","value":"🌺"},{"name":"Sunflower","value":"🌻"},{"name":"Blossom","value":"🌼"},{"name":"Tulip","value":"🌷"},{"name":"Seedling","value":"🌱"},{"name":"Evergreen Tree","value":"🌲"},{"name":"Deciduous Tree","value":"🌳"},{"name":"Palm Tree","value":"🌴"},{"name":"Cactus","value":"🌵"},{"name":"Ear of Rice","value":"🌾"},{"name":"Herb","value":"🌿"},{"name":"Four Leaf Clover","value":"🍀"},{"name":"Maple Leaf","value":"🍁"},{"name":"Fallen Leaf","value":"🍂"},{"name":"Leaf Fluttering in Wind","value":"🍃"}]},{"id":"foods","name":"Food & Drink","emojis":[{"name":"Grapes","value":"🍇"},{"name":"Melon","value":"🍈"},{"name":"Watermelon","value":"🍉"},{"name":"Tangerine","value":"🍊"},{"name":"Lemon","value":"🍋"},{"name":"Banana","value":"🍌"},{"name":"Pineapple","value":"🍍"},{"name":"Red Apple","value":"🍎"},{"name":"Green Apple","value":"🍏"},{"name":"Pear","value":"🍐"},{"name":"Peach","value":"🍑"},{"name":"Cherries","value":"🍒"},{"name":"Strawberry","value":"🍓"},{"name":"Tomato","value":"🍅"},{"name":"Aubergine","value":"🍆"},{"name":"Ear of Maize","value":"🌽"},{"name":"Mushroom","value":"🍄"},{"name":"Chestnut","value":"🌰"},{"name":"Bread","value":"🍞"},{"name":"Meat on Bone","value":"🍖"},{"name":"Poultry Leg","value":"🍗"},{"name":"Hamburger","value":"🍔"},{"name":"French Fries","value":"🍟"},{"name":"Slice of Pizza","value":"🍕"},{"name":"Cooking","value":"🍳"},{"name":"Pot of Food","value":"🍲"},{"name":"Bento Box","value":"🍱"},{"name":"Rice Cracker","value":"🍘"},{"name":"Rice Ball","value":"🍙"},{"name":"Cooked Rice","value":"🍚"},{"name":"Curry and Rice","value":"🍛"},{"name":"Steaming Bowl","value":"🍜"},{"name":"Spaghetti","value":"🍝"},{"name":"Roasted Sweet Potato","value":"🍠"},{"name":"Oden","value":"🍢"},{"name":"Sushi","value":"🍣"},{"name":"Fried Shrimp","value":"🍤"},{"name":"Fish Cake with Swirl Design","value":"🍥"},{"name":"Dango","value":"🍡"},{"name":"Soft Ice Cream","value":"🍦"},{"name":"Shaved Ice","value":"🍧"},{"name":"Ice Cream","value":"🍨"},{"name":"Doughnut","value":"🍩"},{"name":"Cookie","value":"🍪"},{"name":"Birthday Cake","value":"🎂"},{"name":"Shortcake","value":"🍰"},{"name":"Chocolate Bar","value":"🍫"},{"name":"Candy","value":"🍬"},{"name":"Lollipop","value":"🍭"},{"name":"Custard","value":"🍮"},{"name":"Honey Pot","value":"🍯"},{"name":"Baby Bottle","value":"🍼"},{"name":"Hot Beverage","value":"☕"},{"name":"Teacup Without Handle","value":"🍵"},{"name":"Sake Bottle and Cup","value":"🍶"},{"name":"Wine Glass","value":"🍷"},{"name":"Cocktail Glass","value":"🍸"},{"name":"Tropical Drink","value":"🍹"},{"name":"Beer Mug","value":"🍺"},{"name":"Clinking Beer Mugs","value":"🍻"},{"name":"Fork and Knife","value":"🍴"},{"name":"Hocho","value":"🔪"}]},{"id":"activity","name":"Activities","emojis":[{"name":"Jack-O-Lantern","value":"🎃"},{"name":"Christmas Tree","value":"🎄"},{"name":"Fireworks","value":"🎆"},{"name":"Firework Sparkler","value":"🎇"},{"name":"Sparkles","value":"✨"},{"name":"Balloon","value":"🎈"},{"name":"Party Popper","value":"🎉"},{"name":"Confetti Ball","value":"🎊"},{"name":"Tanabata Tree","value":"🎋"},{"name":"Pine Decoration","value":"🎍"},{"name":"Japanese Dolls","value":"🎎"},{"name":"Carp Streamer","value":"🎏"},{"name":"Wind Chime","value":"🎐"},{"name":"Moon Viewing Ceremony","value":"🎑"},{"name":"Ribbon","value":"🎀"},{"name":"Wrapped Present","value":"🎁"},{"name":"Ticket","value":"🎫"},{"name":"Trophy","value":"🏆"},{"name":"Soccer Ball","value":"⚽"},{"name":"Baseball","value":"⚾"},{"name":"Basketball and Hoop","value":"🏀"},{"name":"American Football","value":"🏈"},{"name":"Rugby Football","value":"🏉"},{"name":"Tennis Racquet and Ball","value":"🎾"},{"name":"Billiards","value":"🎱"},{"name":"Bowling","value":"🎳"},{"name":"Direct Hit","value":"🎯"},{"name":"Flag in Hole","value":"⛳"},{"name":"Fishing Pole and Fish","value":"🎣"},{"name":"Running Shirt with Sash","value":"🎽"},{"name":"Ski and Ski Boot","value":"🎿"},{"name":"Video Game","value":"🎮"},{"name":"Game Die","value":"🎲"},{"name":"Black Spade Suit","value":"♠️"},{"name":"Black Heart Suit","value":"♥️"},{"name":"Black Diamond Suit","value":"♦️"},{"name":"Black Club Suit","value":"♣️"},{"name":"Playing Card Black Joker","value":"🃏"},{"name":"Mahjong Tile Red Dragon","value":"🀄"},{"name":"Flower Playing Cards","value":"🎴"}]},{"id":"places","name":"Travel & Places","emojis":[{"name":"Earth Globe Europe-Africa","value":"🌍"},{"name":"Earth Globe Americas","value":"🌎"},{"name":"Earth Globe Asia-Australia","value":"🌏"},{"name":"Globe with Meridians","value":"🌐"},{"name":"Silhouette of Japan","value":"🗾"},{"name":"Volcano","value":"🌋"},{"name":"Mount Fuji","value":"🗻"},{"name":"House Building","value":"🏠"},{"name":"House with Garden","value":"🏡"},{"name":"Office Building","value":"🏢"},{"name":"Japanese Post Office","value":"🏣"},{"name":"European Post Office","value":"🏤"},{"name":"Hospital","value":"🏥"},{"name":"Bank","value":"🏦"},{"name":"Hotel","value":"🏨"},{"name":"Love Hotel","value":"🏩"},{"name":"Convenience Store","value":"🏪"},{"name":"School","value":"🏫"},{"name":"Department Store","value":"🏬"},{"name":"Factory","value":"🏭"},{"name":"Japanese Castle","value":"🏯"},{"name":"European Castle","value":"🏰"},{"name":"Wedding","value":"💒"},{"name":"Tokyo Tower","value":"🗼"},{"name":"Statue of Liberty","value":"🗽"},{"name":"Church","value":"⛪"},{"name":"Fountain","value":"⛲"},{"name":"Tent","value":"⛺"},{"name":"Foggy","value":"🌁"},{"name":"Night with Stars","value":"🌃"},{"name":"Sunrise over Mountains","value":"🌄"},{"name":"Sunrise","value":"🌅"},{"name":"Cityscape at Dusk","value":"🌆"},{"name":"Sunset over Buildings","value":"🌇"},{"name":"Bridge at Night","value":"🌉"},{"name":"Hot Springs","value":"♨️"},{"name":"Milky Way","value":"🌌"},{"name":"Carousel Horse","value":"🎠"},{"name":"Ferris Wheel","value":"🎡"},{"name":"Roller Coaster","value":"🎢"},{"name":"Barber Pole","value":"💈"},{"name":"Circus Tent","value":"🎪"},{"name":"Performing Arts","value":"🎭"},{"name":"Artist Palette","value":"🎨"},{"name":"Slot Machine","value":"🎰"},{"name":"Steam Locomotive","value":"🚂"},{"name":"Railway Car","value":"🚃"},{"name":"High-Speed Train","value":"🚄"},{"name":"High-Speed Train with Bullet Nose","value":"🚅"},{"name":"Train","value":"🚆"},{"name":"Metro","value":"🚇"},{"name":"Light Rail","value":"🚈"},{"name":"Station","value":"🚉"},{"name":"Tram","value":"🚊"},{"name":"Monorail","value":"🚝"},{"name":"Mountain Railway","value":"🚞"},{"name":"Tram Car","value":"🚋"},{"name":"Bus","value":"🚌"},{"name":"Oncoming Bus","value":"🚍"},{"name":"Trolleybus","value":"🚎"},{"name":"Minibus","value":"🚐"},{"name":"Ambulance","value":"🚑"},{"name":"Fire Engine","value":"🚒"},{"name":"Police Car","value":"🚓"},{"name":"Oncoming Police Car","value":"🚔"},{"name":"Taxi","value":"🚕"},{"name":"Oncoming Taxi","value":"🚖"},{"name":"Automobile","value":"🚗"},{"name":"Oncoming Automobile","value":"🚘"},{"name":"Recreational Vehicle","value":"🚙"},{"name":"Delivery Truck","value":"🚚"},{"name":"Articulated Lorry","value":"🚛"},{"name":"Tractor","value":"🚜"},{"name":"Bicycle","value":"🚲"},{"name":"Bus Stop","value":"🚏"},{"name":"Fuel Pump","value":"⛽"},{"name":"Police Cars Revolving Light","value":"🚨"},{"name":"Horizontal Traffic Light","value":"🚥"},{"name":"Vertical Traffic Light","value":"🚦"},{"name":"Construction Sign","value":"🚧"},{"name":"Anchor","value":"⚓"},{"name":"Sailboat","value":"⛵"},{"name":"Speedboat","value":"🚤"},{"name":"Ship","value":"🚢"},{"name":"Airplane","value":"✈️"},{"name":"Seat","value":"💺"},{"name":"Helicopter","value":"🚁"},{"name":"Suspension Railway","value":"🚟"},{"name":"Mountain Cableway","value":"🚠"},{"name":"Aerial Tramway","value":"🚡"},{"name":"Rocket","value":"🚀"},{"name":"Door","value":"🚪"},{"name":"Toilet","value":"🚽"},{"name":"Shower","value":"🚿"},{"name":"Bathtub","value":"🛁"},{"name":"Hourglass","value":"⌛"},{"name":"Hourglass with Flowing Sand","value":"⏳"},{"name":"Watch","value":"⌚"},{"name":"Alarm Clock","value":"⏰"},{"name":"Clock Face Twelve Oclock","value":"🕛"},{"name":"Clock Face Twelve-Thirty","value":"🕧"},{"name":"Clock Face One Oclock","value":"🕐"},{"name":"Clock Face One-Thirty","value":"🕜"},{"name":"Clock Face Two Oclock","value":"🕑"},{"name":"Clock Face Two-Thirty","value":"🕝"},{"name":"Clock Face Three Oclock","value":"🕒"},{"name":"Clock Face Three-Thirty","value":"🕞"},{"name":"Clock Face Four Oclock","value":"🕓"},{"name":"Clock Face Four-Thirty","value":"🕟"},{"name":"Clock Face Five Oclock","value":"🕔"},{"name":"Clock Face Five-Thirty","value":"🕠"},{"name":"Clock Face Six Oclock","value":"🕕"},{"name":"Clock Face Six-Thirty","value":"🕡"},{"name":"Clock Face Seven Oclock","value":"🕖"},{"name":"Clock Face Seven-Thirty","value":"🕢"},{"name":"Clock Face Eight Oclock","value":"🕗"},{"name":"Clock Face Eight-Thirty","value":"🕣"},{"name":"Clock Face Nine Oclock","value":"🕘"},{"name":"Clock Face Nine-Thirty","value":"🕤"},{"name":"Clock Face Ten Oclock","value":"🕙"},{"name":"Clock Face Ten-Thirty","value":"🕥"},{"name":"Clock Face Eleven Oclock","value":"🕚"},{"name":"Clock Face Eleven-Thirty","value":"🕦"},{"name":"New Moon Symbol","value":"🌑"},{"name":"Waxing Crescent Moon Symbol","value":"🌒"},{"name":"First Quarter Moon Symbol","value":"🌓"},{"name":"Waxing Gibbous Moon Symbol","value":"🌔"},{"name":"Full Moon Symbol","value":"🌕"},{"name":"Waning Gibbous Moon Symbol","value":"🌖"},{"name":"Last Quarter Moon Symbol","value":"🌗"},{"name":"Waning Crescent Moon Symbol","value":"🌘"},{"name":"Crescent Moon","value":"🌙"},{"name":"New Moon with Face","value":"🌚"},{"name":"First Quarter Moon with Face","value":"🌛"},{"name":"Last Quarter Moon with Face","value":"🌜"},{"name":"Black Sun with Rays","value":"☀️"},{"name":"Full Moon with Face","value":"🌝"},{"name":"Sun with Face","value":"🌞"},{"name":"White Medium Star","value":"⭐"},{"name":"Glowing Star","value":"🌟"},{"name":"Shooting Star","value":"🌠"},{"name":"Cloud","value":"☁️"},{"name":"Sun Behind Cloud","value":"⛅"},{"name":"Cyclone","value":"🌀"},{"name":"Rainbow","value":"🌈"},{"name":"Closed Umbrella","value":"🌂"},{"name":"Umbrella with Rain Drops","value":"☔"},{"name":"High Voltage Sign","value":"⚡"},{"name":"Snowflake","value":"❄️"},{"name":"Snowman Without Snow","value":"⛄"},{"name":"Fire","value":"🔥"},{"name":"Droplet","value":"💧"},{"name":"Water Wave","value":"🌊"}]},{"id":"objects","name":"Objects","emojis":[{"name":"Speaker with Cancellation Stroke","value":"🔇"},{"name":"Speaker","value":"🔈"},{"name":"Speaker with One Sound Wave","value":"🔉"},{"name":"Speaker with Three Sound Waves","value":"🔊"},{"name":"Public Address Loudspeaker","value":"📢"},{"name":"Cheering Megaphone","value":"📣"},{"name":"Postal Horn","value":"📯"},{"name":"Bell","value":"🔔"},{"name":"Bell with Cancellation Stroke","value":"🔕"},{"name":"Musical Score","value":"🎼"},{"name":"Musical Note","value":"🎵"},{"name":"Multiple Musical Notes","value":"🎶"},{"name":"Microphone","value":"🎤"},{"name":"Headphone","value":"🎧"},{"name":"Radio","value":"📻"},{"name":"Saxophone","value":"🎷"},{"name":"Guitar","value":"🎸"},{"name":"Musical Keyboard","value":"🎹"},{"name":"Trumpet","value":"🎺"},{"name":"Violin","value":"🎻"},{"name":"Mobile Phone","value":"📱"},{"name":"Mobile Phone with Rightwards Arrow at Left","value":"📲"},{"name":"Black Telephone","value":"☎️"},{"name":"Telephone Receiver","value":"📞"},{"name":"Pager","value":"📟"},{"name":"Fax Machine","value":"📠"},{"name":"Battery","value":"🔋"},{"name":"Electric Plug","value":"🔌"},{"name":"Personal Computer","value":"💻"},{"name":"Minidisc","value":"💽"},{"name":"Floppy Disk","value":"💾"},{"name":"Optical Disc","value":"💿"},{"name":"Dvd","value":"📀"},{"name":"Movie Camera","value":"🎥"},{"name":"Clapper Board","value":"🎬"},{"name":"Television","value":"📺"},{"name":"Camera","value":"📷"},{"name":"Video Camera","value":"📹"},{"name":"Videocassette","value":"📼"},{"name":"Left-Pointing Magnifying Glass","value":"🔍"},{"name":"Right-Pointing Magnifying Glass","value":"🔎"},{"name":"Microscope","value":"🔬"},{"name":"Telescope","value":"🔭"},{"name":"Satellite Antenna","value":"📡"},{"name":"Electric Light Bulb","value":"💡"},{"name":"Electric Torch","value":"🔦"},{"name":"Izakaya Lantern","value":"🏮"},{"name":"Notebook with Decorative Cover","value":"📔"},{"name":"Closed Book","value":"📕"},{"name":"Open Book","value":"📖"},{"name":"Green Book","value":"📗"},{"name":"Blue Book","value":"📘"},{"name":"Orange Book","value":"📙"},{"name":"Books","value":"📚"},{"name":"Notebook","value":"📓"},{"name":"Ledger","value":"📒"},{"name":"Page with Curl","value":"📃"},{"name":"Scroll","value":"📜"},{"name":"Page Facing Up","value":"📄"},{"name":"Newspaper","value":"📰"},{"name":"Bookmark Tabs","value":"📑"},{"name":"Bookmark","value":"🔖"},{"name":"Money Bag","value":"💰"},{"name":"Banknote with Yen Sign","value":"💴"},{"name":"Banknote with Dollar Sign","value":"💵"},{"name":"Banknote with Euro Sign","value":"💶"},{"name":"Banknote with Pound Sign","value":"💷"},{"name":"Money with Wings","value":"💸"},{"name":"Credit Card","value":"💳"},{"name":"Chart with Upwards Trend and Yen Sign","value":"💹"},{"name":"Currency Exchange","value":"💱"},{"name":"Heavy Dollar Sign","value":"💲"},{"name":"Envelope","value":"✉️"},{"name":"E-Mail Symbol","value":"📧"},{"name":"Incoming Envelope","value":"📨"},{"name":"Envelope with Downwards Arrow Above","value":"📩"},{"name":"Outbox Tray","value":"📤"},{"name":"Inbox Tray","value":"📥"},{"name":"Package","value":"📦"},{"name":"Closed Mailbox with Raised Flag","value":"📫"},{"name":"Closed Mailbox with Lowered Flag","value":"📪"},{"name":"Open Mailbox with Raised Flag","value":"📬"},{"name":"Open Mailbox with Lowered Flag","value":"📭"},{"name":"Postbox","value":"📮"},{"name":"Pencil","value":"✏️"},{"name":"Black Nib","value":"✒️"},{"name":"Memo","value":"📝"},{"name":"Briefcase","value":"💼"},{"name":"File Folder","value":"📁"},{"name":"Open File Folder","value":"📂"},{"name":"Calendar","value":"📅"},{"name":"Tear-off Calendar","value":"📆"},{"name":"Card Index","value":"📇"},{"name":"Chart with Upwards Trend","value":"📈"},{"name":"Chart with Downwards Trend","value":"📉"},{"name":"Bar Chart","value":"📊"},{"name":"Clipboard","value":"📋"},{"name":"Pushpin","value":"📌"},{"name":"Round Pushpin","value":"📍"},{"name":"Paperclip","value":"📎"},{"name":"Straight Ruler","value":"📏"},{"name":"Triangular Ruler","value":"📐"},{"name":"Black Scissors","value":"✂️"},{"name":"Lock","value":"🔒"},{"name":"Open Lock","value":"🔓"},{"name":"Lock with Ink Pen","value":"🔏"},{"name":"Closed Lock with Key","value":"🔐"},{"name":"Key","value":"🔑"},{"name":"Hammer","value":"🔨"},{"name":"Pistol","value":"🔫"},{"name":"Wrench","value":"🔧"},{"name":"Nut and Bolt","value":"🔩"},{"name":"Link Symbol","value":"🔗"},{"name":"Syringe","value":"💉"},{"name":"Pill","value":"💊"},{"name":"Smoking Symbol","value":"🚬"},{"name":"Moyai","value":"🗿"},{"name":"Crystal Ball","value":"🔮"}]},{"id":"symbols","name":"Symbols","emojis":[{"name":"Automated Teller Machine","value":"🏧"},{"name":"Put Litter in Its Place Symbol","value":"🚮"},{"name":"Potable Water Symbol","value":"🚰"},{"name":"Wheelchair Symbol","value":"♿"},{"name":"Mens Symbol","value":"🚹"},{"name":"Womens Symbol","value":"🚺"},{"name":"Restroom","value":"🚻"},{"name":"Baby Symbol","value":"🚼"},{"name":"Water Closet","value":"🚾"},{"name":"Passport Control","value":"🛂"},{"name":"Customs","value":"🛃"},{"name":"Baggage Claim","value":"🛄"},{"name":"Left Luggage","value":"🛅"},{"name":"Warning Sign","value":"⚠️"},{"name":"Children Crossing","value":"🚸"},{"name":"No Entry","value":"⛔"},{"name":"No Entry Sign","value":"🚫"},{"name":"No Bicycles","value":"🚳"},{"name":"No Smoking Symbol","value":"🚭"},{"name":"Do Not Litter Symbol","value":"🚯"},{"name":"Non-Potable Water Symbol","value":"🚱"},{"name":"No Pedestrians","value":"🚷"},{"name":"No Mobile Phones","value":"📵"},{"name":"No One Under Eighteen Symbol","value":"🔞"},{"name":"Upwards Black Arrow","value":"⬆️"},{"name":"North East Arrow","value":"↗️"},{"name":"Black Rightwards Arrow","value":"➡️"},{"name":"South East Arrow","value":"↘️"},{"name":"Downwards Black Arrow","value":"⬇️"},{"name":"South West Arrow","value":"↙️"},{"name":"Leftwards Black Arrow","value":"⬅️"},{"name":"North West Arrow","value":"↖️"},{"name":"Up Down Arrow","value":"↕️"},{"name":"Left Right Arrow","value":"↔️"},{"name":"Leftwards Arrow with Hook","value":"↩️"},{"name":"Rightwards Arrow with Hook","value":"↪️"},{"name":"Arrow Pointing Rightwards Then Curving Upwards","value":"⤴️"},{"name":"Arrow Pointing Rightwards Then Curving Downwards","value":"⤵️"},{"name":"Clockwise Downwards and Upwards Open Circle Arrows","value":"🔃"},{"name":"Anticlockwise Downwards and Upwards Open Circle Arrows","value":"🔄"},{"name":"Back with Leftwards Arrow Above","value":"🔙"},{"name":"End with Leftwards Arrow Above","value":"🔚"},{"name":"On with Exclamation Mark with Left Right Arrow Above","value":"🔛"},{"name":"Soon with Rightwards Arrow Above","value":"🔜"},{"name":"Top with Upwards Arrow Above","value":"🔝"},{"name":"Six Pointed Star with Middle Dot","value":"🔯"},{"name":"Aries","value":"♈"},{"name":"Taurus","value":"♉"},{"name":"Gemini","value":"♊"},{"name":"Cancer","value":"♋"},{"name":"Leo","value":"♌"},{"name":"Virgo","value":"♍"},{"name":"Libra","value":"♎"},{"name":"Scorpius","value":"♏"},{"name":"Sagittarius","value":"♐"},{"name":"Capricorn","value":"♑"},{"name":"Aquarius","value":"♒"},{"name":"Pisces","value":"♓"},{"name":"Ophiuchus","value":"⛎"},{"name":"Twisted Rightwards Arrows","value":"🔀"},{"name":"Clockwise Rightwards and Leftwards Open Circle Arrows","value":"🔁"},{"name":"Clockwise Rightwards and Leftwards Open Circle Arrows with Circled One Overlay","value":"🔂"},{"name":"Black Right-Pointing Triangle","value":"▶️"},{"name":"Black Right-Pointing Double Triangle","value":"⏩"},{"name":"Black Left-Pointing Triangle","value":"◀️"},{"name":"Black Left-Pointing Double Triangle","value":"⏪"},{"name":"Up-Pointing Small Red Triangle","value":"🔼"},{"name":"Black Up-Pointing Double Triangle","value":"⏫"},{"name":"Down-Pointing Small Red Triangle","value":"🔽"},{"name":"Black Down-Pointing Double Triangle","value":"⏬"},{"name":"Cinema","value":"🎦"},{"name":"Low Brightness Symbol","value":"🔅"},{"name":"High Brightness Symbol","value":"🔆"},{"name":"Antenna with Bars","value":"📶"},{"name":"Vibration Mode","value":"📳"},{"name":"Mobile Phone off","value":"📴"},{"name":"Black Universal Recycling Symbol","value":"♻️"},{"name":"Trident Emblem","value":"🔱"},{"name":"Name Badge","value":"📛"},{"name":"Japanese Symbol for Beginner","value":"🔰"},{"name":"Heavy Large Circle","value":"⭕"},{"name":"White Heavy Check Mark","value":"✅"},{"name":"Ballot Box with Check","value":"☑️"},{"name":"Heavy Check Mark","value":"✔️"},{"name":"Heavy Multiplication X","value":"✖️"},{"name":"Cross Mark","value":"❌"},{"name":"Negative Squared Cross Mark","value":"❎"},{"name":"Heavy Plus Sign","value":"➕"},{"name":"Heavy Minus Sign","value":"➖"},{"name":"Heavy Division Sign","value":"➗"},{"name":"Curly Loop","value":"➰"},{"name":"Double Curly Loop","value":"➿"},{"name":"Part Alternation Mark","value":"〽️"},{"name":"Eight Spoked Asterisk","value":"✳️"},{"name":"Eight Pointed Black Star","value":"✴️"},{"name":"Sparkle","value":"❇️"},{"name":"Double Exclamation Mark","value":"‼️"},{"name":"Exclamation Question Mark","value":"⁉️"},{"name":"Black Question Mark Ornament","value":"❓"},{"name":"White Question Mark Ornament","value":"❔"},{"name":"White Exclamation Mark Ornament","value":"❕"},{"name":"Heavy Exclamation Mark Symbol","value":"❗"},{"name":"Wavy Dash","value":"〰️"},{"name":"Trade Mark Sign","value":"™️"},{"name":"Keycap Ten","value":"🔟"},{"name":"Hundred Points Symbol","value":"💯"},{"name":"Input Symbol for Latin Capital Letters","value":"🔠"},{"name":"Input Symbol for Latin Small Letters","value":"🔡"},{"name":"Input Symbol for Numbers","value":"🔢"},{"name":"Input Symbol for Symbols","value":"🔣"},{"name":"Input Symbol for Latin Letters","value":"🔤"},{"name":"Negative Squared Latin Capital Letter a","value":"🅰️"},{"name":"Negative Squared Ab","value":"🆎"},{"name":"Negative Squared Latin Capital Letter B","value":"🅱️"},{"name":"Squared Cl","value":"🆑"},{"name":"Squared Cool","value":"🆒"},{"name":"Squared Free","value":"🆓"},{"name":"Information Source","value":"ℹ️"},{"name":"Squared Id","value":"🆔"},{"name":"Circled Latin Capital Letter M","value":"Ⓜ️"},{"name":"Squared New","value":"🆕"},{"name":"Squared Ng","value":"🆖"},{"name":"Negative Squared Latin Capital Letter O","value":"🅾️"},{"name":"Squared Ok","value":"🆗"},{"name":"Negative Squared Latin Capital Letter P","value":"🅿️"},{"name":"Squared Sos","value":"🆘"},{"name":"Squared Up with Exclamation Mark","value":"🆙"},{"name":"Squared Vs","value":"🆚"},{"name":"Squared Katakana Koko","value":"🈁"},{"name":"Squared Katakana Sa","value":"🈂️"},{"name":"Squared Cjk Unified Ideograph-6708","value":"🈷️"},{"name":"Squared Cjk Unified Ideograph-6709","value":"🈶"},{"name":"Squared Cjk Unified Ideograph-6307","value":"🈯"},{"name":"Circled Ideograph Advantage","value":"🉐"},{"name":"Squared Cjk Unified Ideograph-5272","value":"🈹"},{"name":"Squared Cjk Unified Ideograph-7121","value":"🈚"},{"name":"Squared Cjk Unified Ideograph-7981","value":"🈲"},{"name":"Circled Ideograph Accept","value":"🉑"},{"name":"Squared Cjk Unified Ideograph-7533","value":"🈸"},{"name":"Squared Cjk Unified Ideograph-5408","value":"🈴"},{"name":"Squared Cjk Unified Ideograph-7a7a","value":"🈳"},{"name":"Circled Ideograph Congratulation","value":"㊗️"},{"name":"Circled Ideograph Secret","value":"㊙️"},{"name":"Squared Cjk Unified Ideograph-55b6","value":"🈺"},{"name":"Squared Cjk Unified Ideograph-6e80","value":"🈵"},{"name":"Black Small Square","value":"▪️"},{"name":"White Small Square","value":"▫️"},{"name":"White Medium Square","value":"◻️"},{"name":"Black Medium Square","value":"◼️"},{"name":"White Medium Small Square","value":"◽"},{"name":"Black Medium Small Square","value":"◾"},{"name":"Black Large Square","value":"⬛"},{"name":"White Large Square","value":"⬜"},{"name":"Large Orange Diamond","value":"🔶"},{"name":"Large Blue Diamond","value":"🔷"},{"name":"Small Orange Diamond","value":"🔸"},{"name":"Small Blue Diamond","value":"🔹"},{"name":"Up-Pointing Red Triangle","value":"🔺"},{"name":"Down-Pointing Red Triangle","value":"🔻"},{"name":"Diamond Shape with a Dot Inside","value":"💠"},{"name":"Radio Button","value":"🔘"},{"name":"Black Square Button","value":"🔲"},{"name":"White Square Button","value":"🔳"},{"name":"Medium White Circle","value":"⚪"},{"name":"Medium Black Circle","value":"⚫"},{"name":"Large Red Circle","value":"🔴"},{"name":"Large Blue Circle","value":"🔵"}]},{"id":"flags","name":"Flags","emojis":[{"name":"Chequered Flag","value":"🏁"},{"name":"China Flag","value":"🇨🇳"},{"name":"Crossed Flags","value":"🎌"},{"name":"Germany Flag","value":"🇩🇪"},{"name":"Spain Flag","value":"🇪🇸"},{"name":"Ascension Island Flag","value":"🇦🇨"},{"name":"Andorra Flag","value":"🇦🇩"},{"name":"United Arab Emirates Flag","value":"🇦🇪"},{"name":"Afghanistan Flag","value":"🇦🇫"},{"name":"Antigua & Barbuda Flag","value":"🇦🇬"},{"name":"Anguilla Flag","value":"🇦🇮"},{"name":"Albania Flag","value":"🇦🇱"},{"name":"Armenia Flag","value":"🇦🇲"},{"name":"Angola Flag","value":"🇦🇴"},{"name":"Antarctica Flag","value":"🇦🇶"},{"name":"Argentina Flag","value":"🇦🇷"},{"name":"American Samoa Flag","value":"🇦🇸"},{"name":"Austria Flag","value":"🇦🇹"},{"name":"Australia Flag","value":"🇦🇺"},{"name":"Aruba Flag","value":"🇦🇼"},{"name":"Åland Islands Flag","value":"🇦🇽"},{"name":"Azerbaijan Flag","value":"🇦🇿"},{"name":"Barbados Flag","value":"🇧🇧"},{"name":"Bangladesh Flag","value":"🇧🇩"},{"name":"Belgium Flag","value":"🇧🇪"},{"name":"Burkina Faso Flag","value":"🇧🇫"},{"name":"Bulgaria Flag","value":"🇧🇬"},{"name":"Bahrain Flag","value":"🇧🇭"},{"name":"Burundi Flag","value":"🇧🇮"},{"name":"Benin Flag","value":"🇧🇯"},{"name":"St. Barthélemy Flag","value":"🇧🇱"},{"name":"Bermuda Flag","value":"🇧🇲"},{"name":"Bolivia Flag","value":"🇧🇴"},{"name":"Caribbean Netherlands Flag","value":"🇧🇶"},{"name":"Brazil Flag","value":"🇧🇷"},{"name":"Bahamas Flag","value":"🇧🇸"},{"name":"Bhutan Flag","value":"🇧🇹"},{"name":"Bouvet Island Flag","value":"🇧🇻"},{"name":"Botswana Flag","value":"🇧🇼"},{"name":"Belarus Flag","value":"🇧🇾"},{"name":"Belize Flag","value":"🇧🇿"},{"name":"Canada Flag","value":"🇨🇦"},{"name":"Cocos (keeling) Islands Flag","value":"🇨🇨"},{"name":"Congo - Kinshasa Flag","value":"🇨🇩"},{"name":"Central African Republic Flag","value":"🇨🇫"},{"name":"Congo - Brazzaville Flag","value":"🇨🇬"},{"name":"Switzerland Flag","value":"🇨🇭"},{"name":"Côte D’ivoire Flag","value":"🇨🇮"},{"name":"Cook Islands Flag","value":"🇨🇰"},{"name":"Chile Flag","value":"🇨🇱"},{"name":"Cameroon Flag","value":"🇨🇲"},{"name":"Colombia Flag","value":"🇨🇴"},{"name":"Costa Rica Flag","value":"🇨🇷"},{"name":"Cuba Flag","value":"🇨🇺"},{"name":"Cape Verde Flag","value":"🇨🇻"},{"name":"Curaçao Flag","value":"🇨🇼"},{"name":"Christmas Island Flag","value":"🇨🇽"},{"name":"Cyprus Flag","value":"🇨🇾"},{"name":"Czechia Flag","value":"🇨🇿"},{"name":"Diego Garcia Flag","value":"🇩🇬"},{"name":"Djibouti Flag","value":"🇩🇯"},{"name":"Denmark Flag","value":"🇩🇰"},{"name":"Dominica Flag","value":"🇩🇲"},{"name":"Dominican Republic Flag","value":"🇩🇴"},{"name":"Algeria Flag","value":"🇩🇿"},{"name":"Ceuta & Melilla Flag","value":"🇪🇦"},{"name":"Ecuador Flag","value":"🇪🇨"},{"name":"Estonia Flag","value":"🇪🇪"},{"name":"Egypt Flag","value":"🇪🇬"},{"name":"Western Sahara Flag","value":"🇪🇭"},{"name":"Eritrea Flag","value":"🇪🇷"},{"name":"Ethiopia Flag","value":"🇪🇹"},{"name":"European Union Flag","value":"🇪🇺"},{"name":"Finland Flag","value":"🇫🇮"},{"name":"Fiji Flag","value":"🇫🇯"},{"name":"Falkland Islands Flag","value":"🇫🇰"},{"name":"Micronesia Flag","value":"🇫🇲"},{"name":"Faroe Islands Flag","value":"🇫🇴"},{"name":"Gabon Flag","value":"🇬🇦"},{"name":"Grenada Flag","value":"🇬🇩"},{"name":"Georgia Flag","value":"🇬🇪"},{"name":"French Guiana Flag","value":"🇬🇫"},{"name":"Guernsey Flag","value":"🇬🇬"},{"name":"Ghana Flag","value":"🇬🇭"},{"name":"Gibraltar Flag","value":"🇬🇮"},{"name":"Greenland Flag","value":"🇬🇱"},{"name":"Gambia Flag","value":"🇬🇲"},{"name":"Guinea Flag","value":"🇬🇳"},{"name":"Guadeloupe Flag","value":"🇬🇵"},{"name":"Equatorial Guinea Flag","value":"🇬🇶"},{"name":"Greece Flag","value":"🇬🇷"},{"name":"South Georgia & South Sandwich Islands Flag","value":"🇬🇸"},{"name":"Guatemala Flag","value":"🇬🇹"},{"name":"Guam Flag","value":"🇬🇺"},{"name":"Guinea-Bissau Flag","value":"🇬🇼"},{"name":"Guyana Flag","value":"🇬🇾"},{"name":"Hong Kong Sar China Flag","value":"🇭🇰"},{"name":"Heard & Mcdonald Islands Flag","value":"🇭🇲"},{"name":"Honduras Flag","value":"🇭🇳"},{"name":"Croatia Flag","value":"🇭🇷"},{"name":"Haiti Flag","value":"🇭🇹"},{"name":"Hungary Flag","value":"🇭🇺"},{"name":"Canary Islands Flag","value":"🇮🇨"},{"name":"Indonesia Flag","value":"🇮🇩"},{"name":"Ireland Flag","value":"🇮🇪"},{"name":"Israel Flag","value":"🇮🇱"},{"name":"Isle of Man Flag","value":"🇮🇲"},{"name":"India Flag","value":"🇮🇳"},{"name":"British Indian Ocean Territory Flag","value":"🇮🇴"},{"name":"Iraq Flag","value":"🇮🇶"},{"name":"Iran Flag","value":"🇮🇷"},{"name":"Iceland Flag","value":"🇮🇸"},{"name":"Jersey Flag","value":"🇯🇪"},{"name":"Jamaica Flag","value":"🇯🇲"},{"name":"Jordan Flag","value":"🇯🇴"},{"name":"Kenya Flag","value":"🇰🇪"},{"name":"Kyrgyzstan Flag","value":"🇰🇬"},{"name":"Cambodia Flag","value":"🇰🇭"},{"name":"Kiribati Flag","value":"🇰🇮"},{"name":"Comoros Flag","value":"🇰🇲"},{"name":"St. Kitts & Nevis Flag","value":"🇰🇳"},{"name":"North Korea Flag","value":"🇰🇵"},{"name":"Kuwait Flag","value":"🇰🇼"},{"name":"Cayman Islands Flag","value":"🇰🇾"},{"name":"Kazakhstan Flag","value":"🇰🇿"},{"name":"Laos Flag","value":"🇱🇦"},{"name":"Lebanon Flag","value":"🇱🇧"},{"name":"St. Lucia Flag","value":"🇱🇨"},{"name":"Liechtenstein Flag","value":"🇱🇮"},{"name":"Sri Lanka Flag","value":"🇱🇰"},{"name":"Liberia Flag","value":"🇱🇷"},{"name":"Lesotho Flag","value":"🇱🇸"},{"name":"Lithuania Flag","value":"🇱🇹"},{"name":"Luxembourg Flag","value":"🇱🇺"},{"name":"Latvia Flag","value":"🇱🇻"},{"name":"Libya Flag","value":"🇱🇾"},{"name":"Morocco Flag","value":"🇲🇦"},{"name":"Monaco Flag","value":"🇲🇨"},{"name":"Moldova Flag","value":"🇲🇩"},{"name":"Montenegro Flag","value":"🇲🇪"},{"name":"St. Martin Flag","value":"🇲🇫"},{"name":"Madagascar Flag","value":"🇲🇬"},{"name":"Marshall Islands Flag","value":"🇲🇭"},{"name":"Macedonia Flag","value":"🇲🇰"},{"name":"Mali Flag","value":"🇲🇱"},{"name":"Myanmar (burma) Flag","value":"🇲🇲"},{"name":"Mongolia Flag","value":"🇲🇳"},{"name":"Macau Sar China Flag","value":"🇲🇴"},{"name":"Northern Mariana Islands Flag","value":"🇲🇵"},{"name":"Martinique Flag","value":"🇲🇶"},{"name":"Mauritania Flag","value":"🇲🇷"},{"name":"Montserrat Flag","value":"🇲🇸"},{"name":"Malta Flag","value":"🇲🇹"},{"name":"Mauritius Flag","value":"🇲🇺"},{"name":"Maldives Flag","value":"🇲🇻"},{"name":"Malawi Flag","value":"🇲🇼"},{"name":"Mexico Flag","value":"🇲🇽"},{"name":"Malaysia Flag","value":"🇲🇾"},{"name":"Mozambique Flag","value":"🇲🇿"},{"name":"Namibia Flag","value":"🇳🇦"},{"name":"New Caledonia Flag","value":"🇳🇨"},{"name":"Niger Flag","value":"🇳🇪"},{"name":"Norfolk Island Flag","value":"🇳🇫"},{"name":"Nigeria Flag","value":"🇳🇬"},{"name":"Nicaragua Flag","value":"🇳🇮"},{"name":"Netherlands Flag","value":"🇳🇱"},{"name":"Norway Flag","value":"🇳🇴"},{"name":"Nepal Flag","value":"🇳🇵"},{"name":"Nauru Flag","value":"🇳🇷"},{"name":"Niue Flag","value":"🇳🇺"},{"name":"New Zealand Flag","value":"🇳🇿"},{"name":"Oman Flag","value":"🇴🇲"},{"name":"Panama Flag","value":"🇵🇦"},{"name":"Peru Flag","value":"🇵🇪"},{"name":"French Polynesia Flag","value":"🇵🇫"},{"name":"Papua New Guinea Flag","value":"🇵🇬"},{"name":"Philippines Flag","value":"🇵🇭"},{"name":"Pakistan Flag","value":"🇵🇰"},{"name":"Poland Flag","value":"🇵🇱"},{"name":"St. Pierre & Miquelon Flag","value":"🇵🇲"},{"name":"Pitcairn Islands Flag","value":"🇵🇳"},{"name":"Puerto Rico Flag","value":"🇵🇷"},{"name":"Palestinian Territories Flag","value":"🇵🇸"},{"name":"Portugal Flag","value":"🇵🇹"},{"name":"Palau Flag","value":"🇵🇼"},{"name":"Paraguay Flag","value":"🇵🇾"},{"name":"Qatar Flag","value":"🇶🇦"},{"name":"Réunion Flag","value":"🇷🇪"},{"name":"Romania Flag","value":"🇷🇴"},{"name":"Serbia Flag","value":"🇷🇸"},{"name":"Rwanda Flag","value":"🇷🇼"},{"name":"Saudi Arabia Flag","value":"🇸🇦"},{"name":"Solomon Islands Flag","value":"🇸🇧"},{"name":"Seychelles Flag","value":"🇸🇨"},{"name":"Sudan Flag","value":"🇸🇩"},{"name":"Sweden Flag","value":"🇸🇪"},{"name":"Singapore Flag","value":"🇸🇬"},{"name":"St. Helena Flag","value":"🇸🇭"},{"name":"Slovenia Flag","value":"🇸🇮"},{"name":"Svalbard & Jan Mayen Flag","value":"🇸🇯"},{"name":"Slovakia Flag","value":"🇸🇰"},{"name":"Sierra Leone Flag","value":"🇸🇱"},{"name":"San Marino Flag","value":"🇸🇲"},{"name":"Senegal Flag","value":"🇸🇳"},{"name":"Somalia Flag","value":"🇸🇴"},{"name":"Suriname Flag","value":"🇸🇷"},{"name":"South Sudan Flag","value":"🇸🇸"},{"name":"São Tomé & Príncipe Flag","value":"🇸🇹"},{"name":"El Salvador Flag","value":"🇸🇻"},{"name":"Sint Maarten Flag","value":"🇸🇽"},{"name":"Syria Flag","value":"🇸🇾"},{"name":"Swaziland Flag","value":"🇸🇿"},{"name":"Tristan Da Cunha Flag","value":"🇹🇦"},{"name":"Turks & Caicos Islands Flag","value":"🇹🇨"},{"name":"Chad Flag","value":"🇹🇩"},{"name":"French Southern Territories Flag","value":"🇹🇫"},{"name":"Togo Flag","value":"🇹🇬"},{"name":"Thailand Flag","value":"🇹🇭"},{"name":"Tajikistan Flag","value":"🇹🇯"},{"name":"Tokelau Flag","value":"🇹🇰"},{"name":"Timor-Leste Flag","value":"🇹🇱"},{"name":"Turkmenistan Flag","value":"🇹🇲"},{"name":"Tunisia Flag","value":"🇹🇳"},{"name":"Tonga Flag","value":"🇹🇴"},{"name":"Turkey Flag","value":"🇹🇷"},{"name":"Trinidad & Tobago Flag","value":"🇹🇹"},{"name":"Tuvalu Flag","value":"🇹🇻"},{"name":"Taiwan Flag","value":"🇹🇼"},{"name":"Tanzania Flag","value":"🇹🇿"},{"name":"Ukraine Flag","value":"🇺🇦"},{"name":"Uganda Flag","value":"🇺🇬"},{"name":"U.s. Outlying Islands Flag","value":"🇺🇲"},{"name":"Uruguay Flag","value":"🇺🇾"},{"name":"Uzbekistan Flag","value":"🇺🇿"},{"name":"Vatican City Flag","value":"🇻🇦"},{"name":"St. Vincent & Grenadines Flag","value":"🇻🇨"},{"name":"Venezuela Flag","value":"🇻🇪"},{"name":"British Virgin Islands Flag","value":"🇻🇬"},{"name":"U.s. Virgin Islands Flag","value":"🇻🇮"},{"name":"Vietnam Flag","value":"🇻🇳"},{"name":"Vanuatu Flag","value":"🇻🇺"},{"name":"Wallis & Futuna Flag","value":"🇼🇫"},{"name":"Samoa Flag","value":"🇼🇸"},{"name":"Kosovo Flag","value":"🇽🇰"},{"name":"Yemen Flag","value":"🇾🇪"},{"name":"Mayotte Flag","value":"🇾🇹"},{"name":"South Africa Flag","value":"🇿🇦"},{"name":"Zambia Flag","value":"🇿🇲"},{"name":"Zimbabwe Flag","value":"🇿🇼"},{"name":"France Flag","value":"🇫🇷"},{"name":"United Kingdom Flag","value":"🇬🇧"},{"name":"Italy Flag","value":"🇮🇹"},{"name":"Japan Flag","value":"🇯🇵"},{"name":"South Korea Flag","value":"🇰🇷"},{"name":"Rainbow Flag","value":"🏳️‍🌈"},{"name":"Russia Flag","value":"🇷🇺"},{"name":"Triangular Flag on Post","value":"🚩"},{"name":"United States Flag","value":"🇺🇸"}]}]}')}},a={};function o(e){var n=a[e];if(void 0!==n)return n.exports;var i=a[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=t,o.amdO={},e=[],o.O=(t,a,n,i)=>{if(!a){var r=1/0;for(d=0;d<e.length;d++){for(var[a,n,i]=e[d],s=!0,l=0;l<a.length;l++)(!1&i||r>=i)&&Object.keys(o.O).every((e=>o.O[e](a[l])))?a.splice(l--,1):(s=!1,i<r&&(r=i));if(s){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[a,n,i]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),o.j=179,(()=>{var e={179:0};o.O.j=t=>0===e[t];var t=(t,a)=>{var n,i,[r,s,l]=a,c=0;if(r.some((t=>0!==e[t]))){for(n in s)o.o(s,n)&&(o.m[n]=s[n]);if(l)var d=l(o)}for(t&&t(a);c<r.length;c++)i=r[c],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(d)},a=self.webpackChunkyotta_v2=self.webpackChunkyotta_v2||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var n=o.O(void 0,[216],(()=>o(29871)));n=o.O(n)})();